(function(e){function t(t){for(var o,a,s=t[0],c=t[1],l=t[2],d=0,h=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&h.push(i[a][0]),i[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);u&&u(t);while(h.length)h.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(o=!1)}o&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},i={app:0},r=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0042":function(e,t,n){},"004b":function(e,t,n){},"01e6":function(e,t,n){},"054e":function(e,t,n){"use strict";n("0042")},"092b":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAYAAACI7Fo9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAefSURBVHgB7dzpcdNqG8dh5Z3zHaiApQGgAggFsDXA0gBLASwNsDTA0gEUQIAG2AoIUAHQQPzq9hyfCbbkWCYE4/91zWjOnGBHCuQnPXoka2PUaoB1NvpfA6w9oUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUOAfxp6ffnypdnc3Gz2082bN5sbN240cJCEvoeKfT99//69gYNm6A4BhA4BDN1ZaaPRqDl37tzMKdSlS5eaBw8eNCxG6Eu4cuVKc/Xq1WYZx44daximIp8O3VzHMEJfwvHjx5uzZ8828Ldwjg4BhA4BDN3/MpNz1WXO9Xef5x7UXMFknYcPHx4v/BlCXwH379+fmWyqOYCa9Ctv3rwZv+bDhw//TUJVNN++fZv7feu1jx8/Hr9/93snTp06NV7qTr3676KePXvWvH379qevXbhwobl48WLv9pbaudTPdffu3d4dTb2ntnn655j2+vXr5tq1azNf370d7DKi1+fPn0f1VzS93Lt3b7Sf2l/+mXW0s/rjP6t1dW3DvH+62u52J9H7vq5lc3Nz/L697OzsjLet7+9k3vZOlo2NjdGjR486v//W1tag7f7d/zZrYsc5+gqro2L7izvkLeOj6enTp5vnz58Pel8dIetqQq1zWYtub/uL19y6dWvmyM3vY+i+hBpe1vB1qMnQdRE1lB+6jhcvXoxvJPkVk1BreD1EOxoYtHOp2GvHUKcnzt0PwIhefUP3ZZfJcHxa19B9kWV6W9sdydzXt+fh43XV0sY1d2jdHuE7t7Vv6D691LZM1tUMGGobuv8WO0KfY1VCr/dVeO3k2/j19d/pEPvOySvo9uj833t3e/r0ae/OoR3Gd27rXqG3pw2j9+/f//Se7e3t3vXU3MA8tb6u97YTcSMWJvR5ViH0inEvFX3fUXU6uq6fsSukOqq3pw4zr58Xeu0cunYopWLves+RI0fmbp/Q94XJuFVW58mL3FPfdy5f59t7XTareYOaiJvW/nIMOududwzNkydPes+3++Yn6tLZfn/mn1km45ZQv7TL3HAy5Fp1BVNPo1nEx48fZ762+zr8Xo4ePTpeV3vJ66ev1wx+hbjoZNm8icbaEdQ17vqeHDyhL6GOskNnpYeqncIigVWIdRVg2pCbRirC8+fPz4Re6mi7yA5qkdccOnSo4c8wdF9Ri44Y+j6uefLkyWY/1tc1WuiyyE6pPR9v+DOEzthBXMt2RP9zhL6mvn79Ouj1fRNidf7O30/of7kacncdjbvO2+eZ/pDKhLvW1oPQ10DXRFhdcqvbUhdRl9K67juvnciQKwWsLqGvga4Z9pqku379+jjieUb/3nPeNXRf5cdl7fVz8TOhr4G6Xt41o13XrOsJqnVknw6j/r8+z3779u3OT6zVJbc7d+40q6DrisDLly/FPoDr6GugzqPr0cddD2Ko2E+cODG+9l+X3CYz33XZrO5867o8V5HPezjEQevajtpJXb58ebwzqtOLyZNif/z44cETHYS+JirkT58+NQ8fPuz88yEfea3Ps//uG4IWVTudvh1OfSy3lt3qtl+hzzJ0XyN1VK8HOlQcy6j3VeSvXr1qVkndtcevEfqaqdhrGXoXWkVez47b2tpauUtqNTRf9L5/ugl9DxXA9HIQ6/iV9VQU7969Gw/n6/FQXd9v8rXaIdTrt7e3x8P+RSNfZluX/TnrNbVtdTrR9fPs/l5us+22MTJ1ufbq5pmaqNp933rd8Tbk0VarpCYY62fZ/UTcWs6cObMyE4grZiR0WH8jQ3cIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQI8E+7jBpgnY3+D4mMAGzm69l9AAAAAElFTkSuQmCC"},"0a36":function(e,t,n){e.exports=n.p+"img/hideCanvas.b8094833.svg"},"0bc0":function(e,t,n){"use strict";n("4a1a")},1:function(e,t){},10:function(e,t){},11:function(e,t){},"11f1":function(e,t,n){"use strict";n("d7f2")},12:function(e,t){},13:function(e,t){},14:function(e,t){},1550:function(e,t,n){},"17ca":function(e,t,n){e.exports=n.p+"img/Canvas-Head.8a592147.svg"},1890:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAYAAACI7Fo9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAd/SURBVHgB7d3pcRPpGobhNjX/wRGAE2BLAEwAQBEAWwIsCbAkACSAgQBYEjCQAEsCLAlgSMB99LqOpjx2y1LLI2uk57qqeqoQbrWmZu5evv5aXmkHGmCZtccaYOkJHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQL81TAza2trzay9efOmOXv2bAMHEfoM/fjxo5m1379/NzCOU3cIIHQIIHQI4Bp9ht6/fz/2Z758+dLcu3dv3+t37txprl69OnZ9A3FMQugzdPHixWZa586dO9T6sJtTdwggdAjg1H2J1T324X32EydO7CxHvd1Tp041zJ/Ql8yHDx+at2/fNu/evds3YadCr8G7mzdvNhcuXJg4wrZtm9u3b+97/cmTJ3/vPGq7L1++3Nn23kk8tc0aWLxx44bw56VlrgYj8239Z9i7vHjxovf7DAbvOt9r1HL37t12a2tr7Htvb2/vW3dlZaX9/v17++3bt17bffjwYcuR23aNvgQePXrUrK+v7xxV+3j69Glz/vz5qafqDkJvLl261Gu7g9APtU2mI/QFV/fgK55pDWPtG97gKNE8fvx4qmA/f/7cXLt2zTz9IyT0BVZH8joqj1LXz3UvvpaDJtZU7HVG0De8riN5bWe4zYMG/yr2Z8+eNRyRlrma9hq9ro8HIXWuOxjw2nnfrnUGA2K9r5+7rtF3L/U5Hjx40Hm9v7GxsfN5utar6/xJxgg4tG2hz9m0oY8KdnBEHRtPxde17urqaue6B4W+trbWDo7OB26vBuxGxW5w7kgYjFtUHz9+3Pda3bqqL6IYd7+8bq91XdfXqXvdIpvU4IjcDI7kY+fb1xdwbG5udn6uPttjekJfQHVt3DUIVvFOep+6HprZG95gz9+5AxmlrsPr3vgk6nPVDmav+vcwKDd7Ql9AX79+7Xy9JsFMqiLvejqunqabRB3Nr1y50kyqfv7y5cudfzfpNpme0BdQ1xGwwu0766zrlLvP7bIzZ840fYz6fD9//myYLaEviaOax34Yi/AZl5XQF1BXMNNMXOlap0+MfY/Eoz7jyZMnG2ZL6Ato1Clw3ymw9QDKXpN+Y00N3PW9th410OdIP3tCX0CjBt1qptyk6jZc1xG2z1dT1a2xSc8kasfQNRNu+EQdsyX0BTSc2rpXHdEPmhI7VFNe79+/v+/1Ghm/fv16M6mtra3m1q1bOxEfpP6+dkJdO4VJvhePf0HLXE07M27Ues3/Z5vVbLZadqs/b25ujpyltr6+3rmtcVNgazZezX7r2t6vX7/awT37kVNgu6bq8q/bXql/NsxNHYXrgZK9BqGPnYxST52N+qbZuo6v+9zDW2B//vzZ+TKKUdfxdTQfxNp5/V//ixw7Nv7krybE1PaOHz++8+e6hn/16lXn7cDaXv388+fPG2audUSfs8N88UQ9pFJzzZsJv/Rh1FJH1oPmnI87ok+z1Oeuz8+RMNd9kdXRt+aQH+aXOQ7nq9fSV11f1/p9ra6uNq9fv/a1UkdI6AtuGHudBveNroKr0fdpIq9tVegV7KQ7mlpn+ICLkfajJfT/gApg79JHxb6xsfGP4LveZ/ha/XKIegCmrsn7zFfvUrHXdms84aBt1k6ldiifPn0S+RwYjFtCNfhVA2H18MvugbCagVa35fqeMrcdg3EVb+1cdg8YDre7e2JMBX769Gm/dWa+WqEz1qSh85/VOnWHAEKHAEKHAEKHAEKHAEKHAEKHAH5tMhPpmq03zTx35kPojFVB1zTXvUxlXRxmxsHyMzMOEggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAvw1WNoGWGbt/wCMo+OPrYBQagAAAABJRU5ErkJggg=="},"1b8c":function(e,t,n){},"1e98":function(e,t,n){},2:function(e,t){},2464:function(e,t,n){},"24de":function(e,t,n){},"2a41":function(e,t,n){},"2e31":function(e,t,n){"use strict";n("3f25")},"2e59":function(e,t,n){"use strict";n("e856")},3:function(e,t){},"30e3":function(e,t,n){"use strict";n("3628")},"31a7":function(e,t,n){e.exports=n.p+"img/Canvas-Plane.3b032ddd.svg"},"32c9":function(e,t,n){},"32d3":function(e,t,n){},"34a1":function(e,t,n){"use strict";n("efc2")},"34b1":function(e,t,n){e.exports=n.p+"img/undo.77205cb3.svg"},"35e6":function(e,t,n){e.exports=n.p+"img/Canvas-Sphere.bbd345df.svg"},3628:function(e,t,n){},"37c2":function(e,t,n){"use strict";n("2a41")},"3c72":function(e,t,n){"use strict";n("955b")},"3d19":function(e,t,n){"use strict";n("644f")},"3dfd":function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return nb})),n.d(t,"renderer",(function(){return ob})),n.d(t,"camera",(function(){return ib})),n.d(t,"scene",(function(){return rb})),n.d(t,"drawingScene",(function(){return _f})),n.d(t,"cameraControls",(function(){return Zf})),n.d(t,"vm",(function(){return Kf})),n.d(t,"drawingprop",(function(){return $f})),n.d(t,"composer",(function(){return Jf})),n.d(t,"renderScene",(function(){return ab}));n("cb29");var o=n("7a23");function i(e,t,n,i,r,a){var s=Object(o["s"])("video-export-preview"),c=Object(o["s"])("modal"),l=Object(o["s"])("viewport-cube"),u=Object(o["s"])("tool-selector"),d=Object(o["s"])("tube-tool-selector"),h=Object(o["s"])("strip-tool-selector"),p=Object(o["s"])("two-d-shapes"),f=Object(o["s"])("line-settings"),b=Object(o["s"])("tube-settings"),g=Object(o["s"])("strip-settings"),m=Object(o["s"])("undo-redo"),v=Object(o["s"])("Input"),y=Object(o["s"])("Canvas"),w=Object(o["s"])("ShapeSelector"),O=Object(o["s"])("Share"),j=Object(o["s"])("scene-settings"),A=Object(o["s"])("color-palette"),x=Object(o["s"])("symmetry-settings"),k=Object(o["s"])("layers"),M=Object(o["s"])("object-manager"),I=Object(o["s"])("transform-toolbar"),C=Object(o["s"])("snap-settings"),S=Object(o["s"])("drawing-modes"),T=Object(o["s"])("code-editor");return Object(o["m"])(),Object(o["e"])(o["a"],null,[Object(o["i"])(s,{show:r.previewing,onStopPreviewing:a.setPreview},null,8,["show","onStopPreviewing"]),Object(o["i"])(c,{modalProp:r.modalProp,onModalSet:a.setModal,onSetPreset:a.applyPreset},null,8,["modalProp","onModalSet","onSetPreset"]),Object(o["A"])(Object(o["i"])(l,{quaternion:r.quaternion,cameraResetDisabled:r.cameraResetDisabled,reopenTrigger:r.windowTriggers.view,"is-open":r.windowStates.view,onClose:t[0]||(t[0]=function(e){return a.onWindowClose("view")})},null,8,["quaternion","cameraResetDisabled","reopenTrigger","is-open"]),[[o["y"],r.uiVisible&&r.windowStates.view]]),Object(o["A"])(Object(o["i"])(u,{ref:"toolSelector",onSelectedTool:a.setSelectedTool,onSetPreset:a.applyPreset,onToggleProperties:a.toggleProperties,onToggleScene:a.toggleScene,selectedTool:r.tool,reopenTrigger:r.windowTriggers.tools,"is-open":r.windowStates.tools,onClose:t[1]||(t[1]=function(e){return a.onWindowClose("tools")}),initialX:r.windowPositions.tools?r.windowPositions.tools.x:void 0,initialY:r.windowPositions.tools?r.windowPositions.tools.y:void 0,onToggle2dShapes:t[2]||(t[2]=function(e){return a.toggleWindow("twoDShapes")}),onToggleSnap:t[3]||(t[3]=function(e){return a.toggleWindow("snap")}),onToggleDrawingModes:t[4]||(t[4]=function(e){return a.toggleWindow("drawingModes")}),onToggleCodeEditor:t[5]||(t[5]=function(e){return a.toggleWindow("codeEditor")}),onToggleAr:a.toggleAR,isArActive:r.arActive},null,8,["onSelectedTool","onSetPreset","onToggleProperties","onToggleScene","selectedTool","reopenTrigger","is-open","initialX","initialY","onToggleAr","isArActive"]),[[o["y"],r.uiVisible&&r.windowStates.tools]]),Object(o["A"])(Object(o["i"])(d,{ref:"tubeToolSelector",onSelectedTool:a.setSelectedTool,onSetPreset:a.applyPreset,onToggleProperties:t[6]||(t[6]=function(e){return a.toggleWindow("tubeProperties")}),selectedTool:r.tool,reopenTrigger:r.windowTriggers.tubeTools,"is-open":r.windowStates.tubeTools,onClose:t[7]||(t[7]=function(e){return a.onWindowClose("tubeTools")}),isTube:r.isTube,initialX:r.windowPositions.tools?r.windowPositions.tools.x:void 0,initialY:(r.windowPositions.tools?r.windowPositions.tools.y:100)+400},null,8,["onSelectedTool","onSetPreset","selectedTool","reopenTrigger","is-open","isTube","initialX","initialY"]),[[o["y"],r.uiVisible&&r.windowStates.tubeTools]]),Object(o["A"])(Object(o["i"])(h,{ref:"stripToolSelector",onSelectedTool:a.setSelectedTool,onSetPreset:a.applyPreset,onToggleProperties:t[8]||(t[8]=function(e){return a.toggleWindow("stripProperties")}),selectedTool:r.tool,reopenTrigger:r.windowTriggers.stripTools,"is-open":r.windowStates.stripTools,onClose:t[9]||(t[9]=function(e){return a.onWindowClose("stripTools")}),isStrip:r.isStrip,initialX:r.windowPositions.tools?r.windowPositions.tools.x:void 0,initialY:(r.windowPositions.tools?r.windowPositions.tools.y:100)+600},null,8,["onSelectedTool","onSetPreset","selectedTool","reopenTrigger","is-open","isStrip","initialX","initialY"]),[[o["y"],r.uiVisible&&r.windowStates.stripTools]]),Object(o["A"])(Object(o["i"])(p,{visible:!0,reopenTrigger:r.windowTriggers.twoDShapes,"is-open":r.windowStates.twoDShapes,onClose:t[10]||(t[10]=function(e){return a.onWindowClose("twoDShapes")}),onAddShape:a.onAddCanvasShape},null,8,["reopenTrigger","is-open","onAddShape"]),[[o["y"],r.uiVisible&&r.windowStates.twoDShapes]]),Object(o["A"])(Object(o["i"])(f,{ref:"lineSettings",onStroke:a.setStroke,onFill:a.setFill,selectedTool:r.tool,forceVisible:r.propertiesVisible,reopenTrigger:r.windowTriggers.properties,"is-open":r.windowStates.properties,onClose:t[11]||(t[11]=function(e){return a.onWindowClose("properties")})},null,8,["onStroke","onFill","selectedTool","forceVisible","reopenTrigger","is-open"]),[[o["y"],r.uiVisible&&r.windowStates.properties]]),Object(o["A"])(Object(o["i"])(b,{ref:"tubeSettings",onStroke:a.setStroke,selectedTool:r.tool,forceVisible:r.propertiesVisible,reopenTrigger:r.windowTriggers.tubeProperties,"is-open":r.windowStates.tubeProperties,isTube:r.isTube,onClose:t[12]||(t[12]=function(e){return a.onWindowClose("tubeProperties")})},null,8,["onStroke","selectedTool","forceVisible","reopenTrigger","is-open","isTube"]),[[o["y"],r.uiVisible&&r.windowStates.tubeProperties]]),Object(o["A"])(Object(o["i"])(g,{ref:"stripSettings",onStroke:a.setStroke,selectedTool:r.tool,forceVisible:r.propertiesVisible,reopenTrigger:r.windowTriggers.stripProperties,"is-open":r.windowStates.stripProperties,isStrip:r.isStrip,onClose:t[13]||(t[13]=function(e){return a.onWindowClose("stripProperties")})},null,8,["onStroke","selectedTool","forceVisible","reopenTrigger","is-open","isStrip"]),[[o["y"],r.uiVisible&&r.windowStates.stripProperties]]),Object(o["A"])(Object(o["i"])(m,{onSelectedTool:a.setSelectedTool,ref:"undoRedo",reopenTrigger:r.windowTriggers.history,"is-open":r.windowStates.history,onClose:t[14]||(t[14]=function(e){return a.onWindowClose("history")})},null,8,["onSelectedTool","reopenTrigger","is-open"]),[[o["y"],r.uiVisible&&r.windowStates.history]]),Object(o["i"])(v,{onMouseCoordinates:a.setMouseCoordinates,selectedTool:r.tool,mirror:r.mirror,stroke:r.stroke,fill:r.fill,radial:r.radial,sectors:r.sectors,"radial-axis":r.radialAxis,toolEnabled:r.toolEnabled,localSymmetry:r.localSymmetry,"snap-config":r.snapConfig,"drawing-mode":r.drawingMode},null,8,["onMouseCoordinates","selectedTool","mirror","stroke","fill","radial","sectors","radial-axis","toolEnabled","localSymmetry","snap-config","drawing-mode"]),Object(o["i"])(y,{ref:"raycastCanvas",onSelectedCanvasShape:a.setSelectedCanvasShape,onSetToolEnabled:a.setToolEnabled,selectedShape:r.canvasShape,selectedTool:r.tool,mouse:r.mouse,reopenTrigger:r.windowTriggers.canvas,"is-open":r.windowStates.canvas,onClose:t[15]||(t[15]=function(e){return a.onWindowClose("canvas")}),initialX:r.windowPositions.canvas?r.windowPositions.canvas.x:void 0,initialY:r.windowPositions.canvas?r.windowPositions.canvas.y:void 0},null,8,["onSelectedCanvasShape","onSetToolEnabled","selectedShape","selectedTool","mouse","reopenTrigger","is-open","initialX","initialY"]),Object(o["A"])(Object(o["i"])(w,{onSelectedCanvasShape:a.setSelectedCanvasShape,onLoadCustomModel:a.loadCustomModelInCanvas,onSetMaterial:a.setCanvasMaterial,selectedShape:r.canvasShape,selectedTool:r.tool,reopenTrigger:r.windowTriggers.shapes,"is-open":r.windowStates.shapes,onClose:t[16]||(t[16]=function(e){return a.onWindowClose("shapes")})},null,8,["onSelectedCanvasShape","onLoadCustomModel","onSetMaterial","selectedShape","selectedTool","reopenTrigger","is-open"]),[[o["y"],r.uiVisible&&r.windowStates.shapes]]),Object(o["A"])(Object(o["i"])(O,{onModalSet:a.setModal,onPreview:a.setPreview,onToggleWindow:a.toggleWindow,ref:"share",windowStates:r.windowStates},null,8,["onModalSet","onPreview","onToggleWindow","windowStates"]),[[o["y"],r.uiVisible]]),Object(o["A"])(Object(o["i"])(j,{visible:!0,reopenTrigger:r.windowTriggers.scene,"is-open":r.windowStates.scene,onClose:t[17]||(t[17]=function(e){return a.onWindowClose("scene")}),onBloomChange:a.onBloomChange},null,8,["reopenTrigger","is-open","onBloomChange"]),[[o["y"],r.uiVisible&&r.windowStates.scene]]),Object(o["A"])(Object(o["i"])(A,{visible:!0,reopenTrigger:r.windowTriggers.colors,onSetColor:a.applyColor,"is-open":r.windowStates.colors,onClose:t[18]||(t[18]=function(e){return a.onWindowClose("colors")})},null,8,["reopenTrigger","onSetColor","is-open"]),[[o["y"],r.uiVisible&&r.windowStates.colors]]),Object(o["A"])(Object(o["i"])(x,{visible:!0,reopenTrigger:r.windowTriggers.symmetry,"is-open":r.windowStates.symmetry,onClose:t[19]||(t[19]=function(e){return a.onWindowClose("symmetry")}),mirror:r.mirror,onSetMirror:t[20]||(t[20]=function(e){return r.mirror=e}),radial:r.radial,onSetRadial:t[21]||(t[21]=function(e){return r.radial=e}),sectors:r.sectors,onSetSectors:t[22]||(t[22]=function(e){return r.sectors=e}),"radial-axis":r.radialAxis,onSetRadialAxis:t[23]||(t[23]=function(e){return r.radialAxis=e}),"local-symmetry":r.localSymmetry,onSetLocalSymmetry:t[24]||(t[24]=function(e){return r.localSymmetry=e})},null,8,["reopenTrigger","is-open","mirror","radial","sectors","radial-axis","local-symmetry"]),[[o["y"],r.uiVisible&&r.windowStates.symmetry]]),Object(o["A"])(Object(o["i"])(k,{visible:!0,reopenTrigger:r.windowTriggers.layers,"is-open":r.windowStates.layers,onClose:t[25]||(t[25]=function(e){return a.onWindowClose("layers")}),onLayerAdd:a.onLayerAdd,onLayerDelete:a.onLayerDelete,onLayerSelect:a.onLayerSelect,onLayerChange:a.onLayerChange,onLayerDuplicate:a.onLayerDuplicate},null,8,["reopenTrigger","is-open","onLayerAdd","onLayerDelete","onLayerSelect","onLayerChange","onLayerDuplicate"]),[[o["y"],r.uiVisible&&r.windowStates.layers]]),Object(o["A"])(Object(o["i"])(M,{visible:!0,reopenTrigger:r.windowTriggers.objectManager,"is-open":r.windowStates.objectManager,onClose:t[26]||(t[26]=function(e){return a.onWindowClose("objectManager")})},null,8,["reopenTrigger","is-open"]),[[o["y"],r.uiVisible&&r.windowStates.objectManager]]),Object(o["A"])(Object(o["i"])(I,{top:r.transformToolbar.top,left:r.transformToolbar.left,display:r.transformToolbar.display,selectedTool:r.tool,selectionPosition:r.transformToolbar.position},null,8,["top","left","display","selectedTool","selectionPosition"]),[[o["y"],r.uiVisible]]),Object(o["A"])(Object(o["i"])(C,{isOpen:r.windowStates.snap,reopenTrigger:r.windowTriggers.snap,onClose:t[27]||(t[27]=function(e){return a.onWindowClose("snap")}),onConfigChange:a.onSnapConfigChange},null,8,["isOpen","reopenTrigger","onConfigChange"]),[[o["y"],r.uiVisible&&r.windowStates.snap]]),Object(o["A"])(Object(o["i"])(S,{isOpen:r.windowStates.drawingModes,currentMode:r.drawingMode,onClose:t[28]||(t[28]=function(e){return a.onWindowClose("drawingModes")}),onModeChange:a.onDrawingModeChange},null,8,["isOpen","currentMode","onModeChange"]),[[o["y"],r.uiVisible&&r.windowStates.drawingModes]]),Object(o["A"])(Object(o["i"])(T,{isOpen:r.windowStates.codeEditor,reopenTrigger:r.windowTriggers.codeEditor,onClose:t[29]||(t[29]=function(e){return a.onWindowClose("codeEditor")})},null,8,["isOpen","reopenTrigger"]),[[o["y"],r.uiVisible&&r.windowStates.codeEditor]])],64)}n("b0c0"),n("159b");var r=n("5a89"),a=n("a550"),s=n("5530");n("99af");function c(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"xzy",a=arguments.length>5?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;n=n||new r["Color"]("white"),a=a||new r["Color"]("white"),e=e||10,t=t||100,o=o||8e3,s=s||0;var c=i.substr(0,2),l=new r["PlaneBufferGeometry"](2,2,1,1),u=new r["ShaderMaterial"]({side:r["DoubleSide"],uniforms:{uSize1:{value:e},uSize2:{value:t},uColor:{value:n},uColor2:{value:a},uDistance:{value:o},uDistanceNear:{value:s}},transparent:!0,vertexShader:"\n           \n           varying vec3 worldPosition;\n\t\t   \n           uniform float uDistance;\n           \n           void main() {\n           \n                vec3 pos = position.".concat(i," * uDistance;\n                pos.").concat(c," += cameraPosition.").concat(c,";\n                \n                worldPosition = pos;\n                \n                gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n           \n           }\n           "),fragmentShader:"\n           \n           varying vec3 worldPosition;\n           \n           uniform float uSize1;\n           uniform float uSize2;\n           uniform vec3 uColor;\n           uniform vec3 uColor2;\n           uniform float uDistance;\n           uniform float uDistanceNear;\n            \n            \n            \n            float getGrid(float size) {\n            \n                vec2 r = worldPosition.".concat(c," / size;\n                \n                \n                vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);\n                float line = min(grid.x, grid.y);\n                \n            \n                return 1.0 - min(line, 1.0);\n            }\n            \n           void main() {\n           \n                \n                  float dist = distance(cameraPosition.").concat(c,", worldPosition.").concat(c,");\n                  float d = clamp((uDistance - dist) / (uDistance - uDistanceNear), 0.0, 1.0);\n                \n                  float g1 = getGrid(uSize1);\n                  float g2 = getGrid(uSize2);\n                  \n                  // Mix colors: if g2 (large grid) is present, use uColor2, else use uColor\n                  vec3 color = mix(uColor, uColor2, g2); \n                  \n                  gl_FragColor = vec4(color.rgb, mix(g2, g1, g1) * pow(d, 3.0));\n                  gl_FragColor.a = mix(0.5 * gl_FragColor.a, gl_FragColor.a, g2);\n                \n                  if ( gl_FragColor.a <= 0.0 ) discard;\n                \n           \n           }\n           \n           "),extensions:{derivatives:!0}}),d=new r["Mesh"](l,u);return d.frustumCulled=!1,d}c.prototype=Object(s["a"])(Object(s["a"])(Object(s["a"])({},r["Mesh"].prototype),r["Object3D"].prototype),r["EventDispatcher"].prototype);var l=n("32d9"),u=n("93e9"),d=n("9ab2"),h={key:0},p=Object(o["g"])('<circle cx="26" cy="24" r="22" fill="url(#paint0_radial)"></circle><g filter="url(#filter0_d)"><circle cx="26" cy="24" r="22" stroke="white" stroke-opacity="0.38" stroke-width="0.5"></circle></g><defs><filter id="filter0_d" x="0.75" y="0.75" width="50.5" height="50.5" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset dy="2"></feOffset><feGaussianBlur stdDeviation="1.5"></feGaussianBlur><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.7 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"></feBlend></filter><radialGradient id="paint0_radial" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(26 24) rotate(90) scale(22)"><stop stop-color="white" stop-opacity="0"></stop><stop offset="1" stop-color="white" stop-opacity="0.42"></stop></radialGradient></defs>',3),f=[p];function b(e,t,n,i,r,a){return Object(o["m"])(),Object(o["e"])("div",{onTouchstart:t[0]||(t[0]=function(){return a.handleInput&&a.handleInput.apply(a,arguments)}),onTouchmove:t[1]||(t[1]=function(){return a.handleInput&&a.handleInput.apply(a,arguments)}),onTouchend:t[2]||(t[2]=function(){return a.handleInput&&a.handleInput.apply(a,arguments)}),onMousedown:t[3]||(t[3]=function(){return a.handleInput&&a.handleInput.apply(a,arguments)}),onMousemove:t[4]||(t[4]=function(){return a.handleInput&&a.handleInput.apply(a,arguments)}),onMouseup:t[5]||(t[5]=function(){return a.handleInput&&a.handleInput.apply(a,arguments)}),onContextmenu:t[6]||(t[6]=function(){return a.handleInput&&a.handleInput.apply(a,arguments)}),id:"threed"},[r.displayTouches?(Object(o["m"])(),Object(o["e"])("span",h,[(Object(o["m"])(!0),Object(o["e"])(o["a"],null,Object(o["q"])(r.touches,(function(e){return Object(o["m"])(),Object(o["e"])("svg",{key:e.clientX,class:"cursor",style:Object(o["l"])({top:e.clientY-26+"px",left:e.clientX-26+"px"}),width:"52",height:"52",viewBox:"0 0 52 52",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f,4)})),128))])):Object(o["d"])("",!0)],32)}var g=n("4478"),m=n("2909"),v=(n("a9e3"),n("d3b7"),n("3ca3"),n("ddb0"),n("d4ec")),y=n("bee2"),w=(n("cfc3"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("84c3"),n("ac1f"),n("1276"),n("2af1"),n("2b19"),n("4de4"),n("4c53"),n("a630"),n("38cf"),n("d81d"),n("31fa")),O=n("4ef0"),j=n("fac3"),A=n.n(j),x=n("b9e4"),k=n.n(x),M=n("c680"),I=n.n(M),C=function(e){return Object(o["o"])("data-v-67a0d07b"),e=e(),Object(o["n"])(),e},S={class:"canvas-controls"},T=["disabled","title"],E={key:0,src:A.a,alt:"Move"},D={key:1,src:k.a,alt:"Scale"},B={class:"tooltip"},P=["disabled","title"],Q=["src"],G={class:"tooltip"},H=["title"],R=["src"],Y={class:"tooltip"},L=["disabled","title"],z=["src"],W={class:"tooltip"},U=["disabled"],V=C((function(){return Object(o["f"])("img",{src:I.a,alt:"Reset"},null,-1)})),F=C((function(){return Object(o["f"])("span",{class:"tooltip"},"Reset Canvas",-1)})),X=[V,F];function N(e,t,i,r,a,s){var c=Object(o["s"])("draggable-window");return Object(o["m"])(),Object(o["c"])(c,{ref:"win",title:"Canvas",initialX:i.initialX||12,initialY:i.initialY||12,visible:"draw"==i.selectedTool,reopenTrigger:i.reopenTrigger,"is-open":i.isOpen,onClose:t[5]||(t[5]=function(t){return e.$emit("close")})},{default:Object(o["z"])((function(){return[Object(o["f"])("div",S,[Object(o["f"])("button",{class:"control-btn",onClick:t[0]||(t[0]=function(e){return s.toggleTransformMode()}),disabled:!a.visible,title:"combined"===a.mode?"Move Mode":"Scale Mode"},["combined"===a.mode||"Scale Mode"?(Object(o["m"])(),Object(o["e"])("img",E)):Object(o["d"])("",!0),"scale"===a.mode?(Object(o["m"])(),Object(o["e"])("img",D)):Object(o["d"])("",!0),Object(o["f"])("span",B,Object(o["t"])("combined"===a.mode?"Move Mode":"Scale Mode"),1)],8,T),Object(o["f"])("button",{class:Object(o["k"])(["control-btn",{active:!a.transformationEnabled}]),onClick:t[1]||(t[1]=function(e){return s.toggleControls()}),disabled:!a.visible,title:a.transformationEnabled?"Unlocked":"Locked"},[Object(o["f"])("img",{src:a.transformationEnabled?n("cf89"):n("8d0c"),alt:"Lock"},null,8,Q),Object(o["f"])("span",G,Object(o["t"])(a.transformationEnabled?"Unlocked":"Locked"),1)],10,P),Object(o["f"])("button",{class:Object(o["k"])(["control-btn",{active:!a.visible}]),onClick:t[2]||(t[2]=function(e){return s.toggleVisibility()}),title:a.visible?"Visible":"Hidden"},[Object(o["f"])("img",{src:a.visible?n("0a36"):n("ee3b"),alt:"Visibility"},null,8,R),Object(o["f"])("span",Y,Object(o["t"])(a.visible?"Visible":"Hidden"),1)],10,H),Object(o["f"])("button",{class:Object(o["k"])(["control-btn",{active:a.snap}]),onClick:t[3]||(t[3]=function(e){return s.toggleSnap()}),disabled:!a.visible,title:a.snap?"Snap On":"Snap Off"},[Object(o["f"])("img",{src:a.snap?n("521b"):n("d158"),alt:"Snap"},null,8,z),Object(o["f"])("span",W,Object(o["t"])(a.snap?"Snap On":"Snap Off"),1)],10,L),Object(o["f"])("button",{class:"control-btn",onClick:t[4]||(t[4]=function(e){return s.resetTransformation()}),disabled:a.transformationResetDisabled||!a.visible,title:"Reset Canvas"},X,8,U)])]})),_:1},8,["initialX","initialY","visible","reopenTrigger","is-open"])}var q=n("53ca"),_=(n("fb6a"),n("caad"),n("2532"),n("7db0"),n("a434"),n("257e")),Z=n("45eb"),K=n("7e84"),$=n("262e"),J=n("2caf"),ee=(n("841c"),new r["Raycaster"]),te=new r["Vector3"],ne=new r["Vector3"],oe=new r["Quaternion"],ie={X:new r["Vector3"](1,0,0),Y:new r["Vector3"](0,1,0),Z:new r["Vector3"](0,0,1)},re={type:"change"},ae={type:"mouseDown"},se={type:"mouseUp",mode:null},ce={type:"objectChange"},le=function(e){Object($["a"])(n,e);var t=Object(J["a"])(n);function n(e,o){var i;Object(v["a"])(this,n),i=t.call(this),void 0===o&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),o=document),i.visible=!1,i.domElement=o,i.domElement.style.touchAction="none";var a=new Te;i._gizmo=a,i.add(a);var s=new Ee;i._plane=s,i.add(s);var c=Object(_["a"])(i);function l(e,t){var n=t;Object.defineProperty(c,e,{get:function(){return void 0!==n?n:t},set:function(t){n!==t&&(n=t,s[e]=t,a[e]=t,c.dispatchEvent({type:e+"-changed",value:t}),c.dispatchEvent(re))}}),c[e]=t,s[e]=t,a[e]=t}l("camera",e),l("object",void 0),l("enabled",!0),l("axis",null),l("mode","translate"),l("translationSnap",null),l("rotationSnap",null),l("scaleSnap",null),l("space","world"),l("size",1),l("dragging",!1),l("showX",!0),l("showY",!0),l("showZ",!0);var u=new r["Vector3"],d=new r["Vector3"],h=new r["Quaternion"],p=new r["Quaternion"],f=new r["Vector3"],b=new r["Quaternion"],g=new r["Vector3"],m=new r["Vector3"],y=new r["Vector3"],w=0,O=new r["Vector3"];return l("worldPosition",u),l("worldPositionStart",d),l("worldQuaternion",h),l("worldQuaternionStart",p),l("cameraPosition",f),l("cameraQuaternion",b),l("pointStart",g),l("pointEnd",m),l("rotationAxis",y),l("rotationAngle",w),l("eye",O),i._offset=new r["Vector3"],i._startNorm=new r["Vector3"],i._endNorm=new r["Vector3"],i._cameraScale=new r["Vector3"],i._parentPosition=new r["Vector3"],i._parentQuaternion=new r["Quaternion"],i._parentQuaternionInv=new r["Quaternion"],i._parentScale=new r["Vector3"],i._worldScaleStart=new r["Vector3"],i._worldQuaternionInv=new r["Quaternion"],i._worldScale=new r["Vector3"],i._positionStart=new r["Vector3"],i._quaternionStart=new r["Quaternion"],i._scaleStart=new r["Vector3"],i._getPointer=ue.bind(Object(_["a"])(i)),i._onPointerDown=he.bind(Object(_["a"])(i)),i._onPointerHover=de.bind(Object(_["a"])(i)),i._onPointerMove=pe.bind(Object(_["a"])(i)),i._onPointerUp=fe.bind(Object(_["a"])(i)),i.domElement.addEventListener("pointerdown",i._onPointerDown),i.domElement.addEventListener("pointermove",i._onPointerHover),i.domElement.ownerDocument.addEventListener("pointerup",i._onPointerUp),i}return Object(y["a"])(n,[{key:"updateMatrixWorld",value:function(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),Object(Z["a"])(Object(K["a"])(n.prototype),"updateMatrixWorld",this).call(this,this)}},{key:"pointerHover",value:function(e){if(void 0!==this.object&&!0!==this.dragging){ee.setFromCamera(e,this.camera);var t=be(this._gizmo.picker[this.mode],ee);this.axis=t?t.object.name:null}}},{key:"pointerDown",value:function(e){if(void 0!==this.object&&!0!==this.dragging&&0===e.button&&null!==this.axis){ee.setFromCamera(e,this.camera);var t=be(this._plane,ee,!0);if(t){var n=this.space;if("scale"===this.mode?n="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(n="world"),"local"===n&&"rotate"===this.mode){var o=this.rotationSnap;"X"===this.axis&&o&&(this.object.rotation.x=Math.round(this.object.rotation.x/o)*o),"Y"===this.axis&&o&&(this.object.rotation.y=Math.round(this.object.rotation.y/o)*o),"Z"===this.axis&&o&&(this.object.rotation.z=Math.round(this.object.rotation.z/o)*o)}this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)}this.dragging=!0,ae.mode=this.mode,this.dispatchEvent(ae)}}},{key:"pointerMove",value:function(e){var t=this.axis,n=this.mode,o=this.object,i=this.space;switch(t){case"XT":t="X",n="translate";break;case"XR":t="Y",n="rotate";break;case"YT":t="Y",n="translate";break;case"YR":t="Z",n="rotate";break;case"ZT":t="Z",n="translate";break;case"ZR":t="X",n="rotate";break;case"XYZ":t="XYZ",n="translate";break;default:break}if("scale"===n?i="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(i="world"),void 0!==o&&null!==t&&!1!==this.dragging&&-1===e.button){ee.setFromCamera(e,this.camera);var r=be(this._plane,ee,!0);if(r){if(this.pointEnd.copy(r.point).sub(this.worldPositionStart),"translate"===n)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===i&&"XYZ"!==t&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===t.indexOf("X")&&(this._offset.x=0),-1===t.indexOf("Y")&&(this._offset.y=0),-1===t.indexOf("Z")&&(this._offset.z=0),"local"===i&&"XYZ"!==t?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),o.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===i&&(o.position.applyQuaternion(oe.copy(this._quaternionStart).invert()),-1!==t.search("X")&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.position.applyQuaternion(this._quaternionStart)),"world"===i&&(o.parent&&o.position.add(te.setFromMatrixPosition(o.parent.matrixWorld)),-1!==t.search("X")&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.parent&&o.position.sub(te.setFromMatrixPosition(o.parent.matrixWorld))));else if("scale"===n){if(-1!==t.search("XYZ")){var a=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(a*=-1),ne.set(a,a,a)}else te.copy(this.pointStart),ne.copy(this.pointEnd),te.applyQuaternion(this._worldQuaternionInv),ne.applyQuaternion(this._worldQuaternionInv),ne.divide(te),-1===t.search("X")&&(ne.x=1),-1===t.search("Y")&&(ne.y=1),-1===t.search("Z")&&(ne.z=1);o.scale.copy(this._scaleStart).multiply(ne),this.scaleSnap&&(-1!==t.search("X")&&(o.scale.x=Math.round(o.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(o.scale.y=Math.round(o.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(o.scale.z=Math.round(o.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){this._offset.copy(this.pointEnd).sub(this.pointStart);var s=20/this.worldPosition.distanceTo(te.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):"XYZE"===t?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(te.copy(this.rotationAxis).cross(this.eye))*s):"X"!==t&&"Y"!==t&&"Z"!==t||(this.rotationAxis.copy(ie[t]),te.copy(ie[t]),"local"===i&&te.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(te.cross(this.eye).normalize())*s),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===i&&"E"!==t&&"XYZE"!==t?(o.quaternion.copy(this._quaternionStart),o.quaternion.multiply(oe.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),o.quaternion.copy(oe.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),o.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(re),this.dispatchEvent(ce)}}}},{key:"pointerUp",value:function(e){0===e.button&&(this.dragging&&null!==this.axis&&(se.mode=this.mode,this.dispatchEvent(se)),this.dragging=!1,this.axis=null)}},{key:"dispose",value:function(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp),this.traverse((function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}))}},{key:"attach",value:function(e){return this.object=e,this.visible=!0,this}},{key:"detach",value:function(){return this.object=void 0,this.visible=!1,this.axis=null,this}},{key:"getMode",value:function(){return this.mode}},{key:"setMode",value:function(e){this.mode=e}},{key:"setTranslationSnap",value:function(e){this.translationSnap=e}},{key:"setRotationSnap",value:function(e){this.rotationSnap=e}},{key:"setScaleSnap",value:function(e){this.scaleSnap=e}},{key:"setSize",value:function(e){this.size=e}},{key:"setSpace",value:function(e){this.space=e}},{key:"update",value:function(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}]),n}(r["Object3D"]);function ue(e){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:e.button};var t=this.domElement.getBoundingClientRect();return{x:(e.clientX-t.left)/t.width*2-1,y:-(e.clientY-t.top)/t.height*2+1,button:e.button}}function de(e){if(this.enabled)switch(e.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(e));break}}function he(e){this.enabled&&(this.domElement.ownerDocument.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(e)),this.pointerDown(this._getPointer(e)))}function pe(e){this.enabled&&this.pointerMove(this._getPointer(e))}function fe(e){this.enabled&&(this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(e)))}function be(e,t,n){for(var o=t.intersectObject(e,!0),i=0;i<o.length;i++)if(o[i].object.visible||n)return o[i];return!1}le.prototype.isTransformControls=!0;var ge=new r["Euler"],me=new r["Vector3"](0,1,0),ve=new r["Vector3"](0,0,0),ye=new r["Matrix4"],we=new r["Quaternion"],Oe=new r["Quaternion"],je=new r["Vector3"],Ae=new r["Matrix4"],xe=new r["Vector3"](1,0,0),ke=new r["Vector3"](0,1,0),Me=new r["Vector3"](0,0,1),Ie=new r["Vector3"],Ce=new r["Vector3"],Se=new r["Vector3"],Te=function(e){Object($["a"])(n,e);var t=Object(J["a"])(n);function n(){var e;Object(v["a"])(this,n),e=t.call(this),e.type="TransformControlsGizmo";var o=new r["MeshBasicMaterial"]({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=new r["LineBasicMaterial"]({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),a=o.clone();a.opacity=.15;var s=i.clone();s.opacity=1,s.color.setHex(16767104);var c=o.clone();c.color.setHex(16744576),c.side=r["DoubleSide"];var l=o.clone();l.color.setHex(16744576);var u=o.clone();u.color.setHex(8454089),u.side=r["DoubleSide"];var d=o.clone();d.color.setHex(8454089);var h=o.clone();h.color.setHex(8428799),h.side=r["DoubleSide"];var p=o.clone();p.color.setHex(8428799);var f=o.clone();f.color.setHex(16744576),f.opacity=.5,f.name="matRedTransparent";var b=o.clone();b.color.setHex(8454089),b.opacity=.5;var g=o.clone();g.color.setHex(8428799),g.opacity=.5;var m=o.clone();m.opacity=.25;var y=o.clone();y.color.setHex(16767104),y.opacity=.5;var w=o.clone();w.color.setHex(16767104);var O=o.clone();O.color.setHex(7895160);var j=new r["CylinderGeometry"](0,.055,.125,12);j.translate(0,.05,0);var A=new r["CylinderGeometry"](.02,.06,.15,12);A.translate(0,.05,0);var x=new r["BoxGeometry"](.08,.08,.08);x.translate(0,.04,0);var k=new r["BufferGeometry"];k.setAttribute("position",new r["Float32BufferAttribute"]([0,0,0,1,0,0],3));var M=new r["CylinderGeometry"](.0075,.0075,.5,3);function I(e){var t=new r["RingGeometry"](e+.01,e+.1,10,10,.5,Math.PI/2-1);return t.rotateY(Math.PI/2),t.rotateX(Math.PI/2),t}function C(){var e=new r["BufferGeometry"];return e.setAttribute("position",new r["Float32BufferAttribute"]([0,0,0,1,1,1],3)),e}M.translate(0,.25,0);var S={X:[[new r["Mesh"](j,c),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new r["Mesh"](j,u),[0,.5,0]]],Z:[[new r["Mesh"](j,h),[0,0,.5],[Math.PI/2,0,0]]]},T={X:[[new r["Mesh"](new r["CylinderGeometry"](.2,0,.6,4),a),[.3,0,0],[0,0,-Math.PI/2]],[new r["Mesh"](new r["CylinderGeometry"](.2,0,.6,4),a),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new r["Mesh"](new r["CylinderGeometry"](.2,0,.6,4),a),[0,.3,0]],[new r["Mesh"](new r["CylinderGeometry"](.2,0,.6,4),a),[0,-.3,0],[0,0,Math.PI]]],Z:[[new r["Mesh"](new r["CylinderGeometry"](.2,0,.6,4),a),[0,0,.3],[Math.PI/2,0,0]],[new r["Mesh"](new r["CylinderGeometry"](.2,0,.6,4),a),[0,0,-.3],[-Math.PI/2,0,0]]]},E={START:[[new r["Mesh"](new r["OctahedronGeometry"](.01,2),s),null,null,null,"helper"]],END:[[new r["Mesh"](new r["OctahedronGeometry"](.01,2),s),null,null,null,"helper"]],DELTA:[[new r["Line"](C(),s),null,null,null,"helper"]],X:[[new r["Line"](k,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new r["Line"](k,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new r["Line"](k,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},D={X:[[new r["Mesh"](I(.5,.5),c)]],Y:[[new r["Mesh"](I(.5,.5),u),null,[0,0,-Math.PI/2]]],Z:[[new r["Mesh"](I(.5,.5),h),null,[0,Math.PI/2,0]]]},B={AXIS:[[new r["Line"](k,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},P={X:[[new r["Mesh"](new r["TorusGeometry"](.5,.1,4,24),a),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new r["Mesh"](new r["TorusGeometry"](.5,.1,4,24),a),[0,0,0],[Math.PI/2,0,0]]],Z:[[new r["Mesh"](new r["TorusGeometry"](.5,.1,4,24),a),[0,0,0],[0,0,-Math.PI/2]]]},Q={X:[[new r["Mesh"](x,c),[.5,0,0],[0,0,-Math.PI/2]],[new r["Mesh"](M,c),[0,0,0],[0,0,-Math.PI/2]],[new r["Mesh"](x,c),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new r["Mesh"](x,u),[0,.5,0]],[new r["Mesh"](M,u)],[new r["Mesh"](x,u),[0,-.5,0],[0,0,Math.PI]]],Z:[[new r["Mesh"](x,h),[0,0,.5],[Math.PI/2,0,0]],[new r["Mesh"](M,h),[0,0,0],[Math.PI/2,0,0]],[new r["Mesh"](x,h),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new r["Mesh"](new r["BoxGeometry"](.15,.15,.01),g),[.15,.15,0]]],YZ:[[new r["Mesh"](new r["BoxGeometry"](.15,.15,.01),f),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new r["Mesh"](new r["BoxGeometry"](.15,.15,.01),b),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new r["Mesh"](new r["BoxGeometry"](.1,.1,.1),m.clone())]]},G={X:[[new r["Mesh"](new r["CylinderGeometry"](.2,0,.6,4),a),[.3,0,0],[0,0,-Math.PI/2]],[new r["Mesh"](new r["CylinderGeometry"](.2,0,.6,4),a),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new r["Mesh"](new r["CylinderGeometry"](.2,0,.6,4),a),[0,.3,0]],[new r["Mesh"](new r["CylinderGeometry"](.2,0,.6,4),a),[0,-.3,0],[0,0,Math.PI]]],Z:[[new r["Mesh"](new r["CylinderGeometry"](.2,0,.6,4),a),[0,0,.3],[Math.PI/2,0,0]],[new r["Mesh"](new r["CylinderGeometry"](.2,0,.6,4),a),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new r["Mesh"](new r["BoxGeometry"](.2,.2,.01),a),[.15,.15,0]]],YZ:[[new r["Mesh"](new r["BoxGeometry"](.2,.2,.01),a),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new r["Mesh"](new r["BoxGeometry"](.2,.2,.01),a),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new r["Mesh"](new r["BoxGeometry"](.2,.2,.2),a),[0,0,0]]]},H={X:[[new r["Line"](k,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new r["Line"](k,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new r["Line"](k,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},R={XT:[[new r["Mesh"](j,l),[.2,0,0],[0,0,-Math.PI/2]]],XR:[[new r["Mesh"](I(.15,.5),c),null,[0,Math.PI/2,Math.PI/2]]],YT:[[new r["Mesh"](j,d),[0,.2,0]]],YR:[[new r["Mesh"](I(.15,.5),u),null,[Math.PI/2,Math.PI,Math.PI/2]]],ZT:[[new r["Mesh"](j,p),[0,0,.2],[Math.PI/2,0,0]]],ZR:[[new r["Mesh"](I(.15,.5),h),null,[0,0,0]]],XYZ:[[new r["Mesh"](new r["OctahedronGeometry"](.07,0),y.clone()),[0,0,0]]]},Y=R,L={START:[[new r["Mesh"](new r["OctahedronGeometry"](.01,2),s),null,null,null,"helper"]],END:[[new r["Mesh"](new r["OctahedronGeometry"](.01,2),s),null,null,null,"helper"]],DELTA:[[new r["Line"](C(),s),null,null,null,"helper"]],XT:[[new r["Line"](k,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],YT:[[new r["Line"](k,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],ZT:[[new r["Line"](k,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function z(e){var t=new r["Object3D"];for(var n in e)for(var o=e[n].length;o--;){var i=e[n][o][0].clone(),a=e[n][o][1],s=e[n][o][2],c=e[n][o][3],l=e[n][o][4];i.name=n,i.tag=l,a&&i.position.set(a[0],a[1],a[2]),s&&i.rotation.set(s[0],s[1],s[2]),c&&i.scale.set(c[0],c[1],c[2]),i.updateMatrix();var u=i.geometry.clone();u.applyMatrix4(i.matrix),i.geometry=u,i.position.set(0,0,0),i.rotation.set(0,0,0),i.scale.set(1,1,1),t.add(i)}return t}return e.gizmo={},e.picker={},e.helper={},e.add(e.gizmo["translate"]=z(S)),e.add(e.gizmo["rotate"]=z(D)),e.add(e.gizmo["scale"]=z(Q)),e.add(e.picker["translate"]=z(T)),e.add(e.picker["rotate"]=z(P)),e.add(e.picker["scale"]=z(G)),e.add(e.helper["translate"]=z(E)),e.add(e.helper["rotate"]=z(B)),e.add(e.helper["scale"]=z(H)),e.add(e.gizmo["combined"]=z(R)),e.add(e.picker["combined"]=z(Y)),e.add(e.helper["combined"]=z(L)),e.picker["translate"].visible=!1,e.picker["rotate"].visible=!1,e.picker["scale"].visible=!1,e.picker["combined"].visible=!1,e}return Object(y["a"])(n,[{key:"updateMatrixWorld",value:function(e){var t="scale"===this.mode?"local":this.space,o="local"===t?this.worldQuaternion:Oe;this.gizmo["translate"].visible="translate"===this.mode,this.gizmo["rotate"].visible="rotate"===this.mode,this.gizmo["scale"].visible="scale"===this.mode,this.gizmo["combined"].visible="combined"===this.mode,this.helper["translate"].visible="translate"===this.mode,this.helper["rotate"].visible="rotate"===this.mode,this.helper["scale"].visible="scale"===this.mode,this.helper["combined"].visible="combined"===this.mode;var i=[];i=i.concat(this.picker[this.mode].children),i=i.concat(this.gizmo[this.mode].children),i=i.concat(this.helper[this.mode].children);for(var r=0;r<i.length;r++){var a=i[r];a.visible=!0,a.renderOrder=1e4,a.rotation.set(0,0,0),a.position.copy(this.worldPosition);var s=void 0;if(s=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),a.scale.set(1,1,1).multiplyScalar(s*this.size/4),"helper"!==a.tag){if(a.quaternion.copy(o),"translate"===this.mode||"scale"===this.mode||"combined"===this.mode){var c=.2,l=.2;"XT"!==a.name&&"XR"!==a.name||Math.abs(me.copy(xe).applyQuaternion(o).dot(this.eye))>c&&(a.renderOrder=10001),"YT"!==a.name&&"YR"!==a.name||Math.abs(me.copy(ke).applyQuaternion(o).dot(this.eye))>c&&(a.renderOrder=10001),"ZT"!==a.name&&"ZR"!==a.name||Math.abs(me.copy(Me).applyQuaternion(o).dot(this.eye))>c&&(a.renderOrder=10001),"XY"===a.name&&Math.abs(me.copy(Me).applyQuaternion(o).dot(this.eye))<l&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"YZ"===a.name&&Math.abs(me.copy(xe).applyQuaternion(o).dot(this.eye))<l&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"XZ"===a.name&&Math.abs(me.copy(ke).applyQuaternion(o).dot(this.eye))<l&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1)}else"rotate"===this.mode&&(we.copy(o),me.copy(this.eye).applyQuaternion(oe.copy(o).invert()),-1!==a.name.search("E")&&a.quaternion.setFromRotationMatrix(ye.lookAt(this.eye,ve,ke)),"X"===a.name&&(oe.setFromAxisAngle(xe,Math.atan2(-me.y,me.z)),oe.multiplyQuaternions(we,oe),a.quaternion.copy(oe)),"Y"===a.name&&(oe.setFromAxisAngle(ke,Math.atan2(me.x,me.z)),oe.multiplyQuaternions(we,oe),a.quaternion.copy(oe)),"Z"===a.name&&(oe.setFromAxisAngle(Me,Math.atan2(me.y,me.x)),oe.multiplyQuaternions(we,oe),a.quaternion.copy(oe)));a.visible=a.visible&&(-1===a.name.indexOf("X")||this.showX),a.visible=a.visible&&(-1===a.name.indexOf("Y")||this.showY),a.visible=a.visible&&(-1===a.name.indexOf("Z")||this.showZ),a.visible=a.visible&&(-1===a.name.indexOf("E")||this.showX&&this.showY&&this.showZ),a.material._color=a.material._color||a.material.color.clone(),a.material._opacity=a.material._opacity||a.material.opacity,a.material.color.copy(a.material._color),a.material.opacity=a.material._opacity,this.enabled&&this.axis&&a.name===this.axis&&(a.material.color.setHex(16767104),a.material.opacity=1)}else a.visible=!1,"AXIS"===a.name?(a.position.copy(this.worldPositionStart),a.visible=!!this.axis,"X"===this.axis&&(oe.setFromEuler(ge.set(0,0,0)),a.quaternion.copy(o).multiply(oe),Math.abs(me.copy(xe).applyQuaternion(o).dot(this.eye))>.9&&(a.visible=!1)),"Y"===this.axis&&(oe.setFromEuler(ge.set(0,0,Math.PI/2)),a.quaternion.copy(o).multiply(oe),Math.abs(me.copy(ke).applyQuaternion(o).dot(this.eye))>.9&&(a.visible=!1)),"Z"===this.axis&&(oe.setFromEuler(ge.set(0,Math.PI/2,0)),a.quaternion.copy(o).multiply(oe),Math.abs(me.copy(Me).applyQuaternion(o).dot(this.eye))>.9&&(a.visible=!1)),"XYZE"===this.axis&&(oe.setFromEuler(ge.set(0,Math.PI/2,0)),me.copy(this.rotationAxis),a.quaternion.setFromRotationMatrix(ye.lookAt(ve,me,ke)),a.quaternion.multiply(oe),a.visible=this.dragging),"E"===this.axis&&(a.visible=!1)):"START"===a.name?(a.position.copy(this.worldPositionStart),a.visible=this.dragging):"END"===a.name?(a.position.copy(this.worldPosition),a.visible=this.dragging):"DELTA"===a.name?(a.position.copy(this.worldPositionStart),a.quaternion.copy(this.worldQuaternionStart),te.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),te.applyQuaternion(this.worldQuaternionStart.clone().invert()),a.scale.copy(te),a.visible=this.dragging):(a.quaternion.copy(o),this.dragging?a.position.copy(this.worldPositionStart):a.position.copy(this.worldPosition),this.axis&&(a.visible=-1!==this.axis.search(a.name)))}Object(Z["a"])(Object(K["a"])(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(r["Object3D"]);Te.prototype.isTransformControlsGizmo=!0;var Ee=function(e){Object($["a"])(n,e);var t=Object(J["a"])(n);function n(){var e;return Object(v["a"])(this,n),e=t.call(this,new r["PlaneGeometry"](1e5,1e5,2,2),new r["MeshBasicMaterial"]({visible:!1,wireframe:!0,side:r["DoubleSide"],transparent:!0,opacity:.1,toneMapped:!1})),e.type="TransformControlsPlane",e}return Object(y["a"])(n,[{key:"updateMatrixWorld",value:function(e){var t=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(t="local"),Ie.copy(xe).applyQuaternion("local"===t?this.worldQuaternion:Oe),Ce.copy(ke).applyQuaternion("local"===t?this.worldQuaternion:Oe),Se.copy(Me).applyQuaternion("local"===t?this.worldQuaternion:Oe),me.copy(Ce),this.mode){case"translate":case"scale":switch(this.axis){case"X":me.copy(this.eye).cross(Ie),je.copy(Ie).cross(me);break;case"Y":me.copy(this.eye).cross(Ce),je.copy(Ce).cross(me);break;case"Z":me.copy(this.eye).cross(Se),je.copy(Se).cross(me);break;case"XY":je.copy(Se);break;case"YZ":je.copy(Ie);break;case"XZ":me.copy(Se),je.copy(Ce);break;case"XYZ":case"E":je.set(0,0,0);break}break;case"rotate":default:je.set(0,0,0)}0===je.length()?this.quaternion.copy(this.cameraQuaternion):(Ae.lookAt(te.set(0,0,0),je,me),this.quaternion.setFromRotationMatrix(Ae)),Object(Z["a"])(Object(K["a"])(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(r["Mesh"]);Ee.prototype.isTransformControlsPlane=!0;var De=n("34ad"),Be=function(e){return Object(o["o"])("data-v-8e2218ae"),e=e(),Object(o["n"])(),e},Pe={class:"drag-handle"},Qe=Be((function(){return Object(o["f"])("div",{class:"handle-dots"},[Object(o["f"])("span"),Object(o["f"])("span"),Object(o["f"])("span")],-1)})),Ge={class:"title"},He={class:"controls"};function Re(e,t,n,i,r,a){return Object(o["A"])((Object(o["m"])(),Object(o["e"])("div",{class:Object(o["k"])(["draggable-window",{minimized:r.minimized}]),style:Object(o["l"])({top:r.currentY+"px",left:r.currentX+"px"})},[Object(o["f"])("div",{class:"window-header",onMousedown:t[6]||(t[6]=function(){return a.startDrag&&a.startDrag.apply(a,arguments)}),onTouchstart:t[7]||(t[7]=function(){return a.startDragTouch&&a.startDragTouch.apply(a,arguments)})},[Object(o["f"])("div",Pe,[Qe,Object(o["f"])("span",Ge,Object(o["t"])(n.title),1)]),Object(o["f"])("div",He,[Object(o["f"])("button",{class:"control-btn minimize",onClick:t[0]||(t[0]=Object(o["C"])((function(){return a.toggleMinimize&&a.toggleMinimize.apply(a,arguments)}),["stop"])),onMousedown:t[1]||(t[1]=Object(o["C"])((function(){}),["stop"])),onTouchstart:t[2]||(t[2]=Object(o["C"])((function(){}),["stop"]))},Object(o["t"])(r.minimized?"+":""),33),Object(o["f"])("button",{class:"control-btn close",onClick:t[3]||(t[3]=Object(o["C"])((function(){return a.close&&a.close.apply(a,arguments)}),["stop"])),onMousedown:t[4]||(t[4]=Object(o["C"])((function(){}),["stop"])),onTouchstart:t[5]||(t[5]=Object(o["C"])((function(){}),["stop"]))},"  ",32)])],32),Object(o["A"])(Object(o["f"])("div",Object(o["j"])({class:"window-content"},e.$attrs),[Object(o["r"])(e.$slots,"default",{},void 0,!0)],16),[[o["y"],!r.minimized]])],6)),[[o["y"],n.visible&&!r.userClosed]])}var Ye={name:"DraggableWindow",inheritAttrs:!1,props:{title:{type:String,default:"Window"},initialX:{type:Number,default:100},initialY:{type:Number,default:100},visible:{type:Boolean,default:!0},reopenTrigger:{type:Number,default:0},startOpen:{type:Boolean,default:!0},isOpen:{type:Boolean,default:void 0}},data:function(){return{isDragging:!1,currentX:this.initialX,currentY:this.initialY,dragOffsetX:0,dragOffsetY:0,minimized:!1,userClosed:void 0!==this.isOpen?!this.isOpen:!this.startOpen}},methods:{startDrag:function(e){e.target.closest(".controls")||(this.isDragging=!0,this.dragOffsetX=e.clientX-this.currentX,this.dragOffsetY=e.clientY-this.currentY,document.addEventListener("mousemove",this.onDrag),document.addEventListener("mouseup",this.stopDrag))},onDrag:function(e){this.isDragging&&(this.currentX=e.clientX-this.dragOffsetX,this.currentY=e.clientY-this.dragOffsetY)},stopDrag:function(){this.isDragging=!1,document.removeEventListener("mousemove",this.onDrag),document.removeEventListener("mouseup",this.stopDrag)},startDragTouch:function(e){if(!e.target.closest(".controls")){var t=e.touches[0];this.isDragging=!0,this.dragOffsetX=t.clientX-this.currentX,this.dragOffsetY=t.clientY-this.currentY,document.addEventListener("touchmove",this.onDragTouch),document.addEventListener("touchend",this.stopDragTouch)}},onDragTouch:function(e){if(this.isDragging){e.preventDefault();var t=e.touches[0];this.currentX=t.clientX-this.dragOffsetX,this.currentY=t.clientY-this.dragOffsetY}},stopDragTouch:function(){this.isDragging=!1,document.removeEventListener("touchmove",this.onDragTouch),document.removeEventListener("touchend",this.stopDragTouch)},toggleMinimize:function(){this.minimized=!this.minimized},close:function(){this.userClosed=!0,this.$emit("close")}},watch:{reopenTrigger:function(){this.userClosed=!1},isOpen:function(e){void 0!==e&&(this.userClosed=!e)},initialX:function(e){this.currentX=e},initialY:function(e){this.currentY=e}}},Le=(n("7b8b"),n("6b0d")),ze=n.n(Le);const We=ze()(Ye,[["render",Re],["__scopeId","data-v-8e2218ae"]]);var Ue,Ve,Fe,Xe,Ne,qe=We,_e=Object(o["p"])([]),Ze=new r["PlaneGeometry"](5,5),Ke={name:"Canvas",components:{DraggableWindow:qe},data:function(){return{window:window,material:new r["MeshToonMaterial"]({color:15134197,transparent:!0,opacity:.8,side:r["DoubleSide"],polygonOffset:!0,polygonOffsetFactor:2.5,polygonOffsetUnits:-1,emissive:new r["Color"]("rgb(255,255,255)"),emissiveIntensity:.3}),startPosition:new r["Vector3"](.001,.001,.001),startQuaternion:new r["Quaternion"](.001,.001,.001,1),startScale:new r["Vector3"](1,1,1),transformationResetDisabled:!0,transformationEnabled:!0,visible:!0,mode:"combined",snap:!1}},props:{selectedShape:[String,Object],selectedTool:String,mirror:[Boolean,String],mouse:Object,reopenTrigger:Number,isOpen:Boolean,initialX:Number,initialY:Number},emits:["selected-canvas-shape","set-tool-enabled","visibility-change","close"],methods:{getPosition:function(){return{x:this.$refs.win.currentX,y:this.$refs.win.currentY}},loadCustomModel:function(e){var t,n,o=this;if("object"===Object(q["a"])(e)&&e.url?(t=e.url,n=e.id):t=e,t){var i=new De["a"];i.load(t,(function(e){var t=e.scene;n?(t.userData.customId=n,t.name="Custom Model "+n.substr(-4)):t.name="Custom Model";var i=(new r["Box3"]).setFromObject(t),a=i.getCenter(new r["Vector3"]);t.position.sub(a),rb.add(t),_e.push(t),o.selectObject(t),ob.render(rb,ib)}))}},addPrimitive:function(e){var t,n=this.material.clone();switch(n.visible=!0,n.opacity=.8,e){case"plane":t=new r["PlaneGeometry"](5,5);break;case"cube":t=new r["BoxGeometry"](5,5,5);break;case"cylinder":t=new r["CylinderGeometry"](2.5,2.5,5,15);break;case"sphere":t=new r["SphereGeometry"](2.5,15,15);break;default:return}var o=new r["Mesh"](t,n);o.name=e.charAt(0).toUpperCase()+e.slice(1),rb.add(o),_e.push(o),this.selectObject(o)},addShape:function(e){var t=this.material.clone();t.visible=!0,t.opacity=.8,e.material=t,e.name||(e.name="Shape "+Date.now()),rb.add(e),_e.push(e),this.selectObject(e),ob.render(rb,ib)},selectObject:function(e){e&&Ve.object!==e&&(Ve.detach(),Ue=e,Ve.attach(Ue),this.transformationResetDisabled=!1,ob.render(rb,ib))},setUp:function(){var e=this.material;Ue=new r["Mesh"](Ze,e),rb.add(Ue),_e.push(Ue),Ve=new le(ib,ob.domElement),Ve.mode="combined",Ve.addEventListener("change",(function(){if(void 0!=Kf&&(Kf.$refs.raycastCanvas.transformationResetDisabled=!1),void 0!==Xe){var e=new r["Vector3"];Ue.getWorldPosition(e);var t=new r["Quaternion"];Ue.getWorldQuaternion(t);var n=new r["Vector3"];switch(Ue.getWorldScale(n),Kf.$refs.raycastCanvas.mirror){case"x":Xe.position.set(-e.x,e.y,e.z),Xe.quaternion.set(-t.x,t.y,t.z,-t.w),Xe.scale.set(-n.x,n.y,n.z),Xe.matrixWorldNeedsUpdate=!0;break;case"y":Xe.position.set(e.x,-e.y,e.z),Xe.quaternion.set(t.x,-t.y,t.z,-t.w),Xe.scale.set(n.x,-n.y,n.z),Xe.matrixWorldNeedsUpdate=!0;break;case"z":Xe.position.set(e.x,e.y,-e.z),Xe.quaternion.set(t.x,t.y,-t.z,-t.w),Xe.scale.set(n.x,n.y,-n.z),Xe.matrixWorldNeedsUpdate=!0;break;default:return}}ob.render(rb,ib)})),Ve.enabled=!0,rb.add(Ve),Ve.attach(Ue),ob.domElement.addEventListener("pointerdown",this.onPointerDown),ob.render(rb,ib)},onPointerDown:function(e){if(this.visible&&this.transformationEnabled){var t=ob.domElement.getBoundingClientRect(),n=new r["Vector2"];n.x=(e.clientX-t.left)/t.width*2-1,n.y=-(e.clientY-t.top)/t.height*2+1;var o=new r["Raycaster"];o.setFromCamera(n,ib);var i=o.intersectObjects(_e,!0);if(i.length>0){var a=i[0].object,s=null,c=a;while(c){if(_e.includes(c)){s=c;break}c=c.parent}s&&this.selectObject(s)}}},resetTransformation:function(){Ue.position.set(this.startPosition.x,this.startPosition.y,this.startPosition.z),Ue.quaternion.set(this.startQuaternion.x,this.startQuaternion.y,this.startQuaternion.z,this.startQuaternion.w),Ue.scale.set(this.startScale.x,this.startScale.y,this.startScale.z),ob.render(rb,ib),this.transformationResetDisabled=!0},toggleTransformMode:function(){"combined"===this.mode?(this.mode="scale",Ve.mode="scale",ob.render(rb,ib)):(this.mode="combined",Ve.mode="combined",ob.render(rb,ib))},toggleControls:function(){!0===Ve.visible?(this.transformationEnabled=!1,Ve.enabled=!1,Ve.visible=!1,ob.render(rb,ib)):(this.transformationEnabled=!0,Ve.enabled=!0,Ve.visible=!0,ob.render(rb,ib))},toggleVisibility:function(){!0===Ue.visible?(this.visible=!1,this.$emit("visibility-change",!1),!0===this.transformationEnabled&&(Ve.visible=!1),!0===Ve.enabled&&(Ve.enabled=!1),Ue.visible=!1,ob.render(rb,ib)):(this.visible=!0,this.$emit("visibility-change",!0),!0===this.transformationEnabled&&(Ve.visible=!0),!1===Ve.enabled&&!0===this.transformationEnabled&&(Ve.enabled=!0),Ue.visible=!0,ob.render(rb,ib))},toggleSnap:function(){!0===this.snap?(this.snap=!this.snap,Ve.translationSnap=null,Ve.rotationSnap=null):(this.snap=!this.snap,Ve.translationSnap=1/3,Ve.rotationSnap=Math.PI/6)},setUpMirror:function(e){switch(e){case"x":Xe=Ue.clone(),Xe.applyMatrix4(Ue.matrixWorld.makeScale(-1,1,1)),rb.add(Xe),ob.render(rb,ib);break;case"y":break;case"z":break;default:break}},removeMirror:function(){rb.remove(Xe)},setMaterial:function(e){var t;if("standard"===e)t=new r["MeshToonMaterial"]({color:15134197,transparent:!0,opacity:.8,side:r["DoubleSide"],polygonOffset:!0,polygonOffsetFactor:2.5,polygonOffsetUnits:-1,emissive:new r["Color"]("rgb(255,255,255)"),emissiveIntensity:.3});else{var n;if(!e||"standard"===e)return;n=(new r["TextureLoader"]).load(e,(function(){ob.render(rb,ib)})),t=new r["MeshMatcapMaterial"]({color:16777215,matcap:n,transparent:!0,opacity:.9,side:r["DoubleSide"]})}this.material=t,Ue&&(Ue.isMesh?Ue.material=t:Ue.isGroup&&Ue.traverse((function(e){e.isMesh&&(e.material=t)}))),ob.render(rb,ib)}},watch:{opacity:function(e){this.material.opacity=e,this.material.visible=0!=e,ob.render(rb,ib)},selectedShape:function(e){if(e&&"custom"!==e)if("object"===Object(q["a"])(e)&&e.customId){var t=_e.find((function(t){return t.userData&&t.userData.customId===e.customId}));t&&this.selectObject(t)}else{if(!Ue.isMesh){var n=Ue.position.clone(),o=Ue.quaternion.clone(),i=Ue.scale.clone();rb.remove(Ue);var a=_e.indexOf(Ue);-1!==a&&_e.splice(a,1),Ve.detach(),Ue=new r["Mesh"](new r["PlaneGeometry"](1,1),this.material),Ue.position.copy(n),Ue.quaternion.copy(o),Ue.scale.copy(i),rb.add(Ue),_e.push(Ue),Ve.attach(Ue)}switch(e){case"plane":Ue.geometry&&Ue.geometry.dispose(),Ue.geometry=new r["PlaneGeometry"](5,5);break;case"cube":Ue.geometry&&Ue.geometry.dispose(),Ue.geometry=new r["BoxGeometry"](5,5,5);break;case"cylinder":Ue.geometry&&Ue.geometry.dispose(),Ue.geometry=new r["CylinderGeometry"](2.5,2.5,5,15);break;case"sphere":Ue.geometry&&Ue.geometry.dispose(),Ue.geometry=new r["SphereGeometry"](2.5,15,15);break;case"head":if(Ue.geometry&&Ue.geometry.dispose(),void 0===Ne){var s=new De["a"];s.load("asaro.glb",(function(e){Ne=e.scene.children[0].geometry,Ue.geometry&&Ue.geometry.dispose(),Ue.geometry=Ne,Ue.geometry.needsUpdate=!0,ob.render(rb,ib)}))}else Ue.geometry=Ne,Ue.geometry.needsUpdate=!0,ob.render(rb,ib);break;default:break}Ue.geometry&&(Ue.geometry.needsUpdate=!0),ob.render(rb,ib)}},mirror:function(e){!1===e?this.removeMirror():this.setUpMirror(e)}}};n("34a1");const $e=ze()(Ke,[["render",N],["__scopeId","data-v-67a0d07b"]]);var Je=$e,et=(n("5cc6"),{updateMirrorOf:function(e,t,n){"Group"===e.type?e.children.forEach((function(e){et.updateMirrorOf(e,t,n)})):e.userData.mirrors&&Array.isArray(e.userData.mirrors)&&(e.userData.mirrors.forEach((function(o){var i=t.getObjectByProperty("uuid",o.uuid);if(i){var a=o.axis;if(n){var s=n.matrixWorld,c=s.clone().invert(),l=1,u=1,d=1;"x"===a?l=-1:"y"===a?u=-1:"z"===a&&(d=-1);var h=(new r["Matrix4"]).makeScale(l,u,d),p=s.clone().multiply(h).multiply(c);i.position.copy(e.position),i.quaternion.copy(e.quaternion),i.scale.copy(e.scale),i.applyMatrix4(p)}else{var f=new r["Vector3"];e.getWorldPosition(f);var b=new r["Quaternion"];e.getWorldQuaternion(b);var g=new r["Vector3"];switch(e.getWorldScale(g),a){case"x":i.position.set(-f.x,f.y,f.z),i.quaternion.set(-b.x,b.y,b.z,-b.w),i.scale.set(-g.x,g.y,g.z);break;case"y":i.position.set(f.x,-f.y,f.z),i.quaternion.set(b.x,-b.y,b.z,-b.w),i.scale.set(g.x,-g.y,g.z);break;case"z":i.position.set(f.x,f.y,-f.z),i.quaternion.set(b.x,b.y,-b.z,-b.w),i.scale.set(g.x,g.y,-g.z);break}}et.updateMirrorOf(i,t,n)}})),e.matrixWorldNeedsUpdate=!0)},object:function(e,t,n,o){var i=e.clone();if(i.layers.set(1),i.raycast=O["c"],e.userData.mirrors||(e.userData.mirrors=[]),e.userData.mirrors.push({uuid:i.uuid,axis:t}),i.userData.mirrorParent=e.uuid,i.userData.mirrorAxisFromParent=t,o){var a=o.matrixWorld,s=a.clone().invert(),c=1,l=1,u=1;"x"===t?c=-1:"y"===t?l=-1:"z"===t&&(u=-1);var d=(new r["Matrix4"]).makeScale(c,l,u),h=a.clone().multiply(d).multiply(s);i.applyMatrix4(h)}else{var p=(new r["Matrix4"]).makeScale("x"===t?-1:1,"y"===t?-1:1,"z"===t?-1:1);i.applyMatrix4(p)}return n.add(i),i},eraseMirrorOf:function(e){e.userData.mirrors&&e.userData.mirrors.forEach((function(e){var t=rb.getObjectByProperty("uuid",e.uuid);t&&(et.eraseMirrorOf(t),rb.remove(t))}))}}),tt=n("34b1"),nt=n.n(tt),ot=n("63dc"),it=n.n(ot),rt=function(e){return Object(o["o"])("data-v-0bd31b88"),e=e(),Object(o["n"])(),e},at={class:"history-controls"},st=["disabled"],ct=rt((function(){return Object(o["f"])("img",{src:nt.a,alt:"undo"},null,-1)})),lt=[ct],ut=["disabled"],dt=rt((function(){return Object(o["f"])("img",{src:it.a,alt:"redo"},null,-1)})),ht=[dt];function pt(e,t,n,i,r,a){var s=Object(o["s"])("draggable-window");return Object(o["m"])(),Object(o["c"])(s,{title:"History",initialX:12,initialY:r.window.innerHeight-100,reopenTrigger:n.reopenTrigger,"start-open":n.startOpen,"is-open":n.isOpen,onClose:t[2]||(t[2]=function(t){return e.$emit("close")})},{default:Object(o["z"])((function(){return[Object(o["f"])("div",at,[Object(o["f"])("button",{onClick:t[0]||(t[0]=function(){return a.undo&&a.undo.apply(a,arguments)}),disabled:r.undoDisabled},lt,8,st),Object(o["f"])("button",{onClick:t[1]||(t[1]=function(){return a.redo&&a.redo.apply(a,arguments)}),disabled:r.redoDisabled},ht,8,ut)])]})),_:1},8,["initialY","reopenTrigger","start-open","is-open"])}var ft,bt=n("9c73"),gt=n.n(bt),mt=new gt.a,vt={name:"UndoRedo",components:{DraggableWindow:qe},props:{reopenTrigger:Number,startOpen:{type:Boolean,default:!0},isOpen:Boolean},emits:["selected-tool","close"],data:function(){return{window:window,undoDisabled:!0,redoDisabled:!0}},methods:{undo:function(){mt.undo(),this.updateUi()},redo:function(){mt.redo(),this.updateUi()},setTool:function(e){this.$emit("selected-tool",e)},updateUi:function(){this.undoDisabled=!mt.hasUndo(),this.redoDisabled=!mt.hasRedo()}},watch:{},mounted:function(){ft=this}};n("5f48");const yt=ze()(vt,[["render",pt],["__scopeId","data-v-0bd31b88"]]);var wt=yt,Ot={e:void 0,GPUPickHelper:function(){function e(){Object(v["a"])(this,e),this.pickingTexture=new r["WebGLRenderTarget"](1,1),this.pixelBuffer=new Uint8Array(4),this.pickedObject=null,this.pickedObjectSavedColor=0}return Object(y["a"])(e,[{key:"calcPointsInBetween",value:function(e,t,n,o){var i=new Array,a=Math.abs(n-e),s=Math.abs(o-t),c=e<n?1:-1,l=t<o?1:-1,u=a-s;i.push(new r["Vector2"](e,t));while(e!=n||t!=o){var d=u<<1;d>-s&&(u-=s,e+=c),d<a&&(u+=a,t+=l),i.push(new r["Vector2"](e,t))}return i}},{key:"pick",value:function(e,t,n){var o=this.pickingTexture,i=this.pixelBuffer,r=ob.getPixelRatio();n.setViewOffset(ob.getContext().drawingBufferWidth,ob.getContext().drawingBufferHeight,e.x*r|0,e.y*r|0,1,1),ob.setRenderTarget(o),ob.render(t,n),ob.setRenderTarget(null),n.clearViewOffset(),ob.readRenderTargetPixels(o,0,0,1,1,i);var a=i[0]<<16|i[1]<<8|i[2],s=Ot.e.idToObject[a];if(s)return s}},{key:"pickArea",value:function(e,t,n,o,i,r){var a=this.pickingTexture,s=this.pixelBuffer,c=function(){return n-e<0?-(n-e):n-e==0?1:n-e},l=function(){return o-t<0?-(o-t):o-t==0?1:o-t},u=new Array,d=ob.getPixelRatio();return r.setViewOffset(ob.getContext().drawingBufferWidth,ob.getContext().drawingBufferHeight,e*d|0,t*d|0,c()*d|1,l()*d|1),this.pickingTexture.width===(c()*d|1)&&this.pickingTexture.height===(l()*d|1)||this.pickingTexture.setSize(c()*d|1,l()*d|1),ob.setRenderTarget(a),ob.render(i,r),ob.setRenderTarget(null),r.clearViewOffset(),this.calcPointsInBetween(0,0,c(),l()).forEach((function(e){ob.readRenderTargetPixels(a,e.x,e.y,1,1,s);var t=s[0]<<16|s[1]<<8|s[2],n=Ot.e.idToObject[t];void 0!=n&&u.indexOf(n)<0&&u.push(n)})),u}}]),e}(),eraser:function(){function e(){Object(v["a"])(this,e),this.pscene=new r["Scene"],this.pscene.background=new r["Color"](0),this.idToObject={},this.id=1,this.picker=new Ot.GPUPickHelper}return Object(y["a"])(e,[{key:"setupPicking",value:function(){var e=this;rb.traverse((function(t){if(t.layers&&2==t.layers.mask){var n=t.clone(),o=.1;n.material&&n.material.lineWidth?o=n.material.lineWidth:n.userData&&n.userData.stroke&&n.userData.stroke.lineWidth&&(o=n.userData.stroke.lineWidth);var i=new O["b"]({lineWidth:o,sizeAttenuation:1,color:new r["Color"](e.id),side:r["DoubleSide"],fog:!1});n.material=i,e.pscene.add(n),e.idToObject[e.id]=t,e.id=e.id+1}}))}},{key:"resetPicking",value:function(){if(null!=this.pscene){this.idToObject={},this.id=1;while(this.pscene.children.length>0){var e=this.pscene.children[0];this.pscene.remove(e),e.material&&e.material.dispose()}}}},{key:"start",value:function(e,t){var n=this.picker.pickArea(e-5,t-5,e+5,t+5,this.pscene,ib);void 0!=n&&n.length>0&&n.forEach((function(e){Ot.deleteObject(e)})),ob.render(rb,ib)}},{key:"move",value:function(e,t){var n=this.picker.pickArea(e-5,t-5,e+5,t+5,this.pscene,ib);void 0!=n&&n.length>0&&n.forEach((function(e){Ot.deleteObject(e)})),ob.render(rb,ib)}},{key:"end",value:function(){ob.render(rb,ib)}},{key:"cancel",value:function(){}}]),e}(),deleteObject:function(e){if(void 0!=rb.getObjectByProperty("uuid",e.uuid)||null!=e.parent){var t=e.uuid;if(e.geometry){var n=e.geometry.points||[],o=e.userData.stroke,i=e.userData.fill,a=new r["Vector3"],s=!1;e.getWorldPosition(a);var c=new r["Quaternion"];e.getWorldQuaternion(c);var l=new r["Vector3"];e.getWorldScale(l);var u=e.matrix;e.parent&&e.parent.remove(e),et.eraseMirrorOf(e),e.material&&(e.material.map&&e.material.map.dispose(),e.material.dispose()),e.userData&&e.userData.fill&&e.userData.fill.show_fill&&e.children.length>0&&e.children[0].material&&e.children[0].material.dispose(),mt.add({undo:function(){xt.fromVertices(n,o,i,s,t,a,c,l,u),ob.render(rb,ib)},redo:function(){var e=rb.getObjectByProperty("uuid",t);e&&Ot.deleteObject(e),ob.render(rb,ib)}}),ft&&ft.$.ctx&&ft.$.ctx.updateUi()}}},onStart:function(e,t){this.e=new this.eraser,this.e.resetPicking(),this.e.setupPicking(),this.e.start(e,t)},onMove:function(e,t){this.e&&this.e.move(e,t)},onEnd:function(){this.e&&(this.e.end(),this.e.resetPicking())},onCancel:function(){}};function jt(e,t){if("solid"===e)return null;var n=document.createElement("canvas");n.width=64,n.height=64;var o=n.getContext("2d");if(o.fillStyle="white",o.fillRect(0,0,64,64),o.globalCompositeOperation="destination-in","soft"===e){var i=o.createLinearGradient(0,0,0,64);i.addColorStop(0,"rgba(255, 255, 255, 0)"),i.addColorStop(.5,"rgba(255, 255, 255, 1)"),i.addColorStop(1,"rgba(255, 255, 255, 0)"),o.fillStyle=i,o.fillRect(0,0,64,64)}else if("noise"===e){for(var a=o.createImageData(64,64),s=0;s<a.data.length;s+=4)a.data[s]=0,a.data[s+1]=0,a.data[s+2]=0,a.data[s+3]=255*Math.random();var c=document.createElement("canvas");c.width=64,c.height=64,c.getContext("2d").putImageData(a,0,0),o.drawImage(c,0,0)}else o.fillStyle="white",o.fillRect(0,0,64,64);var l=new r["CanvasTexture"](n);return l.wrapS=r["RepeatWrapping"],l.wrapT=r["RepeatWrapping"],l}function At(){return Kf&&Kf.getActiveLayerGroup&&Kf.getActiveLayerGroup()||rb}var xt={l:void 0,draw:function(){function e(t,n){var o=this;Object(v["a"])(this,e),this.stroke=Object(s["a"])(Object(s["a"])({},t),{},{show_stroke:!1!==t.show_stroke,lineWidth:t.lineWidth||.1,color:t.color||"#000000",opacity:void 0!==t.opacity?t.opacity:1}),this.line=new O["a"],this.geometry=new r["BufferGeometry"],this.vertices=new Float32Array([]),this.geometry.setAttribute("position",new r["BufferAttribute"](this.vertices,3));var i=new r["Color"](this.stroke.show_stroke?this.stroke.color:16777215);if(this.stroke.bloom){var a=this.stroke.bloomIntensity||1.5;i.multiplyScalar(a)}if(this.material=new O["b"]({lineWidth:this.stroke.show_stroke?this.stroke.lineWidth:.005,sizeAttenuation:1,color:i,side:r["DoubleSide"],fog:!0,wireframe:!1,alphaTest:this.stroke.opacity<1?0:.5,blending:r["NormalBlending"],transparent:!0,depthWrite:this.stroke.opacity>=1,depthTest:!0,repeat:new r["Vector2"](this.stroke.textureScale||1,1),opacity:void 0!==this.stroke.opacity?this.stroke.opacity:1,resolution:new r["Vector2"](window.innerWidth,window.innerHeight),dashArray:this.stroke.dashArray||0,dashOffset:this.stroke.dashOffset||0,dashRatio:this.stroke.dashRatio||.5}),"soft"!==this.stroke.brushType&&"noise"!==this.stroke.brushType||(this.material.alphaTest=0,this.material.depthWrite=!1),this.stroke.isTube||this.stroke.isStrip){var c=this.stroke.isTube,l={color:this.stroke.color||(c?6711039:16711935),roughness:void 0!==this.stroke.roughness?this.stroke.roughness:c?.4:.5,metalness:void 0!==this.stroke.metalness?this.stroke.metalness:c?.1:.5,transparent:!0,opacity:void 0!==this.stroke.opacity?this.stroke.opacity:1,side:"front"===this.stroke.side?r["FrontSide"]:r["DoubleSide"]};if(this.stroke.matcap&&"standard"!==this.stroke.matcap)this.material=new r["MeshMatcapMaterial"]({color:16777215,transparent:l.transparent,opacity:l.opacity,side:l.side}),(new r["TextureLoader"]).load(this.stroke.matcap,(function(e){o.material.matcap=e,o.material.needsUpdate=!0})),this.mesh=new r["Mesh"](new r["BufferGeometry"],this.material),this.mesh.userData.matcapUrl=this.stroke.matcap;else{var u=Object(s["a"])(Object(s["a"])({},l),{},{emissive:this.stroke.bloom?this.stroke.color||16711935:0,emissiveIntensity:this.stroke.bloom?this.stroke.bloomIntensity||2.5:0});this.material=new r["MeshStandardMaterial"](u),this.mesh=new r["Mesh"](new r["BufferGeometry"],this.material)}}else this.mesh=new r["Mesh"](this.line,this.material),this.mesh.raycast=O["c"];this.uuid=this.mesh.uuid,this.mesh.layers.set(1),this.bufferPoints=new Array,this.size=t.smoothing||4,this.mesh.userData.vertices=new Array,this.mesh.userData.stroke={show_stroke:t.show_stroke,color:t.color,lineWidth:t.lineWidth,opacity:void 0!==t.opacity?t.opacity:1,brushType:t.brushType,taper:void 0!==t.taper?t.taper:3,smoothing:t.smoothing||4,textureScale:t.textureScale||1,wiggle:t.wiggle||0,animationSpeed:t.animationSpeed||0,dashArray:t.dashArray||0,dashOffset:t.dashOffset||0,dashRatio:t.dashRatio||.5,bloom:t.bloom,bloomIntensity:t.bloomIntensity},this.mesh.userData.stroke.force=new Array,this.mesh.userData.fill={show_fill:n.show_fill,color:n.color};var d=new r["Vector3"];Ue.getWorldPosition(d);var h=new r["Quaternion"];Ue.getWorldQuaternion(h);var p=new r["Vector3"];Ue.getWorldScale(p),this.mesh.userData.canvas={shape:Fe,position:d,quaternion:h,scale:p},this.fill=n,this.fillGeometry=new r["BufferGeometry"],this.fillVertices=new Float32Array([]),this.fillGeometry.setAttribute("position",new r["BufferAttribute"](this.fillVertices,3)),this.uvsX=[],this.uvsY=[],this.uvs=[],this.triangles=new r["BufferAttribute"](new Uint16Array(w["a"].triangulate(this.fillGeometry.attributes.position.array,null,3)),1),this.face=null,this.fillGeometry.setIndex(this.triangles),this.fillMaterial=new r["MeshBasicMaterial"]({color:this.fill.color,side:r["DoubleSide"],wireframe:!1,polygonOffset:!!this.stroke.show_stroke,polygonOffsetFactor:1e3*this.stroke.lineWidth,depthTest:!0,polygonOffsetUnits:-1,transparent:!!this.fill.show_fill,opacity:this.fill.show_fill?.05:0,fog:!0}),this.fillMesh=new r["Mesh"](this.fillGeometry,this.fillMaterial),this.fillMesh.layers.set(1)}return Object(y["a"])(e,[{key:"start",value:function(e,t,n,o,i){var r=this;if(this.radial=t,this.sectors=n,this.radialAxis=o||"y",this.localSymmetry=i,(!1!==this.stroke.show_stroke||!1!==this.fill.show_stroke)&&(_f.add(this.mesh),this.fill.show_fill&&this.mesh.add(this.fillMesh),e&&"string"===typeof e)){var a=e.split(""),s=[this.mesh];a.forEach((function(e){var t=[];s.forEach((function(n){var o=et.object(n,e,_f,r.localSymmetry?Ue:null);o&&t.push(o)})),s=s.concat(t)}))}}},{key:"move",value:function(e,t,n,o,i,r){!1===this.stroke.show_stroke&&!1===this.fill.show_fill||this.addVertex(e,t,n,o,i,r)}},{key:"end_internal",value:function(e,t){var n=this,o=At();if(o.add(this.mesh),_f.clear(),this.geometry.verticesNeedsUpdate=!0,!this.stroke.show_stroke&&(this.mesh.material.opacity=0),this.fill.show_fill&&(this.fillMesh.material.transparent=!1),this.fill.show_fill&&(this.fillMesh.material.opacity=1),this.mesh.position.set(this.mesh.geometry.boundingSphere.center.x,this.mesh.geometry.boundingSphere.center.y,this.mesh.geometry.boundingSphere.center.z),this.geometry.center(),this.setGeometry("tail"),this.geometry.needsUpdate=!0,e&&"string"===typeof e){var i=e.split(""),a=[this.mesh];i.forEach((function(e){var t=[];a.forEach((function(i){var r=et.object(i,e,o,n.localSymmetry?Ue:null);r&&t.push(r)})),a=a.concat(t)}))}if(this.radial&&this.sectors>1){var s=2*Math.PI/this.sectors,c=this.localSymmetry?Ue.matrixWorld:null,l=c?c.clone().invert():null,u=function(e){for(var t=1;t<n.sectors;t++){var i=s*t,a=e.clone();a.layers.set(1),a.raycast=O["c"];var u=new r["Matrix4"];if("x"===n.radialAxis?u.makeRotationX(i):"z"===n.radialAxis?u.makeRotationZ(i):u.makeRotationY(i),n.localSymmetry&&c&&l){var d=c.clone().multiply(u).multiply(l);a.applyMatrix4(d)}else a.position.applyMatrix4(u),"x"===n.radialAxis?a.rotateX(i):"z"===n.radialAxis?a.rotateZ(i):a.rotateY(i);o.add(a)}};u(this.mesh),o.children.forEach((function(e){e.userData&&(e.userData.mirror||e.userData.mirrors||e.userData.mirrorParent)&&e.parent===o&&u(e)}))}var d,h=this.geometry.attributes.position.array;this.fillGeometry.setAttribute("position",new r["BufferAttribute"](h,3));var p=new r["Vector3"](0,0,1).applyQuaternion(this.fillMesh.quaternion),f=new r["Vector3"](0,0,-1).applyQuaternion(ib.quaternion);d=p.angleTo(f)>Math.PI/2?new r["BufferAttribute"](new Uint16Array(w["a"].triangulate(this.fillGeometry.attributes.position.array,null,3)),1):new r["BufferAttribute"](new Uint16Array(w["a"].triangulate(this.fillGeometry.attributes.position.array,null,3).reverse()),1),this.fillGeometry.setIndex(d),this.fillGeometry.computeBoundingSphere(),!0===t&&(ob.autoClear=!0,ob.render(rb,ib))}},{key:"end",value:function(e){if((!1!==this.stroke.show_stroke||!1!==this.fill.show_stroke)&&!(this.geometry.attributes.position.array.length<3)){this.end_internal(e,!0);var t=this.uuid,n=this.geometry.attributes.position.array,o=this.mesh.userData.stroke,i=this.mesh.userData.fill,a=new r["Vector3"];this.mesh.getWorldPosition(a);var s=new r["Quaternion"];this.mesh.getWorldQuaternion(s);var c=new r["Vector3"];this.mesh.getWorldScale(c);var l=this.mesh.matrix;mt.add({undo:function(){Ot.deleteObject(rb.getObjectByProperty("uuid",t)),ob.render(rb,ib)},redo:function(){xt.fromVertices(n,o,i,e,t,a,s,c,l,!0)}}),ft.$.ctx.updateUi()}}},{key:"addVertex",value:function(e,t,n,o,i,a){var s=new r["Vector3"](e,t,n);i&&!a&&s.unproject(ib);var c=new r["Vector4"](s.x,s.y,s.z,o);if(a)c.set(a.x,a.y,a.z,o),s.set(a.x,a.y,a.z);else if(i){var l=new r["Raycaster"];l.setFromCamera(new r["Vector2"](e,t),ib);try{var u=l.intersectObjects([Ue])[0],d=u.point;null===this.face&&(-1===Math.sign(u.face.normal.y)||Object.is(Math.sign(u.face.normal.y),-0)||-1===Math.sign(u.face.normal.z)||Object.is(Math.sign(u.face.normal.z),-0)?this.face="back":this.face="front");var h={x:0,y:0,z:0},p=this.stroke.wiggle||0,f=(Math.random()-.5)*p,b=(Math.random()-.5)*p,g=(Math.random()-.5)*p;c=new r["Vector4"](d.x+h.x+f,d.y+h.y+b,d.z+h.z+g,o)}catch(T){return}}function v(e,t,n,o,i){return(e-t)/(n-t)*(i-o)+o}if(i){this.appendToBuffer(c);var y=this.getAveragePoint(0);if(y&&(this.mesh.userData.vertices.push([y.x,y.y,y.z]),this.mesh.userData.stroke.force.push(y.w),this.geometry.attributes.position.array=this.Float32Concat(this.geometry.attributes.position.array,new Float32Array([y.x,y.y,y.z])),this.uvsX.push(y.x),this.uvsY.push(y.y),this.geometry.attributes.position.count=this.geometry.attributes.position.array.length/3,this.geometry.attributes.position.needsUpdate=!0,this.geometry.attributes.position.count>3&&0!=this.fill)){var O=this.geometry.attributes.position.array;this.fillGeometry.setAttribute("position",new r["BufferAttribute"](O,3)),this.fillGeometry.attributes.position.needsUpdate=!0,this.fillGeometry.computeBoundingSphere();var j=Math.min.apply(Math,Object(m["a"])(this.uvsX)),A=Math.max.apply(Math,Object(m["a"])(this.uvsX)),x=Math.min.apply(Math,Object(m["a"])(this.uvsY)),k=Math.max.apply(Math,Object(m["a"])(this.uvsY));this.uvs=[];for(var M=0;M<this.uvsX.length;M++){var I=v(this.uvsX[M],j,A,.01,.99),C=v(this.uvsY[M],x,k,.01,.99);this.uvs.push(I,C)}this.fillGeometry.setAttribute("uv",new r["Float32BufferAttribute"](this.uvs,2)),this.fillGeometry.attributes.uv.needsUpdate=!0;var S=new r["BufferAttribute"](new Uint16Array(w["a"].triangulate(this.fillGeometry.attributes.position.array,null,3)),1);this.fillGeometry.index=S,this.fillGeometry.index.needsUpdate=!0,this.fillGeometry.needsUpdate=!0}}else this.mesh.userData.stroke.force.push(o),this.geometry.attributes.position.array=this.Float32Concat(this.geometry.attributes.position.array,new Float32Array([s.x,s.y,s.z])),this.geometry.attributes.position.count=this.geometry.attributes.position.array.length/3,this.geometry.attributes.position.needsUpdate=!0;this.setGeometry(),ob.autoClear=!1,ob.clearDepth(),ob.render(_f,ib)}},{key:"Float32Concat",value:function(e,t){var n=e.length,o=new Float32Array(n+t.length);return o.set(e),o.set(t,n),o}},{key:"appendToBuffer",value:function(e){this.bufferPoints.push(e);while(this.bufferPoints.length>this.size)this.bufferPoints.shift()}},{key:"getAveragePoint",value:function(e){var t=this.bufferPoints.length;if(t%2===1||t>=this.size){var n,o,i=0,r=0,a=0,s=0,c=0;for(o=e;o<t;o++)c++,n=this.bufferPoints[o],i+=n.x,r+=n.y,a+=n.z,s+=n.w;return{x:i/c,y:r/c,z:a/c,w:s/c}}return null}},{key:"setGeometry",value:function(e){var t=this;if(this.stroke.isTube){if(this.geometry.attributes.position.count<2)return;for(var n=[],o=this.geometry.attributes.position.array,i=0;i<o.length;i+=3)n.push(new r["Vector3"](o[i],o[i+1],o[i+2]));var a=new r["CatmullRomCurve3"](n),s=this.stroke.lineWidth||.01;if(n.length<2)return;if(n=n.filter((function(e,t){return 0===t||!e.equals(n[t-1])})),n.length<2)return;var c=Math.max(64,6*n.length),l=new r["TubeGeometry"](a,c,s,8,!1);if(this.stroke.taper>0){for(var u=this.stroke.taper,d=l.attributes.position,h=8,p=c+1,f=u/100,b=0;b<p;b++){var g=b/c,m=1,v=.5*f;g<v?m=g/v:g>1-v&&(m=(1-g)/v),m=Math.max(.01,m);for(var y=a.getPointAt(g),w=0;w<=h;w++){var O=b*(h+1)+w,j=d.getX(O)-y.x,A=d.getY(O)-y.y,x=d.getZ(O)-y.z;d.setXYZ(O,y.x+j*m,y.y+A*m,y.z+x*m)}}l.computeVertexNormals(),this.mesh.userData.lastTaper=u}else this.mesh.userData.lastTaper=0;return this.mesh.geometry&&this.mesh.geometry.dispose(),this.mesh.geometry=l,void(this.mesh.userData.curve=a)}if(this.stroke.isStrip){if(this.geometry.attributes.position.count<2)return;for(var k=[],M=this.geometry.attributes.position.array,I=0;I<M.length;I+=3)k.push(new r["Vector3"](M[I],M[I+1],M[I+2]));if(k=k.filter((function(e,t){return 0===t||!e.equals(k[t-1])})),k.length<2)return;for(var C=new r["CatmullRomCurve3"](k),S=Math.max(64,6*k.length),T=this.stroke.lineWidth||.1,E=C.computeFrenetFrames(S,!1),D=[],B=[],P=this.stroke.taper||0,Q=P/100,G=0;G<=S;G++){var H=G/S,R=C.getPointAt(H),Y=E.binormals[G],L=1;if(P>0){var z=.5*Q;H<z?L=H/z:H>1-z&&(L=(1-H)/z),L=Math.max(.01,L)}var W=T*L,U=R.clone().add(Y.clone().multiplyScalar(W)),V=R.clone().sub(Y.clone().multiplyScalar(W));D.push(U.x,U.y,U.z),D.push(V.x,V.y,V.z)}for(var F=0;F<S;F++){var X=2*F;B.push(X,X+1,X+2),B.push(X+1,X+3,X+2)}var N=new r["BufferGeometry"];return N.setAttribute("position",new r["Float32BufferAttribute"](D,3)),N.setIndex(B),N.computeVertexNormals(),this.mesh.geometry&&this.mesh.geometry.dispose(),this.mesh.geometry=N,this.mesh.userData.curve=C,void(this.mesh.userData.lastTaper=P)}this.line.setPoints(this.geometry.attributes.position.array,(function(n){var o=t.geometry.attributes.position.array.length/3,i=t.mesh.userData.stroke.force;function r(e,t,n,o,i){return(e-t)/(n-t)*(i-o)+o}var a=Math.round(n*(o-1)),s=0,c=3,l=16*i[a],u=void 0!==t.stroke.taper?t.stroke.taper:3;return a<u?r(a,0,u,s,c+l):a>o-u&&"tail"==e?r(a,o-u,o-1,c+l,s):c+l}))}},{key:"setUvs",value:function(){function e(e,t,n,o,i){return(e-t)/(n-t)*(i-o)+o}var t=Math.min.apply(Math,Object(m["a"])(this.uvsX)),n=Math.max.apply(Math,Object(m["a"])(this.uvsX)),o=Math.min.apply(Math,Object(m["a"])(this.uvsY)),i=Math.max.apply(Math,Object(m["a"])(this.uvsY));this.uvs=[];for(var a=0;a<this.uvsX.length;a++){var s=e(this.uvsX[a],t,n,.01,.99),c=e(this.uvsY[a],o,i,.01,.99);this.uvs.push(s,c)}this.fillGeometry.setAttribute("uv",new r["Float32BufferAttribute"](this.uvs,2)),this.fillGeometry.attributes.uv.needsUpdate=!0}},{key:"cancel",value:function(){_f.remove(this.mesh),et.eraseMirrorOf(this.mesh),this.mesh.material.dispose(),xt.l=void 0,xt.l=new xt.draw,_f.clear(),ob.render(_f,ib),ob.autoClear=!0,ob.render(rb,ib)}}]),e}(),onStart:function(e,t,n,o,i,r,a,s,c,l,u,d,h){this.l=new this.draw(a,s),this.l.start(r,c,l,u,d),h&&this.onMove(e,t,n,o,i,h)},onMove:function(e,t,n,o,i,r){this.l.move(e,t,n,o,i,r)},onEnd:function(e){this.l.end(e)},onEnd_internal:function(e,t){this.l.end_internal(e,t)},onCancel:function(){this.l&&this.l.cancel()},fromVertices:function(e,t,n,o,i,a,s,c,l,u){var d=[];e.length>0&&e[0].isVector3?e.forEach((function(e){d.push(e.x||0,e.y||0,e.z||0)})):d=Array.from(e),this.l=new this.draw(t,n),this.onStart(0,0,0,0,!1,o,t,n);var h=new Float32Array(d);this.l.geometry.setAttribute("position",new r["BufferAttribute"](h,3)),this.l.geometry.attributes.position.count=h.length/3,this.l.geometry.attributes.position.needsUpdate=!0,l||(l=new r["Matrix4"]),a||(a=new r["Vector3"](0,0,0)),s||(s=new r["Quaternion"]),c||(c=new r["Vector3"](1,1,1));for(var p=0;p<h.length/3;p++){var f=(new r["Vector3"]).fromArray(h,3*p).applyMatrix4(l);this.l.uvsX.push(f.x),this.l.uvsY.push(f.y)}this.l.setUvs(),t.force&&0!==t.force.length?this.l.mesh.userData.stroke.force=t.force:this.l.mesh.userData.stroke.force=new Array(Math.floor(h.length/3)).fill(.5),this.l.setGeometry(),i&&(this.l.mesh.uuid=i),this.onEnd_internal(o,!1),l&&this.l.mesh.applyMatrix4(l),a&&this.l.mesh.position.set(a.x,a.y,a.z),s&&this.l.mesh.quaternion.set(s._x,s._y,s._z,s._w),c&&this.l.mesh.scale.set(c.x,c.y,c.z);var b=At();b.add(this.l.mesh),!0===u&&ob.render(rb,ib)},updateStroke:function(e,t){if(e&&e.userData.stroke){Object.assign(e.userData.stroke,t);var n=e.material;if(t.color&&(n.isMeshStandardMaterial?n.color.set(t.color):n.color.setStyle(t.color)),void 0!==t.lineWidth&&(t.isTube||t.isStrip||(n.lineWidth=t.lineWidth,n.uniforms.lineWidth&&(n.uniforms.lineWidth.value=t.lineWidth))),void 0!==t.opacity&&(n.opacity=t.opacity,n.transparent=!0,n.uniforms.opacity&&(n.uniforms.opacity.value=t.opacity)),void 0!==t.dashArray&&(n.dashArray=t.dashArray,n.uniforms.dashArray&&(n.uniforms.dashArray.value=t.dashArray)),void 0!==t.dashOffset&&(n.dashOffset=t.dashOffset,n.uniforms.dashOffset&&(n.uniforms.dashOffset.value=t.dashOffset)),void 0!==t.dashRatio&&(n.dashRatio=t.dashRatio,n.uniforms.dashRatio&&(n.uniforms.dashRatio.value=t.dashRatio)),void 0!==t.textureScale&&(n.repeat.x=t.textureScale,n.uniforms.repeat&&(n.uniforms.repeat.value.x=t.textureScale)),t.isTube||t.isStrip){if(t.matcap&&"standard"!==t.matcap)if(n.isMeshMatcapMaterial)e.userData.matcapUrl!==t.matcap&&((new r["TextureLoader"]).load(t.matcap,(function(e){n.matcap=e,n.needsUpdate=!0,ob.render(rb,ib)})),e.userData.matcapUrl=t.matcap),t.color&&n.color.set(t.color),void 0!==t.opacity&&(n.opacity=t.opacity);else{var o=new r["MeshMatcapMaterial"]({color:16777215,transparent:!0,opacity:void 0!==t.opacity?t.opacity:1,side:"front"===t.side?r["FrontSide"]:r["DoubleSide"]});e.material=o,(new r["TextureLoader"]).load(t.matcap,(function(e){o.matcap=e,o.needsUpdate=!0,ob.render(rb,ib)}))}else if(n.isMeshStandardMaterial)void 0!==t.roughness&&(n.roughness=t.roughness),void 0!==t.metalness&&(n.metalness=t.metalness),t.color&&n.color.set(t.color),void 0!==t.opacity&&(n.opacity=t.opacity),void 0!==t.bloom&&(t.bloom?(n.emissive=new r["Color"](t.color||16777215),n.emissiveIntensity=2.5):(n.emissive=new r["Color"](0),n.emissiveIntensity=0),n.needsUpdate=!0);else{var i=new r["MeshStandardMaterial"]({color:t.color||16777215,roughness:t.roughness||.5,metalness:t.metalness||.5,transparent:!0,opacity:void 0!==t.opacity?t.opacity:1,side:"front"===t.side?r["FrontSide"]:r["DoubleSide"],emissive:t.bloom?t.color||16777215:0,emissiveIntensity:t.bloom?2.5:0});e.material=i}if(t.isTube&&e.userData.curve){var a=void 0!==t.taper?t.taper:e.userData.lastTaper||0,s=void 0!==t.lineWidth?t.lineWidth:e.userData.stroke.lineWidth||.1;if(void 0!==t.taper||void 0!==t.lineWidth){var c=s,l=e.userData.curve,u=Math.max(64,6*l.points.length);if(t.isTube){var d=new r["TubeGeometry"](l,u,c,8,!1);if(a>0){for(var h=d.attributes.position,p=8,f=u+1,b=a/100,g=0;g<f;g++){var m=g/u,v=1,y=.5*b;m<y?v=m/y:m>1-y&&(v=(1-m)/y),v=Math.max(.01,v);for(var w=l.getPointAt(m),O=0;O<=p;O++){var j=g*(p+1)+O,A=h.getX(j)-w.x,x=h.getY(j)-w.y,k=h.getZ(j)-w.z;h.setXYZ(j,w.x+A*v,w.y+x*v,w.z+k*v)}}d.computeVertexNormals()}e.geometry&&e.geometry.dispose(),e.geometry=d,e.userData.lastTaper=a}}}if(t.isStrip&&e.userData.curve){var M=void 0!==t.taper?t.taper:e.userData.lastTaper||0,I=void 0!==t.lineWidth?t.lineWidth:e.userData.stroke.lineWidth||.1;if(void 0!==t.taper||void 0!==t.lineWidth){for(var C=e.userData.curve,S=Math.max(64,6*C.points.length),T=C.computeFrenetFrames(S,!1),E=[],D=[],B=M/100,P=0;P<=S;P++){var Q=P/S,G=C.getPointAt(Q),H=T.binormals[P],R=1;if(M>0){var Y=.5*B;Q<Y?R=Q/Y:Q>1-Y&&(R=(1-Q)/Y),R=Math.max(.01,R)}var L=I*R,z=G.clone().add(H.clone().multiplyScalar(L)),W=G.clone().sub(H.clone().multiplyScalar(L));E.push(z.x,z.y,z.z),E.push(W.x,W.y,W.z)}for(var U=0;U<S;U++){var V=2*U;D.push(V,V+1,V+2),D.push(V+1,V+3,V+2)}var F=new r["BufferGeometry"];F.setAttribute("position",new r["Float32BufferAttribute"](E,3)),F.setIndex(D),F.computeVertexNormals(),e.geometry&&e.geometry.dispose(),e.geometry=F,e.userData.lastTaper=M}}}else{var X=jt(t.brushType||e.userData.stroke.brushType,"standard");n.map&&n.map!==X&&n.map.dispose(),X&&(n.map=X,n.alphaMap=X,n.useMap=1,n.transparent=!0,"soft"===t.brushType||"noise"===t.brushType?(n.alphaTest=0,n.depthWrite=!1):(n.alphaTest=.5,n.depthWrite=!0),n.uniforms.map&&(n.uniforms.map.value=X),n.uniforms.alphaMap&&(n.uniforms.alphaMap.value=X),n.opacity<1&&(n.alphaTest=0,n.depthWrite=!1))}}},updateFill:function(e,t){e&&e.userData.fill&&Object.assign(e.userData.fill,t)},animateLines:function(e){var t=!1;if(!rb)return!1;var n=function(n){n.userData&&n.userData.stroke&&n.userData.stroke.animationSpeed>0&&n.material.uniforms&&n.material.uniforms.dashOffset&&(n.material.uniforms.dashOffset.value-=n.userData.stroke.animationSpeed*e,t=!0)};return rb.traverse((function(e){e.isMesh&&e.userData.stroke&&n(e)})),t}},kt=(n("6062"),!1),Mt=function e(){kt&&(requestAnimationFrame(e),ab())},It=function(){kt=!0,Mt()},Ct=function(){kt=!1},St={s:void 0,dragged:!1,transformMode:"combined",vertexSelection:function(){function e(){Object(v["a"])(this,e),this.start=new r["Vector2"],this.end=new r["Vector2"],this.cssStart=new r["Vector2"],this.cssEnd=new r["Vector2"]}return Object(y["a"])(e,[{key:"pointInRect",value:function(e,t,n,o,i,r){var a=Math.min(n,i),s=Math.max(n,i),c=Math.min(o,r),l=Math.max(o,r);return a<=e&&e<=s&&c<=t&&t<=l}},{key:"getObjectBoundingBoxPoints",value:function(e){var t;if(void 0!=e.geometry.boundingBox){t=e.geometry.boundingBox;var n=[new r["Vector3"],new r["Vector3"],new r["Vector3"],new r["Vector3"],new r["Vector3"],new r["Vector3"],new r["Vector3"],new r["Vector3"],new r["Vector3"]];return n[0].set(t.min.x,t.min.y,t.min.z),n[1].set(t.min.x,t.min.y,t.max.z),n[2].set(t.min.x,t.max.y,t.min.z),n[3].set(t.min.x,t.max.y,t.max.z),n[4].set(t.max.x,t.min.y,t.min.z),n[5].set(t.max.x,t.min.y,t.max.z),n[6].set(t.max.x,t.max.y,t.min.z),n[7].set(t.max.x,t.max.y,t.max.z),n[8].set(e.geometry.boundingSphere.center.x,e.geometry.boundingSphere.center.y,e.geometry.boundingSphere.center.z),n.forEach((function(t){t.applyMatrix4(e.matrixWorld),t.project(ib)})),n}}},{key:"select",value:function(){var e=this,t=new Array,n=function n(o){o.forEach((function(o){if(o.isGroup&&n(o.children),2==o.layers.mask&&o.visible){var i=e.getObjectBoundingBoxPoints(o);if(void 0!=i)for(var a=i.length;a--;){var s=i[a];if(e.pointInRect(s.x,s.y,e.start.x,e.start.y,e.end.x,e.end.y)&&o.geometry&&o.geometry.points)for(var c=o.geometry.points.length;c--;){var l=new r["Vector3"](o.geometry.points[c].x,o.geometry.points[c].y,o.geometry.points[c].z);if(l.applyMatrix4(o.matrixWorld),l.project(ib),e.pointInRect(l.x,l.y,e.start.x,e.start.y,e.end.x,e.end.y))return void t.push(o)}}}}))};return n(rb.children),t}}]),e}(),selection:function(){function e(){Object(v["a"])(this,e),this.selected=new Array,this.undoRedoSelection=new Array,this.undoRedoMatrix=void 0,this.selector=new St.vertexSelection,this.helper=void 0,this.controls=void 0,this.group,this.raycaster=new r["Raycaster"],this.raycaster.params.Line.threshold=1,this.raycaster.layers.set(1),this.color="red"}return Object(y["a"])(e,[{key:"start",value:function(e,t,n,o){this.raycaster.setFromCamera(new r["Vector2"](e,t),ib);try{var i=this.raycaster.intersectObjects(rb.children,!0);if(i.length>0){var a=i[0].object;console.log("Selection Hit:",a),this.selected.push(a)}else console.log("Selection Miss")}catch(s){console.error("Selection Error",s)}this.selector.start.x=e,this.selector.start.y=t,this.selector.cssStart.x=n,this.selector.cssStart.y=o}},{key:"move",value:function(e,t){0==this.selected.length&&console.log(e,t)}},{key:"end",value:function(e,t){var n=this;this.selector.end.x=e,this.selector.end.y=t;var o=this.selector.select();try{o.forEach((function(e){n.selected.push(e)}))}catch(i){}this.selected=Object(m["a"])(new Set(this.selected)),0!=this.selected.length?(this.select(this.selected),ob.render(rb,ib)):this.deselect()}},{key:"select",value:function(e,t){this.select_internal(e,t);var n=this.undoRedoSelection;this.selected.forEach((function(e){n.push(e.uuid)})),mt.add({undo:function(){console.log("undoing select"),St.s.deselect(),ob.render(rb,ib)},redo:function(){console.log("redoing select");var e=[];n.forEach((function(t){e.push(rb.getObjectByProperty("uuid",t))})),St.s.select(e),ob.render(rb,ib)}}),ft.$.ctx.updateUi()}},{key:"select_internal",value:function(e,t){var n=this;if(console.log("select_internal called with:",e.length,"items"),1==e.length){this.toggleSelectionColor(e[0],!0),this.controls=new le(ib,ob.domElement),this.controls.mode=St.transformMode,this.controls.attach(e[0]),this.controls.addEventListener("mouseDown",(function(){It();var e=new r["Vector3"];this.object.getWorldPosition(e);var t=new r["Quaternion"];this.object.getWorldQuaternion(t);var n=new r["Vector3"];this.object.getWorldScale(n),this.userData.startingTransform={position:e,quaternion:t,scale:n},Kf.$.ctx.setTransformToolbarDisplay(!1)})),this.controls.addEventListener("change",(function(){kt||(St.s&&St.s.helper&&St.s.helper.update(),ob.render(rb,ib))})),this.controls.addEventListener("objectChange",(function(){et.updateMirrorOf(this.object,rb),St.s&&St.s.helper&&St.s.helper.update(),Kf&&Kf.setSelectionPosition&&Kf.setSelectionPosition({x:this.object.position.x,y:this.object.position.y,z:this.object.position.z})})),this.controls.addEventListener("mouseUp",(function(){Ct();var e=new r["Vector3"];this.object.getWorldPosition(e);var t=new r["Quaternion"];this.object.getWorldQuaternion(t);var n=new r["Vector3"];this.object.getWorldScale(n);var o=this.userData.startingTransform.position,i=this.userData.startingTransform.quaternion,a=this.userData.startingTransform.scale;o.equals(e)&&i.equals(t)&&a.equals(n)||mt.add({undo:function(){St.s.controls.object.position.copy(o),St.s.controls.object.quaternion.copy(i),St.s.controls.object.scale.copy(a),St.s.helper.update(),Kf.$.ctx.setTransformToolbarDisplay(!0);var e=St.s.calculateTransfromToolbarPosition();Kf.$.ctx.setTransformToolbarPosition({left:e.x,top:e.y,location:e.location}),St.s.helper.update(),ob.render(rb,ib)},redo:function(){St.s.controls.object.position.copy(e),St.s.controls.object.quaternion.copy(t),St.s.controls.object.scale.copy(n),St.s.helper.update(),Kf.$.ctx.setTransformToolbarDisplay(!0);var o=St.s.calculateTransfromToolbarPosition();Kf.$.ctx.setTransformToolbarPosition({left:o.x,top:o.y,location:o.location}),St.s.helper.update(),ob.render(rb,ib)}}),Kf.$.ctx.setTransformToolbarDisplay(!0);var s=St.s.calculateTransfromToolbarPosition();Kf.$.ctx.setTransformToolbarPosition({left:s.x,top:s.y,location:s.location}),St.s.helper.update(),ob.render(rb,ib)})),this.helper=new r["BoxHelper"](e[0],new r["Color"](this.color)),rb.add(this.controls),rb.add(this.helper),this.helper.geometry.computeBoundingBox(),this.helper.update(),Kf.$.ctx.setTransformToolbarDisplay(!0);var o=this.calculateTransfromToolbarPosition();Kf.$.ctx.setTransformToolbarPosition({left:o.x,top:o.y,location:o.location})}else{this.group=new r["Group"],rb.add(this.group),t?(this.group.applyMatrix4(t),this.undoRedoMatrix=this.group.matrix):this.undoRedoMatrix=this.group.matrix;var i=new r["Vector3"];e.forEach((function(e){n.toggleSelectionColor(e,!0),i.add(e.position)})),i.divideScalar(e.length),this.group.position.set(i.x,i.y,i.z),e.forEach((function(e){var t=e.clone();rb.add(t),n.group.attach(t),t.userData.uuid=e.uuid,t.visible=!1})),this.controls=new le(ib,ob.domElement),this.controls.mode=St.transformMode,this.controls.attach(this.group),this.controls.addEventListener("mouseDown",(function(){It();var e=new r["Vector3"];this.object.getWorldPosition(e);var t=new r["Quaternion"];this.object.getWorldQuaternion(t);var n=new r["Vector3"];this.object.getWorldScale(n),this.userData.startingTransform={position:e,quaternion:t,scale:n},Kf.$.ctx.setTransformToolbarDisplay(!1)})),this.controls.addEventListener("change",(function(){kt||(St.s&&St.s.helper&&St.s.helper.update(),ob.render(rb,ib))})),this.controls.addEventListener("objectChange",(function(){St.s&&St.s.helper&&St.s.helper.update(),Kf&&Kf.setSelectionPosition&&this.object&&Kf.setSelectionPosition({x:this.object.position.x,y:this.object.position.y,z:this.object.position.z}),this.object.children.forEach((function(e){var t=new r["Vector3"];e.getWorldPosition(t);var n=new r["Quaternion"];e.getWorldQuaternion(n);var o=new r["Vector3"];e.getWorldScale(o);var i=rb.getObjectByProperty("uuid",e.userData.uuid);i.position.copy(t),i.quaternion.copy(n),i.scale.copy(o),et.updateMirrorOf(i,rb)}))})),this.controls.addEventListener("mouseUp",(function(){Ct();var e=new r["Vector3"];this.object.getWorldPosition(e);var t=new r["Quaternion"];this.object.getWorldQuaternion(t);var n=new r["Vector3"];this.object.getWorldScale(n);var o=this.userData.startingTransform.position,i=this.userData.startingTransform.quaternion,a=this.userData.startingTransform.scale,s=t.clone().invert();s.multiply(i),o.equals(e)&&i.equals(t)&&a.equals(n)||mt.add({undo:function(){St.s.controls.object.position.copy(o),St.s.controls.object.quaternion.copy(i),St.s.controls.object.scale.copy(a),St.s.helper.update(),Kf.$.ctx.setTransformToolbarDisplay(!0);var e=St.s.calculateTransfromToolbarPosition();Kf.$.ctx.setTransformToolbarPosition({left:e.x,top:e.y,location:e.location}),St.s.helper.update(),St.s.controls.object.children.forEach((function(e){var t=new r["Vector3"];e.getWorldPosition(t);var n=new r["Quaternion"];e.getWorldQuaternion(n);var o=new r["Vector3"];e.getWorldScale(o);var i=rb.getObjectByProperty("uuid",e.userData.uuid);i.position.copy(t),i.quaternion.copy(n),i.scale.copy(o),et.updateMirrorOf(i,rb)})),ob.render(rb,ib)},redo:function(){St.s.controls.object.position.copy(e),St.s.controls.object.quaternion.copy(t),St.s.controls.object.scale.copy(n),St.s.helper.update(),Kf.$.ctx.setTransformToolbarDisplay(!0);var o=St.s.calculateTransfromToolbarPosition();Kf.$.ctx.setTransformToolbarPosition({left:o.x,top:o.y,location:o.location}),St.s.helper.update(),St.s.controls.object.children.forEach((function(e){var t=new r["Vector3"];e.getWorldPosition(t);var n=new r["Quaternion"];e.getWorldQuaternion(n);var o=new r["Vector3"];e.getWorldScale(o);var i=rb.getObjectByProperty("uuid",e.userData.uuid);i.position.copy(t),i.quaternion.copy(n),i.scale.copy(o),et.updateMirrorOf(i,rb)})),ob.render(rb,ib)}}),Kf.$.ctx.setTransformToolbarDisplay(!0);var c=St.s.calculateTransfromToolbarPosition();Kf.$.ctx.setTransformToolbarPosition({left:c.x,top:c.y,location:c.location}),St.s.helper.update(),ob.render(rb,ib)})),rb.add(this.controls),this.helper=new r["BoxHelper"](this.group,new r["Color"](this.color)),rb.add(this.helper),this.helper.geometry.computeBoundingBox(),this.helper.update()}if(Kf.$.ctx.setTransformToolbarDisplay(!0),Kf&&Kf.setSelectionPosition&&this.controls.object){var a=new r["Vector3"];this.controls.object.getWorldPosition(a),Kf.setSelectionPosition({x:a.x,y:a.y,z:a.z})}var s=this.calculateTransfromToolbarPosition();Kf.$.ctx.setTransformToolbarPosition({left:s.x,top:s.y,location:s.location}),this.helper.update(),ob.render(rb,ib)}},{key:"toggleSelectionColor",value:function(e,t){t?e.material.color=new r["Color"](this.color):0!=e.userData.stroke&&(e.material.color=new r["Color"](e.userData.stroke.color))}},{key:"deselect",value:function(){if(void 0!=this.controls){this.deselect_internal();var e=this.undoRedoSelection;this.selected.forEach((function(t){e.push(t.uuid)}));var t=this.undoRedoMatrix;mt.add({undo:function(){console.log("undoing deselect");var n=[];e.forEach((function(e){n.push(rb.getObjectByProperty("uuid",e))})),St.s=new St.selection,St.s.select(n,t),ob.render(rb,ib)},redo:function(){console.log("redo deselect"),St.s.deselect(),ob.render(rb,ib)}}),ft.$.ctx.updateUi(),ob.render(rb,ib)}}},{key:"deselect_internal",value:function(){if(this.controls&&this.controls.object)switch(!0){case"Mesh"==this.controls.object.type:this.undoRedoSelection=new Array,this.undoRedoSelection.push(this.controls.object.uuid),this.toggleSelectionColor(this.controls.object,!1),rb.remove(this.controls),rb.remove(this.helper),this.controls.detach(),this.controls.dispose(),this.controls=void 0,this.helper=void 0;break;case"Group"==this.controls.object.type:this.undoRedoSelection=new Array,this.undoRedoMatrix=this.controls.object.matrix,this.controls.object.children.forEach;for(var e=0;e<this.controls.object.children.length;e++)this.undoRedoSelection.push(this.controls.object.children[e].userData.uuid),this.toggleSelectionColor(this.controls.object.children[e],!1);rb.remove(this.group),rb.remove(this.controls),rb.remove(this.helper),this.controls.detach(),this.controls.dispose(),this.controls=void 0,this.helper=void 0;break;default:}else this.controls&&(rb.remove(this.controls),this.controls.detach(),this.controls.dispose(),this.controls=void 0),this.helper&&(rb.remove(this.helper),this.helper=void 0),this.group&&rb.remove(this.group);Kf&&Kf.$.ctx&&Kf.$.ctx.setTransformToolbarDisplay(!1)}},{key:"duplicate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r["Vector3"](1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;console.log("Duplicate triggered. Offset:",e,"Copies:",t);var n=[],o=[];if(this.controls&&this.controls.object?"Mesh"==this.controls.object.type?o.push(this.controls.object):"Group"==this.controls.object.type&&this.controls.object.children.forEach((function(e){var t=rb.getObjectByProperty("uuid",e.userData.uuid);t&&o.push(t)})):this.selected.length>0&&(o=this.selected),0!==o.length){o.forEach((function(e){return n.push(e.uuid)}));for(var i=[],a=function(t){o.forEach((function(n){var o=n.clone();if(o.uuid=r["MathUtils"].generateUUID(),o.material)try{o.material=o.material.clone()}catch(s){console.warn("Clone material failed",s)}var a=e.clone().multiplyScalar(t);o.position.add(a),rb.add(o),i.push(o),o.userData.mirrorAxis&&et.object(o,o.userData.mirrorAxis,rb)}))},s=1;s<=t;s++)a(s);this.deselect_internal(),this.selected=i,this.select_internal(this.selected),ob.render(rb,ib),mt.add({undo:function(){St.s.deselect_internal(),i.forEach((function(e){e.parent?e.parent.remove(e):rb.remove(e),e.userData&&e.userData.mirrorAxis&&et.eraseMirrorOf(e),e.geometry&&e.geometry.dispose(),e.material&&(e.material.map&&e.material.map.dispose(),e.material.dispose())}));var e=[];n.forEach((function(t){var n=rb.getObjectByProperty("uuid",t);n&&e.push(n)})),e.length&&(St.s=new St.selection,St.s.select(e)),ob.render(rb,ib)},redo:function(){St.s&&St.s.duplicate(e,t)}}),ft.$.ctx.updateUi()}}},{key:"calculateTransfromToolbarPosition",value:function(){return{x:window.innerWidth/2,y:window.innerHeight-250,location:"fixed"}}},{key:"cancel",value:function(){this.s=void 0}}]),e}(),transforming:function(){return void 0!=this.s&&(void 0!==this.s.controls&&(null!=this.s.controls.axis||0!=this.s.controls.dragging||0!=this.dragged))},onStart:function(e,t,n,o,i){var r=this;if(0==this.transforming()){var a=[];void 0!=this.s&&(i&&this.s.controls&&this.s.controls.object&&("Mesh"===this.s.controls.object.type?a.push(this.s.controls.object):"Group"===this.s.controls.object.type&&this.s.controls.object.children.forEach((function(e){var t=e.userData.uuid;if(rb){var n=rb.getObjectByProperty("uuid",t);n&&a.push(n)}}))),this.s.deselect()),this.s=new this.selection,a.length>0&&(this.s.selected=a,a.forEach((function(e){r.s.toggleSelectionColor(e,!0)}))),this.s.start(e,t,n,o)}},onMove:function(e,t){0==this.transforming()?this.s.move(e,t):this.dragged=!0},onEnd:function(e,t){0==this.transforming()&&this.s&&this.s.end(e,t),this.dragged=!1},onCancel:function(){this.s&&this.s.cancel()}},Tt={name:"Input",data:function(){return{mouse:{down:!1,tx:void 0,ty:void 0,cx:void 0,cy:void 0,force:0,touchLengthHistory:[0,0],multiTouched:!1,eventCancelled:!1},displayTouches:!1,touches:[],movingCanvas:!1,isTransformingSelection:!1}},props:{selectedTool:String,toolEnabled:Boolean,mirror:[Boolean,String],stroke:[Object],fill:[Object],radial:Boolean,sectors:Number,radialAxis:String,localSymmetry:Boolean,snapConfig:Object,drawingMode:{type:String,default:"surface"}},emits:["mouse-coordinates"],methods:{updateMouseCoordinates:function(e){e.touches?(this.mouse.tx=e.changedTouches[0].pageX/window.innerWidth*2-1,this.mouse.ty=-e.changedTouches[0].pageY/window.innerHeight*2+1,this.mouse.cx=e.changedTouches[0].pageX,this.mouse.cy=e.changedTouches[0].pageY,this.mouse.touchLengthHistory.push(e.touches.length),this.mouse.touchLengthHistory.shift(),e.touches[0]&&void 0!==e.touches[0]["force"]?this.mouse.force=e.touches[0]["force"]:this.mouse.force=0):0==e.button&&(this.mouse.tx=e.clientX/window.innerWidth*2-1,this.mouse.ty=-e.clientY/window.innerHeight*2+1,this.mouse.cx=e.clientX,this.mouse.cy=e.clientY)},onStart:function(e){var t;if(!(e.button&&0!=e.button||!1===this.toolEnabled)&&Zf){if(this.touches=[],(null===(t=e.touches)||void 0===t?void 0:t.length)>0&&1==this.displayTouches)for(var n=0;n<e.touches.length;n++)this.touches.push(e.touches[n]);var o;if(0==e.button||1==e.touches.length||e.touches.force>0)switch(this.mouse.down=!0,this.mouse.eventCancelled=!1,this.mouse.multiTouched=!1,this.mouse.clickStartTime=Date.now(),this.mouse.startCx=this.mouse.cx,this.mouse.startCy=this.mouse.cy,this.selectedTool){case"draw":if(o=new r["Raycaster"],o.setFromCamera(new r["Vector2"](this.mouse.tx,this.mouse.ty),ib),"combined"===Ve.mode&&Ve.children.length>0&&void 0!==o.intersectObjects(Ve.children[0].children[10].children)[0]&&!0===Ve.enabled||"scale"===Ve.mode&&Ve.children.length>0&&void 0!==o.intersectObjects(Ve.children[0].children[5].children)[0]&&!0===Ve.enabled)return this.movingCanvas=!0,void(Zf.enabled=!1);var i=this.getIntersection(this.mouse.tx,this.mouse.ty);if(i.hit){!0===Ve.enabled&&(Ve.visible=!1,ab()),Zf.enabled=!1;var a=this.findSnap(this.mouse.tx,this.mouse.ty,i.point),s=this.mouse.tx,c=this.mouse.ty,l=0;i.unproject||(s=i.point.x,c=i.point.y,l=i.point.z),xt.onStart(s,c,l,this.mouse.force,i.unproject,this.mirror,this.stroke,this.fill,this.radial,this.sectors,this.radialAxis,this.localSymmetry,a)}else Zf.enabled=!0;break;case"erase":Zf.enabled=!1,Ot.onStart(this.mouse.cx,this.mouse.cy);break;case"select":if(St.transforming&&St.transforming())return this.isTransformingSelection=!0,void(Zf.enabled=!1);this.isTransformingSelection=!1,Zf.enabled=!1,St.onStart(this.mouse.tx,this.mouse.ty,this.mouse.cx,this.mouse.cy,e.ctrlKey);break;default:break}else if(this.mouse.multiTouched=!0,1===this.mouse.touchLengthHistory[0]&&2===this.mouse.touchLengthHistory[1])switch(this.mouse.eventCancelled=!0,this.selectedTool){case"draw":xt.onCancel();break;case"erase":Ot.onCancel();break;case"select":St.onCancel();break;default:break}}},onMove:function(e){var t;if(!(e.button&&0!=e.button||!1===this.toolEnabled)&&Zf){if(this.touches=[],(null===(t=e.touches)||void 0===t?void 0:t.length)>0&&1==this.displayTouches)for(var n=0;n<e.touches.length;n++)this.touches.push(e.touches[n]);if(this.mouse.down){if(0==e.button||1==e.touches.length)switch(this.selectedTool){case"draw":if(!1===Zf.enabled&&!1===this.movingCanvas){var o=this.mouse.tx,i=this.mouse.ty,r=this.getIntersection(o,i),a=o,s=i,c=0;r.hit&&!r.unproject&&(a=r.point.x,s=r.point.y,c=r.point.z);var l=this.findSnap(o,i,r.point);l&&this.snapIndicator?(this.snapIndicator.position.copy(l),this.snapIndicator.visible=!0):this.snapIndicator&&(this.snapIndicator.visible=!1),xt.onMove(a,s,c,this.mouse.force,!r.hit||r.unproject,l)}else if(!0===this.movingCanvas)return;break;case"erase":Ot.onMove(this.mouse.cx,this.mouse.cy);break;case"select":St.onMove(this.mouse.cx,this.mouse.cy);break;default:break}}else if("draw"===this.selectedTool&&this.toolEnabled&&this.snapConfig&&this.snapConfig.enabled){var u=this.getIntersection(this.mouse.tx,this.mouse.ty),d=this.findSnap(this.mouse.tx,this.mouse.ty,u.point);d&&this.snapIndicator?(this.snapIndicator.position.copy(d),this.snapIndicator.visible=!0,ab()):this.snapIndicator&&this.snapIndicator.visible&&(this.snapIndicator.visible=!1,ab())}}},onEnd:function(e){if(!1!==this.toolEnabled&&Zf)if(this.touches=[],2!==e.button){if(!e.button||0==e.button){if(this.mouse.multiTouched||this.mouse.eventCancelled)return!0===Ve.enabled&&!0===Ue.visible&&(Ve.visible=!0,ab()),void(Zf.enabled=!0);switch(this.selectedTool){case"draw":if(!0===this.movingCanvas)this.movingCanvas=!1;else if(!1===Zf.enabled)xt.onEnd(this.mirror),!0===Ve.enabled&&!0===Ue.visible&&(Ve.visible=!0,ab());else{var t=Date.now()-this.mouse.clickStartTime,o=Math.sqrt(Math.pow(this.mouse.cx-this.mouse.startCx,2)+Math.pow(this.mouse.cy-this.mouse.startCy,2));t<300&&o<5&&this.toggleTopFrontView()}break;case"erase":Ot.onEnd();break;case"select":if(this.isTransformingSelection)return this.isTransformingSelection=!1,St.dragged=!1,St&&St.s&&St.s.controls&&(St.s.controls.axis=null),Zf.enabled=!0,void(!0===Ve.enabled&&!0===Ue.visible&&(Ve.visible=!0,ab()));St.onEnd(this.mouse.tx,this.mouse.ty);break;default:break}this.mouse.down=!1,this.mouse.distance=0,this.snapIndicator&&(this.snapIndicator.visible=!1),Zf.enabled=!0}}else mt.hasUndo()&&(mt.undo(),Promise.resolve().then(n.bind(null,"3dfd")).then((function(e){e.vm&&e.vm.$refs.undoRedo&&e.vm.$refs.undoRedo.updateUi()})))},toggleTopFrontView:function(){var e=new r["Vector3"];Zf.getTarget(e);var t=ib.position,n=Math.abs(t.y)>Math.abs(t.z)&&Math.abs(t.y)>Math.abs(t.x);n?Zf.rotateTo(0,Math.PI/2,!0):Zf.rotateTo(0,0,!0)},getIntersection:function(e,t){if(!ib)return{hit:!1};if(!this.drawingMode||"surface"===this.drawingMode){var n=new r["Raycaster"];n.setFromCamera(new r["Vector2"](e,t),ib);var o=n.intersectObjects([Ue]);return o.length>0?{point:o[0].point,unproject:!0,hit:!0}:{unproject:!0,hit:!1}}if("grid"===this.drawingMode){var i=new r["Raycaster"];i.setFromCamera(new r["Vector2"](e,t),ib);var a=new r["Plane"](new r["Vector3"](0,1,0),0),s=new r["Vector3"],c=i.ray.intersectPlane(a,s);return c?{point:c,unproject:!1,hit:!0}:{unproject:!1,hit:!1}}if("view"===this.drawingMode){var l=new r["Raycaster"];l.setFromCamera(new r["Vector2"](e,t),ib);var u=new r["Vector3"];Zf.getTarget(u);var d=new r["Vector3"];ib.getWorldDirection(d).normalize();var h=(new r["Plane"]).setFromNormalAndCoplanarPoint(d,u),p=l.ray.intersectPlane(h,u);return p?{point:p,unproject:!1,hit:!0}:{unproject:!1,hit:!1}}return{hit:!1}},findSnap:function(e,t,n){var o=this;if(!this.snapConfig||!this.snapConfig.enabled)return null;if(!ib||!rb)return null;var i=n||null;if(!i&&!this.snapConfig.endpoints&&!this.snapConfig.midpoints)return null;var a=new r["Raycaster"];if(a.setFromCamera(new r["Vector2"](e,t),ib),!i&&("surface"===this.drawingMode||!this.drawingMode)){var s=a.intersectObjects([Ue]);if(0===s.length)return null}if(!i)return null;var c=this.snapConfig.threshold||.5,l=null,u=c;if(rb.traverse((function(e){if(e.isMesh&&e.userData&&e.userData.stroke){var t=e.userData.vertices;if(!t||0===t.length)return;if(o.snapConfig.endpoints){var n=Object(g["a"])(r["Vector3"],Object(m["a"])(t[0])),a=Object(g["a"])(r["Vector3"],Object(m["a"])(t[t.length-1]));[n,a].forEach((function(e){var t=e.clone();if("grid"===o.drawingMode)t.y=0;else if("view"===o.drawingMode){var n=new r["Vector3"];Zf.getTarget(n);var a=new r["Vector3"];ib.getWorldDirection(a).normalize();var s=(new r["Plane"]).setFromNormalAndCoplanarPoint(a,n);s.projectPoint(e,t)}var c=i.distanceTo(t);c<u&&(u=c,l=t)}))}if(o.snapConfig.midpoints)for(var s=0;s<t.length-1;s++){var c=Object(g["a"])(r["Vector3"],Object(m["a"])(t[s])),d=Object(g["a"])(r["Vector3"],Object(m["a"])(t[s+1])),h=c.clone().add(d).multiplyScalar(.5),p=h.clone();if("grid"===o.drawingMode)p.y=0;else if("view"===o.drawingMode){var f=new r["Vector3"];Zf.getTarget(f);var b=new r["Vector3"];ib.getWorldDirection(b).normalize();var v=(new r["Plane"]).setFromNormalAndCoplanarPoint(b,f);v.projectPoint(h,p)}var y=i.distanceTo(p);y<u&&(u=y,l=p)}}})),this.snapConfig.grid&&!l)if("grid"===this.drawingMode){var d=new r["Vector3"](Math.round(i.x),0,Math.round(i.z));i.distanceTo(d)<c&&(l=d)}else if("surface"===this.drawingMode){var h=new r["Vector3"](Math.round(i.x),Math.round(i.y),Math.round(i.z));i.distanceTo(h)<c&&(l=h)}return l},handleInput:function(e){if("contextmenu"!==e.type)switch(this.updateMouseCoordinates(e),e.type){case"touchstart":this.onStart(e);break;case"touchmove":this.onMove(e);break;case"touchend":!1===this.toolEnabled&&this.$emit("mouse-coordinates",{x:this.mouse.tx,y:this.mouse.ty}),this.onEnd(e);break;case"mousedown":this.onStart(e);break;case"mousemove":this.onMove(e);break;case"mouseup":!1===this.toolEnabled&&this.$emit("mouse-coordinates",{x:this.mouse.tx,y:this.mouse.ty}),this.onEnd(e);break;default:}else e.preventDefault()}},watch:{},mounted:function(){var e=this;this.$nextTick((function(){if(rb||console.warn("Input.vue: Scene still not ready after nextTick."),window.location.hash){var t=window.location.hash.substring(1);"displayTouches"===t&&(e.displayTouches=!0)}rb&&(e.snapIndicator=new r["Mesh"](new r["SphereGeometry"](.1,16,16),new r["MeshBasicMaterial"]({color:4359668,transparent:!0,opacity:.8,depthTest:!1,depthWrite:!1})),e.snapIndicator.renderOrder=999,e.snapIndicator.visible=!1,rb.add(e.snapIndicator))}))}};n("4184");const Et=ze()(Tt,[["render",b]]);var Dt=Et,Bt=n("e039"),Pt=n.n(Bt),Qt=n("5abc"),Gt=n.n(Qt),Ht=n("f03d"),Rt=n.n(Ht),Yt=function(e){return Object(o["o"])("data-v-6f17be84"),e=e(),Object(o["n"])(),e},Lt={class:"tools-container"},zt={class:"tool-group"},Wt=Yt((function(){return Object(o["f"])("img",{src:Pt.a,alt:"Select"},null,-1)})),Ut=Yt((function(){return Object(o["f"])("span",{class:"tooltip"},"Select",-1)})),Vt=[Wt,Ut],Ft=Yt((function(){return Object(o["f"])("img",{src:Gt.a,alt:"Draw"},null,-1)})),Xt=Yt((function(){return Object(o["f"])("span",{class:"tooltip"},"Draw",-1)})),Nt=[Ft,Xt],qt=Yt((function(){return Object(o["f"])("img",{src:Rt.a,alt:"Erase"},null,-1)})),_t=Yt((function(){return Object(o["f"])("span",{class:"tooltip"},"Erase",-1)})),Zt=[qt,_t],Kt=Yt((function(){return Object(o["f"])("div",{class:"separator"},null,-1)})),$t={class:"tool-group brushes"},Jt=["onClick","title"],en={class:"brush-emoji"},tn={class:"tooltip"},nn=Yt((function(){return Object(o["f"])("div",{class:"separator"},null,-1)})),on=Yt((function(){return Object(o["f"])("span",{class:"properties-icon"},"",-1)})),rn=Yt((function(){return Object(o["f"])("span",{class:"tooltip"},"Properties",-1)})),an=[on,rn],sn=Yt((function(){return Object(o["f"])("span",{class:"properties-icon"},"",-1)})),cn=Yt((function(){return Object(o["f"])("span",{class:"tooltip"},"Scene",-1)})),ln=[sn,cn],un=Yt((function(){return Object(o["f"])("span",{class:"properties-icon"},"",-1)})),dn=Yt((function(){return Object(o["f"])("span",{class:"tooltip"},"Shapes",-1)})),hn=[un,dn],pn=Yt((function(){return Object(o["f"])("span",{class:"properties-icon"},"",-1)})),fn=Yt((function(){return Object(o["f"])("span",{class:"tooltip"},"Snap",-1)})),bn=[pn,fn],gn=Yt((function(){return Object(o["f"])("span",{class:"properties-icon"},"",-1)})),mn=Yt((function(){return Object(o["f"])("span",{class:"tooltip"},"Plane",-1)})),vn=[gn,mn],yn=Yt((function(){return Object(o["f"])("div",{class:"separator"},null,-1)})),wn=Yt((function(){return Object(o["f"])("span",{class:"properties-icon"},"",-1)})),On=Yt((function(){return Object(o["f"])("span",{class:"tooltip"},"AR Mode",-1)})),jn=[wn,On],An=Yt((function(){return Object(o["f"])("div",{class:"separator"},null,-1)})),xn=Yt((function(){return Object(o["f"])("span",{class:"properties-icon"},"",-1)})),kn=Yt((function(){return Object(o["f"])("span",{class:"tooltip"},"Code",-1)})),Mn=[xn,kn];function In(e,t,n,i,r,a){var s=Object(o["s"])("draggable-window");return Object(o["m"])(),Object(o["c"])(s,{ref:"win",title:"Tools",initialX:n.initialX||r.window.innerWidth/2-300,initialY:n.initialY||12,reopenTrigger:n.reopenTrigger,"is-open":n.isOpen,onClose:t[10]||(t[10]=function(t){return e.$emit("close")})},{default:Object(o["z"])((function(){return[Object(o["f"])("div",Lt,[Object(o["f"])("div",zt,[Object(o["f"])("button",{class:Object(o["k"])(["tool-btn",{active:"select"===r.tool}]),onClick:t[0]||(t[0]=function(e){return a.setTool("select",!0)}),title:"Select"},Vt,2),Object(o["f"])("button",{class:Object(o["k"])(["tool-btn",{active:"draw"===r.tool}]),onClick:t[1]||(t[1]=function(e){return a.setTool("draw",!0)}),title:"Draw"},Nt,2),Object(o["f"])("button",{class:Object(o["k"])(["tool-btn",{active:"erase"===r.tool}]),onClick:t[2]||(t[2]=function(e){return a.setTool("erase",!0)}),title:"Erase"},Zt,2)]),Kt,Object(o["f"])("div",$t,[(Object(o["m"])(!0),Object(o["e"])(o["a"],null,Object(o["q"])(r.brushes,(function(e){return Object(o["m"])(),Object(o["e"])("button",{key:e.name,class:"tool-btn brush-btn",onClick:function(t){return a.selectPreset(e)},title:e.name},[Object(o["f"])("span",en,Object(o["t"])(e.icon),1),Object(o["f"])("span",tn,Object(o["t"])(e.name),1)],8,Jt)})),128))]),nn,Object(o["f"])("button",{class:"tool-btn",onClick:t[3]||(t[3]=function(){return a.toggleProperties&&a.toggleProperties.apply(a,arguments)}),title:"Properties"},an),Object(o["f"])("button",{class:"tool-btn",onClick:t[4]||(t[4]=function(){return a.toggleScene&&a.toggleScene.apply(a,arguments)}),title:"Scene"},ln),Object(o["f"])("button",{class:"tool-btn",onClick:t[5]||(t[5]=function(t){return e.$emit("toggle-2d-shapes")}),title:"2D Shapes"},hn),Object(o["f"])("button",{class:"tool-btn",onClick:t[6]||(t[6]=function(t){return e.$emit("toggle-snap")}),title:"Snap Settings"},bn),Object(o["f"])("button",{class:"tool-btn",onClick:t[7]||(t[7]=function(t){return e.$emit("toggle-drawing-modes")}),title:"Drawing Plane"},vn),yn,Object(o["f"])("button",{class:Object(o["k"])(["tool-btn",{active:n.isArActive}]),onClick:t[8]||(t[8]=function(t){return e.$emit("toggle-ar")}),title:"AR Mode"},jn,2),An,Object(o["f"])("button",{class:"tool-btn",onClick:t[9]||(t[9]=function(t){return e.$emit("toggle-code-editor")}),title:"Code Editor"},Mn)])]})),_:1},8,["initialX","initialY","reopenTrigger","is-open"])}var Cn={name:"ToolSelector",components:{DraggableWindow:qe},data:function(){return{tool:void 0,window:window,brushes:[{name:"Pencil",icon:"",settings:{strokeWidth:2,strokeColor:{r:50,g:50,b:50},stroke:!0,fill:!1}},{name:"Pen",icon:"",settings:{strokeWidth:5,strokeColor:{r:0,g:0,b:0},stroke:!0,fill:!1}},{name:"Marker",icon:"",settings:{strokeWidth:20,strokeColor:{r:255,g:0,b:0},stroke:!0,fill:!1}},{name:"Dashed Pencil",icon:"",settings:{strokeWidth:2,strokeColor:{r:50,g:50,b:50},stroke:!0,fill:!1,dashArray:.1,dashRatio:.5}},{name:"Highlighter",icon:"",settings:{strokeWidth:30,strokeColor:{r:255,g:255,b:0},stroke:!0,fill:!1,opacity:.3,transparent:!0,depthTest:!1,alphaTest:.01}},{name:"Ghost Ink",icon:"",settings:{strokeWidth:4,strokeColor:{r:200,g:200,b:255},stroke:!0,fill:!1,opacity:.3,transparent:!0,alphaTest:0}},{name:"Cinta",icon:"",settings:{strokeWidth:2,strokeColor:{r:255,g:0,b:100},fillColor:{r:255,g:100,b:150},stroke:!0,fill:!0}}]}},props:{selectedTool:String,reopenTrigger:Number,isOpen:Boolean,initialX:Number,initialY:Number,isArActive:Boolean},emits:["selected-tool","set-preset","toggle-properties","toggle-scene","toggle-2d-shapes","toggle-snap","toggle-drawing-modes","toggle-ar","toggle-code-editor","close"],watch:{selectedTool:function(e){this.tool=e}},methods:{getPosition:function(){return{x:this.$refs.win.currentX,y:this.$refs.win.currentY}},setTool:function(e,t){this.tool=e,t&&this.$emit("selected-tool",e)},selectPreset:function(e){this.setTool("draw",!0),this.$emit("set-preset",e.settings)},toggleProperties:function(){this.$emit("toggle-properties")},toggleScene:function(){this.$emit("toggle-scene")}},mounted:function(){this.setTool(this.selectedTool)}};n("de29");const Sn=ze()(Cn,[["render",In],["__scopeId","data-v-6f17be84"]]);var Tn=Sn,En=function(e){return Object(o["o"])("data-v-362d5e44"),e=e(),Object(o["n"])(),e},Dn={class:"tools-container"},Bn={class:"tool-group brushes"},Pn=["onClick","title"],Qn={class:"brush-emoji"},Gn={class:"tooltip"},Hn=En((function(){return Object(o["f"])("div",{class:"separator"},null,-1)})),Rn=En((function(){return Object(o["f"])("span",{class:"properties-icon"},"",-1)})),Yn=En((function(){return Object(o["f"])("span",{class:"tooltip"},"Properties",-1)})),Ln=[Rn,Yn];function zn(e,t,n,i,r,a){var s=Object(o["s"])("draggable-window");return Object(o["m"])(),Object(o["c"])(s,{ref:"win",title:"Tube Tools",initialX:void 0!==n.initialX?n.initialX:20,initialY:void 0!==n.initialY?n.initialY:100,reopenTrigger:n.reopenTrigger,"is-open":n.isOpen,onClose:t[1]||(t[1]=function(t){return e.$emit("close")})},{default:Object(o["z"])((function(){return[Object(o["f"])("div",Dn,[Object(o["f"])("div",Bn,[(Object(o["m"])(!0),Object(o["e"])(o["a"],null,Object(o["q"])(r.brushes,(function(e){return Object(o["m"])(),Object(o["e"])("button",{key:e.name,class:"tool-btn brush-btn",onClick:function(t){return a.selectPreset(e)},title:e.name},[Object(o["f"])("span",Qn,Object(o["t"])(e.icon),1),Object(o["f"])("span",Gn,Object(o["t"])(e.name),1)],8,Pn)})),128))]),Hn,Object(o["f"])("button",{class:"tool-btn",onClick:t[0]||(t[0]=function(){return a.toggleProperties&&a.toggleProperties.apply(a,arguments)}),title:"Tube Properties"},Ln)])]})),_:1},8,["initialX","initialY","reopenTrigger","is-open"])}var Wn={name:"TubeToolSelector",components:{DraggableWindow:qe},data:function(){return{window:window,brushes:[{name:"Cable",icon:"",settings:{strokeWidth:.5,strokeColor:{r:100,g:100,b:255},stroke:!0,fill:!1,isTube:!0,taper:0,smoothing:5}}]}},props:{selectedTool:String,reopenTrigger:Number,isOpen:Boolean,initialX:Number,initialY:Number,isTube:Boolean},emits:["selected-tool","set-preset","toggle-properties","close"],methods:{selectPreset:function(e){this.$emit("selected-tool","draw"),this.$emit("set-preset",e.settings)},toggleProperties:function(){this.$emit("toggle-properties")}}};n("2e31");const Un=ze()(Wn,[["render",zn],["__scopeId","data-v-362d5e44"]]);var Vn=Un,Fn=function(e){return Object(o["o"])("data-v-5e4163b9"),e=e(),Object(o["n"])(),e},Xn={class:"tools-container"},Nn={class:"tool-group brushes"},qn=["onClick","title"],_n={class:"brush-emoji"},Zn={class:"tooltip"},Kn=Fn((function(){return Object(o["f"])("div",{class:"separator"},null,-1)})),$n=Fn((function(){return Object(o["f"])("span",{class:"properties-icon"},"",-1)})),Jn=Fn((function(){return Object(o["f"])("span",{class:"tooltip"},"Properties",-1)})),eo=[$n,Jn];function to(e,t,n,i,r,a){var s=Object(o["s"])("draggable-window");return Object(o["m"])(),Object(o["c"])(s,{ref:"win",title:"Strip Tools",initialX:void 0!==n.initialX?n.initialX:20,initialY:void 0!==n.initialY?n.initialY:180,reopenTrigger:n.reopenTrigger,"is-open":n.isOpen,onClose:t[1]||(t[1]=function(t){return e.$emit("close")})},{default:Object(o["z"])((function(){return[Object(o["f"])("div",Xn,[Object(o["f"])("div",Nn,[(Object(o["m"])(!0),Object(o["e"])(o["a"],null,Object(o["q"])(r.brushes,(function(e){return Object(o["m"])(),Object(o["e"])("button",{key:e.name,class:"tool-btn brush-btn",onClick:function(t){return a.selectPreset(e)},title:e.name},[Object(o["f"])("span",_n,Object(o["t"])(e.icon),1),Object(o["f"])("span",Zn,Object(o["t"])(e.name),1)],8,qn)})),128))]),Kn,Object(o["f"])("button",{class:"tool-btn",onClick:t[0]||(t[0]=function(){return a.toggleProperties&&a.toggleProperties.apply(a,arguments)}),title:"Strip Properties"},eo)])]})),_:1},8,["initialX","initialY","reopenTrigger","is-open"])}var no={name:"StripToolSelector",components:{DraggableWindow:qe},data:function(){return{window:window,brushes:[{name:"Ribbon",icon:"",settings:{strokeWidth:20,strokeColor:{r:255,g:0,b:255},stroke:!0,fill:!1,isStrip:!0,isTube:!1,taper:0,smoothing:5}}]}},props:{selectedTool:String,reopenTrigger:Number,isOpen:Boolean,initialX:Number,initialY:Number,isStrip:Boolean},emits:["selected-tool","set-preset","toggle-properties","close"],methods:{selectPreset:function(e){this.$emit("selected-tool","draw"),this.$emit("set-preset",e.settings)},toggleProperties:function(){this.$emit("toggle-properties")}}};n("2e59");const oo=ze()(no,[["render",to],["__scopeId","data-v-5e4163b9"]]);var io,ro,ao,so=oo,co=function(e){return Object(o["o"])("data-v-c6f5d5b0"),e=e(),Object(o["n"])(),e},lo={class:"viewport-controls"},uo=co((function(){return Object(o["f"])("canvas",{id:"viewportCanvas"},null,-1)})),ho=[uo],po=["disabled"],fo=co((function(){return Object(o["f"])("img",{src:I.a,alt:"Reset camera"},null,-1)})),bo=co((function(){return Object(o["f"])("span",null,"Reset Camera",-1)})),go=[fo,bo];function mo(e,t,n,i,r,a){var s=Object(o["s"])("draggable-window");return Object(o["m"])(),Object(o["c"])(s,{title:"View",initialX:r.window.innerWidth-170,initialY:12,reopenTrigger:n.reopenTrigger,"is-open":n.isOpen,onClose:t[8]||(t[8]=function(t){return e.$emit("close")})},{default:Object(o["z"])((function(){return[Object(o["f"])("div",lo,[Object(o["f"])("div",{onTouchstart:t[0]||(t[0]=function(){return a.handleInput&&a.handleInput.apply(a,arguments)}),onTouchmove:t[1]||(t[1]=function(){return a.handleInput&&a.handleInput.apply(a,arguments)}),onTouchend:t[2]||(t[2]=function(){return a.handleInput&&a.handleInput.apply(a,arguments)}),onMousedown:t[3]||(t[3]=function(){return a.handleInput&&a.handleInput.apply(a,arguments)}),onMousemove:t[4]||(t[4]=function(){return a.handleInput&&a.handleInput.apply(a,arguments)}),onMouseup:t[5]||(t[5]=function(){return a.handleInput&&a.handleInput.apply(a,arguments)}),class:"viewport-cube"},ho,32),Object(o["f"])("button",{class:"reset-btn",onClick:t[6]||(t[6]=function(e){return a.resetCamera()}),onTouchstart:t[7]||(t[7]=function(e){return a.resetCamera()}),disabled:n.cameraResetDisabled},go,40,po)])]})),_:1},8,["initialX","reopenTrigger","is-open"])}var vo={name:"ViewportCube",components:{DraggableWindow:qe},props:{quaternion:Array,cameraResetDisabled:Boolean,reopenTrigger:Number,isOpen:Boolean},emits:["close"],data:function(){return{window:window,mouse:{down:!1,tx:0,ty:0,cx:0,cy:0,dragStartPosition:new r["Vector2"],lastDragPosition:new r["Vector2"],force:0}}},methods:{updateMouseCoordinates:function(e){var t=document.getElementById("viewportCanvas"),n=t.getBoundingClientRect();if(e.touches){var o=e.changedTouches[0];this.mouse.tx=(o.clientX-n.left)/150*2-1,this.mouse.ty=-(o.clientY-n.top)/150*2+1,this.mouse.cx=o.clientX-n.left,this.mouse.cy=o.clientY-n.top,e.touches[0]&&void 0!==e.touches[0]["force"]?this.mouse.force=e.touches[0]["force"]:this.mouse.force=0}else 0==e.button&&(this.mouse.tx=(e.clientX-n.left)/150*2-1,this.mouse.ty=-(e.clientY-n.top)/150*2+1,this.mouse.cx=e.clientX-n.left,this.mouse.cy=e.clientY-n.top)},render:function(){io.render(ro,ao)},init:function(){io=new r["WebGLRenderer"]({antialias:!0,alpha:!0,canvas:document.getElementById("viewportCanvas")}),io.setPixelRatio(window.devicePixelRatio),io.setSize(150,150),ao=new r["OrthographicCamera"],ao.position.set(0,0,10),ao.zoom=160,ro=new r["Scene"],this.addViewPortCube(),this.render()},addViewPortCube:function(){var e=this,t=(new r["TextureLoader"]).load(n("5bb9")),o=(new r["TextureLoader"]).load(n("ce63")),i=(new r["TextureLoader"]).load(n("1890")),a=(new r["TextureLoader"]).load(n("40cd")),s=(new r["TextureLoader"]).load(n("092b")),c=(new r["TextureLoader"]).load(n("5e5d"),(function(){e.render()})),l=[new r["MeshBasicMaterial"]({map:t}),new r["MeshBasicMaterial"]({map:o}),new r["MeshBasicMaterial"]({map:i}),new r["MeshBasicMaterial"]({map:a}),new r["MeshBasicMaterial"]({map:s}),new r["MeshBasicMaterial"]({map:c})],u=new r["BoxGeometry"](1,1,1),d=new r["Mesh"](u,l);ro.add(d)},rotate:function(e,t){var n=150,o=2*Math.PI,i=.5,r=o*i*e/n,a=o*i*t/n;Zf.rotate(r,a,!1)},evalFaceIndexAndRepositionCamera:function(e){var t=new r["Vector3"];t=Zf.getTarget(t);var n=1e-4,o=function(e,n,o){Zf.dampingFactor=.5,Zf.enabled=!1,Zf.setLookAt(e,n,o,t.x,t.y,t.z,!0),Zf.enabled=!0,setTimeout((function(){Zf.dampingFactor=20}),100)};switch(e){case 0:case 1:o(t.x+10,t.y+n,t.z+n);break;case 2:case 3:o(t.x-10,t.y+n,t.z+n);break;case 4:case 5:o(t.x,t.y+10,t.z+n);break;case 6:case 7:o(t.x,t.y-10,t.z+n);break;case 8:case 9:o(t.x+n,t.y,t.z+10);break;case 10:case 11:o(t.x+n,t.y,t.z-10);break;default:}},onTapStart:function(){this.mouse.down=!0,this.mouse.dragStartPosition=new r["Vector2"](this.mouse.cx,this.mouse.cy),this.mouse.lastDragPosition=new r["Vector2"](this.mouse.cx,this.mouse.cy),document.addEventListener("mousemove",this.handleInput),document.addEventListener("mouseup",this.handleInput),document.addEventListener("touchmove",this.handleInput),document.addEventListener("touchend",this.handleInput)},onTapMove:function(){this.mouse.down&&(this.rotate(this.mouse.lastDragPosition.x-this.mouse.cx,this.mouse.lastDragPosition.y-this.mouse.cy),this.mouse.lastDragPosition=new r["Vector2"](this.mouse.cx,this.mouse.cy))},onTapEnd:function(e){if(this.mouse.dragStartPosition.distanceTo(this.mouse.lastDragPosition)<5){e.setFromCamera(new r["Vector2"](this.mouse.tx,this.mouse.ty),ao);try{this.evalFaceIndexAndRepositionCamera(e.intersectObjects(ro.children)[0].faceIndex)}catch(t){}}this.mouse.dragStartPosition=new r["Vector2"],this.mouse.lastDragPosition=new r["Vector2"],this.mouse.cx=0,this.mouse.cy=0,document.removeEventListener("mousemove",this.handleInput),document.removeEventListener("mouseup",this.handleInput),document.removeEventListener("touchmove",this.handleInput),document.removeEventListener("touchend",this.handleInput),this.mouse.down=!1},resetCamera:function(){Zf.dampingFactor=.5,Zf.enabled=!1,Zf.setLookAt(0,0,10,0,0,0,!0),Zf.zoomTo(3,!0),setTimeout((function(){Zf.dampingFactor=20,Zf.enabled=!0}),100)},handleInput:function(e){this.updateMouseCoordinates(e),e.preventDefault();var t=new r["Raycaster"];switch(e.type){case"mousedown":case"touchstart":this.onTapStart();break;case"mousemove":case"touchmove":this.onTapMove();break;case"touchend":case"mouseup":this.onTapEnd(t);break;default:}}},watch:{quaternion:function(e){ro.setRotationFromQuaternion(new r["Quaternion"](e[0],e[1],e[2],e[3]).invert()),this.render()}},mounted:function(){this.init(),this.render()}};n("feb7");const yo=ze()(vo,[["render",mo],["__scopeId","data-v-c6f5d5b0"]]);var wo=yo,Oo={class:"panel"},jo={key:0,class:"extra-settings"},Ao=Object(o["f"])("div",{class:"section-title"},"Brush Settings",-1),xo={class:"setting-row"},ko=Object(o["f"])("span",null,"Shape",-1),Mo={class:"ratio-buttons"},Io={class:"setting-row"},Co=Object(o["f"])("span",null,"Taper",-1),So={class:"value"},To={class:"setting-row"},Eo=Object(o["f"])("span",null,"Smooth",-1),Do={class:"value"},Bo={key:0,class:"setting-row"},Po=Object(o["f"])("span",null,"Tex Scale",-1),Qo={class:"value"},Go={class:"setting-row"},Ho=Object(o["f"])("span",null,"Wiggle",-1),Ro={class:"value"},Yo=Object(o["f"])("div",{class:"section-title",style:{"margin-top":"8px"}},"Effects",-1),Lo={class:"setting-row"},zo=Object(o["f"])("span",null,"Neon",-1),Wo={class:"ratio-buttons"},Uo={key:1,class:"setting-row"},Vo=Object(o["f"])("span",null,"Intensity",-1),Fo={class:"value"},Xo=Object(o["f"])("div",{class:"section-title",style:{"margin-top":"8px"}},"Line Settings",-1),No={class:"setting-row"},qo=Object(o["f"])("span",null,"Opacity",-1),_o={class:"value"},Zo={class:"setting-row"},Ko=Object(o["f"])("span",null,"Dash Size",-1),$o={class:"setting-row"},Jo=Object(o["f"])("span",null,"Dash Scale",-1),ei={class:"ratio-buttons"},ti=Object(o["f"])("div",{class:"section-title",style:{"margin-top":"8px"}},"Animation",-1),ni={class:"setting-row"},oi=Object(o["f"])("span",null,"Speed",-1),ii={class:"value"},ri={key:1,class:"extra-settings"},ai={class:"setting-row"},si=Object(o["f"])("span",null,"Opacity",-1),ci={class:"value"};function li(e,t,n,i,r,a){var s=Object(o["s"])("line-sliders"),c=Object(o["s"])("draggable-window");return Object(o["m"])(),Object(o["c"])(c,{title:"Properties",initialX:12,initialY:300,visible:n.forceVisible||"draw"==n.selectedTool,reopenTrigger:n.reopenTrigger,"is-open":n.isOpen,onClose:t[16]||(t[16]=function(t){return e.$emit("close")})},{default:Object(o["z"])((function(){return[Object(o["f"])("div",Oo,[Object(o["i"])(s,{mode:"stroke",active:r.stroke,onColor:a.setStrokeColor,onActive:a.setStrokeActive,onWidth:a.setStrokeWidth},null,8,["active","onColor","onActive","onWidth"]),r.stroke?(Object(o["m"])(),Object(o["e"])("div",jo,[Ao,Object(o["f"])("div",xo,[ko,Object(o["f"])("div",Mo,[Object(o["f"])("button",{class:Object(o["k"])(["ratio-btn",{active:"solid"===r.brushType}]),onClick:t[0]||(t[0]=function(e){return r.brushType="solid"})},"Solid",2),Object(o["f"])("button",{class:Object(o["k"])(["ratio-btn",{active:"soft"===r.brushType}]),onClick:t[1]||(t[1]=function(e){return r.brushType="soft"})},"Soft",2),Object(o["f"])("button",{class:Object(o["k"])(["ratio-btn",{active:"noise"===r.brushType}]),onClick:t[2]||(t[2]=function(e){return r.brushType="noise"})},"Sketch",2)])]),Object(o["f"])("div",Io,[Co,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"20",step:"1","onUpdate:modelValue":t[3]||(t[3]=function(e){return r.taper=e})},null,512),[[o["x"],r.taper,void 0,{number:!0}]]),Object(o["f"])("span",So,Object(o["t"])(r.taper),1)]),Object(o["f"])("div",To,[Eo,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"1",max:"20",step:"1","onUpdate:modelValue":t[4]||(t[4]=function(e){return r.smoothing=e})},null,512),[[o["x"],r.smoothing,void 0,{number:!0}]]),Object(o["f"])("span",Do,Object(o["t"])(r.smoothing),1)]),"solid"!==r.brushType||"standard"!==r.brushMaterial?(Object(o["m"])(),Object(o["e"])("div",Bo,[Po,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0.1",max:"5",step:"0.1","onUpdate:modelValue":t[5]||(t[5]=function(e){return r.textureScale=e})},null,512),[[o["x"],r.textureScale,void 0,{number:!0}]]),Object(o["f"])("span",Qo,Object(o["t"])(r.textureScale),1)])):Object(o["d"])("",!0),Object(o["f"])("div",Go,[Ho,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"0.5",step:"0.01","onUpdate:modelValue":t[6]||(t[6]=function(e){return r.wiggle=e})},null,512),[[o["x"],r.wiggle,void 0,{number:!0}]]),Object(o["f"])("span",Ro,Object(o["t"])(Math.round(100*r.wiggle)),1)]),Yo,Object(o["f"])("div",Lo,[zo,Object(o["f"])("div",Wo,[Object(o["f"])("button",{class:Object(o["k"])(["ratio-btn",{active:r.bloom}]),onClick:t[7]||(t[7]=function(e){return r.bloom=!r.bloom})},"Active",2)])]),r.bloom?(Object(o["m"])(),Object(o["e"])("div",Uo,[Vo,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"1",max:"30",step:"1","onUpdate:modelValue":t[8]||(t[8]=function(e){return r.bloomIntensity=e})},null,512),[[o["x"],r.bloomIntensity,void 0,{number:!0}]]),Object(o["f"])("span",Fo,Object(o["t"])(r.bloomIntensity),1)])):Object(o["d"])("",!0),Xo,Object(o["f"])("div",No,[qo,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":t[9]||(t[9]=function(e){return r.opacity=e})},null,512),[[o["x"],r.opacity,void 0,{number:!0}]]),Object(o["f"])("span",_o,Object(o["t"])(Math.round(100*r.opacity))+"%",1)]),Object(o["f"])("div",Zo,[Ko,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":t[10]||(t[10]=function(e){return r.dashArray=e})},null,512),[[o["x"],r.dashArray,void 0,{number:!0}]])]),Object(o["f"])("div",$o,[Jo,Object(o["f"])("div",ei,[Object(o["f"])("button",{class:Object(o["k"])(["ratio-btn",{active:Math.abs(r.dashRatio-.66)<.1}]),onClick:t[11]||(t[11]=function(e){return r.dashRatio=.66})},"2:1",2),Object(o["f"])("button",{class:Object(o["k"])(["ratio-btn",{active:Math.abs(r.dashRatio-.5)<.1}]),onClick:t[12]||(t[12]=function(e){return r.dashRatio=.5})},"1:1",2),Object(o["f"])("button",{class:Object(o["k"])(["ratio-btn",{active:Math.abs(r.dashRatio-.33)<.1}]),onClick:t[13]||(t[13]=function(e){return r.dashRatio=.33})},"1:2",2)])]),ti,Object(o["f"])("div",ni,[oi,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"2",step:"0.01","onUpdate:modelValue":t[14]||(t[14]=function(e){return r.animationSpeed=e})},null,512),[[o["x"],r.animationSpeed,void 0,{number:!0}]]),Object(o["f"])("span",ii,Object(o["t"])(Math.round(100*r.animationSpeed)),1)])])):Object(o["d"])("",!0),Object(o["i"])(s,{active:r.fill,mode:"fill",onColor:a.setFillColor,onActive:a.setFillActive},null,8,["active","onColor","onActive"]),r.fill?(Object(o["m"])(),Object(o["e"])("div",ri,[Object(o["f"])("div",ai,[si,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":t[15]||(t[15]=function(e){return r.fillOpacity=e})},null,512),[[o["x"],r.fillOpacity,void 0,{number:!0}]]),Object(o["f"])("span",ci,Object(o["t"])(Math.round(100*r.fillOpacity))+"%",1)])])):Object(o["d"])("",!0)])]})),_:1},8,["visible","reopenTrigger","is-open"])}var ui=n("5b02"),di=n.n(ui),hi=n("7f87"),pi=n.n(hi),fi=function(e){return Object(o["o"])("data-v-209b775a"),e=e(),Object(o["n"])(),e},bi={key:0,src:di.a,alt:"Enable"},gi={key:1,src:pi.a,alt:"Disable"},mi={key:0,class:"sliders"},vi={key:0,class:"width-slider"},yi=fi((function(){return Object(o["f"])("span",null,"w",-1)})),wi={class:"hsb-slider"},Oi=fi((function(){return Object(o["f"])("span",null,"h",-1)})),ji={class:"hsb-slider"},Ai=fi((function(){return Object(o["f"])("span",null,"s",-1)})),xi={class:"hsb-slider"},ki=fi((function(){return Object(o["f"])("span",null,"b",-1)}));function Mi(e,t,n,i,r,a){return Object(o["m"])(),Object(o["e"])("div",{class:"color",style:Object(o["l"])(a.cssProps)},[Object(o["f"])("div",{class:"toggle",onClick:t[0]||(t[0]=function(){return a.setActive&&a.setActive.apply(a,arguments)})},[n.active?Object(o["d"])("",!0):(Object(o["m"])(),Object(o["e"])("img",bi)),n.active?(Object(o["m"])(),Object(o["e"])("img",gi)):Object(o["d"])("",!0),Object(o["f"])("span",null,Object(o["t"])(this.mode.charAt(0).toUpperCase()+this.mode.substr(1).toLowerCase()),1)]),n.active?(Object(o["m"])(),Object(o["e"])("div",mi,["stroke"===n.mode?(Object(o["m"])(),Object(o["e"])("span",vi,[yi,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"1",max:"20",id:"width-slider","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.width=e})},null,512),[[o["x"],r.width]])])):Object(o["d"])("",!0),Object(o["f"])("span",wi,[Oi,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"359",id:"hue-slider","onUpdate:modelValue":t[2]||(t[2]=function(e){return r.hue=e})},null,512),[[o["x"],r.hue]])]),Object(o["f"])("span",ji,[Ai,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"99",class:"hsb-slider",id:"saturation-slider","onUpdate:modelValue":t[3]||(t[3]=function(e){return r.saturation=e}),style:Object(o["l"])({background:"linear-gradient(\n    to right,\n    hsl(".concat(r.hue,", 0%, 50%) 0%,\n    hsl(").concat(r.hue,", 50%, 50%) 90%\n  )")})},null,4),[[o["x"],r.saturation]])]),Object(o["f"])("span",xi,[ki,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"99",class:"hsb-slider",id:"brightness-slider","onUpdate:modelValue":t[4]||(t[4]=function(e){return r.brightness=e})},null,512),[[o["x"],r.brightness]])])])):Object(o["d"])("",!0)],4)}var Ii={name:"ColorSelector",data:function(){return{hue:0,saturation:0,brightness:25,width:5,r:0,g:0,b:0}},props:{mode:String,active:Boolean},emits:["color","active","width"],computed:{cssProps:function(){return{"--width-margin":this.map(this.width,1,20,-6,6)+"px","--width-radius":this.calcRadius(4*this.width,1,80),"--hue-margin":this.map(this.hue,0,359,-6,6)+"px","--hue-radius":this.calcRadius(this.hue,0,359),"--saturation-margin":this.map(this.saturation,0,99,-6,6)+"px","--saturation-radius":this.calcRadius(this.saturation,0,99),"--brightness-margin":this.map(this.brightness,0,99,-6,6)+"px","--brightness-radius":this.calcRadius(this.brightness,0,99)}}},methods:{map:function(e,t,n,o,i){return(e-t)/(n-t)*(i-o)+o},calcRadius:function(e,t,n){return e<t+4?"0px 4px 4px 0px":e>n-4?"4px 0px 0px 4px":"4px"},updateColor:function(e,t,n){var o,i,r,a,s,c,l,u;switch(1===arguments.length&&(t=e.s,n=e.v,e=e.h),a=Math.floor(6*e),s=6*e-a,c=n*(1-t),l=n*(1-s*t),u=n*(1-(1-s)*t),a%6){case 0:o=n,i=u,r=c;break;case 1:o=l,i=n,r=c;break;case 2:o=c,i=n,r=u;break;case 3:o=c,i=l,r=n;break;case 4:o=u,i=c,r=n;break;case 5:o=n,i=c,r=l;break}this.r=Math.round(255*o),this.g=Math.round(255*i),this.b=Math.round(255*r),this.$emit("color",{r:this.r,g:this.g,b:this.b})},setActive:function(){this.$emit("active",{active:!this.active})}},watch:{width:function(e){this.$emit("width",{width:e})},hue:function(){this.updateColor(this.hue/359,this.saturation/99,this.brightness/99)},saturation:function(){this.updateColor(this.hue/359,this.saturation/99,this.brightness/99)},brightness:function(){this.updateColor(this.hue/359,this.saturation/99,this.brightness/99)}},mounted:function(){this.updateColor(this.hue/359,this.saturation/99,this.brightness/99)}};n("8399");const Ci=ze()(Ii,[["render",Mi],["__scopeId","data-v-209b775a"]]);var Si=Ci,Ti={components:{LineSliders:Si,DraggableWindow:qe},name:"Modal",data:function(){return{window:window,stroke:!0,strokeColor:"#1C1C1E",strokeWidth:5,fill:!1,fillColor:"#000000",dashArray:0,dashOffset:0,dashRatio:.5,opacity:1,fillOpacity:1,transparent:!1,alphaTest:.5,brushType:"solid",brushMaterial:"standard",taper:3,smoothing:4,textureScale:1,wiggle:0,animationSpeed:0,bloom:!1,bloomIntensity:1.5}},props:{selectedTool:String,forceVisible:Boolean,reopenTrigger:Number,isOpen:Boolean},emits:["stroke","fill","close"],methods:{setStrokeColor:function(e){this.strokeColor="rgb("+e.r+","+e.g+","+e.b+")"},setStrokeActive:function(e){this.stroke=e.active},setStrokeWidth:function(e){this.strokeWidth=e.width},setFillColor:function(e){this.fillColor="rgb("+e.r+","+e.g+","+e.b+")"},setFillActive:function(e){this.fill=e.active},emitStroke:function(){this.$emit("stroke",{show_stroke:this.stroke,lineWidth:this.strokeWidth/500,color:this.strokeColor,dashArray:this.dashArray,dashOffset:this.dashOffset,dashRatio:this.dashRatio,opacity:this.opacity,transparent:this.transparent,alphaTest:this.alphaTest,brushType:this.brushType,brushMaterial:this.brushMaterial,taper:this.taper,smoothing:this.smoothing,textureScale:this.textureScale,wiggle:this.wiggle,animationSpeed:this.animationSpeed,bloom:this.bloom,bloomIntensity:this.bloomIntensity})},emitFill:function(){this.$emit("fill",{show_fill:this.fill,color:this.fillColor,opacity:this.fillOpacity})},updateSettings:function(e){void 0!==e.stroke&&(this.stroke=e.stroke),void 0!==e.strokeColor&&(this.strokeColor="rgb("+e.strokeColor.r+","+e.strokeColor.g+","+e.strokeColor.b+")"),void 0!==e.strokeWidth&&(this.strokeWidth=e.strokeWidth),this.dashArray=void 0!==e.dashArray?e.dashArray:0,this.dashOffset=void 0!==e.dashOffset?e.dashOffset:0,this.dashRatio=void 0!==e.dashRatio?e.dashRatio:.5,this.opacity=void 0!==e.opacity?e.opacity:1,this.transparent=void 0!==e.transparent&&e.transparent,this.alphaTest=void 0!==e.alphaTest?e.alphaTest:.5,void 0!==e.brushType&&(this.brushType=e.brushType),void 0!==e.brushMaterial&&(this.brushMaterial=e.brushMaterial),void 0!==e.taper&&(this.taper=e.taper),void 0!==e.smoothing&&(this.smoothing=e.smoothing),void 0!==e.textureScale&&(this.textureScale=e.textureScale),void 0!==e.wiggle&&(this.wiggle=e.wiggle),void 0!==e.animationSpeed&&(this.animationSpeed=e.animationSpeed),void 0!==e.bloom&&(this.bloom=e.bloom),void 0!==e.bloomIntensity&&(this.bloomIntensity=e.bloomIntensity),void 0!==e.fill&&(this.fill=e.fill),void 0!==e.fillColor&&(this.fillColor="rgb("+e.fillColor.r+","+e.fillColor.g+","+e.fillColor.b+")"),void 0!==e.fillOpacity&&(this.fillOpacity=e.fillOpacity)}},watch:{stroke:function(){this.emitStroke()},strokeWidth:function(){this.emitStroke()},strokeColor:function(){this.emitStroke()},fill:function(){this.emitFill()},fillColor:function(){this.emitFill()},fillOpacity:function(){this.emitFill()},dashArray:function(){this.emitStroke()},dashRatio:function(){this.emitStroke()},opacity:function(){this.emitStroke()},brushType:function(){this.emitStroke()},taper:function(){this.emitStroke()},smoothing:function(){this.emitStroke()},textureScale:function(){this.emitStroke()},wiggle:function(){this.emitStroke()},animationSpeed:function(){this.emitStroke()},bloom:function(){this.emitStroke()},bloomIntensity:function(){this.emitStroke()}},mounted:function(){this.emitStroke(),this.emitFill()}};n("71b2");const Ei=ze()(Ti,[["render",li]]);var Di=Ei,Bi=function(e){return Object(o["o"])("data-v-0b214183"),e=e(),Object(o["n"])(),e},Pi={class:"panel"},Qi={class:"extra-settings"},Gi=Bi((function(){return Object(o["f"])("div",{class:"section-title"},"Geometry",-1)})),Hi={class:"setting-row"},Ri=Bi((function(){return Object(o["f"])("span",null,"Taper",-1)})),Yi={class:"value"},Li={class:"setting-row"},zi=Bi((function(){return Object(o["f"])("span",null,"Smooth",-1)})),Wi={class:"value"},Ui={class:"setting-row"},Vi=Bi((function(){return Object(o["f"])("span",null,"Wiggle",-1)})),Fi={class:"value"},Xi=Bi((function(){return Object(o["f"])("div",{class:"section-title"},"Material",-1)})),Ni={class:"setting-row"},qi=Bi((function(){return Object(o["f"])("span",null,"Roughness",-1)})),_i={class:"value"},Zi={class:"setting-row"},Ki=Bi((function(){return Object(o["f"])("span",null,"Metalness",-1)})),$i={class:"value"},Ji={class:"setting-row"},er=Bi((function(){return Object(o["f"])("span",null,"Opacity",-1)})),tr={class:"value"},nr=Bi((function(){return Object(o["f"])("div",{class:"section-title"},"Matcap",-1)})),or={class:"materials-container"},ir=["onClick","title"],rr={key:0,class:"std-preview"},ar=["src"];function sr(e,t,n,i,r,a){var s=Object(o["s"])("line-sliders"),c=Object(o["s"])("draggable-window");return Object(o["m"])(),Object(o["c"])(c,{title:"Cable Properties",initialX:12,initialY:300,visible:n.forceVisible||"draw"==n.selectedTool&&n.isTube,reopenTrigger:n.reopenTrigger,"is-open":n.isOpen,onClose:t[7]||(t[7]=function(t){return e.$emit("close")})},{default:Object(o["z"])((function(){return[Object(o["f"])("div",Pi,[Object(o["i"])(s,{mode:"stroke",active:!0,onColor:a.setColor,onActive:t[0]||(t[0]=function(){}),onWidth:a.setWidth},null,8,["onColor","onWidth"]),Object(o["f"])("div",Qi,[Gi,Object(o["f"])("div",Hi,[Ri,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"100",step:"1","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.taper=e})},null,512),[[o["x"],r.taper,void 0,{number:!0}]]),Object(o["f"])("span",Yi,Object(o["t"])(r.taper)+"%",1)]),Object(o["f"])("div",Li,[zi,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"20",step:"1","onUpdate:modelValue":t[2]||(t[2]=function(e){return r.smoothing=e})},null,512),[[o["x"],r.smoothing,void 0,{number:!0}]]),Object(o["f"])("span",Wi,Object(o["t"])(r.smoothing),1)]),Object(o["f"])("div",Ui,[Vi,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"10",step:"0.1","onUpdate:modelValue":t[3]||(t[3]=function(e){return r.wiggle=e})},null,512),[[o["x"],r.wiggle,void 0,{number:!0}]]),Object(o["f"])("span",Fi,Object(o["t"])(Math.round(r.wiggle)),1)]),Xi,Object(o["f"])("div",Ni,[qi,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":t[4]||(t[4]=function(e){return r.roughness=e})},null,512),[[o["x"],r.roughness,void 0,{number:!0}]]),Object(o["f"])("span",_i,Object(o["t"])(Math.round(100*r.roughness))+"%",1)]),Object(o["f"])("div",Zi,[Ki,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":t[5]||(t[5]=function(e){return r.metalness=e})},null,512),[[o["x"],r.metalness,void 0,{number:!0}]]),Object(o["f"])("span",$i,Object(o["t"])(Math.round(100*r.metalness))+"%",1)]),Object(o["f"])("div",Ji,[er,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":t[6]||(t[6]=function(e){return r.opacity=e})},null,512),[[o["x"],r.opacity,void 0,{number:!0}]]),Object(o["f"])("span",tr,Object(o["t"])(Math.round(100*r.opacity))+"%",1)]),nr,Object(o["f"])("div",or,[(Object(o["m"])(!0),Object(o["e"])(o["a"],null,Object(o["q"])(r.matcaps,(function(e){return Object(o["m"])(),Object(o["e"])("button",{key:e.name,class:Object(o["k"])(["matcap-btn",{active:r.currentMatcap===e.value}]),onClick:function(t){return a.selectMatcap(e.value)},title:e.name},["standard"===e.value?(Object(o["m"])(),Object(o["e"])("div",rr)):(Object(o["m"])(),Object(o["e"])("img",{key:1,src:e.image,class:"matcap-img"},null,8,ar))],10,ir)})),128))])])])]})),_:1},8,["visible","reopenTrigger","is-open"])}var cr={components:{LineSliders:Si,DraggableWindow:qe},name:"TubeSettings",data:function(){return{color:"#6666ff",width:.5,roughness:.4,metalness:.1,opacity:1,taper:0,smoothing:5,wiggle:0,currentMatcap:"standard",matcaps:[{name:"Standard",value:"standard"},{name:"Clay",value:"matcaps/clay_studio.jpeg",image:"matcaps/clay_studio.jpeg"},{name:"Gold",value:"matcaps/metal_shiny.jpeg",image:"matcaps/metal_shiny.jpeg"},{name:"Metal",value:"matcaps/metal_lead.jpeg",image:"matcaps/metal_lead.jpeg"},{name:"Pearl",value:"matcaps/pearl.jpeg",image:"matcaps/pearl.jpeg"},{name:"Jade",value:"matcaps/jade.jpeg",image:"matcaps/jade.jpeg"},{name:"Skin",value:"matcaps/skin.jpeg",image:"matcaps/skin.jpeg"},{name:"Toon",value:"matcaps/toon.jpeg",image:"matcaps/toon.jpeg"}]}},props:{selectedTool:String,forceVisible:Boolean,reopenTrigger:Number,isOpen:Boolean,isTube:Boolean},emits:["stroke","close"],methods:{setColor:function(e){this.color="rgb("+e.r+","+e.g+","+e.b+")"},setWidth:function(e){this.width=e.width},selectMatcap:function(e){this.currentMatcap=e,this.emitSettings()},emitSettings:function(){this.$emit("stroke",{show_stroke:!0,lineWidth:this.width/500,color:this.color,isTube:!0,roughness:this.roughness,metalness:this.metalness,opacity:this.opacity,taper:this.taper,smoothing:this.smoothing,wiggle:this.wiggle,matcap:this.currentMatcap})},updateSettings:function(e){void 0!==e.strokeColor&&(this.color="string"===typeof e.strokeColor?e.strokeColor:"rgb("+e.strokeColor.r+","+e.strokeColor.g+","+e.strokeColor.b+")"),void 0!==e.strokeWidth&&(this.width=e.strokeWidth),void 0!==e.roughness&&(this.roughness=e.roughness),void 0!==e.metalness&&(this.metalness=e.metalness),void 0!==e.opacity&&(this.opacity=e.opacity),void 0!==e.taper&&(this.taper=e.taper),void 0!==e.smoothing&&(this.smoothing=e.smoothing),void 0!==e.wiggle&&(this.wiggle=e.wiggle),void 0!==e.matcap&&(this.currentMatcap=e.matcap)}},watch:{color:function(){this.emitSettings()},width:function(){this.emitSettings()},roughness:function(){this.emitSettings()},metalness:function(){this.emitSettings()},opacity:function(){this.emitSettings()},taper:function(){this.emitSettings()},smoothing:function(){this.emitSettings()},wiggle:function(){this.emitSettings()},currentMatcap:function(){this.emitSettings()}},mounted:function(){this.emitSettings()}};n("c943");const lr=ze()(cr,[["render",sr],["__scopeId","data-v-0b214183"]]);var ur=lr,dr=function(e){return Object(o["o"])("data-v-2e7970ff"),e=e(),Object(o["n"])(),e},hr={class:"panel"},pr={class:"extra-settings"},fr=dr((function(){return Object(o["f"])("div",{class:"section-title"},"Geometry",-1)})),br={class:"setting-row"},gr=dr((function(){return Object(o["f"])("span",null,"Taper",-1)})),mr={class:"value"},vr={class:"setting-row"},yr=dr((function(){return Object(o["f"])("span",null,"Smooth",-1)})),wr={class:"value"},Or={class:"setting-row"},jr=dr((function(){return Object(o["f"])("span",null,"Wiggle",-1)})),Ar={class:"value"},xr=dr((function(){return Object(o["f"])("div",{class:"section-title"},"Material",-1)})),kr={class:"setting-row"},Mr=dr((function(){return Object(o["f"])("span",null,"Roughness",-1)})),Ir={class:"value"},Cr={class:"setting-row"},Sr=dr((function(){return Object(o["f"])("span",null,"Metalness",-1)})),Tr={class:"value"},Er={class:"setting-row"},Dr=dr((function(){return Object(o["f"])("span",null,"Opacity",-1)})),Br={class:"value"},Pr={class:"setting-row"},Qr=dr((function(){return Object(o["f"])("span",null,"Bloom",-1)})),Gr={class:"ratio-buttons"},Hr={class:"setting-row"},Rr=dr((function(){return Object(o["f"])("span",null,"Side",-1)})),Yr={class:"ratio-buttons"},Lr=dr((function(){return Object(o["f"])("div",{class:"section-title"},"Matcap",-1)})),zr={class:"materials-container"},Wr=["title","onClick"],Ur=["src"],Vr={key:1,class:"std-preview"};function Fr(e,t,n,i,r,a){var s=Object(o["s"])("line-sliders"),c=Object(o["s"])("draggable-window");return Object(o["m"])(),Object(o["c"])(c,{title:"Strip Properties",initialX:12,initialY:300,visible:n.forceVisible||"draw"==n.selectedTool&&n.isStrip,reopenTrigger:n.reopenTrigger,"is-open":n.isOpen,onClose:t[11]||(t[11]=function(t){return e.$emit("close")})},{default:Object(o["z"])((function(){return[Object(o["f"])("div",hr,[Object(o["i"])(s,{mode:"stroke",active:!0,onColor:a.setColor,onActive:t[0]||(t[0]=function(){}),onWidth:a.setWidth},null,8,["onColor","onWidth"]),Object(o["f"])("div",pr,[fr,Object(o["f"])("div",br,[gr,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"100",step:"1","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.taper=e})},null,512),[[o["x"],r.taper,void 0,{number:!0}]]),Object(o["f"])("span",mr,Object(o["t"])(r.taper)+"%",1)]),Object(o["f"])("div",vr,[yr,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"20",step:"1","onUpdate:modelValue":t[2]||(t[2]=function(e){return r.smoothing=e})},null,512),[[o["x"],r.smoothing,void 0,{number:!0}]]),Object(o["f"])("span",wr,Object(o["t"])(r.smoothing),1)]),Object(o["f"])("div",Or,[jr,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"10",step:"0.1","onUpdate:modelValue":t[3]||(t[3]=function(e){return r.wiggle=e})},null,512),[[o["x"],r.wiggle,void 0,{number:!0}]]),Object(o["f"])("span",Ar,Object(o["t"])(Math.round(r.wiggle)),1)]),xr,Object(o["f"])("div",kr,[Mr,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":t[4]||(t[4]=function(e){return r.roughness=e})},null,512),[[o["x"],r.roughness,void 0,{number:!0}]]),Object(o["f"])("span",Ir,Object(o["t"])(Math.round(100*r.roughness))+"%",1)]),Object(o["f"])("div",Cr,[Sr,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":t[5]||(t[5]=function(e){return r.metalness=e})},null,512),[[o["x"],r.metalness,void 0,{number:!0}]]),Object(o["f"])("span",Tr,Object(o["t"])(Math.round(100*r.metalness))+"%",1)]),Object(o["f"])("div",Er,[Dr,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":t[6]||(t[6]=function(e){return r.opacity=e})},null,512),[[o["x"],r.opacity,void 0,{number:!0}]]),Object(o["f"])("span",Br,Object(o["t"])(Math.round(100*r.opacity))+"%",1)]),Object(o["f"])("div",Pr,[Qr,Object(o["f"])("div",Gr,[Object(o["f"])("button",{class:Object(o["k"])(["ratio-btn",{active:!1===r.bloom}]),onClick:t[7]||(t[7]=function(e){return r.bloom=!1})},"Off",2),Object(o["f"])("button",{class:Object(o["k"])(["ratio-btn",{active:!0===r.bloom}]),onClick:t[8]||(t[8]=function(e){return r.bloom=!0})},"On",2)])]),Object(o["f"])("div",Hr,[Rr,Object(o["f"])("div",Yr,[Object(o["f"])("button",{class:Object(o["k"])(["ratio-btn",{active:"double"===r.side}]),onClick:t[9]||(t[9]=function(e){return r.side="double"})},"Double",2),Object(o["f"])("button",{class:Object(o["k"])(["ratio-btn",{active:"front"===r.side}]),onClick:t[10]||(t[10]=function(e){return r.side="front"})},"Front",2)])]),Lr,Object(o["f"])("div",zr,[(Object(o["m"])(!0),Object(o["e"])(o["a"],null,Object(o["q"])(r.matcaps,(function(e){return Object(o["m"])(),Object(o["e"])("button",{key:e.value,class:Object(o["k"])(["matcap-btn",{active:r.currentMatcap===e.value}]),title:e.name,onClick:function(t){return a.selectMatcap(e.value)}},[e.image?(Object(o["m"])(),Object(o["e"])("img",{key:0,src:e.image,class:"matcap-img"},null,8,Ur)):(Object(o["m"])(),Object(o["e"])("div",Vr,Object(o["t"])(e.name.substr(0,1)),1))],10,Wr)})),128))])])])]})),_:1},8,["visible","reopenTrigger","is-open"])}var Xr={components:{LineSliders:Si,DraggableWindow:qe},name:"StripSettings",data:function(){return{color:"#ff00ff",width:1,side:"double",roughness:.5,metalness:.5,opacity:1,bloom:!1,taper:0,smoothing:5,wiggle:0,currentMatcap:"standard",matcaps:[{name:"Standard",value:"standard"},{name:"Clay",value:"matcaps/clay_studio.jpeg",image:"matcaps/clay_studio.jpeg"},{name:"Gold",value:"matcaps/metal_shiny.jpeg",image:"matcaps/metal_shiny.jpeg"},{name:"Metal",value:"matcaps/metal_lead.jpeg",image:"matcaps/metal_lead.jpeg"},{name:"Pearl",value:"matcaps/pearl.jpeg",image:"matcaps/pearl.jpeg"},{name:"Jade",value:"matcaps/jade.jpeg",image:"matcaps/jade.jpeg"},{name:"Skin",value:"matcaps/skin.jpeg",image:"matcaps/skin.jpeg"},{name:"Toon",value:"matcaps/toon.jpeg",image:"matcaps/toon.jpeg"}]}},props:{selectedTool:String,forceVisible:Boolean,reopenTrigger:Number,isOpen:Boolean,isStrip:Boolean},emits:["stroke","close"],methods:{setColor:function(e){this.color="rgb("+e.r+","+e.g+","+e.b+")"},setWidth:function(e){this.width=e.width},selectMatcap:function(e){this.currentMatcap=e,this.emitSettings()},emitSettings:function(){this.$emit("stroke",{show_stroke:!0,lineWidth:this.width/100,color:this.color,isStrip:!0,side:this.side,isTube:!1,roughness:this.roughness,metalness:this.metalness,opacity:this.opacity,bloom:this.bloom,taper:this.taper,smoothing:this.smoothing,wiggle:this.wiggle,matcap:this.currentMatcap})},updateSettings:function(e){void 0!==e.strokeColor&&(this.color="string"===typeof e.strokeColor?e.strokeColor:"rgb("+e.strokeColor.r+","+e.strokeColor.g+","+e.strokeColor.b+")"),void 0!==e.strokeWidth&&(this.width=e.strokeWidth),void 0!==e.roughness&&(this.roughness=e.roughness),void 0!==e.metalness&&(this.metalness=e.metalness),void 0!==e.opacity&&(this.opacity=e.opacity),void 0!==e.bloom&&(this.bloom=e.bloom),void 0!==e.taper&&(this.taper=e.taper),void 0!==e.smoothing&&(this.smoothing=e.smoothing),void 0!==e.wiggle&&(this.wiggle=e.wiggle),void 0!==e.matcap&&(this.currentMatcap=e.matcap)}},watch:{color:function(){this.emitSettings()},width:function(){this.emitSettings()},side:function(){this.emitSettings()},roughness:function(){this.emitSettings()},metalness:function(){this.emitSettings()},opacity:function(){this.emitSettings()},bloom:function(){this.emitSettings()},taper:function(){this.emitSettings()},smoothing:function(){this.emitSettings()},wiggle:function(){this.emitSettings()},currentMatcap:function(){this.emitSettings()}},mounted:function(){this.emitSettings()}};n("3c72");const Nr=ze()(Xr,[["render",Fr],["__scopeId","data-v-2e7970ff"]]);var qr=Nr,_r=n("bd5b"),Zr=n.n(_r),Kr=function(e){return Object(o["o"])("data-v-1a0e0249"),e=e(),Object(o["n"])(),e},$r={key:0,class:"popup"},Jr=Kr((function(){return Object(o["f"])("div",{class:"separator"},null,-1)})),ea=Kr((function(){return Object(o["f"])("div",{class:"separator"},null,-1)})),ta=Kr((function(){return Object(o["f"])("img",{src:Zr.a,alt:"Share your sketch"},null,-1)})),na=[ta];function oa(e,t,n,i,r,a){var s=Object(o["s"])("ToggleWindow"),c=Object(o["s"])("Save"),l=Object(o["s"])("Load"),u=Object(o["s"])("export-for-blender"),d=Object(o["s"])("export-for-procreate"),h=Object(o["s"])("ExportUSDZ"),p=Object(o["s"])("ExportGLB"),f=Object(o["s"])("ExportHTML"),b=Object(o["s"])("start-preview");return Object(o["m"])(),Object(o["e"])("div",null,[r.show?(Object(o["m"])(),Object(o["e"])("div",$r,[Object(o["i"])(s,{label:"Tools",onClick:t[0]||(t[0]=function(e){return a.toggleWindow("tools")}),checked:n.windowStates&&n.windowStates.tools},null,8,["checked"]),Object(o["i"])(s,{label:"Tube Tools",onClick:t[1]||(t[1]=function(e){return a.toggleWindow("tubeTools")}),checked:n.windowStates&&n.windowStates.tubeTools},null,8,["checked"]),Object(o["i"])(s,{label:"Strip Tools",onClick:t[2]||(t[2]=function(e){return a.toggleWindow("stripTools")}),checked:n.windowStates&&n.windowStates.stripTools},null,8,["checked"]),Object(o["i"])(s,{label:"Properties",onClick:t[3]||(t[3]=function(e){return a.toggleWindow("properties")}),checked:n.windowStates&&n.windowStates.properties},null,8,["checked"]),Object(o["i"])(s,{label:"Canvas",onClick:t[4]||(t[4]=function(e){return a.toggleWindow("canvas")}),checked:n.windowStates&&n.windowStates.canvas},null,8,["checked"]),Object(o["i"])(s,{label:"Shapes",onClick:t[5]||(t[5]=function(e){return a.toggleWindow("shapes")}),checked:n.windowStates&&n.windowStates.shapes},null,8,["checked"]),Object(o["i"])(s,{label:"Object Manager",onClick:t[6]||(t[6]=function(e){return a.toggleWindow("objectManager")}),checked:n.windowStates&&n.windowStates.objectManager},null,8,["checked"]),Object(o["i"])(s,{label:"History",onClick:t[7]||(t[7]=function(e){return a.toggleWindow("history")}),checked:n.windowStates&&n.windowStates.history},null,8,["checked"]),Object(o["i"])(s,{label:"View",onClick:t[8]||(t[8]=function(e){return a.toggleWindow("view")}),checked:n.windowStates&&n.windowStates.view},null,8,["checked"]),Object(o["i"])(s,{label:"Colors",onClick:t[9]||(t[9]=function(e){return a.toggleWindow("colors")}),checked:n.windowStates&&n.windowStates.colors},null,8,["checked"]),Object(o["i"])(s,{label:"Scene",onClick:t[10]||(t[10]=function(e){return a.toggleWindow("scene")}),checked:n.windowStates&&n.windowStates.scene},null,8,["checked"]),Object(o["i"])(s,{label:"Symmetry",onClick:t[11]||(t[11]=function(e){return a.toggleWindow("symmetry")}),checked:n.windowStates&&n.windowStates.symmetry},null,8,["checked"]),Object(o["i"])(s,{label:"Layers",onClick:t[12]||(t[12]=function(e){return a.toggleWindow("layers")}),checked:n.windowStates&&n.windowStates.layers},null,8,["checked"]),Jr,Object(o["i"])(c),Object(o["i"])(l,{ref:"load"},null,512),ea,Object(o["i"])(u,{onModal:a.showModal},null,8,["onModal"]),Object(o["i"])(d,{onModal:a.showModal},null,8,["onModal"]),r.isSafari?(Object(o["m"])(),Object(o["c"])(h,{key:0})):Object(o["d"])("",!0),Object(o["i"])(p),Object(o["i"])(f,{onModal:a.showModal},null,8,["onModal"]),Object(o["i"])(b,{onPreview:a.startPreview},null,8,["onPreview"])])):Object(o["d"])("",!0),Object(o["f"])("button",{class:"toggle-menu",onClick:t[13]||(t[13]=function(e){return r.show=!r.show}),style:Object(o["l"])([!0===r.show?"z-index: 10":""])},na,4),r.show?(Object(o["m"])(),Object(o["e"])("div",{key:1,class:"fade",onClick:t[14]||(t[14]=function(e){return r.show=!1})})):Object(o["d"])("",!0)])}var ia={class:"label"},ra={key:0,class:"check"};function aa(e,t,n,i,r,a){return Object(o["m"])(),Object(o["e"])("button",{onClick:t[0]||(t[0]=function(t){return e.$emit("click")})},[Object(o["f"])("span",ia,Object(o["t"])(n.label),1),n.checked?(Object(o["m"])(),Object(o["e"])("span",ra,"")):Object(o["d"])("",!0)])}var sa={name:"ToggleWindow",props:{label:{type:String,required:!0},checked:{type:Boolean,default:!1}},emits:["click"]};n("86f3");const ca=ze()(sa,[["render",aa],["__scopeId","data-v-50198f32"]]);var la=ca;function ua(e,t,n,i,r,a){return Object(o["m"])(),Object(o["e"])("button",{onClick:t[0]||(t[0]=function(){return a.exportToJson&&a.exportToJson.apply(a,arguments)})},"Save")}var da={name:"Import",props:{},data:function(){return{}},methods:{exportToJson:function(){var e=[];rb.children.forEach((function(t){if(t.geometry&&"MeshLine"==t.geometry.type&&2==t.layers.mask){var n={};console.log(t.geometry),n.vertices=Array.from(t.geometry.points),n.stroke=t.userData.stroke,n.fill=t.userData.fill,n.mirrorOn=!1,n.position=new r["Vector3"],t.getWorldPosition(n.position),n.quaternion=new r["Quaternion"],t.getWorldQuaternion(n.quaternion),n.scale=new r["Vector3"],t.getWorldScale(n.scale),n.matrix=t.matrix,e.push(n)}})),console.log(e);var t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),n=prompt("Enter a name for your file","sketch");if(null!=n){var o=document.createElement("a");o.setAttribute("href",t),o.setAttribute("download",n+".json"),o.click()}}},watch:{},mounted:function(){}};const ha=ze()(da,[["render",ua]]);var pa=ha;function fa(e,t,n,i,r,a){return Object(o["m"])(),Object(o["e"])("button",{onClick:t[0]||(t[0]=function(){return a.importFromJson&&a.importFromJson.apply(a,arguments)})},Object(o["t"])(r.text),1)}var ba={name:"Import",props:{},data:function(){return{text:"Load"}},methods:{importFromJson:function(){var e,t=document.createElement("input");t.style.display="none",t.type="file",document.body.appendChild(t),t.onchange=function(t){function n(e){var t=JSON.parse(e.target.result),n=0;function o(e){xt.fromVertices(new Float32Array(e.vertices),e.stroke,e.fill,e.mirrorOn,null,e.position,e.quaternion,e.scale,e.matrix),n<t.length-1?(n++,o(t[n])):ob.render(rb,ib)}o(t[n])}if(e=t.target.files[0],"application/json"==e.type){var o=new FileReader;o.onload=n,o.readAsText(e)}},t.click()}},watch:{},mounted:function(){}};const ga=ze()(ba,[["render",fa]]);var ma=ga;function va(e,t,n,i,r,a){return Object(o["m"])(),Object(o["e"])("button",{onClick:t[0]||(t[0]=function(){return a.showExportModal&&a.showExportModal.apply(a,arguments)})},"Export for Blender")}var ya={name:"Export",props:{},data:function(){return{}},methods:{showExportModal:function(){this.$emit("modal",{display:!0,mode:"blender"})}},watch:{},mounted:function(){}};const wa=ze()(ya,[["render",va]]);var Oa=wa;function ja(e,t,n,i,r,a){return Object(o["m"])(),Object(o["e"])("button",{onClick:t[0]||(t[0]=function(){return a.showExportModal&&a.showExportModal.apply(a,arguments)})},"Export for Procreate")}var Aa={name:"Export",props:{},data:function(){return{}},methods:{showExportModal:function(){this.$emit("modal",{display:!0,mode:"procreate"})}},watch:{},mounted:function(){}};const xa=ze()(Aa,[["render",ja]]);var ka=xa;function Ma(e,t,n,i,r,a){return Object(o["m"])(),Object(o["e"])("button",{onClick:t[0]||(t[0]=function(){return a.startPreview&&a.startPreview.apply(a,arguments)})},"Make video")}var Ia={name:"StartPreview",props:{},data:function(){return{}},methods:{startPreview:function(){this.$emit("preview",!0)}},watch:{},mounted:function(){}};const Ca=ze()(Ia,[["render",Ma]]);var Sa=Ca,Ta=n("f1b5"),Ea=n.n(Ta),Da=function(e){return Object(o["o"])("data-v-206058b5"),e=e(),Object(o["n"])(),e},Ba=Da((function(){return Object(o["f"])("img",{src:Ea.a},null,-1)})),Pa=[Ba];function Qa(e,t,n,i,r,a){return Object(o["m"])(),Object(o["e"])(o["a"],null,[Object(o["f"])("button",{class:Object(o["k"])(["default"===r.mode||"exporting"===r.mode?"":"hidden"]),onClick:t[0]||(t[0]=function(e){return"default"===r.mode?a.exportForAr():""})},Object(o["t"])("default"===r.mode?"Export for AR":"Exporting..."),3),Object(o["f"])("a",{class:Object(o["k"])(["view"===r.mode?"ar":"ar hidden"]),id:"ar",rel:"ar"},Pa,2),Object(o["f"])("a",{id:"download",class:Object(o["k"])(["view"===r.mode?"ar":"ar hidden"]),download:"sketch.usdz",target:"_blank"}," Download USDZ ",2)],64)}var Ga,Ha=n("1da1"),Ra=(n("96cf"),n("2b3d"),n("9861"),n("9a3e")),Ya=function(e){Object($["a"])(n,e);var t=Object(J["a"])(n);function n(e){var o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1,1,1,1,1,1,1,1,1],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(v["a"])(this,n),o=t.call(this),o.type="TubeBufferGeometry",o.parameters={path:e,tubularSegments:i,radius:a,radialSegments:s,closed:c},i=i||64,a=a||1,s=s||8,c=c||!1;var l=e.computeFrenetFrames(i,c);o.tangents=l.tangents,o.normals=l.normals,o.binormals=l.binormals;var u,d,h=new r["Vector3"],p=new r["Vector3"],f=new r["Vector2"],b=new r["Vector3"],g=[],m=[],y=[],w=[];function O(){for(u=0;u<i;u++)j(u);j(!1===c?i:0),x(),A()}function j(t){b=e.getPointAt(t/i,b);var n=l.normals[t],o=l.binormals[t];for(d=0;d<=s;d++){var r=d/s*Math.PI*2,c=Math.sin(r),u=-Math.cos(r);p.x=u*n.x+c*o.x,p.y=u*n.y+c*o.y,p.z=u*n.z+c*o.z,p.normalize(),m.push(p.x,p.y,p.z);var f="function"===typeof a?a(t/i):a[t];h.x=b.x+f*p.x,h.y=b.y+f*p.y,h.z=b.z+f*p.z,g.push(h.x,h.y,h.z)}}function A(){for(d=1;d<=i;d++)for(u=1;u<=s;u++){var e=(s+1)*(d-1)+(u-1),t=(s+1)*d+(u-1),n=(s+1)*d+u,o=(s+1)*(d-1)+u;w.push(e,t,o),w.push(t,n,o)}}function x(){for(u=0;u<=i;u++)for(d=0;d<=s;d++)f.x=u/i,f.y=d/s,y.push(f.x,f.y)}return O(),o.setIndex(w),o.setAttribute("position",new r["Float32BufferAttribute"](g,3)),o.setAttribute("normal",new r["Float32BufferAttribute"](m,3)),o.setAttribute("uv",new r["Float32BufferAttribute"](y,2)),o}return n}(r["BufferGeometry"]);function La(e,t,n,o,i){return(e-t)/(n-t)*(i-o)+o}function za(e,t){var n=e,o=n.geometry.clone();o.applyMatrix4(n.matrix);for(var i=[],a=Array.from(o.attributes.position.array),s=0;s<=a.length;s+=6){var c=new r["Vector3"](a[s],a[s+1],a[s+2]);0!=c.x&&0!=c.y&&0!=c.z&&i.push(c)}for(var l=[0],u=0;u<n.userData.stroke.force.length;u++){var d=n.userData.stroke.force.length,h=0,p=2.5*n.userData.stroke.lineWidth,f=n.userData.stroke.force[u]/15,b=3;if(u<b){var g=La(u,h,b,h,p+f);l.push(g)}else if(u>d-b){var m=La(u,d-b,d-1,p+f,h);l.push(m)}else l.push(p+f)}var v,y=new r["CatmullRomCurve3"](i),w=new Ya(y,i.length,l,8,!1);v="basic"===t?new r["MeshBasicMaterial"]({color:n.userData.stroke.color,flatShading:!0}):new r["MeshStandardMaterial"]({color:n.userData.stroke.color,flatShading:!0,roughness:1,shininess:0,metalness:1});var O=new r["Mesh"](w,v);return O}function Wa(e,t,n,o){var i,a=e,s=a.children[0].clone(),c=a.children[0].geometry.clone();s.geometry=c,s.geometry.applyMatrix4(a.matrix),s.position.set(0,0,0),s.rotation.set(0,0,0),s.scale.set(1,1,1),i="basic"===t?new r["MeshBasicMaterial"]({color:a.userData.fill.color,side:r["FrontSide"],wireframe:!1}):new r["MeshStandardMaterial"]({color:a.userData.fill.color,side:r["DoubleSide"]});var l,u=new r["Mesh"](c,i);if(!0===o){var d=c.clone();d.index.array=d.index.array.reverse();var h=new r["MeshStandardMaterial"]({color:a.userData.fill.color,side:r["DoubleSide"]});l=new r["Mesh"](d,h)}if(!0===n){var p=new r["EdgesGeometry"](c),f=new r["LineSegments"](p,new r["LineBasicMaterial"]({color:a.userData.fill.color}));u.attach(f)}if(!0===o){var b=[u,l];return b}return u}var Ua={name:"ExportUSDZ",props:{},data:function(){return{lightbox:!1,text:"Export for AR",mode:"default",url:void 0}},methods:{exportForAr:function(){var e=this;this.mode="exporting",setTimeout((function(){e.viewInAr()}),500)},viewInAr:function(){var e=Object(Ha["a"])(regeneratorRuntime.mark((function e(){var t,n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Ga=new r["Scene"],rb.children.forEach((function(e){void 0!=e&&e.geometry&&"MeshLine"==e.geometry.type&&2==e.layers.mask&&e.geometry.attributes.position.array.length>6&&(!0===e.userData.stroke.show_stroke&&Ga.add(za(e,"standard")),!0===e.userData.fill.show_fill&&Wa(e,"standard",!1,!0).forEach((function(e){Ga.add(e)})))})),Ga.scale.set(.1,.1,.1),Ga.updateMatrixWorld(!0),t=new Ra["a"],e.next=7,t.parse(Ga);case 7:n=e.sent,o=new Blob([n],{type:"application/octet-stream"}),i=document.getElementById("ar"),i.setAttribute("href",URL.createObjectURL(o)),i.setAttribute("download","sketch.usdz"),document.getElementById("download").setAttribute("href",URL.createObjectURL(o)),this.mode="view";case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},watch:{},mounted:function(){}};n("11f1");const Va=ze()(Ua,[["render",Qa],["__scopeId","data-v-206058b5"]]);var Fa=Va;function Xa(e,t,n,i,r,a){return Object(o["m"])(),Object(o["e"])("button",{onClick:t[0]||(t[0]=function(e){return a.exportToGltf()})},"Export to GLB")}n("c19f");var Na,qa=n("9e5c"),_a={name:"ExportGLTF",props:{},data:function(){return{}},methods:{exportToGltf:function(){var e=Object(Ha["a"])(regeneratorRuntime.mark((function e(){var t,n,o,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=function(e,t){i(new Blob([e],{type:"application/octet-stream"}),t)},a=function(e,t){i(new Blob([e],{type:"text/plain"}),t)},i=function(e,t){o.href=URL.createObjectURL(e),o.download=t,o.click()},this.text="Exporting...",Na=new r["Scene"],t=new r["Group"],rb.children.forEach((function(e){void 0!=e&&e.geometry&&"MeshLine"==e.geometry.type&&2==e.layers.mask&&e.geometry.attributes.position.array.length>6&&(!0===e.userData.stroke.show_stroke&&t.attach(za(e)),!0===e.userData.fill.show_fill&&Na.add(Wa(e)))})),Na.add(t),Na.scale.set(.1,.1,.1),Na.updateMatrixWorld(!0),console.log(Na),n=new qa["a"],n.parse(Na,(function(e){if(e instanceof ArrayBuffer)s(e,"scene.glb");else{var t=JSON.stringify(e,null,2);a(t,"scene.gltf")}}),{binary:!0}),o=document.createElement("a"),o.style.display="none",document.body.appendChild(o);case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},watch:{},mounted:function(){}};n("cd5a");const Za=ze()(_a,[["render",Xa],["__scopeId","data-v-e1688084"]]);var Ka=Za;function $a(e,t,n,i,r,a){return Object(o["m"])(),Object(o["e"])("button",{onClick:t[0]||(t[0]=function(){return a.showModal&&a.showModal.apply(a,arguments)})},"Export to HTML")}var Ja={name:"ExportHTML",methods:{showModal:function(){this.$emit("modal",{display:!0,mode:"export-html"})}}};n("5a36");const es=ze()(Ja,[["render",$a],["__scopeId","data-v-302ae2fb"]]);var ts=es,ns={name:"Share",props:{windowStates:Object},components:{ToggleWindow:la,Save:pa,Load:ma,ExportForBlender:Oa,ExportForProcreate:ka,StartPreview:Sa,ExportUSDZ:Fa,ExportGLB:Ka,ExportHTML:ts},emits:["modal-set","preview","toggle-window"],data:function(){return{show:!1,isSafari:!1}},methods:{hide:function(){this.show=!1},showModal:function(e){this.$emit("modal-set",e),this.hide()},startPreview:function(e){this.$emit("preview",e),this.hide()},toggleWindow:function(e){this.$emit("toggle-window",e)}},watch:{},mounted:function(){this.isSafari=navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1==navigator.userAgent.indexOf("CriOS")&&-1==navigator.userAgent.indexOf("FxiOS")}};n("9757");const os=ze()(ns,[["render",oa],["__scopeId","data-v-1a0e0249"]]);var is=os,rs=n("a26a"),as=n.n(rs),ss=function(e){return Object(o["o"])("data-v-29b5f1dc"),e=e(),Object(o["n"])(),e},cs={class:"container-column"},ls=ss((function(){return Object(o["f"])("div",{class:"group-label"},"Geometry",-1)})),us={class:"shapes-container"},ds=["onClick","title"],hs=["src","alt"],ps={class:"tooltip"},fs=["onClick","title"],bs=ss((function(){return Object(o["f"])("img",{src:as.a,alt:"Custom Model"},null,-1)})),gs={class:"tooltip"},ms=ss((function(){return Object(o["f"])("span",{style:{"font-size":"18px",color:"rgba(255,255,255,0.6)"}},"+",-1)})),vs=ss((function(){return Object(o["f"])("span",{class:"tooltip"},"Load GLB",-1)})),ys=[ms,vs],ws=ss((function(){return Object(o["f"])("div",{class:"separator-horizontal"},null,-1)})),Os=ss((function(){return Object(o["f"])("div",{class:"group-label"},"Material",-1)})),js={class:"materials-container"},As=["onClick","title"],xs={key:0,class:"std-preview"},ks=["src"];function Ms(e,t,n,i,r,a){var s=Object(o["s"])("draggable-window");return Object(o["m"])(),Object(o["c"])(s,{title:"Shapes & Materials",initialX:12,initialY:140,visible:"draw"==n.selectedTool,reopenTrigger:n.reopenTrigger,"start-open":n.startOpen,"is-open":n.isOpen,onClose:t[2]||(t[2]=function(t){return e.$emit("close")})},{default:Object(o["z"])((function(){return[Object(o["f"])("div",cs,[ls,Object(o["f"])("div",us,[(Object(o["m"])(!0),Object(o["e"])(o["a"],null,Object(o["q"])(r.shapes,(function(e){return Object(o["m"])(),Object(o["e"])("button",{key:e.value,class:Object(o["k"])(["shape-btn",{active:r.shape===e.value}]),onClick:function(t){return a.selectShape(e.value)},title:e.name},[Object(o["f"])("img",{src:e.icon,alt:e.name},null,8,hs),Object(o["f"])("span",ps,Object(o["t"])(e.name),1)],10,ds)})),128)),(Object(o["m"])(!0),Object(o["e"])(o["a"],null,Object(o["q"])(r.customModels,(function(e){return Object(o["m"])(),Object(o["e"])("button",{key:e.id,class:Object(o["k"])(["shape-btn",{active:r.shape===e.id}]),onClick:function(t){return a.selectCustomModel(e.id)},title:e.name},[bs,Object(o["f"])("span",gs,Object(o["t"])(e.name),1)],10,fs)})),128)),Object(o["f"])("button",{class:"shape-btn",onClick:t[0]||(t[0]=function(t){return e.$refs.fileInput.click()}),title:"Load Custom GLB"},ys),Object(o["f"])("input",{type:"file",ref:"fileInput",class:"hidden",accept:".glb,.gltf",onChange:t[1]||(t[1]=function(){return a.onFileChange&&a.onFileChange.apply(a,arguments)})},null,544)]),ws,Os,Object(o["f"])("div",js,[(Object(o["m"])(!0),Object(o["e"])(o["a"],null,Object(o["q"])(r.matcaps,(function(e){return Object(o["m"])(),Object(o["e"])("button",{key:e.name,class:Object(o["k"])(["matcap-btn",{active:r.currentMaterial===e.value}]),onClick:function(t){return a.selectMaterial(e.value)},title:e.name},["standard"===e.value?(Object(o["m"])(),Object(o["e"])("div",xs)):(Object(o["m"])(),Object(o["e"])("img",{key:1,src:e.image,class:"matcap-img"},null,8,ks))],10,As)})),128))])])]})),_:1},8,["visible","reopenTrigger","start-open","is-open"])}n("25f0");var Is={name:"ShapeSelector",components:{DraggableWindow:qe},props:{selectedTool:String,selectedShape:String,reopenTrigger:Number,startOpen:{type:Boolean,default:!0},isOpen:Boolean},emits:["selected-canvas-shape","close","load-custom-model","set-material"],data:function(){return{window:window,shape:"plane",currentMaterial:"standard",shapes:[{value:"plane",name:"Plane",icon:n("31a7")},{value:"cube",name:"Cube",icon:n("3eee")},{value:"cylinder",name:"Cylinder",icon:n("e7cc")},{value:"sphere",name:"Sphere",icon:n("35e6")},{value:"head",name:"Head",icon:n("17ca")}],customModels:[],matcaps:[{name:"Standard",value:"standard"},{name:"Clay",value:"matcaps/clay_studio.jpeg",image:"matcaps/clay_studio.jpeg"},{name:"Gold",value:"matcaps/metal_shiny.jpeg",image:"matcaps/metal_shiny.jpeg"},{name:"Metal",value:"matcaps/metal_lead.jpeg",image:"matcaps/metal_lead.jpeg"},{name:"Pearl",value:"matcaps/pearl.jpeg",image:"matcaps/pearl.jpeg"},{name:"Jade",value:"matcaps/jade.jpeg",image:"matcaps/jade.jpeg"},{name:"Skin",value:"matcaps/skin.jpeg",image:"matcaps/skin.jpeg"},{name:"Toon",value:"matcaps/toon.jpeg",image:"matcaps/toon.jpeg"}]}},methods:{selectShape:function(e){this.shape=e,this.$emit("selected-canvas-shape",e)},selectMaterial:function(e){this.currentMaterial=e,this.$emit("set-material",e)},onFileChange:function(e){var t=e.target.files[0];if(t){var n=URL.createObjectURL(t),o=Date.now().toString();this.customModels.push({id:o,name:t.name,url:n}),this.$emit("load-custom-model",{url:n,id:o}),this.selectCustomModel(o),e.target.value=""}},selectCustomModel:function(e){this.shape=e,this.$emit("selected-canvas-shape",{customId:e})}},watch:{selectedShape:function(e){e&&(this.shape=e)}},mounted:function(){this.selectedShape&&(this.shape=this.selectedShape)}};n("57b9");const Cs=ze()(Is,[["render",Ms],["__scopeId","data-v-29b5f1dc"]]);var Ss=Cs,Ts={class:"modal"},Es={class:"component-container"};function Ds(e,t,n,i,r,a){var s=Object(o["s"])("Welcome"),c=Object(o["s"])("Feedback"),l=Object(o["s"])("export-for-blender"),u=Object(o["s"])("export-for-procreate"),d=Object(o["s"])("Tutorial"),h=Object(o["s"])("Survey"),p=Object(o["s"])("brush-library"),f=Object(o["s"])("export-h-t-m-l-content");return n.modalProp.display?(Object(o["m"])(),Object(o["e"])("div",{key:0,class:"fade",onClick:t[0]||(t[0]=Object(o["C"])((function(){return a.hideModal&&a.hideModal.apply(a,arguments)}),["self"]))},[Object(o["f"])("div",Ts,[Object(o["f"])("div",Es,["about"===n.modalProp.mode?(Object(o["m"])(),Object(o["c"])(s,{key:0})):Object(o["d"])("",!0),"feedback"===n.modalProp.mode?(Object(o["m"])(),Object(o["c"])(c,{key:1})):Object(o["d"])("",!0),"blender"===n.modalProp.mode?(Object(o["m"])(),Object(o["c"])(l,{key:2})):Object(o["d"])("",!0),"procreate"===n.modalProp.mode?(Object(o["m"])(),Object(o["c"])(u,{key:3})):Object(o["d"])("",!0),"tutorial"===n.modalProp.mode?(Object(o["m"])(),Object(o["c"])(d,{key:4})):Object(o["d"])("",!0),"survey"===n.modalProp.mode?(Object(o["m"])(),Object(o["c"])(h,{key:5})):Object(o["d"])("",!0),"brush-library"===n.modalProp.mode?(Object(o["m"])(),Object(o["c"])(p,{key:6,onSetPreset:a.handleSetPreset},null,8,["onSetPreset"])):Object(o["d"])("",!0),"export-html"===n.modalProp.mode?(Object(o["m"])(),Object(o["c"])(f,{key:7})):Object(o["d"])("",!0)])])])):Object(o["d"])("",!0)}var Bs=Object(o["g"])('<h1 data-v-4d550b7e>Penzil</h1><h2 data-v-4d550b7e>Ver 0.2</h2><h2 data-v-4d550b7e> Penzil is a 3d sketching app designed and developed by <a href="http://twitter.com/jacopocolo" target="_blank" data-v-4d550b7e>Jacopo Col</a></h2><p data-v-4d550b7e> Penzil is built on top of the work of many people: the whole community behind <a href="https://github.com/vuejs/vue" target="_blank" data-v-4d550b7e>vue.js</a>, the whole community behind <a href="https://github.com/mrdoob/three.js/" target="_blank" data-v-4d550b7e>three.js</a>, <a href="https://github.com/spite/THREE.MeshLine" target="_blank" data-v-4d550b7e>THREE.Meshline</a> by spite, <a href="https://github.com/yomotsu/camera-controls" target="_blank" data-v-4d550b7e>camera controls</a> by yomotsu, <a href="https://github.com/Fyrestar/THREE.InfiniteGridHelper" target="_blank" data-v-4d550b7e>InfiniteGridHelper</a> by Fyrestar, <a href="https://github.com/ArthurClemens/Javascript-Undo-Manager" target="_blank" data-v-4d550b7e>Undo-Manager</a> by ArthurClemens, <a href="https://github.com/TrevorSundberg/h264-mp4-encoder" target="_blank" data-v-4d550b7e>h264-mp4-encoder</a> by TrevorSundberg. This project would have been impossible without the work of these people. </p>',4),Ps=[Bs];function Qs(e,t,n,i,r,a){return Object(o["m"])(),Object(o["e"])("div",null,Ps)}var Gs={name:"Welcome",data:function(){return{}}};n("7b28");const Hs=ze()(Gs,[["render",Qs],["__scopeId","data-v-4d550b7e"]]);var Rs=Hs,Ys=function(e){return Object(o["o"])("data-v-1af5b4e9"),e=e(),Object(o["n"])(),e},Ls=Ys((function(){return Object(o["f"])("h1",null,"Feedback",-1)})),zs=Ys((function(){return Object(o["f"])("p",null,"Thanks for trying out Penzil.",-1)})),Ws=Ys((function(){return Object(o["f"])("p",null,[Object(o["h"])(" There are two ways to send feedback: first of all, you can reach out "),Object(o["f"])("a",{href:"http://twitter.com/jacopocolo",target:"_blank"},"directly to me on Twitter"),Object(o["h"])(". Otherwise, you can join the "),Object(o["f"])("a",{href:"https://discord.gg/jvzjNpZGCk",target:"_blank"},"Penzil Discord"),Object(o["h"])(" server and post there. If you found something that you think it's a bug, you can also "),Object(o["f"])("a",{href:"https://github.com/jacopocolo/Penzil/issues",target:"_blank"},"open a new issue on Github"),Object(o["h"])(". ")],-1)})),Us=[Ls,zs,Ws];function Vs(e,t,n,i,r,a){return Object(o["m"])(),Object(o["e"])("div",null,Us)}var Fs={name:"Feedback",data:function(){return{}}};n("67db");const Xs=ze()(Fs,[["render",Vs],["__scopeId","data-v-1af5b4e9"]]);var Ns=Xs,qs=function(e){return Object(o["o"])("data-v-96b7a698"),e=e(),Object(o["n"])(),e},_s=qs((function(){return Object(o["f"])("h1",null,"Export for Blender",-1)})),Zs=qs((function(){return Object(o["f"])("p",null,[Object(o["h"])(" You can export your sketch for Blender with the button below but there isn't a proper improter yet, just a script. Hop in "),Object(o["f"])("a",{href:"https://discord.gg/jvzjNpZGCk",target:"_blank"},"Penzil Discord"),Object(o["h"])(" server and I'll guide you along. ")],-1)}));function Ks(e,t,n,i,r,a){return Object(o["m"])(),Object(o["e"])("div",null,[_s,Zs,Object(o["f"])("button",{onClick:t[0]||(t[0]=function(){return a.exportToGp&&a.exportToGp.apply(a,arguments)})},"Export for Blender")])}var $s={name:"Export",data:function(){return{}},methods:{exportToGp:function(){var e=[];rb.children.forEach((function(t){if(t.geometry&&"MeshLine"==t.geometry.type&&2==t.layers.mask){var n={},o=t.geometry.clone();o.applyMatrix(t.matrix),n.vertices=Array.from(o.attributes.position.array),n.stroke=t.userData.stroke,n.fill=t.userData.fill,n.mirrorOn=!1,n.position=new r["Vector3"](0,0,0),n.quaternion=new r["Quaternion"](0,0,0,1),n.scale=new r["Vector3"](1,1,1),n.matrix=t.matrix,e.push(n)}})),console.log(e);var t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),n=prompt("Enter a name for your file","gp_");if(null!=n){var o=document.createElement("a");o.setAttribute("href",t),o.setAttribute("download",n+".json"),o.click()}}}};n("3d19");const Js=ze()($s,[["render",Ks],["__scopeId","data-v-96b7a698"]]);var ec=Js,tc=function(e){return Object(o["o"])("data-v-d410ddd2"),e=e(),Object(o["n"])(),e},nc=tc((function(){return Object(o["f"])("h1",null,"Export for Procreate",-1)})),oc={class:"row"},ic=tc((function(){return Object(o["f"])("div",{id:"scene-usdz-canvas",class:"column"},[Object(o["f"])("canvas",{id:"usdz-canvas"}),Object(o["f"])("span",{class:"canvas-instructions"},"Tap or click on a fill (visible face or edge) to flip it")],-1)})),rc={id:"usdz-options",class:"column"},ac=tc((function(){return Object(o["f"])("label",{for:"strokes"},[Object(o["h"])("Merge strokes (reccomended) "),Object(o["f"])("p",null," All strokes will appear as a single layer in Procreate. You will lose individual stroke colors but you'll be able to repaint them in Procreate. This settings allows you to import bigger Penzil sketches before your artwork exceeds the device capabilities for import. ")],-1)})),sc=tc((function(){return Object(o["f"])("br",null,null,-1)})),cc=tc((function(){return Object(o["f"])("label",{for:"fills"},[Object(o["h"])("Manually check your fills. Tap or click on a visible face or edge to flip it "),Object(o["f"])("p",null," Procrete only support single face meshes and you can only paint their front side. Check that your fills are facing the direction you want. If you just see an outline you are looking at the back of a fill. Tap on its edge or turn it around and tap on it to flip it. ")],-1)}));function lc(e,t,n,i,r,a){return Object(o["m"])(),Object(o["e"])("div",null,[nc,Object(o["f"])("div",oc,[ic,Object(o["f"])("div",rc,[Object(o["f"])("p",null,[Object(o["A"])(Object(o["f"])("input",{type:"checkbox",name:"strokes","onUpdate:modelValue":t[0]||(t[0]=function(e){return r.mergeLines=e})},null,512),[[o["u"],r.mergeLines]]),ac,sc,Object(o["A"])(Object(o["f"])("input",{type:"checkbox",name:"fills","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.checkFills=e})},null,512),[[o["u"],r.checkFills]]),cc]),Object(o["f"])("button",{onClick:t[2]||(t[2]=function(){return a.exportToUSDZ&&a.exportToUSDZ.apply(a,arguments)})},"Export")])])])}n("b64b");var uc=n("9037");a["a"].install({THREE:r});var dc=new r["Raycaster"];dc.params.Line.threshold=.1;var hc,pc,fc=new r["Scene"],bc=new r["Scene"],gc=new r["WebGLRenderer"]({antialias:!0,alpha:!0}),mc=new r["PerspectiveCamera"](100,window.innerWidth/window.innerHeight,1,1e3),vc={name:"Export",data:function(){return{mergeLines:!0,checkFills:!1}},methods:{previewUSDZ:function(){var e=this;fc.background=new r["Color"](15790320),gc=new r["WebGLRenderer"]({antialias:!0,alpha:!1,canvas:document.getElementById("usdz-canvas")}),gc.setPixelRatio(window.devicePixelRatio),mc.zoom=3,mc.position.set(5,5,10),mc.updateProjectionMatrix(),hc=new r["Clock"],pc=new a["a"](mc,gc.domElement),pc.dampingFactor=20,pc.draggingDampingFactor=200,pc.mouseButtons.left=a["a"].ACTION.ROTATE,pc.mouseButtons.wheel=a["a"].ACTION.ROTATE,document.addEventListener("keydown",(function(t){"Space"===t.code&&(pc.mouseButtons.left=a["a"].ACTION.TRUCK,e.toolEnabled=!1)})),document.addEventListener("keyup",(function(t){"Space"===t.code&&(pc.mouseButtons.left=a["a"].ACTION.ROTATE,e.toolEnabled=!0)})),document.addEventListener("keydown",(function(t){"AltLeft"===t.code&&(pc.mouseButtons.left=a["a"].ACTION.ROTATE,e.toolEnabled=!1)})),document.addEventListener("keyup",(function(t){"AltLeft"===t.code&&(pc.mouseButtons.left=a["a"].ACTION.ROTATE,e.toolEnabled=!0)})),pc.mouseButtons.middle=a["a"].ACTION.DOLLY,pc.mouseButtons.right=a["a"].ACTION.ZOOM,pc.touches.one=a["a"].ACTION.TOUCH_ROTATE,pc.touches.two=a["a"].ACTION.TOUCH_ZOOM_ROTATE,pc.touches.three=a["a"].ACTION.TOUCH_DOLLY_TRUCK,pc.enabled=!0,pc.maxZoom=4e3,pc.minZoom=1.5,rb.children.forEach((function(e){void 0!=e&&e.geometry&&"MeshLine"==e.geometry.type&&2==e.layers.mask&&e.geometry.attributes.position.array.length>6&&(!0===e.userData.stroke.show_stroke&&fc.add(za(e,"basic")),!0===e.userData.fill.show_fill&&fc.add(Wa(e,"basic",!0)))})),fc.updateMatrixWorld(!0),gc.render(fc,mc),gc.domElement.addEventListener("pointerup",this.flipFace),window.addEventListener("resize",this.onWindowResize),window.addEventListener("orientationchange",this.onWindowResize),this.onWindowResize()},onWindowResize:function(){var e=gc.domElement;mc.aspect=e.clientWidth/e.clientHeight,mc.updateProjectionMatrix(),gc.setSize(e.clientWidth,e.clientHeight),gc.render(fc,mc)},flipFace:function(e){var t=gc.context.canvas.getBoundingClientRect(),n=(e.clientX-t.left)/(t.right-t.left)*2-1,o=-(e.clientY-t.top)/(t.bottom-t.top)*2+1;dc.setFromCamera(new r["Vector2"](n,o),mc);var i=dc.intersectObjects(fc.children)[0];if(void 0!=i)if("LineSegments"===i.object.type){var a=i.object.parent.renderOrder,s=i.object.renderOrder;i.object.parent.geometry.index.array=i.object.parent.geometry.index.array.reverse(),i.object.parent.geometry.index.needsUpdate=!0,i.object.renderOrder=s,i.object.parent.renderOrder=a}else{var c=i.object.renderOrder;i.object.geometry.index.array=i.object.geometry.index.array.reverse(),i.object.geometry.index.needsUpdate=!0,i.object.renderOrder=c}gc.render(fc,mc)},animtateSceneUSDZ:function(){var e=hc.getDelta(),t=pc.update(e);requestAnimationFrame(this.animtateSceneUSDZ),t&&gc.render(fc,mc)},exportToUSDZ:function(){var e=Object(Ha["a"])(regeneratorRuntime.mark((function e(){var t,n,o,i,a,s,c,l,u,d,h,p,f,b,g,m,v,y,w,O,j,A,x,k,M,I;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(bc=new r["Scene"],t=new r["Group"],n=[],o=[],i=0;i<fc.children.length;i++)s=fc.children[i],"MeshBasicMaterial"===(null===(a=s.material)||void 0===a?void 0:a.type)&&(l=s.clone(),l.material=new r["MeshStandardMaterial"]({color:s.material.color}),!0===this.mergeLines&&"TubeBufferGeometry"===(null===(c=s.geometry)||void 0===c?void 0:c.type)?(u=s.geometry,n.push(u),d=Array.from(s.geometry.attributes.uv.array),o.push(d)):bc.add(l));if(!(n.length>0)){e.next=37;break}h=new r["MeshStandardMaterial"]({color:1842206,flatShading:!0}),p=Object(uc["a"])(n,!1),f=Math.ceil(Math.sqrt(o.length)),b=1/f,g=0,console.log({uvs_length:o.length,cells:f,offset:b}),m=0;case 13:if(!(m<f)){e.next=29;break}v=0;case 15:if(!(v<f)){e.next=26;break}if(y=g,!(y>o.length-1)){e.next=21;break}return e.abrupt("continue",23);case 21:for(w=0;w<o[y].length;w+=2)o[y][w]=o[y][w]+v/b*b,o[y][w+1]=o[y][w+1]+m/b*b;g++;case 23:v++,e.next=15;break;case 26:m++,e.next=13;break;case 29:for(O=[].concat.apply([],o),j=0;j<O.length;j++)O[j]=O[j]*b;p.setAttribute("uv",new r["Float32BufferAttribute"](O,2)),p.attributes.uv.needsUpdate=!0,A=new r["Mesh"](p,h),bc.add(A),t.add(A),bc.add(t);case 37:return x=new Ra["a"],e.next=40,x.parse(bc);case 40:k=e.sent,M=new Blob([k],{type:"application/octet-stream"}),I=document.createElement("a"),I.setAttribute("href",URL.createObjectURL(M)),I.setAttribute("download","sketch.usdz"),I.click();case 46:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),clear:function(e){while(e.children.length>0)this.clear(e.children[0]),e.remove(e.children[0]);e.geometry&&e.geometry.dispose(),e.material&&(Object.keys(e.material).forEach((function(t){e.material[t]&&null!==e.material[t]&&"function"===typeof e.material[t].dispose&&e.material[t].dispose()})),e.material.dispose())}},mounted:function(){this.previewUSDZ(),this.animtateSceneUSDZ();var e=gc.domElement;gc.setSize(e.clientWidth,e.clientHeight)},unmounted:function(){this.clear(fc),this.clear(bc)}};n("be60");const yc=ze()(vc,[["render",lc],["__scopeId","data-v-d410ddd2"]]);var wc=yc,Oc=function(e){return Object(o["o"])("data-v-6ea82b80"),e=e(),Object(o["n"])(),e},jc={class:"self-destruct"},Ac=Oc((function(){return Object(o["f"])("h1",null,"A quick intro to Penzil v 0.2",-1)})),xc=Oc((function(){return Object(o["f"])("p",null,[Object(o["h"])(" Penzil is a web application for sketching in 3d. It is primarily designed for touch screens but it works on desktop as well (although, if you are on desktop, I recommend you look into "),Object(o["f"])("a",{href:"https://www.youtube.com/watch?v=c57qq2nE3B0",target:"_blank"},"Blender's Grease Pencil"),Object(o["h"])("). ")],-1)})),kc=Oc((function(){return Object(o["f"])("p",null,' In Penzil, you draw on a "3d canvas". The "3d canvas" is the white surface at the center of the screen. You can only draw on the canvas. By moving and rotating the canvas around, you can sketch in 3d. ',-1)})),Mc=Oc((function(){return Object(o["f"])("h2",null,"Drawing and erasing",-1)})),Ic=Oc((function(){return Object(o["f"])("p",null,' You can draw and erase with the left mouse button, finger or pen on top of the "3d canvas". ',-1)})),Cc=Oc((function(){return Object(o["f"])("p",null," Switch between drawing and erasing using the bar at the top of the screen. ",-1)})),Sc=Oc((function(){return Object(o["f"])("div",{class:"container"},[Object(o["f"])("iframe",{src:"https://www.youtube.com/embed/yeyGktOCNfk",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",class:"video"})],-1)})),Tc=Oc((function(){return Object(o["f"])("h2",null,"Rotate or move the 3d canvas",-1)})),Ec=Oc((function(){return Object(o["f"])("p",null,' You can move the "3d canvas" by grabbing the arrow heads at the center of the "3d canvas". You can rotate the "3d canvas" by grabbing the arcs. You grab arrow heads and arcs simply by tapping on them or clicking with the left mouse and dragging. ',-1)})),Dc=Oc((function(){return Object(o["f"])("div",{class:"container"},[Object(o["f"])("iframe",{src:"https://www.youtube.com/embed/sPfi9Alqugk",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",class:"video"})],-1)})),Bc=Oc((function(){return Object(o["f"])("h2",null,"Look around and pan",-1)})),Pc=Oc((function(){return Object(o["f"])("p",null,[Object(o["h"])(' You can look around using two fingers, using a trackpad, a trackball or by pressing the Option key ("Alt") and using the left mouse button. You can pan by swiping with three fingers or by pressing the spacebar and clicking with the left button.'),Object(o["f"])("br"),Object(o["h"])("You can also use the cube in the top right corner to look around. To position the camera precisely, tap on any of the faces of the cube. ")],-1)})),Qc=Oc((function(){return Object(o["f"])("div",{class:"container"},[Object(o["f"])("iframe",{src:"https://www.youtube.com/embed/ON1rNnmjKbQ",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",class:"video"})],-1)})),Gc=Oc((function(){return Object(o["f"])("h2",null,'"3d canvas" shapes',-1)})),Hc=Oc((function(){return Object(o["f"])("p",null,' Penzil comes with several "3d canvas" shapes. The default one is a flat plane but you can also pick: a cube, a cylinder, a sphere and a simplified head model. They all behave the same: draw on them and your lines will stick to the surface of the "3d canvas". ',-1)})),Rc=Oc((function(){return Object(o["f"])("div",{class:"container"},[Object(o["f"])("iframe",{src:"https://www.youtube.com/embed/iwI_lWCxttE",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",class:"video"})],-1)})),Yc=Oc((function(){return Object(o["f"])("h2",null,'"3d canvas" settings',-1)})),Lc=Oc((function(){return Object(o["f"])("p",null,[Object(o["h"])(' There are several settings available for the "3d canvas". Most are self-explanatory: you can lock and unlock the movement of the "3d canvas" and you can show or hide it. But you can also switch the transformation tools between Move and Scale.'),Object(o["f"])("br"),Object(o["h"])('The Scale tool allows you to resize the "3d canvas". Note that depth transformations are not availalbe for flat surfaceses like the plane.'),Object(o["f"])("br"),Object(o["h"])('The snap toggle allows you to turn on or off snapping. The snapping allows you to move and rotate the "3d canvas" in fixed increments.'),Object(o["f"])("br"),Object(o["h"])('Finally the reset button resets all the transformations applies to the "3d canvas". ')],-1)})),zc=Oc((function(){return Object(o["f"])("div",{class:"container"},[Object(o["f"])("iframe",{src:"https://www.youtube.com/embed/cXAbjI5YEM0",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",class:"video"})],-1)})),Wc=Oc((function(){return Object(o["f"])("h2",null,"Stroke and fill settings",-1)})),Uc=Oc((function(){return Object(o["f"])("p",null,[Object(o["h"])(" The round icon next to the draw tool at the top allows you to change the size and the color of the stroke, and the color of fill. Stroke and fill can also be toggled on independently. "),Object(o["f"])("br"),Object(o["h"])("When using fill, note that results may vary when drawing on surfaces that are not flat. To improve quality of the fill, try to draw the same shape but slower. ")],-1)})),Vc=Oc((function(){return Object(o["f"])("div",{class:"container"},[Object(o["f"])("iframe",{src:"https://www.youtube.com/embed/8A0j1mu0i_Y",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",class:"video"})],-1)}));function Fc(e,t,n,i,r,a){return Object(o["m"])(),Object(o["e"])("div",null,[Object(o["f"])("p",jc," This tutorial will self-destruct "+Object(o["t"])(4-r.count===0?"the next":"in "+r.countDown)+" "+Object(o["t"])(4-r.count>1?"sessions":"session")+". ",1),Ac,xc,kc,Mc,Ic,Cc,Sc,Tc,Ec,Dc,Bc,Pc,Qc,Gc,Hc,Rc,Yc,Lc,zc,Wc,Uc,Vc])}var Xc={name:"Tutorial",data:function(){return{count:0,countDown:0}},mounted:function(){null===localStorage.getItem("tut01")?this.count=0:this.count=parseInt(window.localStorage.tut02),this.countDown=-(this.count-4)}};n("8264");const Nc=ze()(Xc,[["render",Fc],["__scopeId","data-v-6ea82b80"]]);var qc=Nc,_c=function(e){return Object(o["o"])("data-v-57022cc6"),e=e(),Object(o["n"])(),e},Zc=_c((function(){return Object(o["f"])("iframe",{src:"https://docs.google.com/forms/d/e/1FAIpQLSccJWlem-HLrgscUJLXLqKpFXOC3LnDkUUJOoF7Saxrq3gNKQ/viewform?embedded=true",width:"100%",height:"2478",frameborder:"0",marginheight:"0",marginwidth:"0"},"Loading",-1)})),Kc=[Zc];function $c(e,t,n,i,r,a){return Object(o["m"])(),Object(o["e"])("div",null,Kc)}var Jc={name:"Survey",data:function(){return{}},mounted:function(){}};n("74a6");const el=ze()(Jc,[["render",$c],["__scopeId","data-v-57022cc6"]]);var tl=el,nl=function(e){return Object(o["o"])("data-v-5811f743"),e=e(),Object(o["n"])(),e},ol={class:"brush-library"},il=nl((function(){return Object(o["f"])("h2",null,"Brush Library",-1)})),rl={class:"presets"},al=nl((function(){return Object(o["f"])("div",{class:"icon"},"",-1)})),sl=nl((function(){return Object(o["f"])("div",{class:"info"},[Object(o["f"])("h3",null,"Pencil"),Object(o["f"])("p",null,"Fine lines for sketching.")],-1)})),cl=[al,sl],ll=nl((function(){return Object(o["f"])("div",{class:"icon"},"",-1)})),ul=nl((function(){return Object(o["f"])("div",{class:"info"},[Object(o["f"])("h3",null,"Pen"),Object(o["f"])("p",null,"Clean lines for inking.")],-1)})),dl=[ll,ul],hl=nl((function(){return Object(o["f"])("div",{class:"icon"},"",-1)})),pl=nl((function(){return Object(o["f"])("div",{class:"info"},[Object(o["f"])("h3",null,"Marker"),Object(o["f"])("p",null,"Thick lines for coloring.")],-1)})),fl=[hl,pl];function bl(e,t,n,i,r,a){return Object(o["m"])(),Object(o["e"])("div",ol,[il,Object(o["f"])("div",rl,[Object(o["f"])("div",{class:"preset",onClick:t[0]||(t[0]=function(e){return a.selectPreset("pencil")})},cl),Object(o["f"])("div",{class:"preset",onClick:t[1]||(t[1]=function(e){return a.selectPreset("pen")})},dl),Object(o["f"])("div",{class:"preset",onClick:t[2]||(t[2]=function(e){return a.selectPreset("marker")})},fl)])])}var gl={name:"BrushLibrary",emits:["set-preset"],methods:{selectPreset:function(e){var t={};switch(e){case"pencil":t={strokeWidth:2,strokeColor:{r:50,g:50,b:50},stroke:!0,fill:!1};break;case"pen":t={strokeWidth:5,strokeColor:{r:0,g:0,b:0},stroke:!0,fill:!1};break;case"marker":t={strokeWidth:20,strokeColor:{r:255,g:0,b:0},stroke:!0,fill:!1};break}this.$emit("set-preset",t)}}};n("8ad9");const ml=ze()(gl,[["render",bl],["__scopeId","data-v-5811f743"]]);var vl=ml,yl=function(e){return Object(o["o"])("data-v-3cc9c38a"),e=e(),Object(o["n"])(),e},wl={class:"export-html-container"},Ol=yl((function(){return Object(o["f"])("h2",null,"Export to HTML",-1)})),jl=yl((function(){return Object(o["f"])("p",null,"Create a standalone HTML file to view your 3D scene in any browser.",-1)})),Al={class:"options"},xl=Object(o["h"])(" Enable AR (WebXR) "),kl=Object(o["h"])(" Auto Rotate "),Ml={key:0};function Il(e,t,n,i,r,a){return Object(o["m"])(),Object(o["e"])("div",wl,[Ol,jl,Object(o["f"])("div",Al,[Object(o["f"])("label",null,[Object(o["A"])(Object(o["f"])("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=function(e){return r.includeAr=e})},null,512),[[o["u"],r.includeAr]]),xl]),Object(o["f"])("label",null,[Object(o["A"])(Object(o["f"])("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.autoRotate=e})},null,512),[[o["u"],r.autoRotate]]),kl])]),Object(o["f"])("button",{onClick:t[2]||(t[2]=function(){return a.exportHtml&&a.exportHtml.apply(a,arguments)})},"Download HTML"),r.status?(Object(o["m"])(),Object(o["e"])("p",Ml,Object(o["t"])(r.status),1)):Object(o["d"])("",!0)])}var Cl={name:"ExportHTMLContent",data:function(){return{status:"",includeAr:!0,autoRotate:!0}},methods:{exportHtml:function(){var e=Object(Ha["a"])(regeneratorRuntime.mark((function e(){var t,n,o,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.status="Generating 3D model...",t=new r["Scene"],n=new r["Group"],rb.traverse((function(e){if(e.isMesh&&e.visible&&!e.isTransformControl)if(e.geometry&&"MeshLine"===e.geometry.type)e.userData.stroke&&e.userData.stroke.show_stroke&&n.add(za(e)),e.userData.fill&&e.userData.fill.show_fill&&t.add(Wa(e));else if(e.userData.stroke||"BufferGeometry"===e.geometry.type){var o=e.clone();n.add(o)}})),t.add(n),t.scale.set(.1,.1,.1),this.status="Encoding GLB...",o=new qa["a"],o.parse(t,(function(e){var t=new Blob([e],{type:"application/octet-stream"});i.generateHtml(t)}),{binary:!0});case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),generateHtml:function(e){var t=this;this.status="Creating HTML...";var n=new FileReader;n.readAsDataURL(e),n.onloadend=function(){var e=n.result,o='<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Penzil 3D Scene</title>\n    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></scr'+'ipt>\n    <style>\n        body { margin: 0; padding: 0; width: 100vw; height: 100vh; background-color: #222; }\n        model-viewer { width: 100%; height: 100%; }\n    </style>\n</head>\n<body>\n    <model-viewer \n        src="'.concat(e,'" \n        camera-controls \n        ').concat(t.autoRotate?"auto-rotate":""," \n        ").concat(t.includeAr?'ar ar-modes="webxr scene-viewer quick-look"':"",' \n        shadow-intensity="1">\n    </model-viewer>\n</body>\n</html>');t.downloadFile("scene.html",o),t.status="Done!"}},downloadFile:function(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/html;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}};n("bff5");const Sl=ze()(Cl,[["render",Il],["__scopeId","data-v-3cc9c38a"]]);var Tl=Sl,El={name:"VideoExportPreview",components:{Welcome:Rs,Feedback:Ns,ExportForBlender:ec,ExportForProcreate:wc,Tutorial:qc,Survey:tl,BrushLibrary:vl,ExportHTMLContent:Tl},data:function(){return{}},props:{modalProp:Object},methods:{hideModal:function(){this.$emit("modal-set",{show:!1,mode:"about"})},handleSetPreset:function(e){this.$emit("set-preset",e),this.hideModal()}},watch:{modalProp:function(e){console.log(e)}}};n("57a5");const Dl=ze()(El,[["render",Ds],["__scopeId","data-v-0bfba0f8"]]);var Bl=Dl,Pl={key:0,class:"fade"},Ql={class:"fade-controls"},Gl={class:"rightAlign"},Hl=["disabled"],Rl=Object(o["f"])("label",{for:"360"},"360",-1),Yl=["disabled"],Ll=Object(o["f"])("label",{for:"bf"},"Back and forth",-1),zl=["disabled"],Wl={key:0};function Ul(e,t,n,i,r,a){return r.previewing?(Object(o["m"])(),Object(o["e"])("div",Pl,[Object(o["f"])("div",Ql,[Object(o["f"])("button",{onClick:t[0]||(t[0]=function(e){return a.cancel()})},"Cancel"),Object(o["f"])("span",Gl,[Object(o["A"])(Object(o["f"])("input",{type:"radio",name:"360",value:"360",id:"360","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.loop=e}),disabled:r.recording},null,8,Hl),[[o["v"],r.loop]]),Rl,Object(o["A"])(Object(o["f"])("input",{type:"radio",name:"bf",value:"bf",id:"bf","onUpdate:modelValue":t[2]||(t[2]=function(e){return r.loop=e}),disabled:r.recording},null,8,Yl),[[o["v"],r.loop]]),Ll,Object(o["f"])("button",{onClick:t[3]||(t[3]=function(e){return a.startRecording()}),disabled:r.recording,style:{"pointer-events":"auto",background:"rgba(0,0,0,0.1)",border:"1px solid #ccc"}},Object(o["t"])(r.recording?"Recording...":"Start recording"),9,zl)]),r.recording?(Object(o["m"])(),Object(o["e"])("span",Wl,"Recording frame "+Object(o["t"])(r.currentLength)+" of "+Object(o["t"])(r.length),1)):Object(o["d"])("",!0)])])):Object(o["d"])("",!0)}n("a874");var Vl=n("d0b3"),Fl={name:"VideoExport",components:{},data:function(){return{previewing:!1,recording:!1,loop:"360",length:240,currentLength:0,startAzimuthAngle:void 0,polarAngle:void 0,pos:[]}},emits:["stop-previewing"],props:{show:Boolean},methods:{easeInOutQuad:function(e,t,n,o){return e/=o/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)},easeInOutQuadYoyo:function(e,t,n,o){if(e<=o/2){this.pos.push(this.easeInOutQuad(e,t,n,o/2));var i=this.pos[this.pos.length-1];return i}var r=this.pos.pop();return r},easing:function(e){return"360"==e?this.easeInOutQuad(this.currentLength,this.startAzimuthAngle,360*r["MathUtils"].DEG2RAD,this.length):"bf"==e?this.easeInOutQuadYoyo(this.currentLength,this.startAzimuthAngle,Math.PI/20,this.length):void 0},animate:function(e,t){var n=this;if(this.previewing&&(!this.recording||t)){ob.render(rb,ib);var o=this.easing(this.loop);if(Zf.rotateTo(o,this.polarAngle,!1),this.recording){if(this.currentLength>0){var i=new Uint8Array(e.drawingBufferWidth*e.drawingBufferHeight*4);e.readPixels(0,0,e.drawingBufferWidth,e.drawingBufferHeight,e.RGBA,e.UNSIGNED_BYTE,i);for(var r=e.drawingBufferHeight/2|0,a=4*e.drawingBufferWidth,s=new Uint8Array(4*e.drawingBufferWidth),c=0;c<r;++c){var l=c*a,u=(e.drawingBufferHeight-c-1)*a;s.set(i.subarray(l,l+a)),i.copyWithin(l,u,u+a),i.set(s,u)}t.addFrameRgba(i)}if(this.currentLength<this.length)requestAnimationFrame((function(){n.animate(e,t)})),this.currentLength++;else{t.finalize();var d=t.FS.readFile(t.outputFilename);this.download(URL.createObjectURL(new Blob([d],{type:"video/mp4"}))),t.delete(),this.cancel()}}else this.currentLength<this.length?(requestAnimationFrame((function(){return n.animate(e,t)})),this.currentLength++):(this.currentLength=0,requestAnimationFrame((function(){return n.animate(e,t)})))}},startRecording:function(){var e=this;ob.setPixelRatio(1);var t=window.innerWidth%2===0?window.innerWidth:window.innerWidth-1,n=window.innerHeight%2===0?window.innerHeight:window.innerHeight-1;ob.setSize(t,n),Zf.normalizeRotations(),Vl["createH264MP4Encoder"]().then((function(t){var n=ob.getContext();t.width=n.drawingBufferWidth,t.height=n.drawingBufferHeight,t.initialize(),e.recording=!0,e.currentLength=0,e.animate(n,t)}))},startPreview:function(){Zf.normalizeRotations(),this.startAzimuthAngle=Zf.azimuthAngle,this.polarAngle=Zf.polarAngle,this.previewing=!0,Zf.dampingFactor=.5,this.animate()},download:function(e,t){var n=document.createElement("a");n.href=e,n.download=t||"download",n.click()},cancel:function(){this.previewing=!1,this.recording=!1,ob.setPixelRatio(window.devicePixelRatio),window.dispatchEvent(new Event("resize")),this.currentLength=0,this.pos=[],ib.layers.enable(0),this.loop="360",Zf.dampingFactor=.5,Zf.rotateTo(this.startAzimuthAngle,this.polarAngle,!0),this.startAzimuthAngle=void 0,this.polarAngle=void 0,setTimeout((function(){Zf.dampingFactor=20,Zf.normalizeRotations()}),100),ob.render(rb,ib),this.$emit("stop-previewing",!1)}},watch:{show:function(e){!0===e&&this.startPreview()},loop:function(){this.currentLength=0}},mounted:function(){}};n("dac2");const Xl=ze()(Fl,[["render",Ul]]);var Nl=Xl,ql=function(e){return Object(o["o"])("data-v-f4b48902"),e=e(),Object(o["n"])(),e},_l={class:"scene-settings"},Zl=ql((function(){return Object(o["f"])("div",{class:"group-title"},"Background",-1)})),Kl={class:"setting-row"},$l=ql((function(){return Object(o["f"])("span",null,"Color",-1)})),Jl={class:"setting-row"},eu=ql((function(){return Object(o["f"])("span",null,"Fog",-1)})),tu=["src"],nu=ql((function(){return Object(o["f"])("div",{class:"separator"},null,-1)})),ou=ql((function(){return Object(o["f"])("div",{class:"group-title"},"Environment (HDRI)",-1)})),iu={class:"setting-row"},ru=ql((function(){return Object(o["f"])("span",null,"Image (.hdr, .jpg)",-1)})),au={class:"custom-file-upload"},su=Object(o["h"])(" Upload "),cu={class:"setting-row"},lu=ql((function(){return Object(o["f"])("span",null,"Active (Lighting)",-1)})),uu=["src"],du={key:0,class:"setting-row"},hu=ql((function(){return Object(o["f"])("span",null,"Visible Background",-1)})),pu=["src"],fu=ql((function(){return Object(o["f"])("div",{class:"separator"},null,-1)})),bu=ql((function(){return Object(o["f"])("div",{class:"separator"},null,-1)})),gu=ql((function(){return Object(o["f"])("div",{class:"group-title"},"Grid",-1)})),mu={class:"setting-row"},vu=ql((function(){return Object(o["f"])("span",null,"Visible",-1)})),yu=["src"],wu={key:1,class:"setting-row"},Ou=ql((function(){return Object(o["f"])("span",null,"Color",-1)})),ju={key:2,class:"setting-row"},Au=ql((function(){return Object(o["f"])("span",null,"Size",-1)})),xu={key:3,class:"setting-row"},ku=ql((function(){return Object(o["f"])("span",null,"Divisions",-1)})),Mu={key:4,class:"setting-row"},Iu=ql((function(){return Object(o["f"])("span",null,"Divisions Color",-1)})),Cu={class:"setting-row"},Su=ql((function(){return Object(o["f"])("span",null,"Fade Dist",-1)})),Tu={class:"setting-row"},Eu=ql((function(){return Object(o["f"])("span",null,"Fade Near",-1)})),Du={class:"setting-row"},Bu=ql((function(){return Object(o["f"])("span",null,"Infinite",-1)})),Pu=["src"],Qu=ql((function(){return Object(o["f"])("div",{class:"separator"},null,-1)})),Gu=ql((function(){return Object(o["f"])("div",{class:"group-title"},"Effects",-1)})),Hu={class:"setting-row"},Ru=ql((function(){return Object(o["f"])("span",null,"Bloom (Glow)",-1)})),Yu=["src"],Lu={key:5,class:"setting-row"},zu=ql((function(){return Object(o["f"])("span",null,"Strength",-1)})),Wu={key:6,class:"setting-row"},Uu=ql((function(){return Object(o["f"])("span",null,"Threshold",-1)})),Vu={key:7,class:"setting-row"},Fu=ql((function(){return Object(o["f"])("span",null,"Radius",-1)}));function Xu(e,t,i,r,a,s){var c=Object(o["s"])("draggable-window");return Object(o["m"])(),Object(o["c"])(c,{title:"Scene Setup",initialX:a.window.innerWidth-240,initialY:400,visible:i.visible,reopenTrigger:i.reopenTrigger,"start-open":i.startOpen,"is-open":i.isOpen,onClose:t[27]||(t[27]=function(t){return e.$emit("close")})},{default:Object(o["z"])((function(){return[Object(o["f"])("div",_l,[Zl,Object(o["f"])("div",Kl,[$l,Object(o["A"])(Object(o["f"])("input",{type:"color","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.backgroundColor=e}),onInput:t[1]||(t[1]=function(){return s.updateBackground&&s.updateBackground.apply(s,arguments)})},null,544),[[o["x"],a.backgroundColor]])]),Object(o["f"])("div",Jl,[eu,Object(o["f"])("div",{class:"toggle",onClick:t[2]||(t[2]=function(){return s.toggleFog&&s.toggleFog.apply(s,arguments)})},[Object(o["f"])("img",{src:a.fogVisible?n("7f87"):n("5b02")},null,8,tu)])]),nu,ou,Object(o["f"])("div",iu,[ru,Object(o["f"])("label",au,[Object(o["f"])("input",{type:"file",onChange:t[3]||(t[3]=function(){return s.handleFileChange&&s.handleFileChange.apply(s,arguments)}),accept:".hdr,.jpg,.png,.jpeg"},null,32),su])]),Object(o["f"])("div",cu,[lu,Object(o["f"])("div",{class:"toggle",onClick:t[4]||(t[4]=function(){return s.toggleHdriActive&&s.toggleHdriActive.apply(s,arguments)})},[Object(o["f"])("img",{src:a.hdriActive?n("7f87"):n("5b02")},null,8,uu)])]),a.hdriActive?(Object(o["m"])(),Object(o["e"])("div",du,[hu,Object(o["f"])("div",{class:"toggle",onClick:t[5]||(t[5]=function(){return s.toggleHdriBackground&&s.toggleHdriBackground.apply(s,arguments)})},[Object(o["f"])("img",{src:a.hdriBackgroundVisible?n("7f87"):n("5b02")},null,8,pu)])])):Object(o["d"])("",!0),fu,bu,gu,Object(o["f"])("div",mu,[vu,Object(o["f"])("div",{class:"toggle",onClick:t[6]||(t[6]=function(){return s.toggleGrid&&s.toggleGrid.apply(s,arguments)})},[Object(o["f"])("img",{src:a.gridVisible?n("7f87"):n("5b02")},null,8,yu)])]),a.gridVisible?(Object(o["m"])(),Object(o["e"])("div",wu,[Ou,Object(o["A"])(Object(o["f"])("input",{type:"color","onUpdate:modelValue":t[7]||(t[7]=function(e){return a.gridColor=e}),onInput:t[8]||(t[8]=function(){return s.updateGrid&&s.updateGrid.apply(s,arguments)})},null,544),[[o["x"],a.gridColor]])])):Object(o["d"])("",!0),a.gridVisible?(Object(o["m"])(),Object(o["e"])("div",ju,[Au,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"1",max:"100","onUpdate:modelValue":t[9]||(t[9]=function(e){return a.gridSize=e}),onInput:t[10]||(t[10]=function(){return s.updateGrid&&s.updateGrid.apply(s,arguments)})},null,544),[[o["x"],a.gridSize,void 0,{number:!0}]])])):Object(o["d"])("",!0),a.gridVisible?(Object(o["m"])(),Object(o["e"])("div",xu,[ku,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"1",max:"50","onUpdate:modelValue":t[11]||(t[11]=function(e){return a.gridDivisions=e}),onInput:t[12]||(t[12]=function(){return s.updateGrid&&s.updateGrid.apply(s,arguments)})},null,544),[[o["x"],a.gridDivisions,void 0,{number:!0}]])])):Object(o["d"])("",!0),a.gridVisible?(Object(o["m"])(),Object(o["e"])("div",Mu,[Iu,Object(o["A"])(Object(o["f"])("input",{type:"color","onUpdate:modelValue":t[13]||(t[13]=function(e){return a.divisionsColor=e}),onInput:t[14]||(t[14]=function(){return s.updateGrid&&s.updateGrid.apply(s,arguments)})},null,544),[[o["x"],a.divisionsColor]])])):Object(o["d"])("",!0),Object(o["f"])("div",Cu,[Su,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"10",max:"2000","onUpdate:modelValue":t[15]||(t[15]=function(e){return a.fadeDistance=e}),onInput:t[16]||(t[16]=function(){return s.updateGrid&&s.updateGrid.apply(s,arguments)})},null,544),[[o["x"],a.fadeDistance,void 0,{number:!0}]])]),Object(o["f"])("div",Tu,[Eu,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"1000","onUpdate:modelValue":t[17]||(t[17]=function(e){return a.fadeDistanceNear=e}),onInput:t[18]||(t[18]=function(){return s.updateGrid&&s.updateGrid.apply(s,arguments)})},null,544),[[o["x"],a.fadeDistanceNear,void 0,{number:!0}]])]),Object(o["f"])("div",Du,[Bu,Object(o["f"])("div",{class:"toggle",onClick:t[19]||(t[19]=function(){return s.toggleInfiniteGrid&&s.toggleInfiniteGrid.apply(s,arguments)})},[Object(o["f"])("img",{src:a.infiniteGrid?n("7f87"):n("5b02")},null,8,Pu)])]),Qu,Gu,Object(o["f"])("div",Hu,[Ru,Object(o["f"])("div",{class:"toggle",onClick:t[20]||(t[20]=function(){return s.toggleBloom&&s.toggleBloom.apply(s,arguments)})},[Object(o["f"])("img",{src:a.bloomEnabled?n("7f87"):n("5b02")},null,8,Yu)])]),a.bloomEnabled?(Object(o["m"])(),Object(o["e"])("div",Lu,[zu,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"10",step:"0.1","onUpdate:modelValue":t[21]||(t[21]=function(e){return a.bloomStrength=e}),onInput:t[22]||(t[22]=function(){return s.updateBloom&&s.updateBloom.apply(s,arguments)})},null,544),[[o["x"],a.bloomStrength,void 0,{number:!0}]])])):Object(o["d"])("",!0),a.bloomEnabled?(Object(o["m"])(),Object(o["e"])("div",Wu,[Uu,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":t[23]||(t[23]=function(e){return a.bloomThreshold=e}),onInput:t[24]||(t[24]=function(){return s.updateBloom&&s.updateBloom.apply(s,arguments)})},null,544),[[o["x"],a.bloomThreshold,void 0,{number:!0}]])])):Object(o["d"])("",!0),a.bloomEnabled?(Object(o["m"])(),Object(o["e"])("div",Vu,[Fu,Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":t[25]||(t[25]=function(e){return a.bloomRadius=e}),onInput:t[26]||(t[26]=function(){return s.updateBloom&&s.updateBloom.apply(s,arguments)})},null,544),[[o["x"],a.bloomRadius,void 0,{number:!0}]])])):Object(o["d"])("",!0)])]})),_:1},8,["initialX","visible","reopenTrigger","start-open","is-open"])}n("8a79");var Nu=n("2132"),qu={name:"SceneSettings",components:{DraggableWindow:qe},props:{visible:Boolean,reopenTrigger:Number,startOpen:{type:Boolean,default:!0},isOpen:Boolean},emits:["close","bloomChange"],data:function(){return{window:window,backgroundColor:"#dddddd",gridVisible:!0,gridColor:"#0000ff",gridSize:10,gridDivisions:10,infiniteGrid:!0,fadeDistance:400,fadeDistanceNear:0,divisionsColor:"#ff0000",fogVisible:!0,hdriActive:!1,hdriBackgroundVisible:!1,sceneEnvironment:null,bloomEnabled:!1,bloomStrength:2,bloomThreshold:.2,bloomRadius:.4}},created:function(){this.gridHelper=null,this.infiniteGridHelper=null},methods:{updateBackground:function(){rb&&(this.hdriActive&&this.hdriBackgroundVisible&&this.sceneEnvironment?rb.background=this.sceneEnvironment:rb.background=new r["Color"](this.backgroundColor),this.updateFog(),ab())},updateFog:function(){rb&&(this.fogVisible?rb.fog=new r["Fog"](this.backgroundColor,this.fadeDistanceNear+10,this.fadeDistance):rb.fog=null)},toggleGrid:function(){this.gridVisible=!this.gridVisible,this.updateGrid()},toggleInfiniteGrid:function(){this.infiniteGrid=!this.infiniteGrid,this.updateGrid()},toggleFog:function(){this.fogVisible=!this.fogVisible,this.updateFog(),ab()},updateGrid:function(){rb&&(this.updateFog(),this.gridHelper&&(rb.remove(this.gridHelper),this.gridHelper=null),this.infiniteGridHelper&&(rb.remove(this.infiniteGridHelper),this.infiniteGridHelper=null),this.gridVisible?(this.infiniteGrid?(this.infiniteGridHelper=new c(this.gridSize/10,this.gridDivisions,new r["Color"](this.gridColor),this.fadeDistance,"xzy",new r["Color"](this.divisionsColor),this.fadeDistanceNear),rb.add(this.infiniteGridHelper)):(this.gridHelper=new r["GridHelper"](10*this.gridSize,10*this.gridDivisions,new r["Color"](this.divisionsColor),new r["Color"](this.gridColor)),rb.add(this.gridHelper)),ab()):ab())},handleFileChange:function(e){var t=this,n=e.target.files[0];if(n){var o=URL.createObjectURL(n),i=n.name.toLowerCase().endsWith(".hdr");i?(new Nu["a"]).setDataType(r["UnsignedByteType"]).load(o,(function(e){var n=new r["PMREMGenerator"](ob);n.compileEquirectangularShader();var o=n.fromEquirectangular(e).texture;t.sceneEnvironment=o,t.hdriActive=!0,t.updateEnvironment(),e.dispose(),n.dispose()})):(new r["TextureLoader"]).load(o,(function(e){e.mapping=r["EquirectangularReflectionMapping"],t.sceneEnvironment=e,t.hdriActive=!0,t.updateEnvironment()}))}},toggleHdriActive:function(){this.hdriActive=!this.hdriActive,this.updateEnvironment()},toggleHdriBackground:function(){this.hdriBackgroundVisible=!this.hdriBackgroundVisible,this.updateBackground()},updateEnvironment:function(){rb&&(this.hdriActive&&this.sceneEnvironment?rb.environment=this.sceneEnvironment:rb.environment=null,this.updateBackground())},toggleBloom:function(){this.bloomEnabled=!this.bloomEnabled,this.updateBloom()},updateBloom:function(){this.$emit("bloomChange",{enabled:this.bloomEnabled,strength:this.bloomStrength,threshold:this.bloomThreshold,radius:this.bloomRadius})}},mounted:function(){this.updateGrid()},beforeUnmount:function(){this.gridHelper&&rb.remove(this.gridHelper),this.infiniteGridHelper&&rb.remove(this.infiniteGridHelper)}};n("9371");const _u=ze()(qu,[["render",Xu],["__scopeId","data-v-f4b48902"]]);var Zu=_u,Ku={class:"color-palette"},$u={class:"group-title"},Ju={class:"colors-grid"},ed=["onClick","title"];function td(e,t,n,i,r,a){var s=Object(o["s"])("draggable-window");return Object(o["m"])(),Object(o["c"])(s,{title:"Colores",initialX:r.window.innerWidth-550,initialY:160,visible:n.visible,reopenTrigger:n.reopenTrigger,"start-open":n.startOpen,"is-open":n.isOpen,onClose:t[0]||(t[0]=function(t){return e.$emit("close")})},{default:Object(o["z"])((function(){return[Object(o["f"])("div",Ku,[(Object(o["m"])(!0),Object(o["e"])(o["a"],null,Object(o["q"])(r.colorGroups,(function(e,t){return Object(o["m"])(),Object(o["e"])("div",{key:t,class:"color-group"},[Object(o["f"])("div",$u,Object(o["t"])(e.name),1),Object(o["f"])("div",Ju,[(Object(o["m"])(!0),Object(o["e"])(o["a"],null,Object(o["q"])(e.colors,(function(e){return Object(o["m"])(),Object(o["e"])("div",{key:e.name,class:"color-item",style:Object(o["l"])({backgroundColor:e.hex}),onClick:function(t){return a.selectColor(e)},title:e.name},null,12,ed)})),128))])])})),128))])]})),_:1},8,["initialX","visible","reopenTrigger","start-open","is-open"])}var nd={name:"ColorPalette",components:{DraggableWindow:qe},props:{visible:Boolean,reopenTrigger:Number,startOpen:{type:Boolean,default:!0},isOpen:Boolean},emits:["set-color","close"],data:function(){return{window:window,colorGroups:[{name:"GRIS CLARO  Volmenes iniciales",colors:[{name:"Gris Muy Claro",hex:"#F5F5F5"},{name:"Gris Claro",hex:"#E6E6E6"},{name:"Gris Clido Claro",hex:"#E8E2DC"},{name:"Gris Neutro Suave",hex:"#E1E1E1"}]},{name:"GRIS MEDIO  Sombras principales",colors:[{name:"Gris Medio",hex:"#C8C8C8"},{name:"Gris Medio Clido",hex:"#CEC6BC"},{name:"Gris 3040%",hex:"#B4B4B4"}]},{name:"GRIS OSCURO  Contraste",colors:[{name:"Gris Oscuro",hex:"#828282"},{name:"Gris Muy Oscuro",hex:"#5A5A5A"},{name:"Gris Oscuro Clido",hex:"#6E665F"},{name:"Gris 70%",hex:"#646464"}]},{name:"NEGRO  Detalles finales",colors:[{name:"Negro trazado",hex:"#000000"},{name:"Negro suave",hex:"#141414"}]},{name:"ACENTOS DE COLOR",colors:[{name:"Azul Tcnico Claro",hex:"#ADD8E6"},{name:"Azul Tcnico Medio",hex:"#6495ED"},{name:"Azul Conceptual",hex:"#4682B4"},{name:"Rojo Claro",hex:"#FF6347"},{name:"Rojo Industrial",hex:"#DC143C"},{name:"Naranja Industrial",hex:"#FF8C00"}]},{name:"BLANCO  Highlights",colors:[{name:"Blanco puro",hex:"#FFFFFF"},{name:"Blanco suave",hex:"#FAFAFA"}]}]}},methods:{selectColor:function(e){var t=this.hexToRgb(e.hex);this.$emit("set-color",t)},hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}}};n("97d3");const od=ze()(nd,[["render",td],["__scopeId","data-v-1576e0cc"]]);var id=od,rd=function(e){return Object(o["o"])("data-v-04aa6b76"),e=e(),Object(o["n"])(),e},ad={class:"symmetry-controls"},sd={class:"symmetry-options"},cd=rd((function(){return Object(o["f"])("span",null,"X",-1)})),ld=[cd],ud=rd((function(){return Object(o["f"])("span",null,"Y",-1)})),dd=[ud],hd=rd((function(){return Object(o["f"])("span",null,"Z",-1)})),pd=[hd],fd={key:0,class:"symmetry-row"},bd={class:"toggle-control"},gd=["checked"],md=Object(o["h"])(" Local Symmetry "),vd=rd((function(){return Object(o["f"])("span",{class:"info-icon",title:"Symmetry relative to the Canvas instead of World Origin"},"?",-1)})),yd={class:"radial-section"},wd={class:"radial-toggle"},Od=["checked"],jd=Object(o["h"])(" Radial "),Ad={key:0,class:"symmetry-options"},xd=rd((function(){return Object(o["f"])("span",null,"X",-1)})),kd=[xd],Md=rd((function(){return Object(o["f"])("span",null,"Y",-1)})),Id=[Md],Cd=rd((function(){return Object(o["f"])("span",null,"Z",-1)})),Sd=[Cd],Td={key:1,class:"sectors-control"},Ed=["value"];function Dd(e,t,n,i,r,a){var s=Object(o["s"])("draggable-window");return Object(o["m"])(),Object(o["c"])(s,{title:"Symmetry",initialX:12,initialY:680,visible:n.visible,reopenTrigger:n.reopenTrigger,"is-open":n.isOpen,onClose:t[9]||(t[9]=function(t){return e.$emit("close")})},{default:Object(o["z"])((function(){return[Object(o["f"])("div",ad,[Object(o["f"])("div",sd,[Object(o["f"])("button",{class:Object(o["k"])(["symmetry-btn",{active:a.isAxisActive("x")}]),onClick:t[0]||(t[0]=function(e){return a.toggleAxis("x")})},ld,2),Object(o["f"])("button",{class:Object(o["k"])(["symmetry-btn",{active:a.isAxisActive("y")}]),onClick:t[1]||(t[1]=function(e){return a.toggleAxis("y")})},dd,2),Object(o["f"])("button",{class:Object(o["k"])(["symmetry-btn",{active:a.isAxisActive("z")}]),onClick:t[2]||(t[2]=function(e){return a.toggleAxis("z")})},pd,2)]),"string"===typeof n.mirror&&n.mirror.length>0||n.radial?(Object(o["m"])(),Object(o["e"])("div",fd,[Object(o["f"])("label",bd,[Object(o["f"])("input",{type:"checkbox",checked:n.localSymmetry,onChange:t[3]||(t[3]=function(){return a.toggleLocal&&a.toggleLocal.apply(a,arguments)})},null,40,gd),md,vd])])):Object(o["d"])("",!0),Object(o["f"])("div",yd,[Object(o["f"])("label",wd,[Object(o["f"])("input",{type:"checkbox",checked:n.radial,onChange:t[4]||(t[4]=function(){return a.toggleRadial&&a.toggleRadial.apply(a,arguments)})},null,40,Od),jd]),n.radial?(Object(o["m"])(),Object(o["e"])("div",Ad,[Object(o["f"])("button",{class:Object(o["k"])(["symmetry-btn small",{active:"x"===n.radialAxis}]),onClick:t[5]||(t[5]=function(e){return a.setRadialAxis("x")})},kd,2),Object(o["f"])("button",{class:Object(o["k"])(["symmetry-btn small",{active:"y"===n.radialAxis}]),onClick:t[6]||(t[6]=function(e){return a.setRadialAxis("y")})},Id,2),Object(o["f"])("button",{class:Object(o["k"])(["symmetry-btn small",{active:"z"===n.radialAxis}]),onClick:t[7]||(t[7]=function(e){return a.setRadialAxis("z")})},Sd,2)])):Object(o["d"])("",!0),n.radial?(Object(o["m"])(),Object(o["e"])("div",Td,[Object(o["f"])("span",null,Object(o["t"])(n.sectors),1),Object(o["f"])("input",{type:"range",min:"2",max:"36",step:"1",value:n.sectors,onInput:t[8]||(t[8]=function(){return a.updateSectors&&a.updateSectors.apply(a,arguments)})},null,40,Ed)])):Object(o["d"])("",!0)])])]})),_:1},8,["visible","reopenTrigger","is-open"])}n("5319");var Bd={name:"SymmetrySettings",components:{DraggableWindow:qe},props:{visible:Boolean,reopenTrigger:Number,isOpen:Boolean,mirror:[Boolean,String],radial:Boolean,sectors:Number,radialAxis:{type:String,default:"y"},localSymmetry:Boolean},emits:["set-mirror","set-radial","set-sectors","set-radial-axis","set-local-symmetry","close"],methods:{toggleAxis:function(e){var t="string"===typeof this.mirror?this.mirror:"";t.includes(e)?t=t.replace(e,""):t+=e,this.$emit("set-mirror",t)},isAxisActive:function(e){return"string"===typeof this.mirror&&this.mirror.includes(e)},toggleLocal:function(e){this.$emit("set-local-symmetry",e.target.checked)},toggleRadial:function(e){this.$emit("set-radial",e.target.checked)},updateSectors:function(e){this.$emit("set-sectors",parseInt(e.target.value))},setRadialAxis:function(e){this.$emit("set-radial-axis",e)}}};n("e111");const Pd=ze()(Bd,[["render",Dd],["__scopeId","data-v-04aa6b76"]]);var Qd=Pd,Gd=function(e){return Object(o["o"])("data-v-b061a208"),e=e(),Object(o["n"])(),e},Hd={class:"layers-container"},Rd={class:"layers-header"},Yd=Gd((function(){return Object(o["f"])("span",null,"+",-1)})),Ld=[Yd],zd=["disabled"],Wd=Gd((function(){return Object(o["f"])("span",null,"",-1)})),Ud=[Wd],Vd=Gd((function(){return Object(o["f"])("span",null,"",-1)})),Fd=[Vd],Xd={class:"layers-list"},Nd=["onClick"],qd={class:"layer-visibility"},_d=["onClick"],Zd={class:"layer-info"},Kd=["onUpdate:modelValue"],$d=["onDblclick"],Jd={class:"layer-opacity"},eh=["onUpdate:modelValue","onInput"],th={class:"opacity-value"};function nh(e,t,n,i,r,a){var s=Object(o["s"])("draggable-window");return Object(o["m"])(),Object(o["c"])(s,{title:"Layers",initialX:12,initialY:520,visible:n.visible,reopenTrigger:n.reopenTrigger,"is-open":n.isOpen,onClose:t[7]||(t[7]=function(t){return e.$emit("close")})},{default:Object(o["z"])((function(){return[Object(o["f"])("div",Hd,[Object(o["f"])("div",Rd,[Object(o["f"])("button",{class:"layer-btn",onClick:t[0]||(t[0]=function(){return a.addLayer&&a.addLayer.apply(a,arguments)}),title:"Add Layer"},Ld),Object(o["f"])("button",{class:"layer-btn",onClick:t[1]||(t[1]=function(){return a.deleteLayer&&a.deleteLayer.apply(a,arguments)}),title:"Delete Layer",disabled:r.layers.length<=1},Ud,8,zd),Object(o["f"])("button",{class:"layer-btn",onClick:t[2]||(t[2]=function(){return a.duplicateLayer&&a.duplicateLayer.apply(a,arguments)}),title:"Duplicate Layer"},Fd)]),Object(o["f"])("div",Xd,[(Object(o["m"])(!0),Object(o["e"])(o["a"],null,Object(o["q"])(r.layers,(function(e){return Object(o["m"])(),Object(o["e"])("div",{key:e.id,class:Object(o["k"])(["layer-item",{active:e.id===r.activeLayerId}]),onClick:function(t){return a.selectLayer(e.id)}},[Object(o["f"])("div",qd,[Object(o["f"])("button",{class:Object(o["k"])(["visibility-btn",{hidden:!e.visible}]),onClick:Object(o["C"])((function(t){return a.toggleVisibility(e.id)}),["stop"])},Object(o["t"])(e.visible?"":""),11,_d)]),Object(o["f"])("div",Zd,[r.editingLayerId===e.id?Object(o["A"])((Object(o["m"])(),Object(o["e"])("input",{key:0,"onUpdate:modelValue":function(t){return e.name=t},onBlur:t[3]||(t[3]=function(){return a.stopEditing&&a.stopEditing.apply(a,arguments)}),onKeyup:t[4]||(t[4]=Object(o["B"])((function(){return a.stopEditing&&a.stopEditing.apply(a,arguments)}),["enter"])),onClick:t[5]||(t[5]=Object(o["C"])((function(){}),["stop"])),class:"layer-name-input",ref:"nameInput"},null,40,Kd)),[[o["x"],e.name]]):(Object(o["m"])(),Object(o["e"])("span",{key:1,class:"layer-name",onDblclick:Object(o["C"])((function(t){return a.startEditing(e.id)}),["stop"])},Object(o["t"])(e.name),41,$d))]),Object(o["f"])("div",Jd,[Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0",max:"100","onUpdate:modelValue":function(t){return e.opacity=t},onInput:function(t){return a.updateLayerOpacity(e.id,t.target.value)},onClick:t[6]||(t[6]=Object(o["C"])((function(){}),["stop"])),class:"opacity-slider"},null,40,eh),[[o["x"],e.opacity]]),Object(o["f"])("span",th,Object(o["t"])(e.opacity)+"%",1)])],10,Nd)})),128))])])]})),_:1},8,["visible","reopenTrigger","is-open"])}n("c740");var oh={name:"Layers",components:{DraggableWindow:qe},props:{visible:Boolean,reopenTrigger:Number,isOpen:Boolean},emits:["close","layer-change","layer-add","layer-delete","layer-select"],data:function(){return{layers:[{id:1,name:"Layer 1",visible:!0,opacity:100,locked:!1}],activeLayerId:1,nextLayerId:2,editingLayerId:null,lockLayers:!1,mergeOnExport:!1}},methods:{addLayer:function(){var e={id:this.nextLayerId++,name:"Layer ".concat(this.nextLayerId-1),visible:!0,opacity:100,locked:!1};this.layers.unshift(e),this.selectLayer(e.id),this.$emit("layer-add",e)},deleteLayer:function(){var e=this;if(!(this.layers.length<=1)){var t=this.layers.findIndex((function(t){return t.id===e.activeLayerId}));if(-1!==t){var n=this.layers[t];if(this.layers.splice(t,1),this.layers.length>0){var o=Math.min(t,this.layers.length-1);this.selectLayer(this.layers[o].id)}this.$emit("layer-delete",n)}}},duplicateLayer:function(){var e=this,t=this.layers.find((function(t){return t.id===e.activeLayerId}));if(t){var n={id:this.nextLayerId++,name:"".concat(t.name," Copy"),visible:t.visible,opacity:t.opacity,locked:t.locked},o=this.layers.findIndex((function(t){return t.id===e.activeLayerId}));this.layers.splice(o,0,n),this.selectLayer(n.id),this.$emit("layer-duplicate",{newLayer:n,originalLayerId:t.id}),this.$emit("layer-add",n)}},selectLayer:function(e){this.activeLayerId=e;var t=this.layers.find((function(t){return t.id===e}));this.$emit("layer-select",t)},toggleVisibility:function(e){var t=this.layers.findIndex((function(t){return t.id===e}));if(-1!==t){var n=this.layers[t],o=0===n.opacity?100:0;this.layers[t].opacity=o,this.layers[t].visible=o>0,console.log("Layer ".concat(e," opacity toggled to:"),o),console.log("Emitting layer-change event with:",this.layers[t]),this.$emit("layer-change",this.layers[t]),console.log("layer-change event emitted")}},updateLayerOpacity:function(e,t){var n=this.layers.find((function(t){return t.id===e}));n&&(n.opacity=parseInt(t),this.$emit("layer-change",n))},startEditing:function(e){var t=this;this.editingLayerId=e,this.$nextTick((function(){t.$refs.nameInput&&t.$refs.nameInput[0]&&(t.$refs.nameInput[0].focus(),t.$refs.nameInput[0].select())}))},stopEditing:function(){this.editingLayerId=null},toggleLockLayers:function(){var e=this;this.layers.forEach((function(t){t.locked=e.lockLayers})),this.$emit("layer-change",{lockAll:this.lockLayers})}}};n("37c2");const ih=ze()(oh,[["render",nh],["__scopeId","data-v-b061a208"]]);var rh=ih,ah=function(e){return Object(o["o"])("data-v-9d553bfc"),e=e(),Object(o["n"])(),e},sh={class:"manager-container"},ch=ah((function(){return Object(o["f"])("div",{class:"section-title"},"Add Shape",-1)})),lh={class:"shapes-row"},uh=ah((function(){return Object(o["f"])("div",{class:"separator"},null,-1)})),dh=ah((function(){return Object(o["f"])("div",{class:"section-title"},"Scene Objects",-1)})),hh={class:"object-list"},ph={key:0,class:"empty-state"},fh=["onClick"],bh={class:"object-name"},gh={class:"object-type"},mh=ah((function(){return Object(o["f"])("div",{class:"separator"},null,-1)})),vh={key:0,class:"controls-section"},yh=ah((function(){return Object(o["f"])("div",{class:"section-title"},"Properties",-1)})),wh={class:"control-row"},Oh=ah((function(){return Object(o["f"])("label",null,"Color",-1)})),jh=["value"],Ah={class:"control-row"},xh=ah((function(){return Object(o["f"])("label",null,"Transparency",-1)})),kh=["value"],Mh={class:"control-row"},Ih={class:"control-row"},Ch=ah((function(){return Object(o["f"])("label",null,"Texture",-1)})),Sh={class:"custom-file-upload"},Th=ah((function(){return Object(o["f"])("span",null," Load Image",-1)})),Eh=ah((function(){return Object(o["f"])("div",{class:"separator"},null,-1)})),Dh={class:"history-section"},Bh={class:"history-header"},Ph=ah((function(){return Object(o["f"])("span",{class:"section-title"},"Position History",-1)})),Qh={class:"history-list"},Gh={key:0,class:"empty-state"},Hh={class:"actions"},Rh=["onClick"],Yh=["onClick"],Lh={key:1,class:"empty-selection"};function zh(e,t,n,i,r,a){var s=Object(o["s"])("draggable-window");return Object(o["m"])(),Object(o["c"])(s,{title:"Scene Objects",initialX:12,initialY:300,visible:n.visible,reopenTrigger:n.reopenTrigger,"is-open":n.isOpen,onClose:t[9]||(t[9]=function(t){return e.$emit("close")})},{default:Object(o["z"])((function(){return[Object(o["f"])("div",sh,[ch,Object(o["f"])("div",lh,[Object(o["f"])("button",{class:"shape-add-btn",onClick:t[0]||(t[0]=function(e){return a.addShape("plane")}),title:"Plane"},""),Object(o["f"])("button",{class:"shape-add-btn",onClick:t[1]||(t[1]=function(e){return a.addShape("cube")}),title:"Cube"},""),Object(o["f"])("button",{class:"shape-add-btn",onClick:t[2]||(t[2]=function(e){return a.addShape("sphere")}),title:"Sphere"},""),Object(o["f"])("button",{class:"shape-add-btn",onClick:t[3]||(t[3]=function(e){return a.addShape("cylinder")}),title:"Cylinder"},"")]),uh,dh,Object(o["f"])("div",hh,[0===a.shapes.length?(Object(o["m"])(),Object(o["e"])("div",ph,"No objects")):Object(o["d"])("",!0),(Object(o["m"])(!0),Object(o["e"])(o["a"],null,Object(o["q"])(a.shapes,(function(e,t){return Object(o["m"])(),Object(o["e"])("div",{key:e.uuid,class:Object(o["k"])(["object-item",{active:a.isSelected(e)}]),onClick:function(t){return a.selectShape(e)}},[Object(o["f"])("span",bh,Object(o["t"])(a.getObjectName(e,t)),1),Object(o["f"])("span",gh,Object(o["t"])(a.getObjectType(e)),1)],10,fh)})),128))]),mh,a.selectedObj?(Object(o["m"])(),Object(o["e"])("div",vh,[yh,Object(o["f"])("div",wh,[Oh,Object(o["f"])("input",{type:"color",class:"color-picker",value:a.getObjectColor(a.selectedObj),onInput:t[4]||(t[4]=function(){return a.updateColor&&a.updateColor.apply(a,arguments)})},null,40,jh)]),Object(o["f"])("div",Ah,[xh,Object(o["f"])("input",{type:"range",min:"0",max:"100",value:a.getObjectOpacity(a.selectedObj),onInput:t[5]||(t[5]=function(){return a.updateOpacity&&a.updateOpacity.apply(a,arguments)})},null,40,kh)]),Object(o["f"])("div",Mh,[Object(o["f"])("button",{class:"delete-obj-btn",onClick:t[6]||(t[6]=function(){return a.deleteSelectedObject&&a.deleteSelectedObject.apply(a,arguments)})},"Delete Object")]),Object(o["f"])("div",Ih,[Ch,Object(o["f"])("label",Sh,[Object(o["f"])("input",{type:"file",onChange:t[7]||(t[7]=function(){return a.handleImageUpload&&a.handleImageUpload.apply(a,arguments)}),accept:".jpg,.jpeg,.png,.webp"},null,32),Th])]),Eh,Object(o["f"])("div",Dh,[Object(o["f"])("div",Bh,[Ph,Object(o["f"])("button",{class:"small-btn",onClick:t[8]||(t[8]=function(){return a.saveState&&a.saveState.apply(a,arguments)})},"+ Save")]),Object(o["f"])("div",Qh,[0===a.getHistory(a.selectedObj).length?(Object(o["m"])(),Object(o["e"])("div",Gh,"No saved states")):Object(o["d"])("",!0),(Object(o["m"])(!0),Object(o["e"])(o["a"],null,Object(o["q"])(a.getHistory(a.selectedObj),(function(e,t){return Object(o["m"])(),Object(o["e"])("div",{key:t,class:"history-item"},[Object(o["f"])("span",null,Object(o["t"])(e.name),1),Object(o["f"])("div",Hh,[Object(o["f"])("button",{class:"icon-btn",onClick:function(t){return a.restoreState(e)},title:"Restore"},"",8,Rh),Object(o["f"])("button",{class:"icon-btn delete",onClick:function(e){return a.deleteState(t)},title:"Delete"},"",8,Yh)])])})),128))])])])):(Object(o["m"])(),Object(o["e"])("div",Lh," Select an object to edit properties "))])]})),_:1},8,["visible","reopenTrigger","is-open"])}var Wh={name:"ObjectManager",components:{DraggableWindow:qe},props:{visible:Boolean,reopenTrigger:Number,isOpen:Boolean},emits:["close"],computed:{shapes:function(){return _e},selectedObj:function(){return this.currentSelection}},data:function(){return{currentSelection:null}},mounted:function(){var e=this;this.currentSelection=Ue,this.timer=setInterval((function(){Ue!==e.currentSelection&&(e.currentSelection=Ue)}),500)},beforeUnmount:function(){clearInterval(this.timer)},methods:{addShape:function(e){Kf&&Kf.$refs.raycastCanvas&&Kf.$refs.raycastCanvas.addPrimitive(e)},selectShape:function(e){this.currentSelection=e,Kf&&Kf.$refs.raycastCanvas&&Kf.$refs.raycastCanvas.selectObject(e)},isSelected:function(e){return this.currentSelection===e},getObjectName:function(e,t){return e.name||"Object ".concat(t+1)},getObjectType:function(e){return e.isGroup?"Group/GLB":e.geometry?e.geometry.type.replace("Geometry","").replace("Buffer",""):"Object"},getObjectMaterial:function(e){var t=null;return e.material?t=e.material:e.traverse((function(e){!t&&e.isMesh&&e.material&&(t=e.material)})),t},getObjectColor:function(e){var t=this.getObjectMaterial(e);return t&&t.color?"#"+t.color.getHexString():"#ffffff"},updateColor:function(e){var t=e.target.value,n=this.selectedObj;if(n){var o=this.getObjectMaterial(n);o?(Array.isArray(o)?o.forEach((function(e){return e.color.set(t)})):o.color.set(t),ob.render(rb,ib)):n.isGroup&&(n.traverse((function(e){e.isMesh&&e.material&&e.material.color.set(t)})),ob.render(rb,ib))}},getObjectOpacity:function(e){var t=this.getObjectMaterial(e);return t?100*(void 0!==t.opacity?t.opacity:1):100},updateOpacity:function(e){var t=parseFloat(e.target.value)/100,n=this.selectedObj;if(n){var o=function(e){e.opacity=t,e.transparent=t<1,e.needsUpdate=!0},i=this.getObjectMaterial(n);i?Array.isArray(i)?i.forEach((function(e){return o(e)})):o(i):n.isGroup&&n.traverse((function(e){e.isMesh&&e.material&&o(e.material)})),ob.render(rb,ib)}},deleteSelectedObject:function(){var e=this.selectedObj;if(e){e.parent&&e.parent.remove(e);var t=_e.indexOf(e);t>-1&&_e.splice(t,1),this.currentSelection=null,Kf&&Kf.$refs.raycastCanvas&&Kf.$refs.raycastCanvas.selectObject(null),ob.render(rb,ib)}},handleImageUpload:function(e){var t=this,n=e.target.files[0];if(n&&this.selectedObj){var o=URL.createObjectURL(n);(new r["TextureLoader"]).load(o,(function(e){var n=t.selectedObj;n.isGroup?n.traverse((function(t){t.isMesh&&t.material&&(t.material.map=e,t.material.needsUpdate=!0,t.material.color.set(16777215))})):n.material&&(n.material.map=e,n.material.needsUpdate=!0,n.material.color.set(16777215)),ob.render(rb,ib)}))}},getHistory:function(e){return e?(e.userData.history||(e.userData.history=[]),e.userData.history):[]},saveState:function(){var e=this.selectedObj;if(e){var t=this.getHistory(e),n={name:"State ".concat(t.length+1),position:e.position.clone(),quaternion:e.quaternion.clone(),scale:e.scale.clone()};t.push(n)}},restoreState:function(e){var t=this.selectedObj;t&&(t.position.copy(e.position),t.quaternion.copy(e.quaternion),t.scale.copy(e.scale),ob.render(rb,ib))},deleteState:function(e){var t=this.selectedObj;t&&t.userData.history.splice(e,1)}}};n("0bc0");const Uh=ze()(Wh,[["render",zh],["__scopeId","data-v-9d553bfc"]]);var Vh=Uh,Fh=(n("b680"),function(e){return Object(o["o"])("data-v-4a36b9a2"),e=e(),Object(o["n"])(),e}),Xh=Fh((function(){return Object(o["f"])("div",{class:"toolbar-title",style:{"margin-bottom":"8px","font-size":"11px",opacity:"0.5","font-weight":"600","text-transform":"uppercase","letter-spacing":"0.5px",cursor:"move"}},"Transformation",-1)})),Nh={class:"transform-modes"},qh={key:0,src:A.a,class:"icon-active"},_h={key:1,src:A.a,class:"icon-inactive"},Zh=Object(o["h"])(" Move & Rotate "),Kh={key:0,src:k.a,class:"icon-active"},$h={key:1,src:k.a,class:"icon-inactive"},Jh=Object(o["h"])(" Scale "),ep={class:"offset-group"},tp={class:"offset-group",style:{"border-top":"1px solid rgba(255,255,255,0.1)","padding-top":"8px"}},np=Fh((function(){return Object(o["f"])("label",{style:{"font-size":"10px",opacity:"0.7"}},"Duplicate with Offset",-1)})),op={class:"inputs"},ip={class:"inputs",style:{"margin-top":"4px"}},rp={class:"offset-group",style:{"border-top":"1px solid rgba(255,255,255,0.1)","padding-top":"8px"}},ap=Fh((function(){return Object(o["f"])("label",{style:{"font-size":"10px",opacity:"0.7"}},"Position (Read-Only)",-1)})),sp={class:"inputs"},cp=["value"],lp=["value"],up=["value"];function dp(e,t,n,i,r,a){return Object(o["m"])(),Object(o["e"])("div",{class:Object(o["k"])(["transform-toolbar",{hide:!n.display}]),style:Object(o["l"])({top:r.posTop+"px",left:r.posLeft+"px"}),onMousedown:t[8]||(t[8]=Object(o["C"])((function(){return a.startDrag&&a.startDrag.apply(a,arguments)}),["stop"])),onTouchstart:t[9]||(t[9]=Object(o["C"])((function(){return a.startDrag&&a.startDrag.apply(a,arguments)}),["stop"]))},[Xh,Object(o["f"])("div",Nh,[Object(o["f"])("span",{class:Object(o["k"])(["mode-btn",{active:"combined"===r.mode}]),onClick:t[0]||(t[0]=function(e){return a.setMode("combined")})},["combined"===r.mode?(Object(o["m"])(),Object(o["e"])("img",qh)):(Object(o["m"])(),Object(o["e"])("img",_h)),Zh],2),Object(o["f"])("span",{class:Object(o["k"])(["mode-btn",{active:"scale"===r.mode}]),onClick:t[1]||(t[1]=function(e){return a.setMode("scale")})},["scale"===r.mode?(Object(o["m"])(),Object(o["e"])("img",Kh)):(Object(o["m"])(),Object(o["e"])("img",$h)),Jh],2)]),Object(o["f"])("div",{class:Object(o["k"])(["duplicate-controls",{hide:"model"==n.selectedTool}])},[Object(o["f"])("div",ep,[Object(o["f"])("button",{class:"dup-btn",onClick:t[2]||(t[2]=function(){return a.duplicate&&a.duplicate.apply(a,arguments)}),style:{width:"100%",padding:"8px"}}," Duplicate Selection ")]),Object(o["f"])("div",tp,[np,Object(o["f"])("div",op,[Object(o["A"])(Object(o["f"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return r.offset.x=e}),placeholder:"X",type:"number",step:"0.1"},null,512),[[o["x"],r.offset.x]]),Object(o["A"])(Object(o["f"])("input",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return r.offset.y=e}),placeholder:"Y",type:"number",step:"0.1"},null,512),[[o["x"],r.offset.y]]),Object(o["A"])(Object(o["f"])("input",{"onUpdate:modelValue":t[5]||(t[5]=function(e){return r.offset.z=e}),placeholder:"Z",type:"number",step:"0.1"},null,512),[[o["x"],r.offset.z]])]),Object(o["f"])("div",ip,[Object(o["A"])(Object(o["f"])("input",{"onUpdate:modelValue":t[6]||(t[6]=function(e){return r.copies=e}),placeholder:"N",type:"number",min:"1",step:"1",style:{width:"40px"},title:"Copies"},null,512),[[o["x"],r.copies]]),Object(o["f"])("button",{class:"dup-btn",onClick:t[7]||(t[7]=function(){return a.duplicateOffset&&a.duplicateOffset.apply(a,arguments)}),style:{"flex-grow":"1"}},"Apply")])]),Object(o["f"])("div",rp,[ap,Object(o["f"])("div",sp,[Object(o["f"])("input",{value:n.selectionPosition?n.selectionPosition.x.toFixed(2):0,readonly:"",placeholder:"X",type:"number"},null,8,cp),Object(o["f"])("input",{value:n.selectionPosition?n.selectionPosition.y.toFixed(2):0,readonly:"",placeholder:"Y",type:"number"},null,8,lp),Object(o["f"])("input",{value:n.selectionPosition?n.selectionPosition.z.toFixed(2):0,readonly:"",placeholder:"Z",type:"number"},null,8,up)])])],2)],38)}var hp={name:"TransformToolbar",props:{top:Number,left:Number,location:String,display:Boolean,selectedTool:String,selectionPosition:Object},data:function(){return{mode:"combined",posTop:0,posLeft:0,offset:{x:1,y:0,z:0},copies:1,isDragging:!1,dragOffset:{x:0,y:0}}},methods:{startDrag:function(e){if(!(e.target.closest("input")||e.target.closest(".mode-btn")||e.target.closest("button"))){this.isDragging=!0;var t="touchstart"===e.type?e.touches[0].clientX:e.clientX,n="touchstart"===e.type?e.touches[0].clientY:e.clientY,o=this.$el.getBoundingClientRect();this.dragOffset.x=t-o.left,this.dragOffset.y=n-o.top,document.addEventListener("mousemove",this.doDrag),document.addEventListener("touchmove",this.doDrag),document.addEventListener("mouseup",this.stopDrag),document.addEventListener("touchend",this.stopDrag)}},doDrag:function(e){if(this.isDragging){"touchmove"===e.type&&e.preventDefault();var t="touchmove"===e.type?e.touches[0].clientX:e.clientX,n="touchmove"===e.type?e.touches[0].clientY:e.clientY,o=t-this.dragOffset.x,i=n-this.dragOffset.y;o=Math.max(0,Math.min(window.innerWidth-this.$el.offsetWidth,o)),i=Math.max(0,Math.min(window.innerHeight-this.$el.offsetHeight,i)),this.posLeft=o,this.posTop=i}},stopDrag:function(){this.isDragging=!1,document.removeEventListener("mousemove",this.doDrag),document.removeEventListener("touchmove",this.doDrag),document.removeEventListener("mouseup",this.stopDrag),document.removeEventListener("touchend",this.stopDrag)},duplicate:function(){St.s.duplicate()},duplicateOffset:function(){if(console.log("Duplicate Offset Triggered",this.offset,this.copies),St.s){var e=function(e){return"number"===typeof e?e:"string"===typeof e&&parseFloat(e.replace(",","."))||0},t=e(this.offset.x),n=e(this.offset.y),o=e(this.offset.z),i=parseInt(this.copies)||1;console.log("Applying Array:",{x:t,y:n,z:o},i),St.s.duplicate(new r["Vector3"](t,n,o),i)}else console.warn("No selection active for duplicate")},setMode:function(e){this.mode=e}},watch:{mode:function(e){if("select"==this.selectedTool&&St.s&&St.s.controls&&(St.s.controls.mode=e,this.mode=e,St.transformMode=e,St.s.helper.update()),"model"==this.selectedTool){var t=rb.getObjectByName("canvasTransformControls");console.log(t),this.mode=e,t&&(t.mode=this.mode),ob.render(rb,ib)}},display:function(e){if(e&&("select"==this.selectedTool&&St.s&&St.s.controls&&(St.s.controls.mode=this.mode),"model"==this.selectedTool)){var t=rb.getObjectByName("canvasTransformControls");t&&(t.mode=this.mode)}},left:function(e){this.isDragging||(this.posLeft=e-120)},top:function(e){this.isDragging||(this.posTop=e)}},mounted:function(){}};n("68e1");const pp=ze()(hp,[["render",dp],["__scopeId","data-v-4a36b9a2"]]);var fp=pp,bp=function(e){return Object(o["o"])("data-v-4262662a"),e=e(),Object(o["n"])(),e},gp={class:"shapes-grid"},mp=bp((function(){return Object(o["f"])("span",{class:"icon"},"/",-1)})),vp=[mp],yp=bp((function(){return Object(o["f"])("span",{class:"icon"},"",-1)})),wp=[yp],Op=bp((function(){return Object(o["f"])("span",{class:"icon"},"",-1)})),jp=[Op],Ap=bp((function(){return Object(o["f"])("span",{class:"icon"},"",-1)})),xp=[Ap],kp=bp((function(){return Object(o["f"])("span",{class:"icon"},"",-1)})),Mp=[kp],Ip=bp((function(){return Object(o["f"])("span",{class:"icon"},"",-1)})),Cp=[Ip];function Sp(e,t,n,i,r,a){var s=Object(o["s"])("draggable-window");return Object(o["m"])(),Object(o["c"])(s,{title:"2D Shapes",initialX:100,initialY:140,visible:n.visible,reopenTrigger:n.reopenTrigger,"is-open":n.isOpen,onClose:t[18]||(t[18]=function(t){return e.$emit("close")})},{default:Object(o["z"])((function(){return[Object(o["f"])("div",gp,[Object(o["f"])("button",{class:"shape-btn",onClick:t[0]||(t[0]=Object(o["C"])((function(e){return a.createShape("line")}),["stop"])),onMousedown:t[1]||(t[1]=Object(o["C"])((function(){}),["stop"])),onMouseup:t[2]||(t[2]=Object(o["C"])((function(){}),["stop"])),title:"Line"},vp,32),Object(o["f"])("button",{class:"shape-btn",onClick:t[3]||(t[3]=Object(o["C"])((function(e){return a.createShape("triangle")}),["stop"])),onMousedown:t[4]||(t[4]=Object(o["C"])((function(){}),["stop"])),onMouseup:t[5]||(t[5]=Object(o["C"])((function(){}),["stop"])),title:"Triangle"},wp,32),Object(o["f"])("button",{class:"shape-btn",onClick:t[6]||(t[6]=Object(o["C"])((function(e){return a.createShape("square")}),["stop"])),onMousedown:t[7]||(t[7]=Object(o["C"])((function(){}),["stop"])),onMouseup:t[8]||(t[8]=Object(o["C"])((function(){}),["stop"])),title:"Square"},jp,32),Object(o["f"])("button",{class:"shape-btn",onClick:t[9]||(t[9]=Object(o["C"])((function(e){return a.createShape("circle")}),["stop"])),onMousedown:t[10]||(t[10]=Object(o["C"])((function(){}),["stop"])),onMouseup:t[11]||(t[11]=Object(o["C"])((function(){}),["stop"])),title:"Circle"},xp,32),Object(o["f"])("button",{class:"shape-btn",onClick:t[12]||(t[12]=Object(o["C"])((function(e){return a.createShape("ellipse")}),["stop"])),onMousedown:t[13]||(t[13]=Object(o["C"])((function(){}),["stop"])),onMouseup:t[14]||(t[14]=Object(o["C"])((function(){}),["stop"])),title:"Ellipse"},Mp,32),Object(o["f"])("button",{class:"shape-btn",onClick:t[15]||(t[15]=Object(o["C"])((function(e){return a.createShape("hexagon")}),["stop"])),onMousedown:t[16]||(t[16]=Object(o["C"])((function(){}),["stop"])),onMouseup:t[17]||(t[17]=Object(o["C"])((function(){}),["stop"])),title:"Hexagon"},Cp,32)])]})),_:1},8,["visible","reopenTrigger","is-open"])}var Tp={name:"TwoDShapes",components:{DraggableWindow:qe},props:{visible:Boolean,reopenTrigger:Number,isOpen:Boolean},emits:["close","add-shape"],methods:{getCenterPoint:function(){var e=new r["Raycaster"];e.setFromCamera(new r["Vector2"](0,0),ib);var t=Ue;if(!t){var n=new r["Vector3"](0,0,-10);return n.applyQuaternion(ib.quaternion),n.add(ib.position),{point:n,normal:new r["Vector3"](0,0,1)}}var o=e.intersectObject(t,!0);if(o.length>0)return{point:o[0].point,normal:o[0].face.normal};var i=new r["Vector3"](0,0,-10);return i.applyQuaternion(ib.quaternion),i.add(ib.position),{point:i,normal:new r["Vector3"](0,0,1)}},createShape:function(e){var t=this.getCenterPoint(),n=t.point,o=t.normal,i=1,a=new r["Shape"];switch(e){case"line":var s=.05;a.moveTo(-i,-s),a.lineTo(i,-s),a.lineTo(i,s),a.lineTo(-i,s),a.lineTo(-i,-s);break;case"triangle":a.moveTo(i*Math.cos(-Math.PI/2),i*Math.sin(-Math.PI/2)),a.lineTo(i*Math.cos(Math.PI/6),i*Math.sin(Math.PI/6)),a.lineTo(i*Math.cos(5*Math.PI/6),i*Math.sin(5*Math.PI/6)),a.closePath();break;case"square":a.moveTo(-i,-i),a.lineTo(i,-i),a.lineTo(i,i),a.lineTo(-i,i),a.closePath();break;case"circle":a.absarc(0,0,i,0,2*Math.PI,!1);break;case"ellipse":a.ellipse(0,0,1.5*i,.75*i,0,2*Math.PI,!1,0);break;case"hexagon":for(var c=0;c<6;c++){var l=2*c*Math.PI/6,u=i*Math.cos(l),d=i*Math.sin(l);0===c?a.moveTo(u,d):a.lineTo(u,d)}a.closePath();break}var h=new r["ShapeGeometry"](a),p=new r["Mesh"](h);p.quaternion.copy(ib.quaternion);var f=o.clone().multiplyScalar(.05),b=n.clone().add(f);p.position.copy(b),p.name=e.charAt(0).toUpperCase()+e.slice(1),this.$emit("add-shape",p)}}};n("f87c");const Ep=ze()(Tp,[["render",Sp],["__scopeId","data-v-4262662a"]]);var Dp=Ep,Bp=function(e){return Object(o["o"])("data-v-e4e7cb64"),e=e(),Object(o["n"])(),e},Pp={class:"snap-settings"},Qp={class:"control-group"},Gp={class:"control-header"},Hp=Bp((function(){return Object(o["f"])("span",{class:"label"},"Enable Snapping",-1)})),Rp={class:"switch"},Yp=Bp((function(){return Object(o["f"])("span",{class:"slider round"},null,-1)})),Lp=Bp((function(){return Object(o["f"])("div",{class:"separator"},null,-1)})),zp=["disabled"],Wp=Bp((function(){return Object(o["f"])("div",{class:"icon-box"},[Object(o["f"])("svg",{viewBox:"0 0 24 24",width:"20",height:"20",stroke:"currentColor","stroke-width":"2",fill:"none"},[Object(o["f"])("rect",{x:"2",y:"2",width:"6",height:"6"}),Object(o["f"])("rect",{x:"16",y:"16",width:"6",height:"6"}),Object(o["f"])("line",{x1:"8",y1:"8",x2:"16",y2:"16"})])],-1)})),Up=Bp((function(){return Object(o["f"])("span",null,"Endpoints",-1)})),Vp=[Wp,Up],Fp=["disabled"],Xp=Bp((function(){return Object(o["f"])("div",{class:"icon-box"},[Object(o["f"])("svg",{viewBox:"0 0 24 24",width:"20",height:"20",stroke:"currentColor","stroke-width":"2",fill:"none"},[Object(o["f"])("polygon",{points:"12,2 22,12 12,22 2,12"})])],-1)})),Np=Bp((function(){return Object(o["f"])("span",null,"Midpoints",-1)})),qp=[Xp,Np],_p=["disabled"],Zp=Bp((function(){return Object(o["f"])("div",{class:"icon-box"},[Object(o["f"])("svg",{viewBox:"0 0 24 24",width:"20",height:"20",stroke:"currentColor","stroke-width":"2",fill:"none"},[Object(o["f"])("path",{d:"M3 3h18v18H3z M3 9h18 M3 15h18 M9 3v18 M15 3v18"})])],-1)})),Kp=Bp((function(){return Object(o["f"])("span",null,"Grid",-1)})),$p=[Zp,Kp],Jp=["disabled"],ef=Bp((function(){return Object(o["f"])("div",{class:"icon-box"},[Object(o["f"])("svg",{viewBox:"0 0 24 24",width:"20",height:"20",stroke:"currentColor","stroke-width":"2",fill:"none"},[Object(o["f"])("circle",{cx:"12",cy:"12",r:"10"}),Object(o["f"])("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"})])],-1)})),tf=Bp((function(){return Object(o["f"])("span",null,"Center",-1)})),nf=[ef,tf],of=Bp((function(){return Object(o["f"])("div",{class:"separator"},null,-1)})),rf={class:"slider-header"},af=Bp((function(){return Object(o["f"])("span",{class:"label"},"Snap Radius",-1)})),sf={class:"value"},cf=["disabled"];function lf(e,t,n,i,r,a){var s=Object(o["s"])("draggable-window");return Object(o["m"])(),Object(o["c"])(s,{ref:"win",title:"Object Snap",initialX:n.initialX||r.window.innerWidth-300,initialY:n.initialY||100,visible:n.isOpen,reopenTrigger:n.reopenTrigger,"is-open":n.isOpen,onClose:t[8]||(t[8]=function(t){return e.$emit("close")})},{default:Object(o["z"])((function(){return[Object(o["f"])("div",Pp,[Object(o["f"])("div",Qp,[Object(o["f"])("div",Gp,[Hp,Object(o["f"])("label",Rp,[Object(o["A"])(Object(o["f"])("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=function(e){return r.config.enabled=e}),onChange:t[1]||(t[1]=function(){return a.updateConfig&&a.updateConfig.apply(a,arguments)})},null,544),[[o["u"],r.config.enabled]]),Yp])])]),Lp,Object(o["f"])("div",{class:Object(o["k"])(["options-grid",{disabled:!r.config.enabled}])},[Object(o["f"])("button",{class:Object(o["k"])(["option-btn",{active:r.config.endpoints}]),onClick:t[2]||(t[2]=function(e){return a.toggleOption("endpoints")}),disabled:!r.config.enabled},Vp,10,zp),Object(o["f"])("button",{class:Object(o["k"])(["option-btn",{active:r.config.midpoints}]),onClick:t[3]||(t[3]=function(e){return a.toggleOption("midpoints")}),disabled:!r.config.enabled},qp,10,Fp),Object(o["f"])("button",{class:Object(o["k"])(["option-btn",{active:r.config.grid}]),onClick:t[4]||(t[4]=function(e){return a.toggleOption("grid")}),disabled:!r.config.enabled},$p,10,_p),Object(o["f"])("button",{class:Object(o["k"])(["option-btn",{active:r.config.center}]),onClick:t[5]||(t[5]=function(e){return a.toggleOption("center")}),disabled:!r.config.enabled},nf,10,Jp)],2),of,Object(o["f"])("div",{class:Object(o["k"])(["control-group",{disabled:!r.config.enabled}])},[Object(o["f"])("div",rf,[af,Object(o["f"])("span",sf,Object(o["t"])(r.config.threshold),1)]),Object(o["A"])(Object(o["f"])("input",{type:"range",min:"0.1",max:"2.0",step:"0.1","onUpdate:modelValue":t[6]||(t[6]=function(e){return r.config.threshold=e}),onInput:t[7]||(t[7]=function(){return a.updateConfig&&a.updateConfig.apply(a,arguments)}),disabled:!r.config.enabled},null,40,cf),[[o["x"],r.config.threshold,void 0,{number:!0}]])],2)])]})),_:1},8,["initialX","initialY","visible","reopenTrigger","is-open"])}var uf={name:"SnapSettings",components:{DraggableWindow:qe},props:{isOpen:Boolean,reopenTrigger:Number,initialX:Number,initialY:Number},data:function(){return{config:{enabled:!1,endpoints:!0,midpoints:!0,grid:!1,center:!1,threshold:.5},window:window}},methods:{toggleOption:function(e){this.config.enabled&&(this.config[e]=!this.config[e],this.updateConfig())},updateConfig:function(){this.$emit("config-change",Object(s["a"])({},this.config))}},mounted:function(){this.updateConfig()}};n("30e3");const df=ze()(uf,[["render",lf],["__scopeId","data-v-e4e7cb64"]]);var hf=df,pf=function(e){return Object(o["o"])("data-v-6ba11fd1"),e=e(),Object(o["n"])(),e},ff={class:"window",id:"drawing-modes-window"},bf={class:"window-header"},gf=pf((function(){return Object(o["f"])("div",{class:"window-title"},"Drawing Plane",-1)})),mf={class:"window-controls"},vf=pf((function(){return Object(o["f"])("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Object(o["f"])("path",{d:"M1 1L9 9M9 1L1 9",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1)})),yf=[vf],wf={class:"window-content"},Of={class:"mode-buttons"},jf=pf((function(){return Object(o["f"])("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Object(o["f"])("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),Object(o["f"])("path",{d:"M3 9h18M9 21V9"})],-1)})),Af=pf((function(){return Object(o["f"])("span",null,"Surface",-1)})),xf=[jf,Af],kf=pf((function(){return Object(o["f"])("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Object(o["f"])("path",{d:"M3 12h18M3 6h18M3 18h18M12 3v18M6 3v18M18 3v18"})],-1)})),Mf=pf((function(){return Object(o["f"])("span",null,"Grid (Ground)",-1)})),If=[kf,Mf],Cf=pf((function(){return Object(o["f"])("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[Object(o["f"])("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2"}),Object(o["f"])("path",{d:"M8 21h8M12 17v4"})],-1)})),Sf=pf((function(){return Object(o["f"])("span",null,"View (Screen)",-1)})),Tf=[Cf,Sf],Ef={class:"mode-description"},Df={key:0},Bf={key:1},Pf={key:2};function Qf(e,t,n,i,r,a){return Object(o["m"])(),Object(o["e"])("div",ff,[Object(o["f"])("div",bf,[gf,Object(o["f"])("div",mf,[Object(o["f"])("div",{class:"close-button",onClick:t[0]||(t[0]=function(t){return e.$emit("close")})},yf)])]),Object(o["f"])("div",wf,[Object(o["f"])("div",Of,[Object(o["f"])("button",{class:Object(o["k"])(["mode-btn",{active:"surface"===n.currentMode}]),onClick:t[1]||(t[1]=function(e){return a.selectMode("surface")}),title:"Draw on Surface (Canvas)"},xf,2),Object(o["f"])("button",{class:Object(o["k"])(["mode-btn",{active:"grid"===n.currentMode}]),onClick:t[2]||(t[2]=function(e){return a.selectMode("grid")}),title:"Draw on Ground Grid"},If,2),Object(o["f"])("button",{class:Object(o["k"])(["mode-btn",{active:"view"===n.currentMode}]),onClick:t[3]||(t[3]=function(e){return a.selectMode("view")}),title:"Draw in Screen Space (View Plane)"},Tf,2)]),Object(o["f"])("div",Ef,["surface"===n.currentMode?(Object(o["m"])(),Object(o["e"])("span",Df,"Drawing projected onto the 3D Object/Canvas.")):Object(o["d"])("",!0),"grid"===n.currentMode?(Object(o["m"])(),Object(o["e"])("span",Bf,"Drawing projected onto the horizontal Ground Plane.")):Object(o["d"])("",!0),"view"===n.currentMode?(Object(o["m"])(),Object(o["e"])("span",Pf,"Drawing projected onto a plane facing the Camera.")):Object(o["d"])("",!0)])])])}var Gf={name:"DrawingModes",props:{isOpen:Boolean,currentMode:{type:String,default:"surface"}},emits:["close","mode-change"],methods:{selectMode:function(e){this.$emit("mode-change",e)}}};n("f247");const Hf=ze()(Gf,[["render",Qf],["__scopeId","data-v-6ba11fd1"]]);var Rf=Hf,Yf=function(e){return Object(o["o"])("data-v-b79ed462"),e=e(),Object(o["n"])(),e},Lf={class:"code-editor-panel"},zf={class:"toolbar"},Wf=Yf((function(){return Object(o["f"])("option",{disabled:"",value:""},"Select an Example",-1)})),Uf=["value"],Vf=Yf((function(){return Object(o["f"])("div",{class:"spacer"},null,-1)}));function Ff(e,t,n,i,r,a){var s=Object(o["s"])("draggable-window");return Object(o["m"])(),Object(o["c"])(s,{title:"Code Editor",initialX:100,initialY:100,visible:!0,reopenTrigger:n.reopenTrigger,"is-open":n.isOpen,onClose:t[5]||(t[5]=function(t){return e.$emit("close")}),width:500,height:400},{default:Object(o["z"])((function(){return[Object(o["f"])("div",Lf,[Object(o["f"])("div",zf,[Object(o["A"])(Object(o["f"])("select",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.selectedExample=e}),onChange:t[1]||(t[1]=function(){return a.loadExample&&a.loadExample.apply(a,arguments)}),class:"example-select"},[Wf,(Object(o["m"])(!0),Object(o["e"])(o["a"],null,Object(o["q"])(r.examples,(function(e,t){return Object(o["m"])(),Object(o["e"])("option",{key:t,value:t},Object(o["t"])(t),9,Uf)})),128))],544),[[o["w"],r.selectedExample]]),Vf,Object(o["f"])("button",{class:"action-btn run-btn",onClick:t[2]||(t[2]=function(){return a.runCode&&a.runCode.apply(a,arguments)})},"Dependencies: THREE, scene, camera, renderer  Run"),Object(o["f"])("button",{class:"action-btn clear-btn",onClick:t[3]||(t[3]=function(){return a.clearCode&&a.clearCode.apply(a,arguments)})},"Clear")]),Object(o["A"])(Object(o["f"])("textarea",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return r.code=e}),class:"code-textarea",spellcheck:"false",placeholder:"// Write your Three.js code here...\r\n// Available variables: THREE, scene, camera, renderer, draw\r\n// Example:\r\n// const cube = new THREE.Mesh(new THREE.BoxGeometry(), new THREE.MeshBasicMaterial({color: 'red'}));\r\n// scene.add(cube);\r\n// renderer.render(scene, camera);"},null,512),[[o["x"],r.code]]),Object(o["f"])("div",{class:Object(o["k"])(["status-bar",{error:r.isError,success:r.isSuccess}])},Object(o["t"])(r.statusMessage),3)])]})),_:1},8,["reopenTrigger","is-open"])}var Xf={name:"CodeEditor",components:{DraggableWindow:qe},props:{reopenTrigger:Number,isOpen:Boolean},data:function(){return{code:"",statusMessage:"Ready",isError:!1,isSuccess:!1,selectedExample:"",examples:{"Random Cubes":'// Create 50 random cubes\nconst geometry = new THREE.BoxGeometry(0.5, 0.5, 0.5);\n\nfor (let i = 0; i < 50; i++) {\n  const color = new THREE.Color().setHSL(Math.random(), 1, 0.5);\n  const material = new THREE.MeshStandardMaterial({ \n      color: color,\n      roughness: 0.2,\n      metalness: 0.1\n  });\n  \n  const mesh = new THREE.Mesh(geometry, material);\n  \n  // Random position within 10 units\n  mesh.position.set(\n    (Math.random() - 0.5) * 10,\n    (Math.random() - 0.5) * 10,\n    (Math.random() - 0.5) * 10\n  );\n  \n  // Random rotation\n  mesh.rotation.set(\n      Math.random() * Math.PI,\n      Math.random() * Math.PI,\n      0\n  );\n  \n  addToLayer(mesh);\n}\n\n// Update the view\nrenderer.render(scene, camera);\nconsole.log("Created 50 cubes");',"Spiral of Light":"// Create a spiral of glowing spheres\nconst count = 100;\nconst geometry = new THREE.SphereGeometry(0.1, 16, 16);\nconst material = new THREE.MeshStandardMaterial({\n    color: 0x00ffff,\n    emissive: 0x00ffff,\n    emissiveIntensity: 2\n});\n\nconst group = new THREE.Group();\n\nfor (let i = 0; i < count; i++) {\n    const angle = 0.5 * i;\n    const radius = 0.2 * i;\n    const y = i * 0.1;\n    \n    const mesh = new THREE.Mesh(geometry, material);\n    mesh.position.set(\n        Math.cos(angle) * radius,\n        y - (count * 0.05), // Center vertically roughly\n        Math.sin(angle) * radius\n    );\n    group.add(mesh);\n}\n\naddToLayer(group);\nrenderer.render(scene, camera);","Torus Knot Ring":"// Create a large Torus Knot\nconst geometry = new THREE.TorusKnotGeometry(2, 0.6, 100, 16);\nconst material = new THREE.MeshStandardMaterial({ \n    color: 0xff00cc, \n    roughness: 0.1,\n    metalness: 0.8\n});\nconst torusKnot = new THREE.Mesh(geometry, material);\n\naddToLayer(torusKnot);\nrenderer.render(scene, camera);","Interactive Grid (Wave)":"// Simple wave Surface\nconst size = 20;\nconst divisions = 20;\nconst geometry = new THREE.PlaneGeometry(10, 10, divisions, divisions);\n\nconst count = geometry.attributes.position.count;\nfor (let i = 0; i < count; i++) {\n    const x = geometry.attributes.position.getX(i);\n    const z = geometry.attributes.position.getY(i); // Plane is usually XY, let's treat Y as Z for height later or rotate\n    const y = Math.sin(x) * Math.cos(z) * 1;\n    geometry.attributes.position.setZ(i, y);\n}\n\ngeometry.computeVertexNormals();\n\nconst material = new THREE.MeshStandardMaterial({ \n    color: 0x44aa88, \n    side: THREE.DoubleSide,\n    wireframe: true\n});\n\nconst plane = new THREE.Mesh(geometry, material);\nplane.rotation.x = -Math.PI / 2; // Flat on ground\naddToLayer(plane);\nrenderer.render(scene, camera);","Draw Stroke Test":'// Use the internal Draw tool\n// Simulates a stroke\nif (draw && draw.onStart) {\n    const stroke = { show_stroke: true, color: \'#ff0000\', lineWidth: 0.05 };\n    const fill = { show_fill: false };\n    \n    // Start stroke\n    draw.onStart(0, 0, 0, 0.5, false, "", stroke, fill);\n    \n    // Draw coordinates\n    for(let i=0; i<20; i++) {\n        draw.onMove(i*0.1, Math.sin(i*0.5), 0, 0.5, false);\n    }\n    \n    // End stroke\n    draw.onEnd("");\n    renderer.render(scene, camera);\n} else {\n    console.warn("Draw tool not available in context");\n}',"Clear Added Objects":"// Remove Meshes that aren't core helpers\n// (Simple garbage collection for this session)\nconst toRemove = [];\n\n// Clean Active Layer Group Children\nif (vm && vm.getActiveLayerGroup) {\n    const group = vm.getActiveLayerGroup();\n    if(group) {\n        while(group.children.length > 0) {\n            toRemove.push(group.children[0]);\n            group.remove(group.children[0]);\n        }\n    }\n}\n\n// Fallback: Check root scene for strays (though we are using layers now)\nscene.traverse((child) => {\n    // Check if it's a mesh and NOT the grid helper or background or layer groups\n    if (child.isMesh && child.geometry.type !== 'PlaneBufferGeometry' && !child.userData.isSystem) {\n         // Be careful not to delete things inside layer groups if we just cleared the group\n         if (child.parent === scene) {\n             toRemove.push(child);\n         }\n    }\n});\n\ntoRemove.forEach(child => {\n    if (child.parent) child.parent.remove(child);\n    else scene.remove(child);\n    \n    if(child.geometry) child.geometry.dispose();\n    if(child.material) child.material.dispose();\n});\n\nrenderer.render(scene, camera);\nconsole.log(\"Cleared \" + toRemove.length + \" objects.\");","Formula 1 Car":"// Formula 1 Car Procedural Model\nconst carGroup = new THREE.Group();\n\n// --- Material Helpers ---\nconst redMat = new THREE.MeshStandardMaterial({ color: 0xff0000, roughness: 0.2, metalness: 0.5 });\nconst blackMat = new THREE.MeshStandardMaterial({ color: 0x222222, roughness: 0.8, metalness: 0.1 });\nconst tireMat = new THREE.MeshStandardMaterial({ color: 0x111111, roughness: 0.9 });\nconst chromeMat = new THREE.MeshStandardMaterial({ color: 0xffffff, roughness: 0.0, metalness: 1.0 });\n\n// --- Body ---\n// Main Chassis\nconst chassisGeo = new THREE.BoxGeometry(1.5, 0.4, 4);\nconst chassis = new THREE.Mesh(chassisGeo, redMat);\nchassis.position.y = 0.5;\ncarGroup.add(chassis);\n\n// Nose\nconst noseGeo = new THREE.BoxGeometry(1, 0.25, 2);\nconst nose = new THREE.Mesh(noseGeo, redMat);\nnose.position.set(0, 0.4, 2.5); // Forward\n// Taper the nose slightly (simple scale)\nnose.scale.x = 0.8;\ncarGroup.add(nose);\n\n// Cockpit / Engine Cover\nconst cockpitGeo = new THREE.BoxGeometry(0.8, 0.6, 2);\nconst cockpit = new THREE.Mesh(cockpitGeo, redMat);\ncockpit.position.set(0, 0.9, -0.5);\ncarGroup.add(cockpit);\n\n// --- Wings ---\n// Front Wing\nconst fWingGeo = new THREE.BoxGeometry(3, 0.1, 0.8);\nconst fWing = new THREE.Mesh(fWingGeo, blackMat);\nfWing.position.set(0, 0.3, 3.5);\ncarGroup.add(fWing);\n\n// Rear Wing\nconst rWingGeo = new THREE.BoxGeometry(2.5, 0.1, 0.8);\nconst rWing = new THREE.Mesh(rWingGeo, blackMat);\nrWing.position.set(0, 1.5, -2.2);\ncarGroup.add(rWing);\n\nconst rWingSupportGeo = new THREE.BoxGeometry(0.1, 0.8, 0.5);\nconst rWingSupportL = new THREE.Mesh(rWingSupportGeo, blackMat);\nrWingSupportL.position.set(0.8, 1.0, -2.2);\ncarGroup.add(rWingSupportL);\nconst rWingSupportR = rWingSupportL.clone();\nrWingSupportR.position.set(-0.8, 1.0, -2.2);\ncarGroup.add(rWingSupportR);\n\n// --- Wheels ---\nconst wheelGeo = new THREE.CylinderGeometry(0.5, 0.5, 0.6, 32);\nwheelGeo.rotateZ(Math.PI / 2); // Orient correctly\n\nconst createWheel = (x, z) => {\n    const wheel = new THREE.Mesh(wheelGeo, tireMat);\n    wheel.position.set(x, 0.5, z);\n    carGroup.add(wheel);\n    \n    // Axle/Suspension stub\n    const axleGeo = new THREE.CylinderGeometry(0.05, 0.05, Math.abs(x), 8);\n    axleGeo.rotateZ(Math.PI / 2);\n    const axle = new THREE.Mesh(axleGeo, chromeMat);\n    axle.position.set(x/2, 0.5, z);\n    carGroup.add(axle);\n};\n\ncreateWheel(1.2, 2.2);  // Front R\ncreateWheel(-1.2, 2.2); // Front L\ncreateWheel(1.3, -2.0); // Rear R (slightly wider)\ncreateWheel(-1.3, -2.0); // Rear L\n\naddToLayer(carGroup);\nrenderer.render(scene, camera);",Spaceship:"// Sci-Fi Spaceship\nconst ship = new THREE.Group();\n\nconst hullMat = new THREE.MeshStandardMaterial({ color: 0xaaaaaa, roughness: 0.4, metalness: 0.8 });\nconst darkMat = new THREE.MeshStandardMaterial({ color: 0x333333, roughness: 0.6, metalness: 0.5 });\nconst glowMat = new THREE.MeshStandardMaterial({ color: 0x00aaff, emissive: 0x00aaff, emissiveIntensity: 3 });\nconst glassMat = new THREE.MeshPhysicalMaterial({ \n    color: 0x000000, metalness: 0.9, roughness: 0.1, transparent: true, opacity: 0.7 \n});\n\n// Main Fuselage\nconst bodyGeo = new THREE.ConeGeometry(   1, 6, 8 );\nbodyGeo.rotateX(Math.PI / 2); // Point forward (Z)\nconst body = new THREE.Mesh(bodyGeo, hullMat);\nship.add(body);\n\n// Cockpit\nconst cockpitGeo = new THREE.SphereGeometry(0.7, 16, 16);\nconst cockpit = new THREE.Mesh(cockpitGeo, glassMat);\ncockpit.scale.set(1, 0.6, 2);\ncockpit.position.set(0, 0.5, 0.5);\nship.add(cockpit);\n\n// Wings\nconst wingShape = new THREE.Shape();\nwingShape.moveTo(0, 0);\nwingShape.lineTo(4, -2);\nwingShape.lineTo(4, -4);\nwingShape.lineTo(0, -2);\nwingShape.closePath();\n\nconst wingExtrudeSettings = { depth: 0.2, bevelEnabled: true, bevelThickness: 0.05, bevelSize: 0.05, bevelSegments: 2 };\nconst wingGeo = new THREE.ExtrudeGeometry(wingShape, wingExtrudeSettings);\n// Rotate flat\nwingGeo.rotateX(Math.PI / 2);\n\nconst leftWing = new THREE.Mesh(wingGeo, hullMat);\nleftWing.position.set(0.5, 0, 0);\nship.add(leftWing);\n\nconst rightWing = new THREE.Mesh(wingGeo, hullMat);\nrightWing.scale.x = -1; // Mirror\nrightWing.position.set(-0.5, 0, 0);\nship.add(rightWing);\n\n// Engines\nconst engineGeo = new THREE.CylinderGeometry(0.4, 0.6, 2, 16);\nengineGeo.rotateX(Math.PI / 2);\nconst leftEngine = new THREE.Mesh(engineGeo, darkMat);\nleftEngine.position.set(2, 0, -2);\nship.add(leftEngine);\n\nconst rightEngine = leftEngine.clone();\nrightEngine.position.set(-2, 0, -2);\nship.add(rightEngine);\n\n// Engine Glow\nconst glowGeo = new THREE.CircleGeometry(0.5, 16);\nconst lGlow = new THREE.Mesh(glowGeo, glowMat);\nlGlow.position.set(0, -1.01, 0); // At end of cylinder... rotated cylinder is Z, so end is Z\nlGlow.rotation.x = Math.PI; // Face back\n// We need to attach glow relative to engine or match pos\n// Easier to re-position globally\nlGlow.position.set(2, 0, -3.01);\nship.add(lGlow);\n\nconst rGlow = lGlow.clone();\nrGlow.position.set(-2, 0, -3.01);\nship.add(rGlow);\n\naddToLayer(ship);\nrenderer.render(scene, camera);","Game Controller":"// Video Game Controller (Retro Style)\nconst controllerGroup = new THREE.Group();\n\nconst bodyColor = new THREE.MeshStandardMaterial({ color: 0xdddddd, roughness: 0.5 });\nconst btnColorA = new THREE.MeshStandardMaterial({ color: 0xff0000 });\nconst btnColorB = new THREE.MeshStandardMaterial({ color: 0x00ff00 });\nconst dpadColor = new THREE.MeshStandardMaterial({ color: 0x333333 });\n\n// Main Body (Round Rectangle approximate)\n// Using a scaled cylinder for rounded sides + box in middle\nconst centerGeo = new THREE.BoxGeometry(2, 1, 0.4);\nconst center = new THREE.Mesh(centerGeo, bodyColor);\ncontrollerGroup.add(center);\n\nconst leftGripGeo = new THREE.CylinderGeometry(0.5, 0.5, 0.4, 32);\nconst leftGrip = new THREE.Mesh(leftGripGeo, bodyColor);\nleftGrip.rotation.x = Math.PI / 2;\nleftGrip.position.set(-1, 0, 0);\ncontrollerGroup.add(leftGrip);\n\nconst rightGripGeo = new THREE.CylinderGeometry(0.5, 0.5, 0.4, 32);\nconst rightGrip = new THREE.Mesh(rightGripGeo, bodyColor);\nrightGrip.rotation.x = Math.PI / 2;\nrightGrip.position.set(1, 0, 0);\ncontrollerGroup.add(rightGrip);\n\n// D-Pad\nconst dpadV = new THREE.Mesh(new THREE.BoxGeometry(0.2, 0.6, 0.1), dpadColor);\ndpadV.position.set(-1, 0, 0.25);\ncontrollerGroup.add(dpadV);\n\nconst dpadH = new THREE.Mesh(new THREE.BoxGeometry(0.6, 0.2, 0.1), dpadColor);\ndpadH.position.set(-1, 0, 0.25);\ncontrollerGroup.add(dpadH);\n\n// Buttons\nconst btnGeo = new THREE.CylinderGeometry(0.12, 0.12, 0.1, 16);\nbtnGeo.rotateX(Math.PI / 2);\n\nconst btnA = new THREE.Mesh(btnGeo, btnColorA);\nbtnA.position.set(1.1, 0.15, 0.25);\ncontrollerGroup.add(btnA);\n\nconst btnB = new THREE.Mesh(btnGeo, btnColorB);\nbtnB.position.set(0.8, -0.15, 0.25); // Offset\ncontrollerGroup.add(btnB);\n\n// Joysticks (Analog nub style)\nconst joyGeo = new THREE.CylinderGeometry(0.25, 0.25, 0.1, 32);\njoyGeo.rotateX(Math.PI / 2);\nconst joyL = new THREE.Mesh(joyGeo, dpadColor);\njoyL.position.set(-0.4, -0.2, 0.25);\ncontrollerGroup.add(joyL);\n\nconst joyR = new THREE.Mesh(joyGeo, dpadColor);\njoyR.position.set(0.4, -0.2, 0.25);\ncontrollerGroup.add(joyR);\n\ncontrollerGroup.scale.set(2, 2, 2); // Make it bigger\naddToLayer(controllerGroup);\nrenderer.render(scene, camera);"}}},methods:{loadExample:function(){this.selectedExample&&this.examples[this.selectedExample]&&(this.code=this.examples[this.selectedExample])},clearCode:function(){this.code="",this.statusMessage="Cleared",this.isError=!1,this.isSuccess=!1},runCode:function(){this.isError=!1,this.isSuccess=!1,this.statusMessage="Running...";try{var e=function(e){if(Kf&&Kf.getActiveLayerGroup){var t=Kf.getActiveLayerGroup();t?(t.add(e),e.isMesh||e.isGroup):rb.add(e)}else rb.add(e)},t=new Function("THREE","scene","camera","renderer","draw","addToLayer","vm",this.code);t(r,rb,ib,ob,xt,e,Kf),this.statusMessage="Executed successfully at "+(new Date).toLocaleTimeString(),this.isSuccess=!0}catch(n){console.error("Code Execution Error:",n),this.statusMessage="Error: "+n.message,this.isError=!0}}}};n("054e");const Nf=ze()(Xf,[["render",Ff],["__scopeId","data-v-b79ed462"]]);var qf=Nf;a["a"].install({THREE:r});var _f,Zf,Kf,$f,Jf,eb,tb,nb=new r["WebGLRenderer"]({antialias:!0,alpha:!0,preserveDrawingBuffer:!0}),ob=nb,ib=new r["PerspectiveCamera"](100,window.innerWidth/window.innerHeight,1,1e3),rb=new r["Scene"];function ab(){Jf?Jf.render():ob.render(rb,ib)}var sb={name:"App",components:{Input:Dt,LineSettings:Di,TubeSettings:ur,StripSettings:qr,ToolSelector:Tn,TubeToolSelector:Vn,StripToolSelector:so,ViewportCube:wo,UndoRedo:wt,Share:is,Canvas:Je,ShapeSelector:Ss,Modal:Bl,VideoExportPreview:Nl,SceneSettings:Zu,ColorPalette:id,SymmetrySettings:Qd,Layers:rh,ObjectManager:Vh,TransformToolbar:fp,TwoDShapes:Dp,SnapSettings:hf,DrawingModes:Rf,CodeEditor:qf},data:function(){return{tool:"draw",toolEnabled:!0,canvasShape:"plane",multitouch:"canvas",toolHistory:["draw"],stroke:{},fill:{},mirror:"",radial:!1,sectors:6,radialAxis:"y",localSymmetry:!1,quaternion:void 0,cameraResetDisabled:!1,selected:void 0,transformToolbar:{top:0,left:0,location:"above",display:!1,position:{x:0,y:0,z:0}},canvasTransformEnabled:!0,modalProp:{show:!1,mode:"about"},previewing:!1,mouse:{},snapConfig:{enabled:!1,endpoints:!0,midpoints:!0,threshold:.5},drawingMode:"surface",propertiesVisible:!1,layerGroups:{},activeLayerId:1,clipboard:[],windowTriggers:{tutorialStep:0,tools:0,properties:0,canvas:0,shapes:0,history:0,view:0,actions:0,scene:0,colors:0,symmetry:0,layers:0,objectManager:0,twoDShapes:0,tubeTools:0,tubeProperties:0,stripTools:0,stripProperties:0,snap:0,drawingModes:0,codeEditor:0},windowPositions:{},windowStates:{tools:!0,properties:!1,canvas:!0,shapes:!1,history:!1,view:!0,scene:!1,colors:!1,symmetry:!1,layers:!1,objectManager:!1,twoDShapes:!1,tubeTools:!0,tubeProperties:!1,stripTools:!0,stripProperties:!1,snap:!1,drawingModes:!1,codeEditor:!1},uiVisible:!0,arActive:!1,isTube:!1,isStrip:!1}},emits:["modal-set","selected-canvas-shape"],methods:{toggleProperties:function(){this.toggleWindow("properties")},toggleScene:function(){this.toggleWindow("scene")},toggleWindow:function(e){void 0!==this.windowStates[e]?(this.windowStates[e]=!this.windowStates[e],this.windowStates[e]&&void 0!==this.windowTriggers[e]&&this.windowTriggers[e]++):void 0!==this.windowTriggers[e]&&this.windowTriggers[e]++},onWindowClose:function(e){void 0!==this.windowStates[e]&&(this.windowStates[e]=!1)},toggleAR:function(){var e=this;this.arActive=!this.arActive;var t=document.getElementById("ar-video-bg");if(t||(t=document.createElement("video"),t.id="ar-video-bg",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100vw",t.style.height="100vh",t.style.objectFit="cover",t.style.zIndex="-1",t.autoplay=!0,t.muted=!0,t.playsInline=!0,document.body.appendChild(t)),this.arActive)if("localhost"!==window.location.hostname&&"https:"!==window.location.protocol&&alert(" AR Warning: Camera access requires HTTPS. \n\nIf testing on mobile via Wi-Fi/IP, the camera will likely fail. Use localhost via USB debugging or set up HTTPS."),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){var n=function n(o){navigator.mediaDevices.getUserMedia(o).then((function(e){t.srcObject=e,t.style.display="block";var n=!1;try{var i=e.getVideoTracks()[0],r=i.getSettings();"environment"!==o.video.facingMode&&"environment"!==r.facingMode||(n=!0)}catch(a){}t.style.transform=n?"none":"scaleX(-1)",rb.background=null,ob.render(rb,ib)})).catch((function(t){console.warn("AR Camera attempt failed:",t),"environment"===o.video.facingMode?(console.log("Retrying with any available camera..."),n({video:!0})):(console.error("AR Fatal Error:",t),alert("Camera Error: "+t.name+"\n"+t.message+"\n\n(On PC this likely means no webcam is connected. On Mobile, ensure HTTPS is used.)"),e.arActive=!1)}))};n({video:{facingMode:"environment"}})}else alert("Camera API not supported in this browser context (HTTPS required)."),this.arActive=!1;else t.style.display="none",t.srcObject&&(t.srcObject.getTracks().forEach((function(e){return e.stop()})),t.srcObject=null),rb.background=new r["Color"](14540253),ob.render(rb,ib)},init:function(){var e=this;a["a"].install({THREE:r}),eb=document.getElementById("threed"),ob.setPixelRatio(window.devicePixelRatio),ob.setClearColor(0,0),ob.setSize(window.innerWidth,window.innerHeight),eb.appendChild(ob.domElement),ob.domElement.id="threeJsCanvas";var t=14540253;rb.background=new r["Color"](t),rb.fog=new r["Fog"](t,10,50),_f=new r["Scene"];var n=new c(1,10,new r["Color"](255),40);rb.add(n),ib.layers.enable(0),ib.layers.enable(1),ib.zoom=3,ib.position.set(5,5,10),tb=new r["Clock"];var o=new r["WebGLRenderTarget"](window.innerWidth,window.innerHeight,{type:r["FloatType"],format:r["RGBAFormat"],encoding:r["sRGBEncoding"]});Jf=new l["a"](ob,o);var i=new u["a"](rb,ib);Jf.addPass(i),this.bloomPass=new d["a"](new r["Vector2"](window.innerWidth,window.innerHeight),0,.4,.2),this.bloomPass.enabled=!1,Jf.addPass(this.bloomPass),Zf=new a["a"](ib,ob.domElement),Zf.dampingFactor=20,Zf.draggingDampingFactor=200,Zf.mouseButtons.left=a["a"].ACTION.ROTATE,Zf.mouseButtons.wheel=a["a"].ACTION.DOLLY,document.addEventListener("keydown",(function(t){"Space"===t.code&&(Zf.mouseButtons.left=a["a"].ACTION.TRUCK,e.toolEnabled=!1)})),document.addEventListener("keyup",(function(t){"Space"===t.code&&(Zf.mouseButtons.left=a["a"].ACTION.ROTATE,e.toolEnabled=!0)})),document.addEventListener("keydown",(function(t){"AltLeft"===t.code&&(Zf.mouseButtons.left=a["a"].ACTION.ROTATE,e.toolEnabled=!1)})),document.addEventListener("keyup",(function(t){"AltLeft"===t.code&&(Zf.mouseButtons.left=a["a"].ACTION.ROTATE,e.toolEnabled=!0)})),Zf.mouseButtons.middle=a["a"].ACTION.TRUCK,Zf.mouseButtons.right=a["a"].ACTION.NONE,Zf.touches.one=a["a"].ACTION.TOUCH_ROTATE,Zf.touches.two=a["a"].ACTION.TOUCH_DOLLY_TRUCK,Zf.touches.three=a["a"].ACTION.TOUCH_ZOOM_TRUCK,Zf.maxZoom=4e3,Zf.minZoom=.5,Zf.enabled=!0,this.quaternion=[ib.quaternion.x,ib.quaternion.y,ib.quaternion.z,ib.quaternion.w],Zf.addEventListener("update",(function(){e.quaternion=[ib.quaternion.x,ib.quaternion.y,ib.quaternion.z,ib.quaternion.w];var t=new r["Vector3"];t=Zf.getTarget(t),p.position.set(t.x,t.y,t.z),St.s&&void 0!=St.s.controls&&"select"==e.tool&&St.s.helper.update()})),Zf.addEventListener("sleep",(function(){if(St.s&&void 0!=St.s.controls&&"select"==e.tool){St.s.helper.update();var t=St.s.calculateTransfromToolbarPosition();e.transformToolbar.left=t.x,e.transformToolbar.top=t.y,e.transformToolbar.location=t.location,e.transformToolbar.display=!0}var n=new r["Vector3"];n=Zf.getTarget(n);var o=n.x,i=n.y,a=n.z;10!=ib.position.z||0!=o||0!=i||0!=a||3!=ib.zoom?e.cameraResetDisabled=!1:e.cameraResetDisabled=!0}));var s=new r["SphereBufferGeometry"](.025,32,32),h=new r["MeshBasicMaterial"]({color:16762719}),p=new r["Mesh"](s,h);rb.add(p);var f=new r["HemisphereLight"](16777215,2236962,.8);f.position.set(0,50,150),rb.add(f),this.$.refs.raycastCanvas.setUp(),this.$.refs.raycastCanvas.resetTransformation(),window.addEventListener("resize",this.onWindowResize),window.addEventListener("orientationchange",this.onWindowResize),this.onWindowResize(),ob.render(rb,ib)},onWindowResize:function(){ib.aspect=window.innerWidth/window.innerHeight,ib.left=900*ib.aspect/-2,ib.right=900*ib.aspect/2,ib.top=450,ib.bottom=-450,ib.updateProjectionMatrix(),ob.setSize(window.innerWidth,window.innerHeight),Jf&&Jf.setSize(window.innerWidth,window.innerHeight),ob.setViewport(0,0,window.innerWidth,window.innerHeight),ab()},animate:function(){var e=tb.getDelta(),t=Zf.update(e),n=!1;xt&&xt.animateLines&&(n=xt.animateLines(e)),requestAnimationFrame(this.animate),(t||n)&&ab()},setSelectedTool:function(e){"select"===this.tool&&St&&St.s&&(St.s.deselect(),this.setTransformToolbarDisplay(!1)),this.tool=e,"erase"===this.tool?("undefined"!==typeof Ue&&Ue&&(Ue.visible=!1),"undefined"!==typeof Ve&&Ve&&(Ve.visible=!1),ab()):"draw"===this.tool&&(this.$.refs.raycastCanvas&&!0===this.$.refs.raycastCanvas.visible&&"undefined"!==typeof Ue&&Ue?Ue.visible=!0:"undefined"!==typeof Ue&&Ue&&(Ue.visible=!1),this.$.refs.raycastCanvas&&!0===this.$.refs.raycastCanvas.transformationEnabled&&!0===this.$.refs.raycastCanvas.visible&&"undefined"!==typeof Ve&&Ve?Ve.visible=!0:"undefined"!==typeof Ve&&Ve&&(Ve.visible=!1),ab()),this.toolHistory.push(e),this.toolHistory.length>2&&this.toolHistory.shift();var t=e,n=this.toolHistory[0];mt.add({undo:function(){Kf.setSelectedTool(n)},redo:function(){Kf.setSelectedTool(t)}}),this.$.refs.undoRedo.updateUi()},setToolEnabled:function(e){this.toolEnabled=e},setMouseCoordinates:function(e){this.mouse=e},setSelectedCanvasShape:function(e){this.canvasShape=e},loadCustomModelInCanvas:function(e){this.$refs.raycastCanvas&&this.$refs.raycastCanvas.loadCustomModel(e)},setCanvasMaterial:function(e){this.$refs.raycastCanvas&&this.$refs.raycastCanvas.setMaterial(e)},onAddCanvasShape:function(e){this.setSelectedTool("draw"),this.$refs.raycastCanvas&&this.$refs.raycastCanvas.addShape(e)},onSnapConfigChange:function(e){this.snapConfig=e},onDrawingModeChange:function(e){this.drawingMode=e},setSelectedTool_internal:function(e){this.tool=e},setSelectedMultitouch:function(e){this.multitouch=e,Zf.enabled="camera"===e},setSelectedObject:function(e){this.selected=e},setTransformToolbarPosition:function(e){this.transformToolbar.top=e.top,this.transformToolbar.left=e.left,this.transformToolbar.location=e.location},setTransformToolbarDisplay:function(e){this.transformToolbar.display=e},setSelectionPosition:function(e){this.transformToolbar.position=e},closeSelection:function(){St&&St.s&&St.s.deselect(),this.transformToolbar.display=!1},setStroke:function(e){this.stroke=e,St&&St.s&&St.s.controls&&St.s.controls.object&&"Mesh"===St.s.controls.object.type&&(xt.updateStroke(St.s.controls.object,e),ob.render(rb,ib))},setFill:function(e){this.fill=e,St&&St.s&&St.s.controls&&St.s.controls.object&&"Mesh"===St.s.controls.object.type&&(xt.updateFill(St.s.controls.object,e),ob.render(rb,ib))},setModal:function(e){this.modalProp=e},setPreview:function(e){this.previewing=e},applyPreset:function(e){var t=this;this.isTube=!!e.isTube,this.isStrip=!!e.isStrip,this.$nextTick((function(){t.isTube?t.$refs.tubeSettings.updateSettings(e):t.isStrip?t.$refs.stripSettings.updateSettings(e):t.$refs.lineSettings.updateSettings(e)}))},applyColor:function(e){"draw"!==this.tool&&(this.tool="draw"),this.isTube?this.$refs.tubeSettings.updateSettings({strokeColor:e}):this.isStrip?this.$refs.stripSettings.updateSettings({strokeColor:e}):this.$refs.lineSettings.updateSettings({strokeColor:e,stroke:!0})},handleKeyDown:function(e){var t=this;if("Escape"===e.key&&"select"===this.tool&&St&&St.s&&(St.s.deselect(),this.setTransformToolbarDisplay(!1)),"AltGraph"===e.key&&(this.uiVisible=!this.uiVisible),"Space"===e.code&&this.$refs.raycastCanvas&&this.$refs.raycastCanvas.toggleVisibility(),!e.ctrlKey||"c"!==e.key&&"C"!==e.key||(console.log("Ctrl+C detected"),St&&St.s&&St.s.selected&&St.s.selected.length>0?(this.clipboard=[],St.s.selected.forEach((function(e){var n=e.clone();if(n.material)try{n.material=n.material.clone()}catch(o){console.warn("Material clone failed on copy, sharing material",o)}t.clipboard.push(n)})),console.log("Copied to clipboard:",this.clipboard.length)):(console.log("Nothing to copy. Selection empty?"),St&&console.log("select exists"),St&&St.s&&console.log("select.s exists",St.s.selected))),e.ctrlKey&&("v"===e.key||"V"===e.key)&&(console.log("Ctrl+V detected. Clipboard size:",this.clipboard?this.clipboard.length:0),this.clipboard&&this.clipboard.length>0)){St&&St.s&&St.s.deselect();var n=[];this.clipboard.forEach((function(e){var o=e.clone();if(o.uuid=r["MathUtils"].generateUUID(),o.material)try{o.material=o.material.clone()}catch(i){}o.position.addScalar(.5),t.activeLayerId&&t.layerGroups[t.activeLayerId]?t.layerGroups[t.activeLayerId].add(o):rb.add(o),e.raycast?o.raycast=e.raycast:o.geometry&&o.geometry.isMeshLine,n.push(o)})),St&&St.s&&n.length>0&&(this.tool="select",St.s.select(n)),ab()}if(!e.ctrlKey||"d"!==e.key&&"D"!==e.key||(e.preventDefault(),St&&St.s&&(St.s.selected.length>0||St.s.controls&&St.s.controls.object)?(console.log("Ctrl+D detected - calling duplicate()"),St.s.duplicate()):console.log("Ctrl+D ignored: No selection")),("Delete"===e.code||"Backspace"===e.code)&&St&&St.s&&St.s.controls&&St.s.controls.object){var o=St.s.controls.object,i=[];"Group"===o.type?o.children.forEach((function(e){var t=e.userData.uuid;if(t){var n=rb.getObjectByProperty("uuid",t);n&&i.push(n)}})):i.push(o),i.length>0&&(St.s.deselect(),i.forEach((function(e){Ot.deleteObject(e)})),ab())}},onLayerAdd:function(e){var t=new r["Group"];t.name="Layer_".concat(e.id),t.userData.layerId=e.id,rb.add(t),this.layerGroups[e.id]=t},onLayerDelete:function(e){var t=this.layerGroups[e.id];if(t){while(t.children.length>0)t.remove(t.children[0]);rb.remove(t),delete this.layerGroups[e.id],ab()}},onLayerSelect:function(e){this.activeLayerId=e.id},onLayerChange:function(e){var t=this.layerGroups[e.id];t&&(t.visible=e.visible,t.traverse((function(t){if(t.isMesh&&t.userData&&t.userData.stroke){var n=e.opacity/100,o=void 0!==t.userData.stroke.opacity?t.userData.stroke.opacity:1;t.material.opacity=o*n,t.material.transparent=!0,t.material.uniforms&&t.material.uniforms.opacity&&(t.material.uniforms.opacity.value=t.material.opacity)}else if(t.material){var i=e.opacity/100;Array.isArray(t.material)?t.material.forEach((function(e){e.opacity=i,e.transparent=i<1})):(t.material.opacity=i,t.material.transparent=i<1)}})),ab())},onLayerDuplicate:function(e){var t=this.layerGroups[e.originalLayerId];if(t){var n=new r["Group"];n.name="Layer_".concat(e.newLayer.id),n.userData.layerId=e.newLayer.id,t.children.forEach((function(e){var t=e.clone(!0);t.uuid=r["MathUtils"].generateUUID(),t.material&&(t.material=t.material.clone()),n.add(t)})),rb.add(n),this.layerGroups[e.newLayer.id]=n,ab()}},onBloomChange:function(e){this.bloomPass&&(this.bloomPass.enabled=e.enabled,this.bloomPass.strength=e.strength,this.bloomPass.threshold=e.threshold,this.bloomPass.radius=e.radius)},getActiveLayerGroup:function(){return this.layerGroups[this.activeLayerId]}},watch:{"windowStates.properties":function(e){this.propertiesVisible=e}},mounted:function(){this.init(),window.addEventListener("keydown",this.handleKeyDown),this.animate(),this.onLayerAdd({id:1,name:"Layer 1",visible:!0,opacity:100,locked:!1}),Kf=this,this.cameraResetDisabled=!1},beforeUnmount:function(){window.removeEventListener("keydown",this.handleKeyDown)}};n("d8a5");const cb=ze()(sb,[["render",i]]);t["default"]=cb},"3eee":function(e,t,n){e.exports=n.p+"img/Canvas-Cube.b03590d5.svg"},"3f25":function(e,t,n){},4:function(e,t){},"40cd":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAYAAACI7Fo9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAApESURBVHgB7d3pcdRKGIVh+db9D46AJQFwBGACwDgBtgAAkwCQAEsCLAlgCIA1ALMEABQBsCTguTq6FjWWv5ZaY48Z93mfKhV4bK3u02q1WvLSpFYBKNnknwpA8Qg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMG/q0KsLGxUb148aIa6+TJk9WZM2eqlZWV6ty5c83XQImKCPqvX7+qb9++VWNpnrdv3/75+urVq9WdO3cIPIpD033K06dPq9XV1erjx48VUBKC3qGzvMI+SwsBWFQEPaBLgWvXrlWL5tGjR9WpU6d2TaqUxuou4/Tp0zP1ceDoKOIaPeXr16/h9baCrOa5muovX75svu7Stbum8+fPV4ti1r6Iru4ylpaWqt+/f1col+UZ/fjx402AFfQPHz4kO98+ffpUASWwb7or5Ldu3Qq/x3U6SsE1em1tbS38PGrSA0dR0dfo+7Xf++nTLQKne/OqINtKUpdJmg5znWOOtcvviKBX1a5BM9M0Wm4MFbRnz541Pdjq7Ou2CM6ePdtMV65cyerk6/b8R/f3U3cIFK4HDx5U7969a/oi+kwmk+ZnouOQu62aV/utzs3uJY+2RfutAUljRiD+/Pmzun379q7P1HH4+PHj5v9az8OHD5tj3j3W2matT9sfbavuYOjf6fnavhsNmtL2FmVSgPoXOtGudKe6131wXv1MXfD2zKvPctUFcnL37t1JXVDC7YgmLf/Nmze9y81dVmr58uTJk5mXUYdqUlcAvduofajDMWq5dZ9Ic8yGfPnyJdwm2drayjre6+vrf9a1vb3drDtnG/X7LMi2bdD1vVQ49VlOJdEuJ6oocqe+AjXrMg8r6Nr2WZdd378fPMapoOvzMZVq3eIZFfICw1520FXYo6mvkOj79S23rPXuN+RDBWqRg76fkOeGPQp6u29j15UqI0P7n1vhL7iygz5mUvjra7OsJqXo54YKnL6vZq2moTNQfa25Zx372Z95Br2+9h88lvU1brPf+nco7Kljngp6d13tMR5TAUzP1/e72djYmBSAoLeTCqTClluD9zUDb968GRZehS5VGFXYhiqZ6Cw6pi+hFa1/6Fq81ddsVmijfgfNU3eKJY9XqkXTF3Rtgyqcrvv37w8GvDufmvWq5FP7VACCPqbgtVQZpOZVmPsozKmz3NB6/3bQFYhUYFdWVgYrqrq3PJx3eXk5nDcVdLU0Uh2Z2sa1tbXkfKn91HxRp2IhzXeCnpoUxlTBTTWHdVbIoeWmOgH7LELQoxZJTsda3z4oTNGlSyro6knvs7m5Gc63urraO19UEWnbcvtsFth20SPj9FBLvZPhpHu09VmhuQ8b3dfVPet79+6Fy9V92y4toy7EVQ7dr42G3bYP2xw23ZvOofvO0QMxY17WcePGjT0DaPT70P3+HFrf0PgGvTUomi81ArKVGi9QwghJ2yGw7eCI+nq6qRAuXbq052dUCUSDSKIx8GOfcosGcsgiP0iTGvs/ZmCRjnt0rMdUcFGQ5zlfCRjrvqNujoefa6RXV1Tgx46k0hkwGhq6yA/SfP/+fc9n2ocxQ0d1Zo0CxwNE80XQd7TDNLtSw2Oj+WdZ51E3yz4cO3aswuEi6FNyz7DRz81ybZ277EURBVT7MOYaVtfjnz9/3vN5CZXeIiPoU3ILbKrzbozokkAW+Toy1UQfu+9RK6m4h0gWDEHfoQ65qMBGhTvqeFPhVS9+LnX0RRa5wEedbjpDp+5ORHScouNM0OeLoFf/Pw554cKF8HtRAUzdprl+/XpTYfRpgxGd1VSBjG3CHsStH21TTmdYe6eiS7fG9NjnEB0bHaMuddBdvny5wvwUHfTUPfR2UsFT6PQW1FRBj0Ktwh4VeC1DFUZ7/z7aFj1fnbrfrvvRfaJKQEEf05KQqJWS0+nY3jPv0n5pXICOZbuf3e9rG3VsUrcmOaPPV9EvnkidpSXnDKZXKUf3fEUFXmeybqHWclVxaD41ddsOLN0fj16Q0NJLEobuxad6q3WW1MsY2rBoG96/f9+MEYhEFYaCrqBevHixWY6WoSb28vLyru3SPunrqGJQBaYXWKhybPsa9HZZ9UekKpLpF0lgjiYFmMcQ2JxhnUNPcR3kuqRvjH01Ymhs7vFKjQ3/8eNHs8373W8tv298f+p59KEXdhz2fEdA2UNgZ6U/uvj69evBgSBqruosljuENKI/oJCzLtHPHMR75lOj8nLpLP/q1atm22fVXgYMXa7gYBD0HSp4KsAK7tbWVvZoLxVUNT1V6McEXj+7vr4+al3t+vZTsYgqi1n+wsu0toJSpTF2v3WcNzc3CfkhKiLoKjxjJxU2FVaFTeFWoa2bpDMVPl1fK7DTge8W/un1KmRa3/Pnz0f3siukmi9nPX20DP256b5laOrbPlVQuiafDnx3edOfaZt1fOsm8uADJtH80bYuynyLrnnTXoUD1XZkTT+gosCog0odXQc1CkzrUIfgdAffiRMnmgDmrkfzqqOsu62axv7N+PbpOy1repu0DP7+/F81IehA+SZcowMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwYIOmCAoAMGCDpggKADBgg6YICgAwb+radJBaBkk/8A7Y/m0iVyg6EAAAAASUVORK5CYII="},4184:function(e,t,n){"use strict";n("fed3")},"4a1a":function(e,t,n){},"4e42":function(e,t,n){},5:function(e,t){},"521b":function(e,t,n){e.exports=n.p+"img/snapOn.aa8b12b1.svg"},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),i=n("3dfd");Object(o["b"])(i["default"]).mount("#app")},"579f":function(e,t,n){},"57a5":function(e,t,n){"use strict";n("2464")},"57b9":function(e,t,n){"use strict";n("1e98")},"5a36":function(e,t,n){"use strict";n("24de")},"5abc":function(e,t,n){e.exports=n.p+"img/draw.5c69c24e.svg"},"5b02":function(e,t,n){e.exports=n.p+"img/checkbox.8ab59ebe.svg"},"5bb9":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD7CAYAAABDsImYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAlkSURBVHgB7d33kRtlAMbhNcP/hAYIDQANAIYCgAoIDRAawKYAQgOkAggNEBogFICBCoAGLPRqZhkh794pns96n2dGAz6dpDtbvw3ffru6sVgsbg3AWbuxDH0xAOds8dAAnD2hQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhQwGhs5PPPvtsuHHjxv9uDz3kbXTd+Re6pv7+++/hjz/+GOAYHh640A8//DC8+eabOz3mySefHB599NHhiSeeGF588cXh2WefXX1tGwn8tddeW71u5Hneeeed4f333x9gbwsu9P333y/y13TobRn86rku8/rrr08+/vPPP19cB59++uk9P9ty833BtXbXpvsVyRr65s2bw7vvvjv7PVmbf/HFF5P3ffPNNwPsS+hX7OOPP14FPyWhz7noPriM0O+DrN0/+eSTe76e/fjs00954403hjbLTc7VFtBTTz31v9tbb701sBuh72m5z7x6I07dfv755+Hrr78elvvbs4+/devW5Fo6h682B+7efvvtC5/rnI1HHzZv7Mao+wlklD23V199dbWGnhq1zxs4a/Z8z7pE/vvvv/836p4/bztiD3Os0U8sm9xza+Mff/xx9nFZQOQmco5B6Fdgbr/bABtXxab7Fbifa+UsTMYFylX/HOO+dCb95Mb9I/Qr8Ouvv05+ferNn835DPRtyiDdtsZR/fx3c6shYweZaffCCy/8F35eb3M34pVXXrln/GAbv/zyy+q1c9x//bXzu+b5MsNvboHz119/De+9996w+btsymDn1LhHfrcMXDJhwYXmZsbtMlNt+caefI7lMfV7vncZ9OT3bmMZwGoG3rDFTL1leKvXv3v37mI5jnDP/cujApOvcdHMuI8++mir15577jt37hw0+/DmzZsLJt21Rj+hrNFyHHjucFDWmseSGXW7HGsff7ZjyRbHts+XQ4th/v7VEfqeskm5XFJO3vfnn3+u7s9m7NyA2zFH1LOZvM+Emvz82YzPJu8h8jwffPDBTo+5ffv2avdhbqCS4xL6nrJfO7Uvva1d9rkvkq2Fy9ak68fis+DJAmjd5p/3/TmmXm9uYTcuHIR+NRxeuw+mZr/tK5vBc7sGWctn4CoTcJZjDavb+OdTzLTL9NS8xvrr/fTTT7ODepsLmDx+sTbDcDl+MLmlknMFFhMzEr/77ruBaUK/Qok7b/5jzVu/6Gy3LExym9osz8+RrZHl4NlwLIk0oW2uofP15QDe5BEGF9e4OkI/sUSVNVrmvmdtesxN1blTVzPItc3CJPvnuR0ql5O66LDZY489Nvs6Qr8a9tH3lHjX15bZDJ0KL993zDXnurnj87tsMSTQnDp7qGeeeeag+zktoe8pAa/v544nqWwOPCWiHEY7xaDT1CDarqP5jzzyyGqBdeiA3GUj90K/v2y6H0n2QeeOC+dQ0ilMjWbvM8h36OE1rj+hH1H2Q6dCm7vQxKGmQt9nTnmmnnLehH5kc8fH5y40cYipqPcZ3Prnn38GzpvQj2w8j3xTIj/2JvzUJvfUOMFFsmCYOnGE8yL0E5jbV8/AXI6jH8tU6Il8292ETDIZ551z3oR+Almjz80G2zwN8xBzs9sS72XTcxN5Jtt8+eWXw4PGsffdCf1E5o6d5zDWMY5bR/bR52LP+drZVch01M2pouN537t+As11kdANIO5G6CeS0fe5zeIEeKw3al5jbqQ99z399NPDSy+9tLpEcm75/8cff/xoC5tTyoy7qaMYWVjl98huUP4ex7n1c9OBEfpJ5Wonc3O8j7UJnxAuO687g23j2XYP2sDb888/P/n1bBmNC61xYSb0eUI/ofEDEqckumMNzOU1svbOGnAX+f4sjK7zlWYz4Oh6c4cT+oklpJzUMeWYA3NZq+fssZwttk3wY+Snmod/LPm7y++260KM/xP6FvIm27xtK2ujDz/8cPI5clLK1KGwfV8vo/137txZnRaac7annifhZBAuC4Ux8s1R7Hzf3Fp06jm3/fn2fVy2WPI7jQux9cft82/SaHVVv4GzNJ7vvX65583N9AxmZT93XaL56quv9roK7KlljCELyPVJQfkc+vHTcZi0EHq5jBNkIGtdQs+VYYRzNhY23c/EPofrsoyfmliTzXaRnxehn4lcIDLH53fZQMvx56mZcS7YeH5ceOIMZPLLeAw5a+gMtGVffG6AKguDRP7yyy/fc18ecx33zTmMffQHXILNhJFNWStnemyu7DJ+9tk4OPftt9/OnviS5/rtt98GzorBuAdZwn3uueeOdpJH1uY5PHedJ9CwF4NxD7KEfqzjx3meY15vnutF6A+wRJn98Vz1dd/gx0k0uRz1KT7UgevBpvuZyESSDMiNg3KX/bOOs98yDXbu5BvOhn30czN+tlo+7zwf9ri5/56tgFziOYN1+ZBDgVcQOhQwGAcNhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FhA4FHl7ebg/AOVv8C4tG5Xa1UzGTAAAAAElFTkSuQmCC"},"5e5d":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAYAAACI7Fo9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAjHSURBVHgB7dz5cdNaH8dhhbn/AxVA0gBkKIClAZYGgAogNAA0wNIASwMsDbA0wNIAUAFLA/Grn+c142skx/JCuHyfZ0bDJcRWnJuPjqJz5K1RqwH+ZqMjDfDXEzoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDobd/fu3WZra+tf287OTsPvI3QI8E/D0ra3t5uhjh07Nt7OnTvXnD17dvwnbJrQV/Dly5dmWW/evBn/efLkyebOnTvN1atXG9gUp+6HrA4W165da/b29hrYFKH/IR48eCB2Nkbof5CKfXJKD+sk9DWr0/DRaNS5vX//vnn8+PHcC3A1FQXrJvTf6PTp0+MDwevXr5vbt293fs6HDx8aWDehH5K60t41sn///n2lq/nQReiHqEZ4+B3Mo/+Bam59GdNnApOFOZsw2c8m98F6Cf0QvXjx4pePDVkpV1fo6znevn07jq9O+6fVAaOe7+LFi82lS5eaZU3vZ/YawmSVXz3/Ohf9fPv2rbl161bnv9Xr6rvGQY8RS6tv3+zWXmxb6LHt7+idj3/y5MmBj20v5o3auDof37e1cYw+f/48GuLTp0+D9lP76Pr6u17r9vZ2736/fv06an+t6dzH8ePHB78ORvtCX8HQ0NtRahxpO/J1PvbGjRsH7rPvALHu2NtpwFE7Wi+1n729vQO/5r7Q9/f3R+3ZQW/k7RTliMGEvoquH8aKo4Lq2ubFUfEfpCKdF99k3/P2UyP0QVY5mEwinj6gLBp6RV4Hyq7n3NraEvnyhL6KVWKYDq9G+UXVD/t07PX4Gn3rbGFaPWdf9PP2V6fr877e2nedVtd+u55/NvKyaOh9B5iKvF4jSxP6KlaNvKKpEez58+eD9luxV2SLHCC6fk24efNm5+fWiNp3cKivtb0A9ssB5dmzZz8f0xV5WSR0kW+U0FexjhF9slUsmzg1rTBn91UjcpdHjx4tdCo+q84C6vfqvs85KPR5vyrUv7Eyoa9inaFPtkWuug81O0rX32fVaN51hb1G1FWvcs8L/f79+yLfvH3z6GtWa9nrxpU+Nd9dc9E1L/306dNf/r09rR6/88zQRTOT553Mpf/48ePnf8/Or/ctse26c65ez7ILeOZpf/ia9qDWe2tuLRE2V75GI5bWdIxCi86jl9kLa5NtkSvj9dga8YbOp0+2We/evesczYdeP+jSNaLPmz0wkq/dvrXuh6jWutcIPqtG1tlReKJG48uXLze7u7vjUW9d96/37W8To/m8/bVz5d5WawOEfsj6bmx5+fLlLx+ryM+fP9+5dHZTNrWWvQ4gXQe5Wvp64cIFd/Ctmd/RD9nRo0c7P971g16R9wUwWddef544ceLnxz9+/Dh+55qD9AVd+9vEqF7v7X7v3r3xGcns+vn24l9z5cqV5tWrV26aWROh/0fUhauuyOuMoL1y3XszTIW0SOhdMbe/241vZNnUW1JX7O08fHPmzJnxSD6t3o2nLtTNu7DJ4py6H7IKuMupU6f+9feu0/WKs96tZh0h1sjZFfvDhw97f59eh3pv/Iq9S31vvLXWegj9kIz+P73UNcVWZqOr6bJZFfhBp7Y1Ii+iRteaSptVI23FNhpPMvSr0+1l1evom0qrffd9jxhgxNKanum1WnzSt9UtmO3vnnOnxboWtHTdtnnQNFytWOtb0tqlvra+aa96XfV89Rqm1d/r9dTj+qbFFlkCe9BdazX9x9KsjFtF1w/lvLvXFr3ts2t1XN9dXRXR5CBSJv9dUfbd0z3v+D5vpVq9hvo6aqlsbfW50wesmndf5X70OtDUx7v2XR+v18RShL6KRaIduvWNinUDy7wA6172emz9ucgimj59S2EX3bpiH3I/eo3cfQfE3d3d8cGAwYS+inUGXoEctCKsnV4b/Lw1Anedvs9TMVVUy76Winj6Lreh7zBTd6vNez0MJvRVrCPu2irgRW45rZtL+k5tu7Z63gpuaOgTdVtqfX1DXk8dIGbvwhsaep1V1K20ffuxRHYwoa9iEuqQrX7AK4br16+P2vntX+7vXkT9oNfzTJ5z9sBRF6+mY5j+3Mm2qDq41D3t8/Y3OVi1V8d7v97Z/e/s7Mzdb8Ve36eu7+GRI0d690Wn/fH/8Yb/pFoMUyvfJvPcNdVW8++bWuDStb+aBqy77axg+6ONhA5/v5EFMxBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BDgn3YbNcDfbPQ/3I70uWlOZmwAAAAASUVORK5CYII="},"5f48":function(e,t,n){"use strict";n("c32a")},6:function(e,t){},"63dc":function(e,t,n){e.exports=n.p+"img/redo.13ba164e.svg"},"644f":function(e,t,n){},"67db":function(e,t,n){"use strict";n("a5d9")},"68e1":function(e,t,n){"use strict";n("8f23")},7:function(e,t){},7160:function(e,t,n){},"71b2":function(e,t,n){"use strict";n("913d")},7424:function(e,t,n){},"74a6":function(e,t,n){"use strict";n("004b")},"786f":function(e,t,n){},"7b28":function(e,t,n){"use strict";n("32c9")},"7b8b":function(e,t,n){"use strict";n("7424")},"7f87":function(e,t,n){e.exports=n.p+"img/checkbox-checked.c2c485d4.svg"},8:function(e,t){},8264:function(e,t,n){"use strict";n("84c7")},8399:function(e,t,n){"use strict";n("9f00")},"84c7":function(e,t,n){},"86f3":function(e,t,n){"use strict";n("7160")},"8ad9":function(e,t,n){"use strict";n("786f")},"8d0c":function(e,t,n){e.exports=n.p+"img/unlockControls.2e514317.svg"},"8f23":function(e,t,n){},9:function(e,t){},"913d":function(e,t,n){},9371:function(e,t,n){"use strict";n("fbc5")},9467:function(e,t,n){},"955b":function(e,t,n){},9757:function(e,t,n){"use strict";n("b673")},"97d3":function(e,t,n){"use strict";n("a7f7")},"9e9e":function(e,t,n){},"9f00":function(e,t,n){},"9f38":function(e,t,n){},a26a:function(e,t,n){e.exports=n.p+"img/Canvas-Custom.b03590d5.svg"},a5d9:function(e,t,n){},a7f7:function(e,t,n){},b673:function(e,t,n){},b9e4:function(e,t,n){e.exports=n.p+"img/scale.618c4c29.svg"},bd5b:function(e,t,n){e.exports=n.p+"img/share.69997eee.svg"},be60:function(e,t,n){"use strict";n("9f38")},bff5:function(e,t,n){"use strict";n("f2be")},c32a:function(e,t,n){},c680:function(e,t,n){e.exports=n.p+"img/reset.4080ce3d.svg"},c943:function(e,t,n){"use strict";n("01e6")},cd5a:function(e,t,n){"use strict";n("1550")},ce63:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD7CAYAAABDsImYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAbCSURBVHgB7d37UdRqHMfhcOYUoBWoFagVeGlAxwa8FOCtAPU0IFQg2oCXBlArUBsQbUC0AXL2lxkdWLLLIiyQfJ9nJn8I7LI489nkffMmu9K27bMGGLWVSehtA4xZ+08DjJ7QIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIcC/DfyFnz9/Nm/fvm2+f/++6+vnzp1rrl692pw/f77h9BA6B7K5udk8fvy4i7zPyspK8/r1a6GfMkJnYRX59evXm2/fvs39uTNnzjScLkJfops3bzZfvnzZ8/UKZmjatl0o8iL000foS/Tr16+FwhiCDx8+LPy3CP30MevOvmpv/urVq97v1cTb+/fvu5/Z2tpqNjY2jM9PIXt0FjI9u14uXLjQRf5b7ckrfE4fobOQz58/7/p3za4/ePBgocfWm8G9e/f2PN7e//gInYXUefNpBxmLT4/vK3SOjzE6++qLnGEROvsS+vAJHQIYo49Y7Yl/741NemUT+ohU1HW+u9ah1yz59CH3pUuXutV6t2/fnht+Pf7du3e7nndanTd/+fJlt5Bmp3rujx8/7pp8m/X4R48e9U7ora6uWnRz1FqWZnJOua3/4untqG1tbbXPnj1rJ3H0/r6+rX5+lvreos+zc5vMpLeT+Gf+3Ys+x+bmZsuR2rZHH7jac167du3AS20nMXeLYF68eNEwfibjBmy/yOvwd94h8Pr6enfJKeMn9AHri7zCfvr0abfufOdWUfeNy2s8PD3OZoRalmaZY/S+cfQk5Lnj2xrL972m+to8X79+nTkeX8TGxoax+MnatkcfoJrFrhnvaTXunjebXnv7N2/e7DmcP8glqAyT0AeoTn9Nh1mB16mt/VTkdYpt2s7TaYyP0Aeo735tffHO0rfX77sTDuPh9NoA9V0bvra21m1/y4TcuNmjD5CLTDgoodPx5jFuDt1HbtEbPNSNLBkvoQ/QxYsX98y637lzp1soA32EPkCXL1/eczqswncpKrMYow/QlStX9nytZs133pF1nvoAiVpw07Ztc5LMCxwfe/QT8Def1HL27Nk/K9rqlsq1zn067LrTat1ZtW7DPMunT5+aW7dudUcAde78yZMn3XMvU9+FNfUmU0cldY08x6BlaQ5zXXazz/XjtU687/rzWu++vr7e/vjxo93e3v6z1b/71sdP3hT2XXN+2LXufY+vrV5/PUe9ttrq59bW1qyBP3rbQl+iZYZeVldX5z5msrfsXkPF38y50cPdu3fn/h2HDb3eaBa9KYaLXZbCRS1D9vDhw+5Cllmn0Op2UvMuWKnH1TDg+fPnzTLV76nXyskR+sDVKbX6PPIalx/kQxF+f9JKjemP4/5s9+/fnzt3wHIJfYkqpqPa5qkLWiaH191toerUW99jfn+tJt4mh+pd4HXTicP+LYuq31u/88aNG/u+Po7eSh3AN4xKHarXYfvOK9Jqr10LbWqW+6TvsDrr9dU6gDp16A6wR64VOoxf69AdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAvw72f5rgDFr/wfUvvTr7Qp/nwAAAABJRU5ErkJggg=="},cf89:function(e,t,n){e.exports=n.p+"img/lockControls.990f22f9.svg"},d158:function(e,t,n){e.exports=n.p+"img/snapOff.219ff8f1.svg"},d7f2:function(e,t,n){},d8a5:function(e,t,n){"use strict";n("1b8c")},dac2:function(e,t,n){"use strict";n("4e42")},de29:function(e,t,n){"use strict";n("579f")},e039:function(e,t,n){e.exports=n.p+"img/Cursor.b610471e.svg"},e111:function(e,t,n){"use strict";n("ec71")},e7cc:function(e,t,n){e.exports=n.p+"img/Canvas-Cylinder.4ab10120.svg"},e856:function(e,t,n){},ec71:function(e,t,n){},ee3b:function(e,t,n){e.exports=n.p+"img/showCanvas.a743c18d.svg"},efc2:function(e,t,n){},f03d:function(e,t,n){e.exports=n.p+"img/erase.c0bec69e.svg"},f1b5:function(e,t,n){e.exports=n.p+"img/View_in_AR.c0870bd8.svg"},f247:function(e,t,n){"use strict";n("32d3")},f2be:function(e,t,n){},f87c:function(e,t,n){"use strict";n("9467")},fac3:function(e,t,n){e.exports=n.p+"img/translate.49804646.svg"},fbc5:function(e,t,n){},feb7:function(e,t,n){"use strict";n("9e9e")},fed3:function(e,t,n){}});
//# sourceMappingURL=app.55d94c7b.js.map