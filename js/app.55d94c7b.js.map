{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/CodeEditor.vue?b401","webpack:///./src/assets/viewport/front.png","webpack:///./src/assets/icons/hideCanvas.svg","webpack:///./src/components/ObjectManager.vue?f8ec","webpack:///./src/components/MenuButtons/ExportUSDZ.vue?616a","webpack:///./src/assets/icons/Canvas-Head.svg","webpack:///./src/assets/viewport/top.png","webpack:///./src/components/TubeToolSelector.vue?2072","webpack:///./src/components/StripToolSelector.vue?bb44","webpack:///./src/components/SnapSettings.vue?34ca","webpack:///./src/assets/icons/Canvas-Plane.svg","webpack:///./src/components/Canvas.vue?3458","webpack:///./src/assets/icons/undo.svg","webpack:///./src/assets/icons/Canvas-Sphere.svg","webpack:///./src/components/Layers.vue?90bb","webpack:///./src/components/StripSettings.vue?b46b","webpack:///./src/components/ModalContent/ExportForBlender.vue?01a3","webpack:///./src/App.vue","webpack:///./src/components/InfiniteGridHelper.js","webpack:///./src/components/Input.vue","webpack:///./src/components/Canvas.vue","webpack:///./src/components/transformControls.js","webpack:///./src/components/DraggableWindow.vue","webpack:///./src/components/DraggableWindow.vue?4329","webpack:///./src/components/Canvas.vue?9ef0","webpack:///./src/components/mirror.js","webpack:///./src/components/UndoRedo.vue","webpack:///./src/components/UndoRedo.vue?48dc","webpack:///./src/components/erase.js","webpack:///./src/components/draw.js","webpack:///./src/components/animate.js","webpack:///./src/components/select.js","webpack:///./src/components/Input.vue?2cde","webpack:///./src/components/ToolSelector.vue","webpack:///./src/components/ToolSelector.vue?91e2","webpack:///./src/components/TubeToolSelector.vue","webpack:///./src/components/TubeToolSelector.vue?3b29","webpack:///./src/components/StripToolSelector.vue","webpack:///./src/components/StripToolSelector.vue?680e","webpack:///./src/components/ViewportCube.vue","webpack:///./src/components/ViewportCube.vue?d82a","webpack:///./src/components/LineSettings.vue","webpack:///./src/components/LineSliders.vue","webpack:///./src/components/LineSliders.vue?d738","webpack:///./src/components/LineSettings.vue?c1ce","webpack:///./src/components/TubeSettings.vue","webpack:///./src/components/TubeSettings.vue?1f00","webpack:///./src/components/StripSettings.vue","webpack:///./src/components/StripSettings.vue?c1cf","webpack:///./src/components/Share.vue","webpack:///./src/components/MenuButtons/ToggleWindow.vue","webpack:///./src/components/MenuButtons/ToggleWindow.vue?4f5b","webpack:///./src/components/MenuButtons/Save.vue","webpack:///./src/components/MenuButtons/Save.vue?0f12","webpack:///./src/components/MenuButtons/Load.vue","webpack:///./src/components/MenuButtons/Load.vue?94e6","webpack:///./src/components/MenuButtons/ExportForBlender.vue","webpack:///./src/components/MenuButtons/ExportForBlender.vue?6ab3","webpack:///./src/components/MenuButtons/ExportForProcreate.vue","webpack:///./src/components/MenuButtons/ExportForProcreate.vue?7c76","webpack:///./src/components/MenuButtons/StartPreview.vue","webpack:///./src/components/MenuButtons/StartPreview.vue?2b3f","webpack:///./src/components/MenuButtons/ExportUSDZ.vue","webpack:///./src/components/TubeGeometryWithVariableWidth.js","webpack:///./src/components/convertMeshlineToGeometry.js","webpack:///./src/components/MenuButtons/ExportUSDZ.vue?2105","webpack:///./src/components/MenuButtons/ExportGLB.vue","webpack:///./src/components/MenuButtons/ExportGLB.vue?5942","webpack:///./src/components/MenuButtons/ExportHTML.vue","webpack:///./src/components/MenuButtons/ExportHTML.vue?9587","webpack:///./src/components/Share.vue?9ddb","webpack:///./src/components/ShapeSelector.vue","webpack:///./src/components/ShapeSelector.vue?c024","webpack:///./src/components/Modal.vue","webpack:///./src/components/ModalContent/Welcome.vue","webpack:///./src/components/ModalContent/Welcome.vue?077f","webpack:///./src/components/ModalContent/Feedback.vue","webpack:///./src/components/ModalContent/Feedback.vue?7c04","webpack:///./src/components/ModalContent/ExportForBlender.vue","webpack:///./src/components/ModalContent/ExportForBlender.vue?0856","webpack:///./src/components/ModalContent/ExportForProcreate.vue","webpack:///./src/components/ModalContent/ExportForProcreate.vue?3a30","webpack:///./src/components/ModalContent/Tutorial.vue","webpack:///./src/components/ModalContent/Tutorial.vue?6d16","webpack:///./src/components/ModalContent/Survey.vue","webpack:///./src/components/ModalContent/Survey.vue?bb90","webpack:///./src/components/ModalContent/BrushLibrary.vue","webpack:///./src/components/ModalContent/BrushLibrary.vue?31a0","webpack:///./src/components/ModalContent/ExportHTMLContent.vue","webpack:///./src/components/ModalContent/ExportHTMLContent.vue?6ee0","webpack:///./src/components/Modal.vue?9db4","webpack:///./src/components/VideoExportPreview.vue","webpack:///./src/components/VideoExportPreview.vue?4d41","webpack:///./src/components/SceneSettings.vue","webpack:///./src/components/SceneSettings.vue?2763","webpack:///./src/components/ColorPalette.vue","webpack:///./src/components/ColorPalette.vue?b8e2","webpack:///./src/components/SymmetrySettings.vue","webpack:///./src/components/SymmetrySettings.vue?1141","webpack:///./src/components/Layers.vue","webpack:///./src/components/Layers.vue?639e","webpack:///./src/components/ObjectManager.vue","webpack:///./src/components/ObjectManager.vue?dfbb","webpack:///./src/components/TransformToolbar.vue","webpack:///./src/components/TransformToolbar.vue?ff3f","webpack:///./src/components/TwoDShapes.vue","webpack:///./src/components/TwoDShapes.vue?3024","webpack:///./src/components/SnapSettings.vue","webpack:///./src/components/SnapSettings.vue?ea0a","webpack:///./src/components/DrawingModes.vue","webpack:///./src/components/DrawingModes.vue?7f13","webpack:///./src/components/CodeEditor.vue","webpack:///./src/components/CodeEditor.vue?6f02","webpack:///./src/App.vue?dfb6","webpack:///./src/assets/icons/Canvas-Cube.svg","webpack:///./src/assets/viewport/bottom.png","webpack:///./src/components/Input.vue?236d","webpack:///./src/assets/icons/snapOn.svg","webpack:///./src/main.js","webpack:///./src/components/Modal.vue?f4f6","webpack:///./src/components/ShapeSelector.vue?4805","webpack:///./src/components/MenuButtons/ExportHTML.vue?ace0","webpack:///./src/assets/icons/draw.svg","webpack:///./src/assets/icons/checkbox.svg","webpack:///./src/assets/viewport/right.png","webpack:///./src/assets/viewport/back.png","webpack:///./src/components/UndoRedo.vue?720c","webpack:///./src/assets/icons/redo.svg","webpack:///./src/components/ModalContent/Feedback.vue?f18e","webpack:///./src/components/TransformToolbar.vue?afed","webpack:///./src/components/LineSettings.vue?d7d5","webpack:///./src/components/ModalContent/Survey.vue?ca7d","webpack:///./src/components/ModalContent/Welcome.vue?ba6f","webpack:///./src/components/DraggableWindow.vue?dc5c","webpack:///./src/assets/icons/checkbox-checked.svg","webpack:///./src/components/ModalContent/Tutorial.vue?c1be","webpack:///./src/components/LineSliders.vue?4ed3","webpack:///./src/components/MenuButtons/ToggleWindow.vue?adf7","webpack:///./src/components/ModalContent/BrushLibrary.vue?ef02","webpack:///./src/assets/icons/unlockControls.svg","webpack:///./src/components/SceneSettings.vue?6e33","webpack:///./src/components/Share.vue?f652","webpack:///./src/components/ColorPalette.vue?21e9","webpack:///./src/assets/icons/Canvas-Custom.svg","webpack:///./src/assets/icons/scale.svg","webpack:///./src/assets/icons/share.svg","webpack:///./src/components/ModalContent/ExportForProcreate.vue?ffac","webpack:///./src/components/ModalContent/ExportHTMLContent.vue?0884","webpack:///./src/assets/icons/reset.svg","webpack:///./src/components/TubeSettings.vue?06f6","webpack:///./src/components/MenuButtons/ExportGLB.vue?30fd","webpack:///./src/assets/viewport/left.png","webpack:///./src/assets/icons/lockControls.svg","webpack:///./src/assets/icons/snapOff.svg","webpack:///./src/App.vue?4f88","webpack:///./src/components/VideoExportPreview.vue?ff48","webpack:///./src/components/ToolSelector.vue?0ebc","webpack:///./src/assets/icons/Cursor.svg","webpack:///./src/components/SymmetrySettings.vue?aebe","webpack:///./src/assets/icons/Canvas-Cylinder.svg","webpack:///./src/assets/icons/showCanvas.svg","webpack:///./src/assets/icons/erase.svg","webpack:///./src/assets/icons/View_in_AR.svg","webpack:///./src/components/DrawingModes.vue?5a12","webpack:///./src/components/TwoDShapes.vue?781f","webpack:///./src/assets/icons/translate.svg","webpack:///./src/components/ViewportCube.vue?007c"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","show","previewing","setPreview","modalProp","setModal","applyPreset","quaternion","cameraResetDisabled","reopenTrigger","windowTriggers","view","is-open","windowStates","onWindowClose","uiVisible","ref","setSelectedTool","toggleProperties","toggleScene","selectedTool","tool","tools","initialX","windowPositions","x","undefined","initialY","y","toggleWindow","toggleAR","isArActive","arActive","tubeTools","isTube","stripTools","isStrip","visible","twoDShapes","onAddCanvasShape","setStroke","setFill","forceVisible","propertiesVisible","properties","tubeProperties","stripProperties","history","setMouseCoordinates","mirror","stroke","fill","radial","sectors","radial-axis","radialAxis","toolEnabled","localSymmetry","snap-config","snapConfig","drawing-mode","drawingMode","setSelectedCanvasShape","setToolEnabled","selectedShape","canvasShape","mouse","canvas","loadCustomModelInCanvas","setCanvasMaterial","shapes","scene","onBloomChange","colors","applyColor","symmetry","$event","local-symmetry","layers","onLayerAdd","onLayerDelete","onLayerSelect","onLayerChange","onLayerDuplicate","objectManager","top","transformToolbar","left","display","selectionPosition","position","isOpen","snap","onSnapConfigChange","drawingModes","currentMode","onDrawingModeChange","codeEditor","InfiniteGridHelper","size1","size2","color","distance","axes","color2","distanceNear","THREE","planeAxes","substr","geometry","material","side","uniforms","uSize1","uSize2","uColor","uColor2","uDistance","uDistanceNear","transparent","vertexShader","fragmentShader","extensions","derivatives","grid","frustumCulled","handleInput","id","displayTouches","touches","item","clientX","class","style","width","height","viewBox","xmlns","src","alt","title","$emit","toggleTransformMode","disabled","transformationEnabled","toggleControls","toggleVisibility","toggleSnap","resetTransformation","transformationResetDisabled","_raycaster","Raycaster","_tempVector","Vector3","_tempVector2","_tempQuaternion","Quaternion","_unit","X","Y","Z","_changeEvent","type","_mouseDownEvent","_mouseUpEvent","_objectChangeEvent","TransformControls","camera","domElement","console","warn","document","touchAction","_gizmo","TransformControlsGizmo","add","_plane","TransformControlsPlane","scope","propName","defaultValue","propValue","set","dispatchEvent","worldPosition","worldPositionStart","worldQuaternion","worldQuaternionStart","cameraPosition","cameraQuaternion","pointStart","pointEnd","rotationAxis","rotationAngle","eye","_offset","_startNorm","_endNorm","_cameraScale","_parentPosition","_parentQuaternion","_parentQuaternionInv","_parentScale","_worldScaleStart","_worldQuaternionInv","_worldScale","_positionStart","_quaternionStart","_scaleStart","_getPointer","getPointer","_onPointerDown","onPointerDown","_onPointerHover","onPointerHover","_onPointerMove","onPointerMove","_onPointerUp","onPointerUp","addEventListener","ownerDocument","this","updateMatrixWorld","parent","error","matrixWorld","decompose","copy","invert","sub","normalize","pointer","dragging","setFromCamera","intersect","intersectObjectWithRay","picker","axis","button","planeIntersect","space","rotationSnap","rotation","Math","round","z","scale","point","applyQuaternion","indexOf","divide","translationSnap","search","setFromMatrixPosition","dot","multiply","scaleSnap","ROTATION_SPEED","distanceTo","angleTo","cross","setFromAxisAngle","removeEventListener","traverse","child","dispose","size","Object3D","event","pointerLockElement","rect","getBoundingClientRect","clientY","enabled","pointerType","pointerHover","pointerDown","pointerMove","pointerUp","raycaster","includeInvisible","allIntersections","intersectObject","isTransformControls","_tempEuler","Euler","_alignVector","_zeroVector","_lookAtMatrix","Matrix4","_tempQuaternion2","_identityQuaternion","_dirVector","_tempMatrix","_unitX","_unitY","_unitZ","_v1","_v2","_v3","gizmoMaterial","MeshBasicMaterial","depthTest","depthWrite","fog","toneMapped","gizmoLineMaterial","LineBasicMaterial","matInvisible","clone","opacity","matHelper","setHex","matRed","DoubleSide","matRedArrow","matGreen","matGreenArrow","matBlue","matBlueArrow","matRedTransparent","matGreenTransparent","matBlueTransparent","matWhiteTransparent","matYellowTransparent","matYellow","matGray","arrowGeometry","CylinderGeometry","translate","arrowPickerGeometry","scaleHandleGeometry","BoxGeometry","lineGeometry","BufferGeometry","setAttribute","Float32BufferAttribute","lineGeometry2","CircleGeometry","radius","RingGeometry","PI","rotateY","rotateX","TranslateHelperGeometry","gizmoTranslate","Mesh","pickerTranslate","helperTranslate","START","OctahedronGeometry","END","DELTA","Line","gizmoRotate","helperRotate","AXIS","pickerRotate","TorusGeometry","gizmoScale","XY","YZ","XZ","XYZ","pickerScale","helperScale","gizmoCombined","XT","XR","YT","YR","ZT","ZR","pickerCombined","helperCombined","setupGizmo","gizmoMap","gizmo","tag","updateMatrix","tempGeometry","applyMatrix4","matrix","helper","force","handles","concat","children","handle","renderOrder","factor","isOrthographicCamera","bottom","zoom","min","tan","fov","multiplyScalar","AXIS_FLIP_TRESHOLD","PLANE_HIDE_TRESHOLD","abs","setFromRotationMatrix","lookAt","atan2","multiplyQuaternions","showX","showY","showZ","_color","_opacity","setFromEuler","isTransformControlsGizmo","PlaneGeometry","wireframe","isTransformControlsPlane","minimized","currentY","currentX","startDrag","startDragTouch","toggleMinimize","close","$attrs","userClosed","inheritAttrs","props","String","default","Number","Boolean","startOpen","isDragging","dragOffsetX","dragOffsetY","methods","target","closest","onDrag","stopDrag","touch","onDragTouch","stopDragTouch","preventDefault","watch","val","__exports__","currentShape","canvasMirror","headGeometry","components","DraggableWindow","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","emissive","emissiveIntensity","startPosition","startQuaternion","startScale","emits","getPosition","$refs","win","loadCustomModel","payload","url","loader","GLTFLoader","load","gltf","model","userData","customId","box","setFromObject","center","getCenter","selectObject","renderer","render","addPrimitive","geo","mat","mesh","charAt","toUpperCase","addShape","Date","now","detach","attach","setUp","vm","raycastCanvas","getWorldPosition","getWorldQuaternion","getWorldScale","w","matrixWorldNeedsUpdate","intersects","intersectObjects","hitObject","rootShape","curr","includes","setUpMirror","makeScale","removeMirror","remove","setMaterial","newMat","texture","matcap","isMesh","isGroup","found","find","oldPos","oldQuat","oldScale","idx","needsUpdate","updateMirrorOf","obj","activeScene","localCanvas","forEach","mirrors","Array","isArray","mirrorData","mirroredObject","getObjectByProperty","uuid","mInv","sx","sy","sz","mFlip","transform","raycast","MeshLineRaycast","mirrorParent","mirrorAxisFromParent","eraseMirrorOf","innerHeight","start-open","undo","undoDisabled","redo","redoDisabled","undoRedoComponent","undoManager","updateUi","setTool","hasUndo","hasRedo","mounted","erase","e","GPUPickHelper","pickingTexture","pixelBuffer","Uint8Array","pickedObject","pickedObjectSavedColor","x1","y1","x2","y2","coordinatesArray","dx","dy","err","e2","cssPosition","pixelRatio","getPixelRatio","setViewOffset","getContext","drawingBufferWidth","drawingBufferHeight","setRenderTarget","clearViewOffset","readRenderTargetPixels","intersectedObject","idToObject","setSize","calcPointsInBetween","eraser","pscene","background","mask","lw","lineWidth","cloneMaterial","MeshLineMaterial","sizeAttenuation","cx","cy","pickedObjects","pickArea","deleteObject","vertices","points","mirrorOn","map","show_fill","draw","fromVertices","$","ctx","onStart","resetPicking","setupPicking","start","onMove","move","onEnd","end","onCancel","generateBrushTexture","materialType","createElement","fillStyle","fillRect","globalCompositeOperation","gradient","createLinearGradient","addColorStop","imgData","createImageData","random","tempC","putImageData","drawImage","wrapS","wrapT","getActiveLayerGroup","show_stroke","line","MeshLine","Float32Array","baseColor","bloom","intensity","bloomIntensity","alphaTest","blending","repeat","textureScale","resolution","innerWidth","dashArray","dashOffset","dashRatio","brushType","matDefaults","roughness","metalness","tex","matcapUrl","materialConfig","bufferPoints","smoothing","taper","wiggle","animationSpeed","shape","fillGeometry","fillVertices","uvsX","uvsY","uvs","triangles","Uint16Array","Earcut","triangulate","attributes","array","face","setIndex","fillMaterial","fillMesh","drawingScene","split","currentObjects","nextObjects","unproject","snappedPoint","addVertex","layerGroup","clear","verticesNeedsUpdate","boundingSphere","setGeometry","angleStep","createRadialCopies","targetMesh","angle","rotMatrix","makeRotationX","makeRotationZ","makeRotationY","rotateZ","vert","planeVector","cameraVector","reverse","computeBoundingSphere","autoClear","end_internal","v3","v4","nt","sign","normal","is","wiggleVal","wx","wy","wz","start1","stop1","start2","stop2","appendToBuffer","pt","getAveragePoint","Float32Concat","count","uvLowestX","uvHighestX","max","uvLowestY","uvHighestY","u","uv","index","clearDepth","first","second","firstLength","offset","len","totalX","totalY","totalZ","totalW","vectorArray","curve","radiusBase","filter","equals","tubularSegments","newGeo","pos","radialSegments","rings","taperFactor","fadeLen","P","getPointAt","vx","getX","vy","getY","vz","getZ","setXYZ","computeVertexNormals","lastTaper","segments","frames","computeFrenetFrames","stripVertices","stripIndices","binormal","binormals","v1","v2","base","setPoints","minWidth","baseWidth","tailLength","onEnd_internal","cancel","verticesArray","isVector3","from","float32Vertices","fromArray","setUvs","floor","_x","_y","_z","_w","lg","updateStroke","assign","isMeshStandardMaterial","setStyle","isMeshMatcapMaterial","brushTexture","alphaMap","useMap","updateFill","animateLines","delta","animated","updateMesh","loop","animate","requestAnimationFrame","renderScene","startAnimating","stopAnimating","select","dragged","transformMode","vertexSelection","cssStart","cssEnd","z1","z2","z3","z4","bb","boundingBox","project","selectedObjects","boundingBoxPoints","getObjectBoundingBoxPoints","pointInRect","k","selection","selected","undoRedoSelection","undoRedoMatrix","selector","controls","group","params","threshold","tx","ty","log","objectsInRect","Set","deselect","select_internal","previouslySelected","toggleSelectionColor","startingTransform","setTransformToolbarDisplay","update","setSelectionPosition","endPosition","endQuaternion","endScale","transfromToolbarPosition","calculateTransfromToolbarPosition","setTransformToolbarPosition","location","computeBoundingBox","divideScalar","element","selectedObj","bool","deselect_internal","previousMatrix","copies","previousSelectedArray","sourceObjects","original","allNewObjects","generateUUID","mirrorAxis","prevSel","duplicate","transforming","ctrlKey","previousSelection","down","touchLengthHistory","multiTouched","eventCancelled","movingCanvas","isTransformingSelection","updateMouseCoordinates","changedTouches","pageX","pageY","clickStartTime","startCx","startCy","intersection","getIntersection","hit","findSnap","startX","startY","startZ","moveX","moveY","moveZ","snapIndicator","clickDuration","dist","sqrt","pow","toggleTopFrontView","then","undoRedo","getTarget","isTop","rotateTo","plane","ray","intersectPlane","targetV","getWorldDirection","setFromNormalAndCoplanarPoint","fallbackPoint","mousePos","endpoints","midpoints","bestPoint","minDistance","projectedP","projectPoint","p1","p2","mid","projectedMid","gridPos","$nextTick","hash","substring","brushes","brush","selectPreset","icon","settings","strokeWidth","strokeColor","g","b","fillColor","emit","viewPortRenderer","viewPortScene","viewPortCamera","resetCamera","dragStartPosition","lastDragPosition","getElementById","init","antialias","alpha","setPixelRatio","devicePixelRatio","addViewPortCube","right","front","back","materials","cube","rotate","deltaX","deltaY","PI_2","speed","theta","phi","evalFaceIndexAndRepositionCamera","adj","dampingFactor","setLookAt","setTimeout","onTapStart","onTapMove","onTapEnd","faceIndex","zoomTo","setRotationFromQuaternion","active","setStrokeColor","setStrokeActive","setStrokeWidth","step","brushMaterial","setFillColor","setFillActive","fillOpacity","cssProps","setActive","toLowerCase","hue","saturation","brightness","computed","calcRadius","updateColor","h","v","f","q","arguments","LineSliders","emitStroke","emitFill","updateSettings","setColor","setWidth","matcaps","currentMatcap","selectMatcap","image","emitSettings","cap","label","checked","showModal","isSafari","startPreview","required","exportToJson","json","dataStr","encodeURIComponent","JSON","stringify","filename","prompt","el","click","importFromJson","text","file","input","body","appendChild","onchange","onReaderLoad","parse","drawLine","files","reader","FileReader","onload","readAsText","showExportModal","exportForAr","rel","download","sceneUSDZ","TubeBufferGeometry","path","closed","parameters","tangents","normals","vertex","Vector2","indices","generateBufferData","generateSegment","generateUVs","generateIndices","N","B","sin","cos","a","convertMeshlineToGeometry","tubeMaterial","pathBase","tubeGeometry","flatShading","shininess","convertMeshlineFillToGeometry","edges","fillMeshFlipped","fillFlippedGeometry","fillMeshMaterial","arr","lightbox","viewInAr","exporter","USDZExporter","arraybuffer","blob","Blob","URL","createObjectURL","exportToGltf","sceneGLTF","save","saveString","saveArrayBuffer","buffer","link","href","GLTFExporter","ArrayBuffer","output","binary","ToggleWindow","Save","Load","ExportForBlender","ExportForProcreate","StartPreview","ExportUSDZ","ExportGLB","ExportHTML","hide","windowName","navigator","vendor","userAgent","shapeOption","selectShape","customModels","selectCustomModel","fileInput","accept","onFileChange","currentMaterial","selectMaterial","modelId","toString","hideModal","handleSetPreset","exportToGp","applyMatrix","for","mergeLines","checkFills","exportToUSDZ","install","clock","cameraControls","sceneExport","rendererUSDZ","cameraUSDZ","previewUSDZ","updateProjectionMatrix","draggingDampingFactor","mouseButtons","ACTION","ROTATE","wheel","code","TRUCK","middle","DOLLY","ZOOM","one","TOUCH_ROTATE","two","TOUCH_ZOOM_ROTATE","three","TOUCH_DOLLY_TRUCK","maxZoom","minZoom","flipFace","onWindowResize","aspect","clientWidth","clientHeight","canvasBounds","context","lineRenderOrder","animtateSceneUSDZ","getDelta","hasCameraControlsUpdated","geometries","newObj","mergedGeometry","cells","ceil","uvs_length","mergedUvs","keys","prop","unmounted","frameborder","allow","countDown","localStorage","getItem","parseInt","tut02","marginheight","marginwidth","includeAr","autoRotate","exportHtml","status","exportScene","isTransformControl","generateHtml","glbBlob","readAsDataURL","onloadend","base64data","htmlContent","downloadFile","content","removeChild","Welcome","Feedback","Tutorial","Survey","BrushLibrary","ExportHTMLContent","recording","startRecording","currentLength","startAzimuthAngle","polarAngle","easeInOutQuad","easeInOutQuadYoyo","pop","easing","DEG2RAD","encoder","buf","readPixels","RGBA","UNSIGNED_BYTE","halfHeight","bytesPerRow","temp","topOffset","bottomOffset","subarray","copyWithin","addFrameRgba","finalize","uint8Array","FS","readFile","outputFilename","delete","normalizeRotations","initialize","azimuthAngle","anchor","Event","enable","backgroundColor","updateBackground","toggleFog","fogVisible","handleFileChange","toggleHdriActive","hdriActive","toggleHdriBackground","hdriBackgroundVisible","toggleGrid","gridVisible","gridColor","updateGrid","gridSize","gridDivisions","divisionsColor","fadeDistance","fadeDistanceNear","toggleInfiniteGrid","infiniteGrid","toggleBloom","bloomEnabled","bloomStrength","updateBloom","bloomThreshold","bloomRadius","sceneEnvironment","created","gridHelper","infiniteGridHelper","updateFog","isHDR","endsWith","RGBELoader","setDataType","pmremGenerator","compileEquirectangularShader","envMap","fromEquirectangular","updateEnvironment","mapping","environment","strength","beforeUnmount","colorGroups","hex","selectColor","rgb","hexToRgb","exec","isAxisActive","toggleAxis","toggleLocal","toggleRadial","setRadialAxis","updateSectors","current","replace","addLayer","deleteLayer","duplicateLayer","layer","activeLayerId","selectLayer","editingLayerId","stopEditing","startEditing","updateLayerOpacity","locked","nextLayerId","lockLayers","mergeOnExport","newLayer","unshift","findIndex","deletedLayer","newIndex","originalLayerId","layerId","newOpacity","nameInput","focus","toggleLockLayers","lockAll","isSelected","getObjectName","getObjectType","getObjectColor","getObjectOpacity","updateOpacity","deleteSelectedObject","handleImageUpload","saveState","getHistory","state","sIndex","restoreState","deleteState","currentSelection","timer","setInterval","clearInterval","getObjectMaterial","getHexString","parseFloat","updateMatOpacity","setMode","placeholder","duplicateOffset","toFixed","readonly","posTop","posLeft","dragOffset","$el","doDrag","newLeft","newTop","offsetWidth","offsetHeight","parseVal","newMode","getObjectByName","createShape","getCenterPoint","vec","thickness","moveTo","lineTo","closePath","absarc","ellipse","finalCenter","stroke-width","config","updateConfig","toggleOption","option","stroke-linecap","rx","selectMode","selectedExample","loadExample","examples","runCode","clearCode","spellcheck","isError","isSuccess","statusMessage","addToLayer","run","Function","toLocaleTimeString","message","drawingprop","composer","main","preserveDrawingBuffer","Input","LineSettings","TubeSettings","StripSettings","ToolSelector","TubeToolSelector","StripToolSelector","ViewportCube","UndoRedo","Share","Canvas","ShapeSelector","Modal","VideoExportPreview","SceneSettings","ColorPalette","SymmetrySettings","Layers","ObjectManager","TransformToolbar","TwoDShapes","SnapSettings","DrawingModes","CodeEditor","multitouch","toolHistory","canvasTransformEnabled","layerGroups","clipboard","tutorialStep","actions","video","objectFit","zIndex","autoplay","muted","playsInline","hostname","protocol","alert","mediaDevices","getUserMedia","startVideo","constraints","stream","srcObject","isRear","track","getVideoTracks","getSettings","facingMode","catch","getTracks","stop","setClearColor","bgCol","renderTarget","format","encoding","EffectComposer","renderPass","RenderPass","addPass","bloomPass","UnrealBloomPass","NONE","TOUCH_ZOOM_TRUCK","targetSphere","light","refs","setViewport","linesAnimated","previous","setSelectedTool_internal","setSelectedMultitouch","setSelectedObject","closeSelection","tubeSettings","stripSettings","lineSettings","handleKeyDown","newSelection","clipObj","pasteObj","addScalar","isMeshLine","objectsToDelete","realArg","strokeOpacity","originalGroup","newGroup","createApp","App","mount"],"mappings":"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","file":"js/app.55d94c7b.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CodeEditor.vue?vue&type=style&index=0&id=b79ed462&scoped=true&lang=css\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAYAAACI7Fo9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAefSURBVHgB7dzpcdNqG8dh5Z3zHaiApQGgAggFsDXA0gBLASwNsDTA0gEUQIAG2AoIUAHQQPzq9hyfCbbkWCYE4/91zWjOnGBHCuQnPXoka2PUaoB1NvpfA6w9oUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUOAfxp6ffnypdnc3Gz2082bN5sbN240cJCEvoeKfT99//69gYNm6A4BhA4BDN1ZaaPRqDl37tzMKdSlS5eaBw8eNCxG6Eu4cuVKc/Xq1WYZx44daximIp8O3VzHMEJfwvHjx5uzZ8828Ldwjg4BhA4BDN3/MpNz1WXO9Xef5x7UXMFknYcPHx4v/BlCXwH379+fmWyqOYCa9Ctv3rwZv+bDhw//TUJVNN++fZv7feu1jx8/Hr9/93snTp06NV7qTr3676KePXvWvH379qevXbhwobl48WLv9pbaudTPdffu3d4dTb2ntnn655j2+vXr5tq1azNf370d7DKi1+fPn0f1VzS93Lt3b7Sf2l/+mXW0s/rjP6t1dW3DvH+62u52J9H7vq5lc3Nz/L697OzsjLet7+9k3vZOlo2NjdGjR486v//W1tag7f7d/zZrYsc5+gqro2L7izvkLeOj6enTp5vnz58Pel8dIetqQq1zWYtub/uL19y6dWvmyM3vY+i+hBpe1vB1qMnQdRE1lB+6jhcvXoxvJPkVk1BreD1EOxoYtHOp2GvHUKcnzt0PwIhefUP3ZZfJcHxa19B9kWV6W9sdydzXt+fh43XV0sY1d2jdHuE7t7Vv6D691LZM1tUMGGobuv8WO0KfY1VCr/dVeO3k2/j19d/pEPvOySvo9uj833t3e/r0ae/OoR3Gd27rXqG3pw2j9+/f//Se7e3t3vXU3MA8tb6u97YTcSMWJvR5ViH0inEvFX3fUXU6uq6fsSukOqq3pw4zr58Xeu0cunYopWLves+RI0fmbp/Q94XJuFVW58mL3FPfdy5f59t7XTareYOaiJvW/nIMOududwzNkydPes+3++Yn6tLZfn/mn1km45ZQv7TL3HAy5Fp1BVNPo1nEx48fZ762+zr8Xo4ePTpeV3vJ66ev1wx+hbjoZNm8icbaEdQ17vqeHDyhL6GOskNnpYeqncIigVWIdRVg2pCbRirC8+fPz4Re6mi7yA5qkdccOnSo4c8wdF9Ri44Y+j6uefLkyWY/1tc1WuiyyE6pPR9v+DOEzthBXMt2RP9zhL6mvn79Ouj1fRNidf7O30/of7kacncdjbvO2+eZ/pDKhLvW1oPQ10DXRFhdcqvbUhdRl9K67juvnciQKwWsLqGvga4Z9pqku379+jjieUb/3nPeNXRf5cdl7fVz8TOhr4G6Xt41o13XrOsJqnVknw6j/r8+z3779u3OT6zVJbc7d+40q6DrisDLly/FPoDr6GugzqPr0cddD2Ko2E+cODG+9l+X3CYz33XZrO5867o8V5HPezjEQevajtpJXb58ebwzqtOLyZNif/z44cETHYS+JirkT58+NQ8fPuz88yEfea3Ps//uG4IWVTudvh1OfSy3lt3qtl+hzzJ0XyN1VK8HOlQcy6j3VeSvXr1qVkndtcevEfqaqdhrGXoXWkVez47b2tpauUtqNTRf9L5/ugl9DxXA9HIQ6/iV9VQU7969Gw/n6/FQXd9v8rXaIdTrt7e3x8P+RSNfZluX/TnrNbVtdTrR9fPs/l5us+22MTJ1ufbq5pmaqNp933rd8Tbk0VarpCYY62fZ/UTcWs6cObMyE4grZiR0WH8jQ3cIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQI8E+7jBpgnY3+D4mMAGzm69l9AAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"img/hideCanvas.b8094833.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ObjectManager.vue?vue&type=style&index=0&id=9d553bfc&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ExportUSDZ.vue?vue&type=style&index=0&id=206058b5&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/Canvas-Head.8a592147.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAYAAACI7Fo9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAd/SURBVHgB7d3pcRPpGobhNjX/wRGAE2BLAEwAQBEAWwIsCbAkACSAgQBYEjCQAEsCLAlgSMB99LqOpjx2y1LLI2uk57qqeqoQbrWmZu5evv5aXmkHGmCZtccaYOkJHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQL81TAza2trzay9efOmOXv2bAMHEfoM/fjxo5m1379/NzCOU3cIIHQIIHQI4Bp9ht6/fz/2Z758+dLcu3dv3+t37txprl69OnZ9A3FMQugzdPHixWZa586dO9T6sJtTdwggdAjg1H2J1T324X32EydO7CxHvd1Tp041zJ/Ql8yHDx+at2/fNu/evds3YadCr8G7mzdvNhcuXJg4wrZtm9u3b+97/cmTJ3/vPGq7L1++3Nn23kk8tc0aWLxx44bw56VlrgYj8239Z9i7vHjxovf7DAbvOt9r1HL37t12a2tr7Htvb2/vW3dlZaX9/v17++3bt17bffjwYcuR23aNvgQePXrUrK+v7xxV+3j69Glz/vz5qafqDkJvLl261Gu7g9APtU2mI/QFV/fgK55pDWPtG97gKNE8fvx4qmA/f/7cXLt2zTz9IyT0BVZH8joqj1LXz3UvvpaDJtZU7HVG0De8riN5bWe4zYMG/yr2Z8+eNRyRlrma9hq9ro8HIXWuOxjw2nnfrnUGA2K9r5+7rtF3L/U5Hjx40Hm9v7GxsfN5utar6/xJxgg4tG2hz9m0oY8KdnBEHRtPxde17urqaue6B4W+trbWDo7OB26vBuxGxW5w7kgYjFtUHz9+3Pda3bqqL6IYd7+8bq91XdfXqXvdIpvU4IjcDI7kY+fb1xdwbG5udn6uPttjekJfQHVt3DUIVvFOep+6HprZG95gz9+5AxmlrsPr3vgk6nPVDmav+vcwKDd7Ql9AX79+7Xy9JsFMqiLvejqunqabRB3Nr1y50kyqfv7y5cudfzfpNpme0BdQ1xGwwu0766zrlLvP7bIzZ840fYz6fD9//myYLaEviaOax34Yi/AZl5XQF1BXMNNMXOlap0+MfY/Eoz7jyZMnG2ZL6Ato1Clw3ymw9QDKXpN+Y00N3PW9th410OdIP3tCX0CjBt1qptyk6jZc1xG2z1dT1a2xSc8kasfQNRNu+EQdsyX0BTSc2rpXHdEPmhI7VFNe79+/v+/1Ghm/fv16M6mtra3m1q1bOxEfpP6+dkJdO4VJvhePf0HLXE07M27Ues3/Z5vVbLZadqs/b25ujpyltr6+3rmtcVNgazZezX7r2t6vX7/awT37kVNgu6bq8q/bXql/NsxNHYXrgZK9BqGPnYxST52N+qbZuo6v+9zDW2B//vzZ+TKKUdfxdTQfxNp5/V//ixw7Nv7krybE1PaOHz++8+e6hn/16lXn7cDaXv388+fPG2audUSfs8N88UQ9pFJzzZsJv/Rh1FJH1oPmnI87ok+z1Oeuz8+RMNd9kdXRt+aQH+aXOQ7nq9fSV11f1/p9ra6uNq9fv/a1UkdI6AtuGHudBveNroKr0fdpIq9tVegV7KQ7mlpn+ICLkfajJfT/gApg79JHxb6xsfGP4LveZ/ha/XKIegCmrsn7zFfvUrHXdms84aBt1k6ldiifPn0S+RwYjFtCNfhVA2H18MvugbCagVa35fqeMrcdg3EVb+1cdg8YDre7e2JMBX769Gm/dWa+WqEz1qSh85/VOnWHAEKHAEKHAEKHAEKHAEKHAEKHAH5tMhPpmq03zTx35kPojFVB1zTXvUxlXRxmxsHyMzMOEggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAvw1WNoGWGbt/wCMo+OPrYBQagAAAABJRU5ErkJggg==\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TubeToolSelector.vue?vue&type=style&index=0&id=362d5e44&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./StripToolSelector.vue?vue&type=style&index=0&id=5e4163b9&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SnapSettings.vue?vue&type=style&index=0&id=e4e7cb64&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/Canvas-Plane.3b032ddd.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Canvas.vue?vue&type=style&index=0&id=67a0d07b&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/undo.77205cb3.svg\";","module.exports = __webpack_public_path__ + \"img/Canvas-Sphere.bbd345df.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Layers.vue?vue&type=style&index=0&id=b061a208&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./StripSettings.vue?vue&type=style&index=0&id=2e7970ff&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ExportForBlender.vue?vue&type=style&index=0&id=96b7a698&scoped=true&lang=css\"","<template>\n  <video-export-preview :show=\"previewing\" @stop-previewing=\"setPreview\" />\n  <modal :modalProp=\"modalProp\" @modal-set=\"setModal\" @set-preset=\"applyPreset\" />\n  <viewport-cube\n    v-show=\"uiVisible && windowStates.view\"\n    :quaternion=\"quaternion\"\n    :cameraResetDisabled=\"cameraResetDisabled\"\n    :reopenTrigger=\"windowTriggers.view\"\n    :is-open=\"windowStates.view\"\n    @close=\"onWindowClose('view')\"\n  />\n  <tool-selector \n    v-show=\"uiVisible && windowStates.tools\" \n    ref=\"toolSelector\"\n    @selected-tool=\"setSelectedTool\" \n    @set-preset=\"applyPreset\" \n    @toggle-properties=\"toggleProperties\" \n    @toggle-scene=\"toggleScene\" \n    :selectedTool=\"tool\" \n    :reopenTrigger=\"windowTriggers.tools\" \n    :is-open=\"windowStates.tools\" \n    @close=\"onWindowClose('tools')\"\n    :initialX=\"windowPositions.tools ? windowPositions.tools.x : undefined\"\n    :initialY=\"windowPositions.tools ? windowPositions.tools.y : undefined\" \n    @toggle-2d-shapes=\"toggleWindow('twoDShapes')\"\n    @toggle-snap=\"toggleWindow('snap')\"\n    @toggle-drawing-modes=\"toggleWindow('drawingModes')\"\n    @toggle-code-editor=\"toggleWindow('codeEditor')\"\n    @toggle-ar=\"toggleAR\"\n    :isArActive=\"arActive\"\n  />\n  <tube-tool-selector \n    v-show=\"uiVisible && windowStates.tubeTools\" \n    ref=\"tubeToolSelector\"\n    @selected-tool=\"setSelectedTool\" \n    @set-preset=\"applyPreset\" \n    @toggle-properties=\"toggleWindow('tubeProperties')\" \n    :selectedTool=\"tool\" \n    :reopenTrigger=\"windowTriggers.tubeTools\" \n    :is-open=\"windowStates.tubeTools\" \n    @close=\"onWindowClose('tubeTools')\"\n    :isTube=\"isTube\"\n    :initialX=\"windowPositions.tools ? windowPositions.tools.x : undefined\"\n    :initialY=\"(windowPositions.tools ? windowPositions.tools.y : 100) + 400\" \n  />\n\n  <strip-tool-selector \n    v-show=\"uiVisible && windowStates.stripTools\" \n    ref=\"stripToolSelector\"\n    @selected-tool=\"setSelectedTool\" \n    @set-preset=\"applyPreset\" \n    @toggle-properties=\"toggleWindow('stripProperties')\" \n    :selectedTool=\"tool\" \n    :reopenTrigger=\"windowTriggers.stripTools\" \n    :is-open=\"windowStates.stripTools\" \n    @close=\"onWindowClose('stripTools')\"\n    :isStrip=\"isStrip\"\n    :initialX=\"windowPositions.tools ? windowPositions.tools.x : undefined\"\n    :initialY=\"(windowPositions.tools ? windowPositions.tools.y : 100) + 600\" \n  />\n  <two-d-shapes \n    v-show=\"uiVisible && windowStates.twoDShapes\" \n    :visible=\"true\"\n    :reopenTrigger=\"windowTriggers.twoDShapes\" \n    :is-open=\"windowStates.twoDShapes\" \n    @close=\"onWindowClose('twoDShapes')\" \n    @add-shape=\"onAddCanvasShape\"\n  />\n\n  <line-settings \n    v-show=\"uiVisible && windowStates.properties\" \n    ref=\"lineSettings\" \n    @stroke=\"setStroke\" \n    @fill=\"setFill\" \n    :selectedTool=\"tool\" \n    :forceVisible=\"propertiesVisible\" \n    :reopenTrigger=\"windowTriggers.properties\" \n    :is-open=\"windowStates.properties\" \n    @close=\"onWindowClose('properties')\" \n  />\n  <tube-settings \n    v-show=\"uiVisible && windowStates.tubeProperties\" \n    ref=\"tubeSettings\" \n    @stroke=\"setStroke\" \n    :selectedTool=\"tool\" \n    :forceVisible=\"propertiesVisible\" \n    :reopenTrigger=\"windowTriggers.tubeProperties\" \n    :is-open=\"windowStates.tubeProperties\" \n    :isTube=\"isTube\"\n    @close=\"onWindowClose('tubeProperties')\" \n  />\n  <strip-settings \n    v-show=\"uiVisible && windowStates.stripProperties\" \n    ref=\"stripSettings\" \n    @stroke=\"setStroke\" \n    :selectedTool=\"tool\" \n    :forceVisible=\"propertiesVisible\" \n    :reopenTrigger=\"windowTriggers.stripProperties\" \n    :is-open=\"windowStates.stripProperties\" \n    :isStrip=\"isStrip\"\n    @close=\"onWindowClose('stripProperties')\" \n  />\n\n  <undo-redo v-show=\"uiVisible && windowStates.history\" @selected-tool=\"setSelectedTool\" ref=\"undoRedo\" :reopenTrigger=\"windowTriggers.history\" :is-open=\"windowStates.history\" @close=\"onWindowClose('history')\" />\n  <Input\n    @mouse-coordinates=\"setMouseCoordinates\"\n    :selectedTool=\"tool\"\n    :mirror=\"mirror\"\n    :stroke=\"stroke\"\n    :fill=\"fill\"\n    :radial=\"radial\"\n    :sectors=\"sectors\"\n    :radial-axis=\"radialAxis\"\n    :toolEnabled=\"toolEnabled\"\n    :localSymmetry=\"localSymmetry\"\n    :snap-config=\"snapConfig\"\n    :drawing-mode=\"drawingMode\"\n  />\n  <Canvas\n    ref=\"raycastCanvas\"\n    @selected-canvas-shape=\"setSelectedCanvasShape\"\n    @set-tool-enabled=\"setToolEnabled\"\n    :selectedShape=\"canvasShape\"\n    :selectedTool=\"tool\"\n    :mouse=\"mouse\"\n    :reopenTrigger=\"windowTriggers.canvas\"\n    :is-open=\"windowStates.canvas\"\n    @close=\"onWindowClose('canvas')\"\n    :initialX=\"windowPositions.canvas ? windowPositions.canvas.x : undefined\"\n    :initialY=\"windowPositions.canvas ? windowPositions.canvas.y : undefined\"\n  />\n  <ShapeSelector\n    v-show=\"uiVisible && windowStates.shapes\"\n    @selected-canvas-shape=\"setSelectedCanvasShape\"\n    @load-custom-model=\"loadCustomModelInCanvas\"\n    @set-material=\"setCanvasMaterial\"\n    :selectedShape=\"canvasShape\"\n    :selectedTool=\"tool\"\n    :reopenTrigger=\"windowTriggers.shapes\"\n    :is-open=\"windowStates.shapes\"\n    @close=\"onWindowClose('shapes')\"\n  />\n  \n  <Share v-show=\"uiVisible\" @modal-set=\"setModal\" @preview=\"setPreview\" @toggle-window=\"toggleWindow\" ref=\"share\" :windowStates=\"windowStates\" />\n  <scene-settings v-show=\"uiVisible && windowStates.scene\" :visible=\"true\" :reopenTrigger=\"windowTriggers.scene\" :is-open=\"windowStates.scene\" @close=\"onWindowClose('scene')\" @bloomChange=\"onBloomChange\" />\n  <color-palette v-show=\"uiVisible && windowStates.colors\" :visible=\"true\" :reopenTrigger=\"windowTriggers.colors\" @set-color=\"applyColor\" :is-open=\"windowStates.colors\" @close=\"onWindowClose('colors')\" />\n  <symmetry-settings v-show=\"uiVisible && windowStates.symmetry\" :visible=\"true\" :reopenTrigger=\"windowTriggers.symmetry\" :is-open=\"windowStates.symmetry\" @close=\"onWindowClose('symmetry')\" :mirror=\"mirror\" @set-mirror=\"mirror = $event\" :radial=\"radial\" @set-radial=\"radial = $event\" :sectors=\"sectors\" @set-sectors=\"sectors = $event\" :radial-axis=\"radialAxis\" @set-radial-axis=\"radialAxis = $event\" :local-symmetry=\"localSymmetry\" @set-local-symmetry=\"localSymmetry = $event\" />\n    <layers v-show=\"uiVisible && windowStates.layers\" :visible=\"true\" :reopenTrigger=\"windowTriggers.layers\" :is-open=\"windowStates.layers\" @close=\"onWindowClose('layers')\" @layer-add=\"onLayerAdd\" @layer-delete=\"onLayerDelete\" @layer-select=\"onLayerSelect\" @layer-change=\"onLayerChange\" @layer-duplicate=\"onLayerDuplicate\" />\n    <object-manager v-show=\"uiVisible && windowStates.objectManager\" :visible=\"true\" :reopenTrigger=\"windowTriggers.objectManager\" :is-open=\"windowStates.objectManager\" @close=\"onWindowClose('objectManager')\" />\n    \n    <transform-toolbar\n      v-show=\"uiVisible\"\n      :top=\"transformToolbar.top\"\n      :left=\"transformToolbar.left\"\n      :display=\"transformToolbar.display\"\n      :selectedTool=\"tool\"\n      :selectionPosition=\"transformToolbar.position\"\n    />\n\n    <snap-settings \n      v-show=\"uiVisible && windowStates.snap\"\n      :isOpen=\"windowStates.snap\"\n      :reopenTrigger=\"windowTriggers.snap\"\n      @close=\"onWindowClose('snap')\"\n      @config-change=\"onSnapConfigChange\"\n    />\n\n    <drawing-modes \n      v-show=\"uiVisible && windowStates.drawingModes\"\n      :isOpen=\"windowStates.drawingModes\"\n      :currentMode=\"drawingMode\"\n      @close=\"onWindowClose('drawingModes')\"\n      @mode-change=\"onDrawingModeChange\"\n    />\n\n    <code-editor\n      v-show=\"uiVisible && windowStates.codeEditor\"\n      :isOpen=\"windowStates.codeEditor\"\n      :reopenTrigger=\"windowTriggers.codeEditor\"\n      @close=\"onWindowClose('codeEditor')\"\n    />\n  \n  <!-- <div>\n    <a id=\"ar\" rel=\"ar\"><img src=\"@/assets/icons/AR.png\" /></a>\n  </div> -->\n</template>\n\n<script>\nimport * as THREE from \"three\";\n//import { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader.js\";\nimport CameraControls from \"camera-controls\";\nCameraControls.install({ THREE: THREE });\nimport InfiniteGridHelper from \"./components/InfiniteGridHelper.js\";\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js';\nimport { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass.js';\n\nimport Input from \"./components/Input.vue\";\nimport ToolSelector from \"./components/ToolSelector.vue\";\nimport TubeToolSelector from \"./components/TubeToolSelector.vue\";\nimport StripToolSelector from \"./components/StripToolSelector.vue\";\nimport ViewportCube from \"./components/ViewportCube.vue\";\nimport UndoRedo, { undoManager } from \"./components/UndoRedo.vue\";\nimport { select } from \"./components/select.js\";\nimport { draw } from \"./components/draw.js\";\nimport { erase } from \"./components/erase.js\";\nimport LineSettings from \"./components/LineSettings.vue\";\nimport TubeSettings from \"./components/TubeSettings.vue\";\nimport StripSettings from \"./components/StripSettings.vue\";\n\nimport Share from \"./components/Share.vue\";\nimport Canvas from \"./components/Canvas.vue\";\nimport { controls, canvas } from \"./components/Canvas.vue\";\nimport ShapeSelector from \"./components/ShapeSelector.vue\";\nimport Modal from \"./components/Modal.vue\";\nimport VideoExportPreview from \"./components/VideoExportPreview.vue\";\nimport SceneSettings from \"./components/SceneSettings.vue\";\nimport ColorPalette from \"./components/ColorPalette.vue\";\nimport SymmetrySettings from \"./components/SymmetrySettings.vue\";\n\nimport Layers from \"./components/Layers.vue\";\nimport ObjectManager from \"./components/ObjectManager.vue\";\nimport TransformToolbar from \"./components/TransformToolbar.vue\";\nimport TwoDShapes from \"./components/TwoDShapes.vue\";\n\nimport SnapSettings from \"./components/SnapSettings.vue\";\nimport DrawingModes from \"./components/DrawingModes.vue\";\nimport CodeEditor from \"./components/CodeEditor.vue\";\n\nexport let render = new THREE.WebGLRenderer({\n  antialias: true,\n  alpha: true,\n  preserveDrawingBuffer: true,\n});\n// Rename export to avoid conflict (or just keep it and patch it later)\nexport let renderer = render; \n\nexport let camera = new THREE.PerspectiveCamera(\n  100,\n  window.innerWidth / window.innerHeight,\n  1,\n  1000\n);\n\nexport let scene = new THREE.Scene();\nexport let drawingScene, cameraControls, vm, drawingprop, composer;\n\n// Helper function to render with bloom support\nexport function renderScene() {\n  if (composer) {\n    composer.render();\n  } else {\n    renderer.render(scene, camera);\n  }\n}\n\nvar main, clock;\n\nexport default {\n  name: \"App\",\n  // ... (components list unchanged)\n  components: {\n    Input,\n\n    LineSettings,\n    TubeSettings,\n    StripSettings,\n    ToolSelector,\n    TubeToolSelector,\n    StripToolSelector,\n\n    ViewportCube,\n    UndoRedo,\n    Share,\n    Canvas,\n    ShapeSelector,\n    Modal,\n    VideoExportPreview,\n    SceneSettings,\n    ColorPalette,\n    SymmetrySettings,\n\n    Layers,\n    ObjectManager,\n    TransformToolbar,\n    TwoDShapes,\n\n    SnapSettings,\n    DrawingModes,\n    CodeEditor,\n  },\n  data() {\n    return {\n      // ... (data unchanged)\n      tool: \"draw\",\n      toolEnabled: true,\n      canvasShape: \"plane\",\n      multitouch: \"canvas\",\n      toolHistory: [\"draw\"],\n      stroke: {}, \n      fill: {}, \n      mirror: \"\", \n      radial: false,\n      sectors: 6,\n      radialAxis: 'y',\n      localSymmetry: false,\n      quaternion: undefined,\n      cameraResetDisabled: false,\n      selected: undefined,\n      transformToolbar: { top: 0, left: 0, location: \"above\", display: false, position: { x: 0, y: 0, z: 0 } },\n      canvasTransformEnabled: true,\n      modalProp: { show: false, mode: \"about\" },\n      previewing: false,\n      mouse: {},\n      snapConfig: { enabled: false, endpoints: true, midpoints: true, threshold: 0.5 },\n      drawingMode: 'surface',\n      propertiesVisible: false,\n      layerGroups: {},\n      activeLayerId: 1,\n      clipboard: [],\n      windowTriggers: {\n        tutorialStep: 0,\n        tools: 0,\n        properties: 0,\n        canvas: 0,\n        shapes: 0,\n        history: 0,\n        view: 0,\n        actions: 0,\n        scene: 0,\n        colors: 0,\n        symmetry: 0,\n        layers: 0,\n        objectManager: 0,\n        twoDShapes: 0,\n        tubeTools: 0,\n        tubeProperties: 0,\n        stripTools: 0,\n        stripProperties: 0,\n\n        snap: 0,\n        drawingModes: 0,\n        codeEditor: 0,\n      },\n      windowPositions: {},\n      windowStates: {\n        tools: true,\n        properties: false,\n        canvas: true,\n        shapes: false,\n        history: false,\n        view: true,\n        scene: false,\n        colors: false,\n        symmetry: false,\n        layers: false,\n        objectManager: false,\n        twoDShapes: false,\n        tubeTools: true,\n        tubeProperties: false,\n        stripTools: true,\n        stripProperties: false,\n\n        snap: false,\n        drawingModes: false,\n        codeEditor: false,\n      },\n      uiVisible: true,\n      arActive: false,\n\n      isTube: false,\n      isStrip: false,\n    };\n  },\n  emits: [\"modal-set\", \"selected-canvas-shape\"],\n  methods: {\n    toggleProperties: function() {\n      this.toggleWindow('properties');\n    },\n    toggleScene: function() {\n      this.toggleWindow('scene');\n    },\n    toggleWindow: function(windowName) {\n      if (this.windowStates[windowName] !== undefined) {\n          this.windowStates[windowName] = !this.windowStates[windowName];\n          if (this.windowStates[windowName] && this.windowTriggers[windowName] !== undefined) {\n            this.windowTriggers[windowName]++;\n          }\n      } else {\n          if (this.windowTriggers[windowName] !== undefined) {\n            this.windowTriggers[windowName]++;\n          }\n      }\n    },\n    onWindowClose: function(windowName) {\n        if (this.windowStates[windowName] !== undefined) {\n             this.windowStates[windowName] = false;\n        }\n    },\n    toggleAR() {\n        this.arActive = !this.arActive;\n        let video = document.getElementById('ar-video-bg');\n        if (!video) {\n            video = document.createElement('video');\n            video.id = 'ar-video-bg';\n            video.style.position = 'fixed';\n            video.style.top = '0';\n            video.style.left = '0';\n            video.style.width = '100vw';\n            video.style.height = '100vh';\n            video.style.objectFit = 'cover';\n            video.style.zIndex = '-1';\n            video.autoplay = true;\n            video.muted = true; // Required for strict autoplay policies\n            video.playsInline = true;\n            document.body.appendChild(video);\n        }\n\n        if (this.arActive) {\n             // Security Check for Mobile testing via IP\n            if (window.location.hostname !== 'localhost' && window.location.protocol !== 'https:') {\n                alert(\" AR Warning: Camera access requires HTTPS. \\n\\nIf testing on mobile via Wi-Fi/IP, the camera will likely fail. Use localhost via USB debugging or set up HTTPS.\");\n            }\n\n            // Start AR\n            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n                \n                const startVideo = (constraints) => {\n                    navigator.mediaDevices.getUserMedia(constraints)\n                        .then(stream => {\n                            video.srcObject = stream;\n                            video.style.display = 'block';\n                            \n                            // Smart Mirroring: Mirror only if using front/user camera\n                            // If we requested environment (rear), do NOT mirror.\n                            let isRear = false;\n                            try {\n                                const track = stream.getVideoTracks()[0];\n                                const settings = track.getSettings();\n                                // Check specific facingMode if supported, or infer from request\n                                if (constraints.video.facingMode === 'environment' || settings.facingMode === 'environment') {\n                                    isRear = true;\n                                }\n                            } catch(e) { /* ignore */ }\n\n                            if (isRear) {\n                                video.style.transform = 'none'; // Rear camera: No mirror\n                            } else {\n                                video.style.transform = 'scaleX(-1)'; // Front/Webcam: Mirror for natural feel\n                            }\n\n                            scene.background = null; \n                            renderer.render(scene, camera);\n                        })\n                        .catch(err => {\n                            console.warn(\"AR Camera attempt failed:\", err);\n                            // If first attempt (environment) failed, try fallback (any video)\n                            if (constraints.video.facingMode === 'environment') {\n                                console.log(\"Retrying with any available camera...\");\n                                /* Fallback to default (usually user/webcam) */\n                                startVideo({ video: true });\n                            } else {\n                                console.error(\"AR Fatal Error:\", err);\n                                alert(\"Camera Error: \" + err.name + \"\\n\" + err.message + \"\\n\\n(On PC this likely means no webcam is connected. On Mobile, ensure HTTPS is used.)\");\n                                this.arActive = false;\n                            }\n                        });\n                };\n\n                // First try getting the rear camera (ideal for AR/Phone)\n                startVideo({ video: { facingMode: 'environment' } });\n\n            } else {\n                alert(\"Camera API not supported in this browser context (HTTPS required).\");\n                this.arActive = false;\n            }\n        } else {\n            // Stop AR\n            video.style.display = 'none';\n            if (video.srcObject) {\n                video.srcObject.getTracks().forEach(track => track.stop());\n                video.srcObject = null;\n            }\n            scene.background = new THREE.Color(0xdddddd);\n            renderer.render(scene, camera);\n        }\n    },\n\n    init: function () {\n      CameraControls.install({ THREE: THREE });\n      main = document.getElementById(\"threed\");\n\n      renderer.setPixelRatio(window.devicePixelRatio);\n      renderer.setClearColor(0x000000, 0); \n      renderer.setSize(window.innerWidth, window.innerHeight);\n      main.appendChild(renderer.domElement);\n      renderer.domElement.id = \"threeJsCanvas\";\n\n      // scene = new THREE.Scene(); // Initialized at top level\n      var bgCol = 0xdddddd;\n      scene.background = new THREE.Color(bgCol);\n      scene.fog = new THREE.Fog(bgCol, 10, 50);\n\n      drawingScene = new THREE.Scene();\n\n      const grid = new InfiniteGridHelper(1, 10, new THREE.Color(0x0000ff), 40);\n      scene.add(grid);\n\n      camera.layers.enable(0); \n      camera.layers.enable(1);\n      camera.zoom = 3;\n      camera.position.set(5, 5, 10);\n\n      clock = new THREE.Clock();\n\n      // Post-Processing with Bloom\n      // Post-Processing with Bloom - Use FloatType for HDR (values > 1.0)\n      const renderTarget = new THREE.WebGLRenderTarget(window.innerWidth, window.innerHeight, {\n        type: THREE.FloatType, // Allows values > 1.0 for true HDR\n        format: THREE.RGBAFormat,\n        encoding: THREE.sRGBEncoding\n      });\n      composer = new EffectComposer(renderer, renderTarget);\n      const renderPass = new RenderPass(scene, camera);\n      composer.addPass(renderPass);\n      \n      this.bloomPass = new UnrealBloomPass(\n        new THREE.Vector2(window.innerWidth, window.innerHeight),\n        0, // strength (will be set by scene settings)\n        0.4, // radius\n        0.2 // threshold - lower = more objects glow\n      );\n      this.bloomPass.enabled = false; // Disabled by default\n      composer.addPass(this.bloomPass);\n\n      cameraControls = new CameraControls(camera, renderer.domElement);\n      cameraControls.dampingFactor = 20;\n      cameraControls.draggingDampingFactor = 200;\n      cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n      cameraControls.mouseButtons.wheel = CameraControls.ACTION.DOLLY;\n      document.addEventListener(\"keydown\", (event) => {\n        if (event.code === \"Space\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.TRUCK;\n          this.toolEnabled = false;\n        }\n      });\n      document.addEventListener(\"keyup\", (event) => {\n        if (event.code === \"Space\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n          this.toolEnabled = true;\n        }\n      });\n      document.addEventListener(\"keydown\", (event) => {\n        if (event.code === \"AltLeft\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n          this.toolEnabled = false;\n        }\n      });\n      document.addEventListener(\"keyup\", (event) => {\n        if (event.code === \"AltLeft\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n          this.toolEnabled = true;\n        }\n      });\n      cameraControls.mouseButtons.middle = CameraControls.ACTION.TRUCK;\n      cameraControls.mouseButtons.right = CameraControls.ACTION.NONE;\n      cameraControls.touches.one = CameraControls.ACTION.TOUCH_ROTATE;\n      cameraControls.touches.two = CameraControls.ACTION.TOUCH_DOLLY_TRUCK;\n      cameraControls.touches.three = CameraControls.ACTION.TOUCH_ZOOM_TRUCK;\n      cameraControls.maxZoom = 4000;\n      cameraControls.minZoom = 0.5;\n      cameraControls.enabled = true;\n\n      this.quaternion = [\n        camera.quaternion.x,\n        camera.quaternion.y,\n        camera.quaternion.z,\n        camera.quaternion.w,\n      ];\n\n      cameraControls.addEventListener(\"update\", () => {\n        this.quaternion = [\n          camera.quaternion.x,\n          camera.quaternion.y,\n          camera.quaternion.z,\n          camera.quaternion.w,\n        ];\n\n        let target = new THREE.Vector3();\n        target = cameraControls.getTarget(target);\n        targetSphere.position.set(target.x, target.y, target.z);\n\n        if (select.s && select.s.controls != undefined) {\n          if (this.tool == \"select\") {\n            select.s.helper.update();\n          }\n        }\n      });\n\n      cameraControls.addEventListener(\"sleep\", () => {\n        if (select.s && select.s.controls != undefined) {\n          if (this.tool == \"select\") {\n            select.s.helper.update();\n            let position = select.s.calculateTransfromToolbarPosition();\n            this.transformToolbar.left = position.x;\n            this.transformToolbar.top = position.y;\n            this.transformToolbar.location = position.location;\n            this.transformToolbar.display = true;\n          }\n        }\n\n        let target = new THREE.Vector3();\n        target = cameraControls.getTarget(target);\n        var x = target.x;\n        var y = target.y;\n        var z = target.z;\n\n        if (\n          camera.position.z != 10 ||\n          x != 0 ||\n          y != 0 ||\n          z != 0 ||\n          camera.zoom != 3\n        ) {\n          this.cameraResetDisabled = false;\n        } else {\n          this.cameraResetDisabled = true;\n        }\n      });\n\n      var geometry = new THREE.SphereBufferGeometry(0.025, 32, 32);\n      var material = new THREE.MeshBasicMaterial({ color: 0xffc75f });\n      var targetSphere = new THREE.Mesh(geometry, material);\n      scene.add(targetSphere);\n\n      const light = new THREE.HemisphereLight(0xffffff, 0x222222, 0.8);\n      light.position.set(0, 50, 150);\n      scene.add(light);\n\n      this.$.refs.raycastCanvas.setUp();\n      this.$.refs.raycastCanvas.resetTransformation();\n\n      window.addEventListener(\"resize\", this.onWindowResize);\n      window.addEventListener(\"orientationchange\", this.onWindowResize);\n      this.onWindowResize();\n\n      renderer.render(scene, camera);\n    },\n    onWindowResize: function () {\n      camera.aspect = window.innerWidth / window.innerHeight;\n      camera.left = (900 * camera.aspect) / -2;\n      camera.right = (900 * camera.aspect) / 2;\n      camera.top = 900 / 2;\n      camera.bottom = -900 / 2;\n\n      camera.updateProjectionMatrix();\n\n      renderer.setSize(window.innerWidth, window.innerHeight);\n      if (composer) composer.setSize(window.innerWidth, window.innerHeight);\n\n      renderer.setViewport(0, 0, window.innerWidth, window.innerHeight);\n      renderScene();\n    },\n    animate: function () {\n      const delta = clock.getDelta();\n      let hasCameraControlsUpdated = cameraControls.update(delta);\n      let linesAnimated = false;\n      if (draw && draw.animateLines) {\n           linesAnimated = draw.animateLines(delta);\n      }\n\n      requestAnimationFrame(this.animate);\n\n      if (hasCameraControlsUpdated || linesAnimated) {\n        renderScene();\n      }\n    },\n    setSelectedTool: function (val) {\n      if (this.tool === 'select') {\n          if (select && select.s) {\n              select.s.deselect();\n              this.setTransformToolbarDisplay(false);\n          }\n      }\n      this.tool = val;\n\n      if (this.tool === \"erase\") {\n        if (typeof canvas !== 'undefined' && canvas) canvas.visible = false;\n        if (typeof controls !== 'undefined' && controls) controls.visible = false;\n        renderScene();\n      } else if (this.tool === \"draw\") {\n        if (this.$.refs.raycastCanvas && this.$.refs.raycastCanvas.visible === true && typeof canvas !== 'undefined' && canvas) {\n          canvas.visible = true;\n        } else if (typeof canvas !== 'undefined' && canvas) {\n          canvas.visible = false;\n        }\n        \n        if (\n          this.$.refs.raycastCanvas &&\n          this.$.refs.raycastCanvas.transformationEnabled === true &&\n          this.$.refs.raycastCanvas.visible === true &&\n          typeof controls !== 'undefined' && controls\n        ) {\n          controls.visible = true;\n        } else if (typeof controls !== 'undefined' && controls) {\n          controls.visible = false;\n        }\n        renderScene();\n      }\n\n      this.toolHistory.push(val);\n      if (this.toolHistory.length > 2) {\n        this.toolHistory.shift();\n      }\n\n      let current = val;\n      let previous = this.toolHistory[0];\n\n      undoManager.add({\n        undo: function () {\n          vm.setSelectedTool(previous);\n        },\n        redo: function () {\n          vm.setSelectedTool(current);\n        },\n      });\n\n      this.$.refs.undoRedo.updateUi();\n    },\n    setToolEnabled: function (val) {\n      this.toolEnabled = val;\n    },\n    setMouseCoordinates: function (val) {\n      this.mouse = val;\n    },\n    setSelectedCanvasShape: function (val) {\n      this.canvasShape = val;\n    },\n    loadCustomModelInCanvas: function (url) {\n      if (this.$refs.raycastCanvas) {\n        this.$refs.raycastCanvas.loadCustomModel(url);\n      }\n    },\n    setCanvasMaterial: function (val) {\n      if (this.$refs.raycastCanvas) {\n        this.$refs.raycastCanvas.setMaterial(val);\n      }\n    },\n    onAddCanvasShape: function(mesh) {\n        // Switch to Canvas mode\n        this.setSelectedTool('draw');\n        // Forward to Canvas component\n        if (this.$refs.raycastCanvas) {\n            this.$refs.raycastCanvas.addShape(mesh);\n        }\n    },\n    onSnapConfigChange: function(config) {\n        this.snapConfig = config;\n    },\n    onDrawingModeChange: function(mode) {\n        this.drawingMode = mode;\n        // Optionally update InfiniteGridHelper visibility or orientation here if needed\n    },\n    setSelectedTool_internal: function (val) {\n      this.tool = val;\n    },\n    setSelectedMultitouch: function (val) {\n      this.multitouch = val;\n\n      if (val === \"camera\") {\n        cameraControls.enabled = true;\n      } else {\n        cameraControls.enabled = false;\n      }\n    },\n    setSelectedObject: function (val) {\n      this.selected = val;\n    },\n    setTransformToolbarPosition: function (val) {\n      this.transformToolbar.top = val.top;\n      this.transformToolbar.left = val.left;\n      this.transformToolbar.location = val.location;\n    },\n    setTransformToolbarDisplay: function (val) {\n      this.transformToolbar.display = val;\n    },\n    setSelectionPosition: function (val) {\n      this.transformToolbar.position = val;\n    },\n    closeSelection: function() {\n      if (select && select.s) {\n          select.s.deselect();\n      }\n      this.transformToolbar.display = false;\n    },\n    setStroke: function (val) {\n      this.stroke = val;\n      if (select && select.s && select.s.controls && select.s.controls.object && select.s.controls.object.type === 'Mesh') {\n           draw.updateStroke(select.s.controls.object, val);\n           renderer.render(scene, camera);\n      }\n    },\n    setFill: function (val) {\n      this.fill = val;\n      if (select && select.s && select.s.controls && select.s.controls.object && select.s.controls.object.type === 'Mesh') {\n           draw.updateFill(select.s.controls.object, val);\n           renderer.render(scene, camera);\n      }\n    },\n    setModal: function (val) {\n      this.modalProp = val;\n    },\n    setPreview: function (val) {\n      this.previewing = val;\n    },\n    applyPreset: function (settings) {\n      this.isTube = !!settings.isTube;\n      this.isStrip = !!settings.isStrip;\n      \n      // We need to wait for Vue to update Refs visibility? \n      // Actually we can update both, or just the active one.\n      // But updateSettings on hidden component might be fine.\n      this.$nextTick(() => {\n          if (this.isTube) {\n              this.$refs.tubeSettings.updateSettings(settings);\n          } else if (this.isStrip) {\n              this.$refs.stripSettings.updateSettings(settings);\n          } else {\n              this.$refs.lineSettings.updateSettings(settings);\n          }\n      });\n    },\n    applyColor: function(color) {\n      if (this.tool !== 'draw') {\n        this.tool = 'draw';\n      }\n      // Apply to active settings\n      if (this.isTube) {\n          this.$refs.tubeSettings.updateSettings({\n            strokeColor: color\n          });\n      } else if (this.isStrip) {\n          this.$refs.stripSettings.updateSettings({\n            strokeColor: color\n          });\n      } else {\n          this.$refs.lineSettings.updateSettings({\n            strokeColor: color,\n            stroke: true \n          });\n      }\n    },\n    handleKeyDown(event) {\n        if (event.key === \"Escape\") {\n            if (this.tool === 'select' && select && select.s) {\n                select.s.deselect();\n                this.setTransformToolbarDisplay(false);\n            }\n        }\n        if (event.key === \"AltGraph\") {\n            this.uiVisible = !this.uiVisible;\n        }\n        if (event.code === \"Space\") {\n            if (this.$refs.raycastCanvas) {\n                this.$refs.raycastCanvas.toggleVisibility();\n            }\n        }\n        // Copy (Ctrl+C)\n        if (event.ctrlKey && (event.key === 'c' || event.key === 'C')) {\n            console.log(\"Ctrl+C detected\");\n            if (select && select.s && select.s.selected && select.s.selected.length > 0) {\n                 this.clipboard = [];\n                 select.s.selected.forEach(obj => {\n                     let clone = obj.clone();\n                     // Safe material clone\n                     if (clone.material) {\n                         try {\n                             clone.material = clone.material.clone();\n                         } catch (e) {\n                             console.warn(\"Material clone failed on copy, sharing material\", e);\n                         }\n                     }\n                     this.clipboard.push(clone);\n                 });\n                 console.log(\"Copied to clipboard:\", this.clipboard.length);\n            } else {\n                console.log(\"Nothing to copy. Selection empty?\");\n                if (select) console.log(\"select exists\");\n                if (select && select.s) console.log(\"select.s exists\", select.s.selected);\n            }\n        }\n        // Paste (Ctrl+V)\n        if (event.ctrlKey && (event.key === 'v' || event.key === 'V')) {\n            console.log(\"Ctrl+V detected. Clipboard size:\", this.clipboard ? this.clipboard.length : 0);\n            if (this.clipboard && this.clipboard.length > 0) {\n                 if (select && select.s) select.s.deselect();\n                 \n                 let newSelection = [];\n                 this.clipboard.forEach(clipObj => {\n                     let pasteObj = clipObj.clone();\n                     // Generate new UUID\n                     pasteObj.uuid = THREE.MathUtils.generateUUID();\n                     \n                     // Safe material clone again ensures unique material for the new instance\n                     if (pasteObj.material) {\n                         try {\n                              pasteObj.material = pasteObj.material.clone();\n                         } catch(e) {\n                              // Share if clone fails\n                         }\n                     }\n                     \n                     // Offset slightly to make paste visible\n                     pasteObj.position.addScalar(0.5); \n                     \n                     // Add to active layer group if possible\n                     if (this.activeLayerId && this.layerGroups[this.activeLayerId]) {\n                         this.layerGroups[this.activeLayerId].add(pasteObj);\n                     } else {\n                         scene.add(pasteObj);\n                     }\n                     \n                     // Ensure raycast is set (MeshLine specific)\n                     if (clipObj.raycast) pasteObj.raycast = clipObj.raycast; \n                     else if (pasteObj.geometry && pasteObj.geometry.isMeshLine) {\n                         // Import MeshLineRaycast if needed, or assume it's attached? \n                         // It's usually attached on creation.\n                         // But checking userData might help.\n                     }\n\n                     newSelection.push(pasteObj);\n                 });\n                 \n                 if (select && select.s && newSelection.length > 0) {\n                     // Ensure tool is select\n                     this.tool = 'select';\n                     // Need to wait for Vue/Scene update? No, direct select should work.\n                     // But we must invoke after a brief delay if deselect was async? \n                     // deselect() is synchronous usually.\n                     select.s.select(newSelection);\n                 }\n                 renderScene();\n            }\n        }\n        // Duplicate (Ctrl+D)\n        if (event.ctrlKey && (event.key === 'd' || event.key === 'D')) {\n            event.preventDefault(); \n            // Check selection state\n            if (select && select.s && (select.s.selected.length > 0 || (select.s.controls && select.s.controls.object))) {\n                 console.log(\"Ctrl+D detected - calling duplicate()\");\n                 select.s.duplicate();\n            } else {\n                console.log(\"Ctrl+D ignored: No selection\");\n            }\n        }\n        if (event.code === \"Delete\" || event.code === \"Backspace\") {\n            if (select && select.s && select.s.controls && select.s.controls.object) {\n                 const obj = select.s.controls.object;\n                 let objectsToDelete = [];\n\n                 if (obj.type === \"Group\") {\n                     // Multiple selection\n                     obj.children.forEach(child => {\n                         // The group children are clones/helpers, the real UUID is in userData\n                         const uuid = child.userData.uuid;\n                         if (uuid) {\n                             // Find the real object in the LayerGroups or Scene\n                             // We can search the whole scene or use getObjectByProperty on scene\n                             // Note: erase.deleteObject expects the object itself\n                             const realArg = scene.getObjectByProperty(\"uuid\", uuid);\n                             if (realArg) objectsToDelete.push(realArg);\n                         }\n                     });\n                 } else {\n                     // Single selection (Mesh)\n                     objectsToDelete.push(obj);\n                 }\n\n                 // Deselect first to remove gizmos\n                 if (objectsToDelete.length > 0) {\n                     select.s.deselect();\n                     \n                     // Now delete\n                     objectsToDelete.forEach(o => {\n                         erase.deleteObject(o);\n                     });\n                     \n                     renderScene();\n                 }\n            }\n        }\n    },\n    onLayerAdd(layer) {\n      const layerGroup = new THREE.Group();\n      layerGroup.name = `Layer_${layer.id}`;\n      layerGroup.userData.layerId = layer.id;\n      scene.add(layerGroup);\n      this.layerGroups[layer.id] = layerGroup;\n    },\n    onLayerDelete(layer) {\n      const layerGroup = this.layerGroups[layer.id];\n      if (layerGroup) {\n        while(layerGroup.children.length > 0) {\n          layerGroup.remove(layerGroup.children[0]);\n        }\n        scene.remove(layerGroup);\n        delete this.layerGroups[layer.id];\n        renderScene();\n      }\n    },\n    onLayerSelect(layer) {\n      this.activeLayerId = layer.id;\n    },\n    onLayerChange(layer) {\n      const layerGroup = this.layerGroups[layer.id];\n      if (layerGroup) {\n        layerGroup.visible = layer.visible;\n        layerGroup.traverse((child) => {\n          if (child.isMesh && child.userData && child.userData.stroke) {\n               // Update stroke opacity\n               let opacity = layer.opacity / 100;\n               // If item has its own alpha, multiply? For now, override or multiply with base stroke opacity\n               let strokeOpacity = child.userData.stroke.opacity !== undefined ? child.userData.stroke.opacity : 1;\n               child.material.opacity = strokeOpacity * opacity;\n               child.material.transparent = true;\n               if(child.material.uniforms && child.material.uniforms.opacity) {\n                   child.material.uniforms.opacity.value = child.material.opacity;\n               }\n          } else if (child.material) {\n            // General objects\n            let opacity = layer.opacity / 100;\n            if (Array.isArray(child.material)) {\n              child.material.forEach(mat => {\n                mat.opacity = opacity;\n                mat.transparent = opacity < 1;\n              });\n            } else {\n              child.material.opacity = opacity;\n              child.material.transparent = opacity < 1;\n            }\n          }\n        });\n        renderScene();\n      }\n    },\n    onLayerDuplicate(payload) {\n        // payload: { newLayer, originalLayerId }\n        const originalGroup = this.layerGroups[payload.originalLayerId];\n        if (!originalGroup) return;\n\n        const newGroup = new THREE.Group();\n        newGroup.name = `Layer_${payload.newLayer.id}`;\n        newGroup.userData.layerId = payload.newLayer.id;\n\n        // Deep clone children\n        originalGroup.children.forEach(child => {\n            const clone = child.clone(true); // Recursive clone\n            \n            // We must update UUIDs for the system to treat them as new unique objects\n            // Also need to update userData logic if it references UUIDs\n            clone.uuid = THREE.MathUtils.generateUUID();\n            \n            // If it's a stroke, we might want to ensure the material is unique if we plan to change it independently later?\n            // Usually cloning mesh shares material. \n            // For independent layer opacity, sharing material is tricky if we modify material opacity directly.\n            // But we do modify directly in onLayerChange. So we should clone materials too.\n            if (clone.material) {\n                clone.material = clone.material.clone();\n            }\n            \n            newGroup.add(clone);\n        });\n\n        scene.add(newGroup);\n        this.layerGroups[payload.newLayer.id] = newGroup;\n        renderScene();\n    },\n    onBloomChange(settings) {\n        if (this.bloomPass) {\n            this.bloomPass.enabled = settings.enabled;\n            this.bloomPass.strength = settings.strength;\n            this.bloomPass.threshold = settings.threshold;\n            this.bloomPass.radius = settings.radius;\n        }\n    },\n    getActiveLayerGroup() {\n      return this.layerGroups[this.activeLayerId];\n    },\n  },\n  watch: {\n    'windowStates.properties': function(val) {\n        this.propertiesVisible = val;\n    }\n  },\n  mounted() {\n    this.init();\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n    this.animate();\n\n    this.onLayerAdd({ id: 1, name: \"Layer 1\", visible: true, opacity: 100, locked: false });\n\n    vm = this;\n    this.cameraResetDisabled = false; \n  },\n  beforeUnmount() {\n      window.removeEventListener(\"keydown\", this.handleKeyDown);\n  }\n};\n</script>\n\n<style>\n@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');\n\n:root {\n  --bg-color: rgb(60, 57, 60);\n  --accent-color: rgb(255, 176, 0);\n  --accent-color-selected: rgb(228, 156, 0);\n  --ui-bg-color: rgb(30, 30, 30);\n  --line-color-lightest: rgb(255, 242, 213);\n  --line-color-light: rgb(255, 231, 178);\n  --line-color-medium: rgb(255, 220, 142);\n  --line-color-dark: rgb(255, 209, 107);\n}\n\nbody,\nhtml,\n#app {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  touch-action: manipulation;\n  font-weight: 900;\n  color: #1c1c1e;\n}\n\nbutton {\n  font-weight: 900;\n  color: #1c1c1e;\n}\n\n#app {\n  font-family: 'Inter', Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  height: 100%;\n  width: 100%;\n}\n\ninput[type=\"radio\"] {\n  opacity: 0;\n  position: fixed;\n  width: 0;\n}\n\ninput[type=\"radio\"]:checked + label {\n  background-color: #ffe8b3;\n}\n\ninput[type=\"radio\"]:not(:checked) + label {\n  background-color: #ffffff;\n}\n\n.disabled {\n  pointer-events: none;\n  touch-action: none;\n  opacity: 0.6;\n}\n\n.hidden {\n  display: none;\n}\n\na {\n  color: #ffb000;\n  text-decoration: none;\n}\n\na:hover {\n  color: #ff8400;\n}\n\n@media (min-width: 320px) and (max-width: 480px) {\n  #viewport {\n    display: none;\n  }\n\n  .lineSettings {\n    display: none;\n  }\n\n  .soapbar {\n    display: none;\n  }\n\n  .canvasSettings {\n    top: auto;\n    bottom: 12px;\n  }\n}\n</style>\n","import * as THREE from 'three'\n\n// Author: Fyrestar https://mevedia.com (https://github.com/Fyrestar/THREE.InfiniteGridHelper)\n// Author: Fyrestar https://mevedia.com (https://github.com/Fyrestar/THREE.InfiniteGridHelper)\nexport default function InfiniteGridHelper(size1, size2, color, distance, axes = 'xzy', color2, distanceNear = 0) {\n\n    color = color || new THREE.Color('white');\n    color2 = color2 || new THREE.Color('white'); // Default second color\n    size1 = size1 || 10;\n    size2 = size2 || 100;\n\n    distance = distance || 8000;\n    distanceNear = distanceNear || 0;\n\n\n\n    const planeAxes = axes.substr(0, 2);\n\n    const geometry = new THREE.PlaneBufferGeometry(2, 2, 1, 1);\n\n    const material = new THREE.ShaderMaterial({\n\n        side: THREE.DoubleSide,\n\n        uniforms: {\n            uSize1: {\n                value: size1\n            },\n            uSize2: {\n                value: size2\n            },\n            uColor: {\n                value: color\n            },\n            uColor2: {\n                value: color2\n            },\n            uDistance: {\n                value: distance\n            },\n            uDistanceNear: {\n                value: distanceNear\n            }\n        },\n        transparent: true,\n        vertexShader: `\n           \n           varying vec3 worldPosition;\n\t\t   \n           uniform float uDistance;\n           \n           void main() {\n           \n                vec3 pos = position.${axes} * uDistance;\n                pos.${planeAxes} += cameraPosition.${planeAxes};\n                \n                worldPosition = pos;\n                \n                gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n           \n           }\n           `,\n\n\n        fragmentShader: `\n           \n           varying vec3 worldPosition;\n           \n           uniform float uSize1;\n           uniform float uSize2;\n           uniform vec3 uColor;\n           uniform vec3 uColor2;\n           uniform float uDistance;\n           uniform float uDistanceNear;\n            \n            \n            \n            float getGrid(float size) {\n            \n                vec2 r = worldPosition.${planeAxes} / size;\n                \n                \n                vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);\n                float line = min(grid.x, grid.y);\n                \n            \n                return 1.0 - min(line, 1.0);\n            }\n            \n           void main() {\n           \n                \n                  float dist = distance(cameraPosition.${planeAxes}, worldPosition.${planeAxes});\n                  float d = clamp((uDistance - dist) / (uDistance - uDistanceNear), 0.0, 1.0);\n                \n                  float g1 = getGrid(uSize1);\n                  float g2 = getGrid(uSize2);\n                  \n                  // Mix colors: if g2 (large grid) is present, use uColor2, else use uColor\n                  vec3 color = mix(uColor, uColor2, g2); \n                  \n                  gl_FragColor = vec4(color.rgb, mix(g2, g1, g1) * pow(d, 3.0));\n                  gl_FragColor.a = mix(0.5 * gl_FragColor.a, gl_FragColor.a, g2);\n                \n                  if ( gl_FragColor.a <= 0.0 ) discard;\n                \n           \n           }\n           \n           `,\n\n        extensions: {\n            derivatives: true\n        }\n\n    });\n\n\n    // THREE.Mesh.call( this, geometry, material );\n\n    // this.frustumCulled = false;\n\n    let grid = new THREE.Mesh(geometry, material);\n\n    grid.frustumCulled = false;\n\n    return grid\n\n}\n\nInfiniteGridHelper.prototype = {\n    ...THREE.Mesh.prototype,\n    ...THREE.Object3D.prototype,\n    ...THREE.EventDispatcher.prototype\n};","<template>\n  <div\n    @touchstart=\"handleInput\"\n    @touchmove=\"handleInput\"\n    @touchend=\"handleInput\"\n    @mousedown=\"handleInput\"\n    @mousemove=\"handleInput\"\n    @mouseup=\"handleInput\"\n    @contextmenu=\"handleInput\"\n    id=\"threed\"\n  >\n    <span v-if=\"displayTouches\">\n      <svg\n        v-for=\"item in touches\"\n        :key=\"item.clientX\"\n        class=\"cursor\"\n        :style=\"{\n          top: item.clientY - 52 / 2 + 'px',\n          left: item.clientX - 52 / 2 + 'px',\n        }\"\n        width=\"52\"\n        height=\"52\"\n        viewBox=\"0 0 52 52\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <circle cx=\"26\" cy=\"24\" r=\"22\" fill=\"url(#paint0_radial)\" />\n        <g filter=\"url(#filter0_d)\">\n          <circle\n            cx=\"26\"\n            cy=\"24\"\n            r=\"22\"\n            stroke=\"white\"\n            stroke-opacity=\"0.38\"\n            stroke-width=\"0.5\"\n          />\n        </g>\n        <defs>\n          <filter\n            id=\"filter0_d\"\n            x=\"0.75\"\n            y=\"0.75\"\n            width=\"50.5\"\n            height=\"50.5\"\n            filterUnits=\"userSpaceOnUse\"\n            color-interpolation-filters=\"sRGB\"\n          >\n            <feFlood flood-opacity=\"0\" result=\"BackgroundImageFix\" />\n            <feColorMatrix\n              in=\"SourceAlpha\"\n              type=\"matrix\"\n              values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\"\n            />\n            <feOffset dy=\"2\" />\n            <feGaussianBlur stdDeviation=\"1.5\" />\n            <feColorMatrix\n              type=\"matrix\"\n              values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.7 0\"\n            />\n            <feBlend\n              mode=\"normal\"\n              in2=\"BackgroundImageFix\"\n              result=\"effect1_dropShadow\"\n            />\n            <feBlend\n              mode=\"normal\"\n              in=\"SourceGraphic\"\n              in2=\"effect1_dropShadow\"\n              result=\"shape\"\n            />\n          </filter>\n          <radialGradient\n            id=\"paint0_radial\"\n            cx=\"0\"\n            cy=\"0\"\n            r=\"1\"\n            gradientUnits=\"userSpaceOnUse\"\n            gradientTransform=\"translate(26 24) rotate(90) scale(22)\"\n          >\n            <stop stop-color=\"white\" stop-opacity=\"0\" />\n            <stop offset=\"1\" stop-color=\"white\" stop-opacity=\"0.42\" />\n          </radialGradient>\n        </defs></svg\n    ></span>\n  </div>\n</template>\n\n<script>\nimport { draw } from \"./draw.js\";\nimport { erase } from \"./erase.js\";\nimport { select } from \"./select.js\";\nimport { undoManager } from \"./UndoRedo.vue\";\n\nimport * as THREE from \"three\";\nimport { canvas, controls } from \"./Canvas.vue\";\nimport { scene, camera, cameraControls, renderScene } from \"../App.vue\";\n\nexport default {\n  name: \"Input\",\n  data() {\n    return {\n      mouse: {\n        down: false,\n        tx: undefined, //x coord for threejs\n        ty: undefined, //y coord for threejs\n        cx: undefined, //x coord for canvas\n        cy: undefined, //y coord for canvas\n        force: 0,\n        touchLengthHistory: [0, 0],\n        multiTouched: false,\n        eventCancelled: false,\n      },\n      displayTouches: false,\n      touches: [],\n      movingCanvas: false,\n      isTransformingSelection: false,\n    };\n  },\n  props: {\n    selectedTool: String,\n    toolEnabled: Boolean,\n    mirror: [Boolean, String],\n    stroke: [Object],\n    fill: [Object],\n    radial: Boolean,\n    sectors: Number,\n    radialAxis: String,\n    localSymmetry: Boolean,\n    snapConfig: Object,\n    drawingMode: {\n        type: String,\n        default: 'surface' // 'surface', 'grid', 'view'\n    }\n  },\n  emits: [\"mouse-coordinates\"],\n  methods: {\n    updateMouseCoordinates: function (event) {\n      if (event.touches) {\n        this.mouse.tx =\n          (event.changedTouches[0].pageX / window.innerWidth) * 2 - 1;\n        this.mouse.ty =\n          -(event.changedTouches[0].pageY / window.innerHeight) * 2 + 1;\n        this.mouse.cx = event.changedTouches[0].pageX;\n        this.mouse.cy = event.changedTouches[0].pageY;\n\n        this.mouse.touchLengthHistory.push(event.touches.length);\n        this.mouse.touchLengthHistory.shift();\n\n        if (event.touches[0] && event.touches[0][\"force\"] !== undefined) {\n          this.mouse.force = event.touches[0][\"force\"];\n        } else {\n          this.mouse.force = 0;\n        }\n      } else {\n        if (event.button == 0) {\n          this.mouse.tx = (event.clientX / window.innerWidth) * 2 - 1;\n          this.mouse.ty = -(event.clientY / window.innerHeight) * 2 + 1;\n          this.mouse.cx = event.clientX;\n          this.mouse.cy = event.clientY;\n        }\n      }\n    },\n    onStart: function (event) {\n      if ((event.button && event.button != 0) || this.toolEnabled === false || !cameraControls) {\n        return;\n      }\n\n      this.touches = [];\n      //this is just to display the touches event\n      if (event.touches?.length > 0 && this.displayTouches == true) {\n        for (let i = 0; i < event.touches.length; i++) {\n          this.touches.push(event.touches[i]);\n        }\n      }\n\n      if (\n        event.button == 0 ||\n        event.touches.length == 1 ||\n        event.touches.force > 0\n      ) {\n        this.mouse.down = true;\n        this.mouse.eventCancelled = false;\n        this.mouse.multiTouched = false;\n        this.mouse.clickStartTime = Date.now(); // Track click duration\n        this.mouse.startCx = this.mouse.cx; // Track click position\n        this.mouse.startCy = this.mouse.cy;\n\n        let raycaster;\n        switch (this.selectedTool) {\n          case \"draw\": {\n            raycaster = new THREE.Raycaster();\n            raycaster.setFromCamera(\n              new THREE.Vector2(this.mouse.tx, this.mouse.ty),\n              camera\n            );\n            \n            // Transform Controls Logic\n            if (\n              (controls.mode === \"combined\" &&\n                controls.children.length > 0 &&\n                raycaster.intersectObjects(\n                  controls.children[0].children[10].children\n                )[0] !== undefined &&\n                controls.enabled === true) ||\n              (controls.mode === \"scale\" &&\n                controls.children.length > 0 &&\n                raycaster.intersectObjects(\n                  controls.children[0].children[5].children\n                )[0] !== undefined &&\n                controls.enabled === true)\n            ) {\n              this.movingCanvas = true;\n              cameraControls.enabled = false;\n              return;\n            } \n            \n             // Check intersection\n             const intersection = this.getIntersection(this.mouse.tx, this.mouse.ty);\n\n             if (intersection.hit) {\n                // Drawing Mode\n                if (controls.enabled === true) {\n                  controls.visible = false;\n                  renderScene();\n                }\n                cameraControls.enabled = false;\n                \n                const snappedPoint = this.findSnap(this.mouse.tx, this.mouse.ty, intersection.point);\n                // If snapped, use the snapped point. \n                // Note: draw.js treats \"unproject=true\" as \"Raycast against canvas\". \n                // If we are in grid/view mode, we pass unproject=false and proper 3D coords.\n                // If we are in surface mode, we pass unproject=true (intersection.unproject) \n                \n                // However, if we have a snappedPoint, we ALWAYS pass it, effectively overriding typical unproject logic\n                \n                // For Surface mode without snap, we want unproject=true so draw.js calculates faces etc.\n                // For Grid/View mode without snap, we want unproject=false and manual coords.\n                \n                let startX = this.mouse.tx; // only if unproject=true\n                let startY = this.mouse.ty; \n                let startZ = 0;\n                \n                if (!intersection.unproject) {\n                    // Manual 3D coords\n                    startX = intersection.point.x;\n                    startY = intersection.point.y;\n                    startZ = intersection.point.z;\n                }\n\n                draw.onStart(\n                  startX,\n                  startY,\n                  startZ,\n                  this.mouse.force,\n                  intersection.unproject,\n                  this.mirror,\n                  this.stroke,\n                  this.fill,\n                  this.radial,\n                  this.sectors,\n                  this.radialAxis,\n                  this.localSymmetry,\n                  snappedPoint\n                );\n             } else {\n                // Background Mode\n                cameraControls.enabled = true;\n             }\n             break;\n          }\n          case \"erase\":\n            cameraControls.enabled = false;\n            erase.onStart(this.mouse.cx, this.mouse.cy);\n            break;\n          case \"select\":\n            if (select.transforming && select.transforming()) {\n                 this.isTransformingSelection = true;\n                 cameraControls.enabled = false;\n                 return;\n            }\n            this.isTransformingSelection = false;\n            cameraControls.enabled = false;\n            select.onStart(\n              this.mouse.tx,\n              this.mouse.ty,\n              this.mouse.cx,\n              this.mouse.cy,\n              event.ctrlKey\n            );\n            break;\n          default:\n            break;\n        }\n      } else {\n        //this means that we are escalating from a single touch to a multitouch and then we should cancel whatever input we started\n        this.mouse.multiTouched = true;\n        if (\n          this.mouse.touchLengthHistory[0] === 1 &&\n          this.mouse.touchLengthHistory[1] === 2\n        ) {\n          this.mouse.eventCancelled = true;\n          switch (this.selectedTool) {\n            case \"draw\":\n              draw.onCancel();\n              break;\n            case \"erase\":\n              erase.onCancel();\n              break;\n            case \"select\":\n              select.onCancel();\n              break;\n            default:\n              break;\n          }\n        }\n      }\n    },\n    onMove: function (event) {\n      if ((event.button && event.button != 0) || this.toolEnabled === false || !cameraControls)\n        return;\n\n      this.touches = [];\n      if (event.touches?.length > 0 && this.displayTouches == true) {\n        for (let i = 0; i < event.touches.length; i++) {\n          this.touches.push(event.touches[i]);\n        }\n      }\n\n      if (this.mouse.down) {\n         if (event.button == 0 || event.touches.length == 1) {\n          switch (this.selectedTool) {\n            case \"draw\":\n              // Only draw if we actually started drawing (which means cameraControls is disabled)\n               if (cameraControls.enabled === false && this.movingCanvas === false) {\n                  // Ortho/Polar Constraint Logic (Shift Key)\n                  let tx = this.mouse.tx;\n                  let ty = this.mouse.ty;\n\n                  // Simple shift logic (if needed in future, can be re-enabled/adapted)\n                  \n                  // Re-calc intersection for move\n                  const intersection = this.getIntersection(tx, ty); // tx/ty from mouse\n                  \n                  let moveX = tx;\n                  let moveY = ty;\n                  let moveZ = 0;\n                  \n                   if (intersection.hit && !intersection.unproject) {\n                        moveX = intersection.point.x;\n                        moveY = intersection.point.y;\n                        moveZ = intersection.point.z;\n                   }\n\n                   const snappedPoint = this.findSnap(tx, ty, intersection.point);\n                   \n                   if (snappedPoint && this.snapIndicator) {\n                       this.snapIndicator.position.copy(snappedPoint);\n                       this.snapIndicator.visible = true;\n                   } else if (this.snapIndicator) {\n                       this.snapIndicator.visible = false;\n                   }\n\n                   draw.onMove(\n                     moveX,\n                     moveY,\n                     moveZ,\n                     this.mouse.force,\n                     intersection.hit ? intersection.unproject : true,\n                     snappedPoint\n                   );\n               } else if (this.movingCanvas === true) {\n                // Moving transform controls, do nothing here\n                return;\n              }\n              break;\n            case \"erase\":\n              erase.onMove(this.mouse.cx, this.mouse.cy);\n              break;\n            case \"select\":\n              select.onMove(this.mouse.cx, this.mouse.cy);\n              break;\n            default:\n              break;\n          }\n        } else {\n          //cameraControls handle the multitouch\n        }\n      } else {\n          // Mouse/Touch NOT down - Hover Snap Feedback\n          if (this.selectedTool === \"draw\" && this.toolEnabled && this.snapConfig && this.snapConfig.enabled) {\n              const intersection = this.getIntersection(this.mouse.tx, this.mouse.ty);\n              const snappedPoint = this.findSnap(this.mouse.tx, this.mouse.ty, intersection.point);\n              if (snappedPoint && this.snapIndicator) {\n                  this.snapIndicator.position.copy(snappedPoint);\n                  this.snapIndicator.visible = true;\n                  renderScene();\n              } else if (this.snapIndicator && this.snapIndicator.visible) {\n                  this.snapIndicator.visible = false;\n                  renderScene();\n              }\n          }\n      }\n    },\n    onEnd: function (event) {\n      if (this.toolEnabled === false || !cameraControls) return;\n      this.touches = [];\n\n      // Right Click (Undo)\n      if (event.button === 2) {\n          if (undoManager.hasUndo()) {\n              undoManager.undo();\n              // Try a reactive update if needed, though undoManager handles logic\n              // Access vm to update UI if possible or just rely on undoManager callback\n              import(\"../App.vue\").then(module => {\n                  if (module.vm && module.vm.$refs.undoRedo) {\n                      module.vm.$refs.undoRedo.updateUi();\n                  }\n              })\n          }\n          return;\n      }\n\n      if (event.button && event.button != 0) return;\n\n      if (this.mouse.multiTouched || this.mouse.eventCancelled) {\n        if (controls.enabled === true && canvas.visible === true) {\n          controls.visible = true;\n          renderScene();\n        }\n        cameraControls.enabled = true;\n        return;\n      } else {\n        switch (this.selectedTool) {\n          case \"draw\":\n            if (this.movingCanvas === true) {\n              this.movingCanvas = false;\n            } else {\n              if (cameraControls.enabled === false) {\n                 // We were drawing\n                 draw.onEnd(this.mirror);\n                 if (controls.enabled === true && canvas.visible === true) {\n                   controls.visible = true;\n                   renderScene();\n                 }\n              } else {\n                 // We were Orbiting (cameraControls was enabled)\n                 // Check for \"Click\" (Toggle View) logic\n                 const clickDuration = Date.now() - this.mouse.clickStartTime;\n                 const dist = Math.sqrt(\n                   Math.pow(this.mouse.cx - this.mouse.startCx, 2) + \n                   Math.pow(this.mouse.cy - this.mouse.startCy, 2)\n                 );\n                 \n                 if (clickDuration < 300 && dist < 5) {\n                    this.toggleTopFrontView();\n                 }\n              }\n            }\n            break;\n          case \"erase\":\n            erase.onEnd();\n            break;\n          case \"select\":\n            if (this.isTransformingSelection) {\n                this.isTransformingSelection = false;\n                select.dragged = false; \n                if(select && select.s && select.s.controls) select.s.controls.axis = null;\n                cameraControls.enabled = true;\n                if (controls.enabled === true && canvas.visible === true) {\n                    controls.visible = true;\n                    renderScene();\n                }\n                return;\n            }\n            select.onEnd(this.mouse.tx, this.mouse.ty);\n            break;\n          default:\n            break;\n        }\n      }\n      this.mouse.down = false;\n      this.mouse.distance = 0;\n      if (this.snapIndicator) this.snapIndicator.visible = false;\n      cameraControls.enabled = true; // Always restore camera controls\n    },\n    toggleTopFrontView: function() {\n        // Simple logic to toggle between Top and Front views\n        // This takes the current position and decides where to go\n        // Top: (0, Y, 0), Front: (0, 0, Z)\n        \n        let target = new THREE.Vector3();\n        cameraControls.getTarget(target);\n        \n        // Approximate current position\n        const pos = camera.position;\n        const isTop = Math.abs(pos.y) > Math.abs(pos.z) && Math.abs(pos.y) > Math.abs(pos.x);\n        \n        if (isTop) {\n            // Go to Front\n             cameraControls.rotateTo(0, Math.PI / 2, true);\n        } else {\n            // Go to Top\n             cameraControls.rotateTo(0, 0, true);\n        }\n    },\n    getIntersection(tx, ty) {\n        if (!camera) return { hit: false };\n\n        if (!this.drawingMode || this.drawingMode === 'surface') {\n             const raycaster = new THREE.Raycaster();\n             raycaster.setFromCamera(new THREE.Vector2(tx, ty), camera);\n             const intersects = raycaster.intersectObjects([canvas]);\n             if (intersects.length > 0) {\n                 return { point: intersects[0].point, unproject: true, hit: true };\n             }\n             return { unproject: true, hit: false };\n        } \n        else if (this.drawingMode === 'grid') {\n             const raycaster = new THREE.Raycaster();\n             raycaster.setFromCamera(new THREE.Vector2(tx, ty), camera);\n             const plane = new THREE.Plane(new THREE.Vector3(0, 1, 0), 0);\n             const target = new THREE.Vector3();\n             const hit = raycaster.ray.intersectPlane(plane, target);\n             if (hit) {\n                 return { point: hit, unproject: false, hit: true };\n             }\n             return { unproject: false, hit: false };\n        }\n        else if (this.drawingMode === 'view') {\n             const raycaster = new THREE.Raycaster();\n             raycaster.setFromCamera(new THREE.Vector2(tx, ty), camera);\n             \n             let targetV = new THREE.Vector3();\n             cameraControls.getTarget(targetV);\n             \n             const normal = new THREE.Vector3();\n             camera.getWorldDirection(normal).normalize();\n             \n             const plane = new THREE.Plane().setFromNormalAndCoplanarPoint(normal, targetV);\n             const hit = raycaster.ray.intersectPlane(plane, targetV); \n             \n             if (hit) {\n                 return { point: hit, unproject: false, hit: true };\n             }\n             return { unproject: false, hit: false };\n        }\n        return { hit: false };\n    },\n    findSnap(tx, ty, fallbackPoint) {\n      if (!this.snapConfig || !this.snapConfig.enabled) return null;\n\n      if (!camera || !scene) return null;\n      \n      const mousePos = fallbackPoint ? fallbackPoint : null;\n      // If we don't have a point on plane, and snap only relies on mousePos, skip?\n      // Actually existing snap logic did: raycaster intersect canvas -> mousePos.\n      // So if fallbackPoint is null (off canvas/grid), we can't snap to \"mouse position\".\n      // But we can still raycast against objects to find endpoints?\n      // The cursor ray is tx, ty.\n      \n      if (!mousePos && !this.snapConfig.endpoints && !this.snapConfig.midpoints) return null; // Need mousePos for grid snap\n      \n      const raycaster = new THREE.Raycaster();\n      raycaster.setFromCamera(new THREE.Vector2(tx, ty), camera);\n      \n      // If we are in Surface mode, \"mousePos\" acts as the center of snap search on surface.\n      // In old logic: intersects[0].point was mousePos.\n      // Re-use fallbackPoint which comes from getIntersection.\n      if (!mousePos && (this.drawingMode === 'surface' || !this.drawingMode)) {\n           // Try to find it if not provided\n           const intersects = raycaster.intersectObjects([canvas]);\n           if (intersects.length === 0) return null;\n           // mousePos = intersects[0].point; (cant assign to const)\n      }\n      \n      // If null, endpoint snap calc distance from RAY? \n      // Simplified: Assume we need a valid surface/plane hit to snap near it.\n      if (!mousePos) return null;\n\n      const threshold = this.snapConfig.threshold || 0.5;\n      let bestPoint = null;\n      let minDistance = threshold;\n\n      scene.traverse((obj) => {\n        if (obj.isMesh && obj.userData && obj.userData.stroke) {\n          const vertices = obj.userData.vertices;\n          if (!vertices || vertices.length === 0) return;\n\n          // Endpoints\n          if (this.snapConfig.endpoints) {\n             const start = new THREE.Vector3(...vertices[0]);\n             const end = new THREE.Vector3(...vertices[vertices.length-1]);\n             \n             [start, end].forEach(p => {\n               // Project p onto current drawing plane if needed?\n               // User said: \"se proyecta sobre el plano activo\"\n               let projectedP = p.clone();\n               if (this.drawingMode === 'grid') {\n                   projectedP.y = 0; \n               } else if (this.drawingMode === 'view') {\n                   // Project onto view plane?\n                   // Calculate plane again\n                   let targetV = new THREE.Vector3(); \n                   cameraControls.getTarget(targetV);\n                   const normal = new THREE.Vector3(); \n                   camera.getWorldDirection(normal).normalize();\n                   const plane = new THREE.Plane().setFromNormalAndCoplanarPoint(normal, targetV);\n                   plane.projectPoint(p, projectedP);\n               }\n\n               const dist = mousePos.distanceTo(projectedP);\n               if (dist < minDistance) {\n                 minDistance = dist;\n                 bestPoint = projectedP;\n               }\n             });\n          }\n\n          // Midpoints\n          if (this.snapConfig.midpoints) {\n            for (let i = 0; i < vertices.length - 1; i++) {\n              const p1 = new THREE.Vector3(...vertices[i]);\n              const p2 = new THREE.Vector3(...vertices[i+1]);\n              const mid = p1.clone().add(p2).multiplyScalar(0.5);\n              \n              let projectedMid = mid.clone();\n              if (this.drawingMode === 'grid') {\n                   projectedMid.y = 0;\n              } else if (this.drawingMode === 'view') {\n                   let targetV = new THREE.Vector3(); \n                   cameraControls.getTarget(targetV);\n                   const normal = new THREE.Vector3(); \n                   camera.getWorldDirection(normal).normalize();\n                   const plane = new THREE.Plane().setFromNormalAndCoplanarPoint(normal, targetV);\n                   plane.projectPoint(mid, projectedMid);\n              }\n              \n              const dist = mousePos.distanceTo(projectedMid);\n              if (dist < minDistance) {\n                 minDistance = dist;\n                 bestPoint = projectedMid;\n              }\n            }\n          }\n        }\n      });\n      \n      // Grid Snapping (Mathematical Grid)\n      if (this.snapConfig.grid && !bestPoint) {\n         // Adapt grid snap to plane\n         // If Grid mode, snap X, Z.\n         if (this.drawingMode === 'grid') {\n             const gridPos = new THREE.Vector3(\n               Math.round(mousePos.x),\n               0,\n               Math.round(mousePos.z)\n             );\n             if (mousePos.distanceTo(gridPos) < threshold) {\n               bestPoint = gridPos;\n             }\n         } else if (this.drawingMode === 'surface') {\n             // 3D Grid snap?\n             const gridPos = new THREE.Vector3(\n               Math.round(mousePos.x),\n               Math.round(mousePos.y),\n               Math.round(mousePos.z)\n             );\n             if (mousePos.distanceTo(gridPos) < threshold) {\n               bestPoint = gridPos;\n             }\n         }\n         // View mode grid snap might be weird in world coords, skip for now or use implicit world grid\n      }\n\n      return bestPoint;\n    },\n    handleInput: function (event) {\n      if (event.type === 'contextmenu') {\n          event.preventDefault();\n          return;\n      }\n      this.updateMouseCoordinates(event);\n\n      // Handle hover snap feedback if mouse is not down but we are in draw mode?\n      // Actually let's just do it during onMove for now.\n      \n      switch (event.type) {\n        case \"touchstart\":\n          this.onStart(event);\n          break;\n        case \"touchmove\":\n          this.onMove(event);\n          break;\n        case \"touchend\":\n          if (this.toolEnabled === false) {\n            this.$emit(\"mouse-coordinates\", {\n              x: this.mouse.tx,\n              y: this.mouse.ty,\n            });\n          }\n          this.onEnd(event);\n          break;\n        case \"mousedown\":\n          this.onStart(event);\n          break;\n        case \"mousemove\":\n          this.onMove(event);\n          break;\n        case \"mouseup\":\n          if (this.toolEnabled === false) {\n            this.$emit(\"mouse-coordinates\", {\n              x: this.mouse.tx,\n              y: this.mouse.ty,\n            });\n          }\n          this.onEnd(event);\n          break;\n        default:\n        //nothing;\n      }\n    },\n  },\n  watch: {},\n  mounted() {\n    this.$nextTick(() => {\n        if (!scene) {\n            console.warn(\"Input.vue: Scene still not ready after nextTick.\");\n            // Retry once more with a small delay if needed or just fail gracefully\n        }\n        \n        if (window.location.hash) {\n          var hash = window.location.hash.substring(1); \n          if (hash === \"displayTouches\") {\n            this.displayTouches = true;\n          }\n        }\n\n        // Setup Snap Indicator\n        if (scene) {\n            this.snapIndicator = new THREE.Mesh(\n              new THREE.SphereGeometry(0.1, 16, 16),\n              new THREE.MeshBasicMaterial({ \n                color: 0x4285f4, \n                transparent: true, \n                opacity: 0.8,\n                depthTest: false,\n                depthWrite: false\n              })\n            );\n            this.snapIndicator.renderOrder = 999;\n            this.snapIndicator.visible = false;\n            scene.add(this.snapIndicator);\n        }\n    });\n  },\n};\n</script>\n\n<style>\n#container {\n  height: 100%;\n  width: 100%;\n}\n\n.cursor {\n  position: absolute;\n  z-index: 6;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  touch-action: none;\n}\n\n#twod {\n  position: absolute;\n  z-index: 1;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n#threed {\n  width: 100%;\n  height: 100%;\n}\n</style>","<template>\n  <draggable-window \n    ref=\"win\"\n    title=\"Canvas\" \n    :initialX=\"initialX || 12\" \n    :initialY=\"initialY || 12\"\n    :visible=\"selectedTool == 'draw'\"\n    :reopenTrigger=\"reopenTrigger\"\n    :is-open=\"isOpen\"\n    @close=\"$emit('close')\"\n  >\n    <div class=\"canvas-controls\">\n      <!-- Transform Mode -->\n      <button \n        class=\"control-btn\"\n        @click=\"toggleTransformMode()\"\n        :disabled=\"!visible\"\n        :title=\"mode === 'combined' ? 'Move Mode' : 'Scale Mode'\"\n      >\n        <img v-if=\"mode === 'combined' ? 'Move Mode' : 'Scale Mode'\" src=\"@/assets/icons/translate.svg\" alt=\"Move\" />\n        <img v-if=\"mode === 'scale'\" src=\"@/assets/icons/scale.svg\" alt=\"Scale\" />\n        <span class=\"tooltip\">{{ mode === 'combined' ? 'Move Mode' : 'Scale Mode' }}</span>\n      </button>\n\n      <!-- Lock/Unlock -->\n      <button \n        class=\"control-btn\"\n        :class=\"{ active: !transformationEnabled }\"\n        @click=\"toggleControls()\"\n        :disabled=\"!visible\"\n        :title=\"transformationEnabled ? 'Unlocked' : 'Locked'\"\n      >\n        <img \n          :src=\"transformationEnabled ? require('@/assets/icons/lockControls.svg') : require('@/assets/icons/unlockControls.svg')\" \n          alt=\"Lock\"\n        />\n        <span class=\"tooltip\">{{ transformationEnabled ? 'Unlocked' : 'Locked' }}</span>\n      </button>\n\n      <!-- Visible/Hidden -->\n      <button \n        class=\"control-btn\"\n        :class=\"{ active: !visible }\"\n        @click=\"toggleVisibility()\"\n        :title=\"visible ? 'Visible' : 'Hidden'\"\n      >\n        <img \n          :src=\"visible ? require('@/assets/icons/hideCanvas.svg') : require('@/assets/icons/showCanvas.svg')\" \n          alt=\"Visibility\"\n        />\n        <span class=\"tooltip\">{{ visible ? 'Visible' : 'Hidden' }}</span>\n      </button>\n\n      <!-- Snap -->\n      <button \n        class=\"control-btn\"\n        :class=\"{ active: snap }\"\n        @click=\"toggleSnap()\"\n        :disabled=\"!visible\"\n        :title=\"snap ? 'Snap On' : 'Snap Off'\"\n      >\n        <img \n          :src=\"snap ? require('@/assets/icons/snapOn.svg') : require('@/assets/icons/snapOff.svg')\" \n          alt=\"Snap\"\n        />\n        <span class=\"tooltip\">{{ snap ? 'Snap On' : 'Snap Off' }}</span>\n      </button>\n\n      <!-- Reset -->\n      <button \n        class=\"control-btn\"\n        @click=\"resetTransformation()\"\n        :disabled=\"transformationResetDisabled || !visible\"\n        title=\"Reset Canvas\"\n      >\n        <img src=\"@/assets/icons/reset.svg\" alt=\"Reset\" />\n        <span class=\"tooltip\">Reset Canvas</span>\n      </button>\n    </div>\n  </draggable-window>\n</template>\n\n<script>\nimport { reactive } from \"vue\";\nimport * as THREE from \"three\";\nimport { TransformControls } from \"./transformControls.js\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader.js\";\nimport { scene, renderer, camera, vm } from \"../App.vue\";\nimport DraggableWindow from \"./DraggableWindow.vue\";\n// import { generateMatcap } from \"./matcaps.js\";\n\n    export let canvas, controls, currentShape;\n    export let shapes = reactive([]); // List of all shapes managed by this component\n\n    let canvasMirror;\n    let geometry = new THREE.PlaneGeometry(5, 5);\n    let headGeometry;\n\n    export default {\n    name: \"Canvas\",\n    components: { DraggableWindow },\n    data() {\n        return {\n        window: window,\n        material: new THREE.MeshToonMaterial({\n            color: 0xe6edf5,\n            transparent: true,\n            opacity: 0.8,\n            side: THREE.DoubleSide,\n            polygonOffset: true,\n            polygonOffsetFactor: 2.5,\n            polygonOffsetUnits: -1,\n            emissive: new THREE.Color(\"rgb(255,255,255)\"),\n            emissiveIntensity: 0.3,\n        }),\n        startPosition: new THREE.Vector3(0.001, 0.001, 0.001),\n        startQuaternion: new THREE.Quaternion(0.001, 0.001, 0.001, 1),\n        startScale: new THREE.Vector3(1, 1, 1),\n        transformationResetDisabled: true,\n        transformationEnabled: true,\n        visible: true,\n        mode: \"combined\",\n        snap: false,\n        };\n    },\n    props: {\n        selectedShape: [String, Object], // Allow object for custom model selection\n        selectedTool: String,\n        mirror: [Boolean, String],\n        mouse: Object,\n        reopenTrigger: Number,\n        isOpen: Boolean,\n        initialX: Number,\n        initialY: Number,\n    },\n    emits: [\"selected-canvas-shape\", \"set-tool-enabled\", \"visibility-change\", \"close\"],\n    methods: {\n        getPosition() {\n        return { \n            x: this.$refs.win.currentX, \n            y: this.$refs.win.currentY \n        };\n        },\n        loadCustomModel(payload) {\n        let url, id;\n        if (typeof payload === 'object' && payload.url) {\n             url = payload.url;\n             id = payload.id;\n        } else {\n             url = payload;\n        }\n\n        if (!url) return;\n        const loader = new GLTFLoader();\n        loader.load(url, (gltf) => {\n            const model = gltf.scene;\n            \n            if (id) {\n                model.userData.customId = id;\n                model.name = \"Custom Model \" + id.substr(-4);\n            } else {\n                model.name = \"Custom Model\";\n            }\n\n            const box = new THREE.Box3().setFromObject(model);\n            const center = box.getCenter(new THREE.Vector3());\n            model.position.sub(center); \n            \n            scene.add(model);\n            shapes.push(model);\n            \n            this.selectObject(model);\n            renderer.render(scene, camera);\n        });\n        },\n        addPrimitive(type) {\n            let geo;\n            const mat = this.material.clone(); // Independent material\n            mat.visible = true;\n            mat.opacity = 0.8; \n\n            switch (type) {\n                case \"plane\":\n                    geo = new THREE.PlaneGeometry(5, 5);\n                    break;\n                case \"cube\":\n                    geo = new THREE.BoxGeometry(5, 5, 5);\n                    break;\n                case \"cylinder\":\n                    geo = new THREE.CylinderGeometry(2.5, 2.5, 5, 15);\n                    break;\n                case \"sphere\":\n                    geo = new THREE.SphereGeometry(2.5, 15, 15);\n                    break;\n                default:\n                    return;\n            }\n\n            const mesh = new THREE.Mesh(geo, mat);\n            mesh.name = type.charAt(0).toUpperCase() + type.slice(1);\n            \n            scene.add(mesh);\n            shapes.push(mesh);\n            this.selectObject(mesh);\n        },\n        addShape(mesh) {\n            // Apply Canvas Material\n            const mat = this.material.clone();\n            mat.visible = true;\n            mat.opacity = 0.8;\n            mesh.material = mat;\n            \n            // Ensure unique name\n            if (!mesh.name) mesh.name = \"Shape \" + Date.now();\n            \n            scene.add(mesh);\n            shapes.push(mesh);\n            this.selectObject(mesh);\n            renderer.render(scene, camera);\n        },\n        selectObject(object) {\n            if (!object) return;\n            \n            // Update the exported 'canvas' reference\n            // Note: Since 'canvas' is a 'let', we can reassign it.\n            // Check if controls are already attached to this object\n            if (controls.object === object) return;\n\n            controls.detach();\n            canvas = object;\n            controls.attach(canvas);\n            \n            // Update UI state if needed (e.g., reset button)\n            this.transformationResetDisabled = false; // Assume loaded models might be transformed eventually\n            \n            renderer.render(scene, camera);\n        },\n        setUp() {\n        const material = this.material;\n        canvas = new THREE.Mesh(geometry, material);\n        scene.add(canvas);\n        shapes.push(canvas);\n\n        controls = new TransformControls(camera, renderer.domElement);\n        controls.mode = \"combined\";\n        controls.addEventListener(\"change\", () => {\n            if (vm != undefined) {\n            vm.$refs.raycastCanvas.transformationResetDisabled = false;\n            }\n\n            if (canvasMirror !== undefined) {\n            var position = new THREE.Vector3();\n            canvas.getWorldPosition(position);\n            var quaternion = new THREE.Quaternion();\n            canvas.getWorldQuaternion(quaternion);\n            var scale = new THREE.Vector3();\n            canvas.getWorldScale(scale);\n            switch (vm.$refs.raycastCanvas.mirror) {\n                case \"x\":\n                canvasMirror.position.set(-position.x, position.y, position.z);\n                canvasMirror.quaternion.set(\n                    -quaternion.x,\n                    quaternion.y,\n                    quaternion.z,\n                    -quaternion.w\n                );\n                canvasMirror.scale.set(-scale.x, scale.y, scale.z);\n                canvasMirror.matrixWorldNeedsUpdate = true;\n                break;\n                case \"y\":\n                canvasMirror.position.set(position.x, -position.y, position.z);\n                canvasMirror.quaternion.set(\n                    quaternion.x,\n                    -quaternion.y,\n                    quaternion.z,\n                    -quaternion.w\n                );\n                canvasMirror.scale.set(scale.x, -scale.y, scale.z);\n                canvasMirror.matrixWorldNeedsUpdate = true;\n                break;\n                case \"z\":\n                canvasMirror.position.set(position.x, position.y, -position.z);\n                canvasMirror.quaternion.set(\n                    quaternion.x,\n                    quaternion.y,\n                    -quaternion.z,\n                    -quaternion.w\n                );\n                canvasMirror.scale.set(scale.x, scale.y, -scale.z);\n                canvasMirror.matrixWorldNeedsUpdate = true;\n                break;\n                default:\n                return;\n            }\n            }\n            renderer.render(scene, camera);\n        });\n        controls.enabled = true;\n        scene.add(controls);\n        controls.attach(canvas);\n        \n        // Add click listener for selection\n        // We'll attach to the renderer domElement or window.\n        // vm (App.vue) handles generic input, but let's add specific logic here.\n        renderer.domElement.addEventListener('pointerdown', this.onPointerDown);\n        \n        renderer.render(scene, camera);\n        },\n        onPointerDown(event) {\n            if (!this.visible || !this.transformationEnabled) return;\n            // Only select if tool is 'draw' or maybe always allowed if Gizmo is visible?\n            // User request implies selection for \"shapes\".\n            // If tool is 'draw', 'canvas' window is visible.\n            // We should check if we clicked on a shape.\n            \n            const rect = renderer.domElement.getBoundingClientRect();\n            const mouse = new THREE.Vector2();\n            mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;\n            mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;\n\n            const raycaster = new THREE.Raycaster();\n            raycaster.setFromCamera(mouse, camera);\n\n            // Raycast against all shapes\n            // Note: GLB models are Groups. Raycaster intersects meshes (recursive: true).\n            // We need to find which 'shape' (root object in shapes array) was hit.\n            const intersects = raycaster.intersectObjects(shapes, true);\n\n            if (intersects.length > 0) {\n                // Find the root shape that contains the intersected object\n                const hitObject = intersects[0].object;\n                let rootShape = null;\n                \n                // Climb up parents until we find an object in 'shapes'\n                let curr = hitObject;\n                while (curr) {\n                    if (shapes.includes(curr)) {\n                        rootShape = curr;\n                        break;\n                    }\n                    curr = curr.parent;\n                }\n\n                if (rootShape) {\n                    this.selectObject(rootShape);\n                }\n            }\n        },\n    resetTransformation() {\n      canvas.position.set(\n        this.startPosition.x,\n        this.startPosition.y,\n        this.startPosition.z\n      );\n      canvas.quaternion.set(\n        this.startQuaternion.x,\n        this.startQuaternion.y,\n        this.startQuaternion.z,\n        this.startQuaternion.w\n      );\n      canvas.scale.set(this.startScale.x, this.startScale.y, this.startScale.z);\n      renderer.render(scene, camera);\n      this.transformationResetDisabled = true;\n    },\n    toggleTransformMode() {\n      if (this.mode === \"combined\") {\n        this.mode = \"scale\";\n        controls.mode = \"scale\";\n        renderer.render(scene, camera);\n      } else {\n        this.mode = \"combined\";\n        controls.mode = \"combined\";\n        renderer.render(scene, camera);\n      }\n    },\n    toggleControls() {\n      if (controls.visible === true) {\n        this.transformationEnabled = false;\n        controls.enabled = false;\n        controls.visible = false;\n        renderer.render(scene, camera);\n      } else {\n        this.transformationEnabled = true;\n        controls.enabled = true;\n        controls.visible = true;\n        renderer.render(scene, camera);\n      }\n    },\n    toggleVisibility() {\n      if (canvas.visible === true) {\n        this.visible = false;\n        this.$emit('visibility-change', false);\n\n        if (this.transformationEnabled === true) {\n          controls.visible = false;\n        }\n\n        if (controls.enabled === true) {\n          controls.enabled = false;\n        }\n\n        canvas.visible = false;\n        renderer.render(scene, camera);\n      } else {\n        this.visible = true;\n        this.$emit('visibility-change', true);\n\n        if (this.transformationEnabled === true) {\n          controls.visible = true;\n        }\n\n        if (controls.enabled === false && this.transformationEnabled === true) {\n          controls.enabled = true;\n        }\n\n        canvas.visible = true;\n\n        renderer.render(scene, camera);\n      }\n    },\n    toggleSnap() {\n      if (this.snap === true) {\n        this.snap = !this.snap;\n        controls.translationSnap = null;\n        controls.rotationSnap = null;\n      } else {\n        this.snap = !this.snap;\n        controls.translationSnap = 1 / 3;\n        controls.rotationSnap = Math.PI / 6;\n      }\n    },\n    setUpMirror(val) {\n      switch (val) {\n        case \"x\":\n          canvasMirror = canvas.clone();\n          canvasMirror.applyMatrix4(canvas.matrixWorld.makeScale(-1, 1, 1));\n          scene.add(canvasMirror);\n          renderer.render(scene, camera);\n          break;\n        case \"y\":\n          break;\n        case \"z\":\n          break;\n        default:\n          break;\n      }\n    },\n    removeMirror() {\n      scene.remove(canvasMirror);\n    },\n    setMaterial(type) {\n         let newMat;\n         if (type === 'standard') {\n             newMat = new THREE.MeshToonMaterial({\n                color: 0xe6edf5,\n                transparent: true,\n                opacity: 0.8,\n                side: THREE.DoubleSide,\n                polygonOffset: true,\n                polygonOffsetFactor: 2.5,\n                polygonOffsetUnits: -1,\n                emissive: new THREE.Color(\"rgb(255,255,255)\"),\n                emissiveIntensity: 0.3,\n            });\n         } else {\n             let texture;\n             // Allow relative paths, http, or blobs. Basically anything that isn't 'standard'\n             if (type && type !== 'standard') {\n                 texture = new THREE.TextureLoader().load(type, () => {\n                     renderer.render(scene, camera);\n                 });\n                 \n                 newMat = new THREE.MeshMatcapMaterial({\n                     color: 0xffffff, // Ensure base color is white\n                     matcap: texture,\n                     transparent: true,\n                     opacity: 0.9,\n                     side: THREE.DoubleSide\n                 });\n             } else {\n                 return;\n             }\n         }\n         \n         this.material = newMat;\n         \n         // Update only the currently selected shape\n         if (canvas) {\n             if (canvas.isMesh) {\n                 canvas.material = newMat; \n             } else if (canvas.isGroup) {\n                 canvas.traverse(child => {\n                     if (child.isMesh) child.material = newMat;\n                 });\n             }\n         }\n         renderer.render(scene, camera);\n    },\n  },\n  watch: {\n    opacity: function (val) {\n      this.material.opacity = val;\n      if (val == 0) {\n        this.material.visible = false;\n      } else {\n        this.material.visible = true;\n      }\n      renderer.render(scene, camera);\n    },\n\n    selectedShape: function (val) {\n      if (!val) return;\n      if (val === 'custom') return; // Custom models are handled via loadCustomModel\n\n      // Handle custom model selection by ID\n      if (typeof val === 'object' && val.customId) {\n          const found = shapes.find(s => s.userData && s.userData.customId === val.customId);\n          if (found) {\n              this.selectObject(found);\n          }\n          return;\n      }\n\n      // If the current canvas is a Group (from GLB), we must replace it with a Mesh\n      // to allow applying primitive geometries.\n      if (!canvas.isMesh) {\n          // Keep reference to position/rotation/scale if we want to preserve them?\n          // For now, let's keep them.\n          const oldPos = canvas.position.clone();\n          const oldQuat = canvas.quaternion.clone();\n          const oldScale = canvas.scale.clone();\n          \n          // Remove from scene and shapes list\n          scene.remove(canvas);\n          const idx = shapes.indexOf(canvas);\n          if (idx !== -1) shapes.splice(idx, 1);\n          controls.detach();\n          \n          // Create new Mesh\n          canvas = new THREE.Mesh(new THREE.PlaneGeometry(1, 1), this.material);\n          canvas.position.copy(oldPos);\n          canvas.quaternion.copy(oldQuat);\n          canvas.scale.copy(oldScale);\n          \n          scene.add(canvas);\n          shapes.push(canvas);\n          controls.attach(canvas);\n      }\n\n      switch (val) {\n        case \"plane\":\n          if (canvas.geometry) canvas.geometry.dispose();\n          canvas.geometry = new THREE.PlaneGeometry(5, 5);\n          break;\n        case \"cube\":\n          if (canvas.geometry) canvas.geometry.dispose();\n          canvas.geometry = new THREE.BoxGeometry(5, 5, 5);\n          break;\n        case \"cylinder\":\n           if (canvas.geometry) canvas.geometry.dispose();\n          canvas.geometry = new THREE.CylinderGeometry(2.5, 2.5, 5, 15);\n          break;\n        case \"sphere\":\n           if (canvas.geometry) canvas.geometry.dispose();\n          canvas.geometry = new THREE.SphereGeometry(2.5, 15, 15);\n          break;\n        case \"head\":\n          if (canvas.geometry) canvas.geometry.dispose();\n          if (headGeometry === undefined) {\n            const loader = new GLTFLoader();\n            loader.load(\"asaro.glb\", function (gltf) {\n              headGeometry = gltf.scene.children[0].geometry;\n              // Check if canvas is still valid/same\n              if (canvas.geometry) canvas.geometry.dispose();\n              canvas.geometry = headGeometry;\n              canvas.geometry.needsUpdate = true;\n              renderer.render(scene, camera);\n            });\n          } else {\n            canvas.geometry = headGeometry;\n            canvas.geometry.needsUpdate = true;\n            renderer.render(scene, camera);\n          }\n          break;\n        default:\n          break;\n      }\n      \n      if (canvas.geometry) canvas.geometry.needsUpdate = true;\n      renderer.render(scene, camera);\n    },\n\n    mirror: function (val) {\n      if (val === false) {\n        this.removeMirror();\n      } else {\n        this.setUpMirror(val);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.canvas-controls {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  position: relative;\n}\n\n.separator {\n  width: 1px;\n  height: 32px;\n  background-color: rgba(255, 255, 255, 0.1);\n  margin: 0 4px;\n}\n\n.control-btn {\n  position: relative;\n  width: 40px;\n  height: 40px;\n  background: transparent;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n  padding: 0;\n}\n\n.control-btn:hover:not(:disabled) {\n  background: rgba(255, 255, 255, 0.1);\n  border-color: rgba(255, 255, 255, 0.2);\n}\n\n.control-btn:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n\n.control-btn.active {\n  background: rgba(255, 255, 255, 0.2);\n  border-color: rgba(255, 255, 255, 0.3);\n  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);\n}\n\n.control-btn img {\n  width: 24px;\n  height: 24px;\n  filter: brightness(0) invert(1);\n}\n\n/* Tooltip */\n.tooltip {\n  position: absolute;\n  bottom: -32px;\n  left: 50%;\n  transform: translateX(-50%);\n  background: rgba(0, 0, 0, 0.9);\n  color: white;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 11px;\n  white-space: nowrap;\n  pointer-events: none;\n  opacity: 0;\n  transition: opacity 0.2s;\n  z-index: 1000;\n}\n\n.control-btn:hover .tooltip {\n  opacity: 1;\n}\n\n/* Arrow for tooltip */\n.tooltip::before {\n  content: '';\n  position: absolute;\n  top: -4px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 0;\n  height: 0;\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-bottom: 4px solid rgba(0, 0, 0, 0.9);\n}\n\n/* Shape Dropdown */\n.shape-dropdown {\n  position: absolute;\n  top: 48px;\n  left: 0;\n  display: flex;\n  gap: 4px;\n  background: rgba(30, 30, 30, 0.95);\n  backdrop-filter: blur(16px);\n  padding: 8px;\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  z-index: 100;\n}\n\n.shape-option {\n  position: relative;\n  width: 40px;\n  height: 40px;\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 6px;\n  padding: 0;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  transition: all 0.2s;\n}\n\n.shape-option:hover {\n  background: rgba(255, 255, 255, 0.15);\n}\n\n.shape-option img {\n  width: 24px;\n  height: 24px;\n}\n</style>","import {\n    BoxGeometry,\n    BufferGeometry,\n    CylinderGeometry,\n    DoubleSide,\n    Euler,\n    Float32BufferAttribute,\n    Line,\n    LineBasicMaterial,\n    Matrix4,\n    Mesh,\n    MeshBasicMaterial,\n    Object3D,\n    OctahedronGeometry,\n    PlaneGeometry,\n    Quaternion,\n    Raycaster,\n    RingGeometry,\n    // SphereGeometry,\n    TorusGeometry,\n    Vector3,\n} from 'three';\n\nconst _raycaster = new Raycaster();\n\nconst _tempVector = new Vector3();\nconst _tempVector2 = new Vector3();\nconst _tempQuaternion = new Quaternion();\nconst _unit = {\n    X: new Vector3(1, 0, 0),\n    Y: new Vector3(0, 1, 0),\n    Z: new Vector3(0, 0, 1)\n};\n\nconst _changeEvent = { type: 'change' };\nconst _mouseDownEvent = { type: 'mouseDown' };\nconst _mouseUpEvent = { type: 'mouseUp', mode: null };\nconst _objectChangeEvent = { type: 'objectChange' };\n\nclass TransformControls extends Object3D {\n\n    constructor(camera, domElement) {\n\n        super();\n\n        if (domElement === undefined) {\n\n            console.warn('THREE.TransformControls: The second parameter \"domElement\" is now mandatory.');\n            domElement = document;\n\n        }\n\n        this.visible = false;\n        this.domElement = domElement;\n        this.domElement.style.touchAction = 'none'; // disable touch scroll\n\n        const _gizmo = new TransformControlsGizmo();\n        this._gizmo = _gizmo;\n        this.add(_gizmo);\n\n        const _plane = new TransformControlsPlane();\n        this._plane = _plane;\n        this.add(_plane);\n\n        const scope = this;\n\n        // Defined getter, setter and store for a property\n        function defineProperty(propName, defaultValue) {\n\n            let propValue = defaultValue;\n\n            Object.defineProperty(scope, propName, {\n\n                get: function () {\n\n                    return propValue !== undefined ? propValue : defaultValue;\n\n                },\n\n                set: function (value) {\n\n                    if (propValue !== value) {\n\n                        propValue = value;\n                        _plane[propName] = value;\n                        _gizmo[propName] = value;\n\n                        scope.dispatchEvent({ type: propName + '-changed', value: value });\n                        scope.dispatchEvent(_changeEvent);\n\n                    }\n\n                }\n\n            });\n\n            scope[propName] = defaultValue;\n            _plane[propName] = defaultValue;\n            _gizmo[propName] = defaultValue;\n\n        }\n\n        // Define properties with getters/setter\n        // Setting the defined property will automatically trigger change event\n        // Defined properties are passed down to gizmo and plane\n\n        defineProperty('camera', camera);\n        defineProperty('object', undefined);\n        defineProperty('enabled', true);\n        defineProperty('axis', null);\n        defineProperty('mode', 'translate');\n        defineProperty('translationSnap', null);\n        defineProperty('rotationSnap', null);\n        defineProperty('scaleSnap', null);\n        defineProperty('space', 'world');\n        defineProperty('size', 1);\n        defineProperty('dragging', false);\n        defineProperty('showX', true);\n        defineProperty('showY', true);\n        defineProperty('showZ', true);\n\n        // Reusable utility variables\n\n        const worldPosition = new Vector3();\n        const worldPositionStart = new Vector3();\n        const worldQuaternion = new Quaternion();\n        const worldQuaternionStart = new Quaternion();\n        const cameraPosition = new Vector3();\n        const cameraQuaternion = new Quaternion();\n        const pointStart = new Vector3();\n        const pointEnd = new Vector3();\n        const rotationAxis = new Vector3();\n        const rotationAngle = 0;\n        const eye = new Vector3();\n\n        // TODO: remove properties unused in plane and gizmo\n\n        defineProperty('worldPosition', worldPosition);\n        defineProperty('worldPositionStart', worldPositionStart);\n        defineProperty('worldQuaternion', worldQuaternion);\n        defineProperty('worldQuaternionStart', worldQuaternionStart);\n        defineProperty('cameraPosition', cameraPosition);\n        defineProperty('cameraQuaternion', cameraQuaternion);\n        defineProperty('pointStart', pointStart);\n        defineProperty('pointEnd', pointEnd);\n        defineProperty('rotationAxis', rotationAxis);\n        defineProperty('rotationAngle', rotationAngle);\n        defineProperty('eye', eye);\n\n        this._offset = new Vector3();\n        this._startNorm = new Vector3();\n        this._endNorm = new Vector3();\n        this._cameraScale = new Vector3();\n\n        this._parentPosition = new Vector3();\n        this._parentQuaternion = new Quaternion();\n        this._parentQuaternionInv = new Quaternion();\n        this._parentScale = new Vector3();\n\n        this._worldScaleStart = new Vector3();\n        this._worldQuaternionInv = new Quaternion();\n        this._worldScale = new Vector3();\n\n        this._positionStart = new Vector3();\n        this._quaternionStart = new Quaternion();\n        this._scaleStart = new Vector3();\n\n        this._getPointer = getPointer.bind(this);\n        this._onPointerDown = onPointerDown.bind(this);\n        this._onPointerHover = onPointerHover.bind(this);\n        this._onPointerMove = onPointerMove.bind(this);\n        this._onPointerUp = onPointerUp.bind(this);\n\n        this.domElement.addEventListener('pointerdown', this._onPointerDown);\n        this.domElement.addEventListener('pointermove', this._onPointerHover);\n        this.domElement.ownerDocument.addEventListener('pointerup', this._onPointerUp);\n\n    }\n\n    // updateMatrixWorld  updates key transformation variables\n    updateMatrixWorld() {\n\n        if (this.object !== undefined) {\n\n            this.object.updateMatrixWorld();\n\n            if (this.object.parent === null) {\n\n                console.error('TransformControls: The attached 3D object must be a part of the scene graph.');\n\n            } else {\n\n                this.object.parent.matrixWorld.decompose(this._parentPosition, this._parentQuaternion, this._parentScale);\n\n            }\n\n            this.object.matrixWorld.decompose(this.worldPosition, this.worldQuaternion, this._worldScale);\n\n            this._parentQuaternionInv.copy(this._parentQuaternion).invert();\n            this._worldQuaternionInv.copy(this.worldQuaternion).invert();\n\n        }\n\n        this.camera.updateMatrixWorld();\n        this.camera.matrixWorld.decompose(this.cameraPosition, this.cameraQuaternion, this._cameraScale);\n\n        this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize();\n\n        super.updateMatrixWorld(this);\n\n    }\n\n    pointerHover(pointer) {\n\n        if (this.object === undefined || this.dragging === true) return;\n\n        _raycaster.setFromCamera(pointer, this.camera);\n\n        const intersect = intersectObjectWithRay(this._gizmo.picker[this.mode], _raycaster);\n\n        if (intersect) {\n\n            this.axis = intersect.object.name;\n\n        } else {\n\n            this.axis = null;\n\n        }\n\n    }\n\n    pointerDown(pointer) {\n\n        if (this.object === undefined || this.dragging === true || pointer.button !== 0) return;\n\n        if (this.axis !== null) {\n\n            _raycaster.setFromCamera(pointer, this.camera);\n\n            const planeIntersect = intersectObjectWithRay(this._plane, _raycaster, true);\n\n            if (planeIntersect) {\n\n                let space = this.space;\n\n                if (this.mode === 'scale') {\n\n                    space = 'local';\n\n                } else if (this.axis === 'E' || this.axis === 'XYZE' || this.axis === 'XYZ') {\n\n                    space = 'world';\n\n                }\n\n                if (space === 'local' && this.mode === 'rotate') {\n\n                    const snap = this.rotationSnap;\n\n                    if (this.axis === 'X' && snap) this.object.rotation.x = Math.round(this.object.rotation.x / snap) * snap;\n                    if (this.axis === 'Y' && snap) this.object.rotation.y = Math.round(this.object.rotation.y / snap) * snap;\n                    if (this.axis === 'Z' && snap) this.object.rotation.z = Math.round(this.object.rotation.z / snap) * snap;\n\n                }\n\n                this.object.updateMatrixWorld();\n                this.object.parent.updateMatrixWorld();\n\n                this._positionStart.copy(this.object.position);\n                this._quaternionStart.copy(this.object.quaternion);\n                this._scaleStart.copy(this.object.scale);\n\n                this.object.matrixWorld.decompose(this.worldPositionStart, this.worldQuaternionStart, this._worldScaleStart);\n\n                this.pointStart.copy(planeIntersect.point).sub(this.worldPositionStart);\n\n            }\n\n            this.dragging = true;\n            _mouseDownEvent.mode = this.mode;\n            this.dispatchEvent(_mouseDownEvent);\n\n        }\n\n    }\n\n    pointerMove(pointer) {\n\n        let axis = this.axis;\n        let mode = this.mode;\n        const object = this.object;\n        let space = this.space;\n\n        switch (axis) {\n            case \"XT\":\n                axis = \"X\";\n                mode = \"translate\"\n                break;\n            case \"XR\":\n                axis = \"Y\";\n                mode = \"rotate\"\n                break;\n            case \"YT\":\n                axis = \"Y\";\n                mode = \"translate\"\n                break;\n            case \"YR\":\n                axis = \"Z\";\n                mode = \"rotate\"\n                break;\n            case \"ZT\":\n                axis = \"Z\";\n                mode = \"translate\"\n                break;\n            case \"ZR\":\n                axis = \"X\";\n                mode = \"rotate\"\n                break;\n            case \"XYZ\":\n                axis = \"XYZ\";\n                mode = \"translate\"\n                break;\n            default:\n                break;\n        }\n\n        if (mode === 'scale') {\n\n            space = 'local';\n\n        } else if (axis === 'E' || axis === 'XYZE' || axis === 'XYZ') {\n\n            space = 'world';\n\n        }\n\n        if (object === undefined || axis === null || this.dragging === false || pointer.button !== - 1) return;\n\n        _raycaster.setFromCamera(pointer, this.camera);\n\n        const planeIntersect = intersectObjectWithRay(this._plane, _raycaster, true);\n\n        if (!planeIntersect) return;\n\n        this.pointEnd.copy(planeIntersect.point).sub(this.worldPositionStart);\n\n        if (mode === 'translate') {\n\n            // Apply translate\n\n            this._offset.copy(this.pointEnd).sub(this.pointStart);\n\n            if (space === 'local' && axis !== 'XYZ') {\n\n                this._offset.applyQuaternion(this._worldQuaternionInv);\n\n            }\n\n            if (axis.indexOf('X') === - 1) this._offset.x = 0;\n            if (axis.indexOf('Y') === - 1) this._offset.y = 0;\n            if (axis.indexOf('Z') === - 1) this._offset.z = 0;\n\n            if (space === 'local' && axis !== 'XYZ') {\n\n                this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale);\n\n            } else {\n\n                this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale);\n\n            }\n\n            object.position.copy(this._offset).add(this._positionStart);\n\n            // Apply translation snap\n\n            if (this.translationSnap) {\n\n                if (space === 'local') {\n\n                    object.position.applyQuaternion(_tempQuaternion.copy(this._quaternionStart).invert());\n\n                    if (axis.search('X') !== - 1) {\n\n                        object.position.x = Math.round(object.position.x / this.translationSnap) * this.translationSnap;\n\n                    }\n\n                    if (axis.search('Y') !== - 1) {\n\n                        object.position.y = Math.round(object.position.y / this.translationSnap) * this.translationSnap;\n\n                    }\n\n                    if (axis.search('Z') !== - 1) {\n\n                        object.position.z = Math.round(object.position.z / this.translationSnap) * this.translationSnap;\n\n                    }\n\n                    object.position.applyQuaternion(this._quaternionStart);\n\n                }\n\n                if (space === 'world') {\n\n                    if (object.parent) {\n\n                        object.position.add(_tempVector.setFromMatrixPosition(object.parent.matrixWorld));\n\n                    }\n\n                    if (axis.search('X') !== - 1) {\n\n                        object.position.x = Math.round(object.position.x / this.translationSnap) * this.translationSnap;\n\n                    }\n\n                    if (axis.search('Y') !== - 1) {\n\n                        object.position.y = Math.round(object.position.y / this.translationSnap) * this.translationSnap;\n\n                    }\n\n                    if (axis.search('Z') !== - 1) {\n\n                        object.position.z = Math.round(object.position.z / this.translationSnap) * this.translationSnap;\n\n                    }\n\n                    if (object.parent) {\n\n                        object.position.sub(_tempVector.setFromMatrixPosition(object.parent.matrixWorld));\n\n                    }\n\n                }\n\n            }\n\n        } else if (mode === 'scale') {\n\n            if (axis.search('XYZ') !== - 1) {\n\n                let d = this.pointEnd.length() / this.pointStart.length();\n\n                if (this.pointEnd.dot(this.pointStart) < 0) d *= - 1;\n\n                _tempVector2.set(d, d, d);\n\n            } else {\n\n                _tempVector.copy(this.pointStart);\n                _tempVector2.copy(this.pointEnd);\n\n                _tempVector.applyQuaternion(this._worldQuaternionInv);\n                _tempVector2.applyQuaternion(this._worldQuaternionInv);\n\n                _tempVector2.divide(_tempVector);\n\n                if (axis.search('X') === - 1) {\n\n                    _tempVector2.x = 1;\n\n                }\n\n                if (axis.search('Y') === - 1) {\n\n                    _tempVector2.y = 1;\n\n                }\n\n                if (axis.search('Z') === - 1) {\n\n                    _tempVector2.z = 1;\n\n                }\n\n            }\n\n            // Apply scale\n\n            object.scale.copy(this._scaleStart).multiply(_tempVector2);\n\n            if (this.scaleSnap) {\n\n                if (axis.search('X') !== - 1) {\n\n                    object.scale.x = Math.round(object.scale.x / this.scaleSnap) * this.scaleSnap || this.scaleSnap;\n\n                }\n\n                if (axis.search('Y') !== - 1) {\n\n                    object.scale.y = Math.round(object.scale.y / this.scaleSnap) * this.scaleSnap || this.scaleSnap;\n\n                }\n\n                if (axis.search('Z') !== - 1) {\n\n                    object.scale.z = Math.round(object.scale.z / this.scaleSnap) * this.scaleSnap || this.scaleSnap;\n\n                }\n\n            }\n\n        } else if (mode === 'rotate') {\n\n            this._offset.copy(this.pointEnd).sub(this.pointStart);\n\n            const ROTATION_SPEED = 20 / this.worldPosition.distanceTo(_tempVector.setFromMatrixPosition(this.camera.matrixWorld));\n\n            if (axis === 'E') {\n\n                this.rotationAxis.copy(this.eye);\n                this.rotationAngle = this.pointEnd.angleTo(this.pointStart);\n\n                this._startNorm.copy(this.pointStart).normalize();\n                this._endNorm.copy(this.pointEnd).normalize();\n\n                this.rotationAngle *= (this._endNorm.cross(this._startNorm).dot(this.eye) < 0 ? 1 : - 1);\n\n            } else if (axis === 'XYZE') {\n\n                this.rotationAxis.copy(this._offset).cross(this.eye).normalize();\n                this.rotationAngle = this._offset.dot(_tempVector.copy(this.rotationAxis).cross(this.eye)) * ROTATION_SPEED;\n\n            } else if (axis === 'X' || axis === 'Y' || axis === 'Z') {\n\n                this.rotationAxis.copy(_unit[axis]);\n\n                _tempVector.copy(_unit[axis]);\n\n                if (space === 'local') {\n\n                    _tempVector.applyQuaternion(this.worldQuaternion);\n\n                }\n\n                this.rotationAngle = this._offset.dot(_tempVector.cross(this.eye).normalize()) * ROTATION_SPEED;\n\n            }\n\n            // Apply rotation snap\n\n            if (this.rotationSnap) this.rotationAngle = Math.round(this.rotationAngle / this.rotationSnap) * this.rotationSnap;\n\n            // Apply rotate\n            if (space === 'local' && axis !== 'E' && axis !== 'XYZE') {\n\n                object.quaternion.copy(this._quaternionStart);\n                object.quaternion.multiply(_tempQuaternion.setFromAxisAngle(this.rotationAxis, this.rotationAngle)).normalize();\n\n            } else {\n\n                this.rotationAxis.applyQuaternion(this._parentQuaternionInv);\n                object.quaternion.copy(_tempQuaternion.setFromAxisAngle(this.rotationAxis, this.rotationAngle));\n                object.quaternion.multiply(this._quaternionStart).normalize();\n\n            }\n\n        }\n\n        this.dispatchEvent(_changeEvent);\n        this.dispatchEvent(_objectChangeEvent);\n\n    }\n\n    pointerUp(pointer) {\n\n        if (pointer.button !== 0) return;\n\n        if (this.dragging && (this.axis !== null)) {\n\n            _mouseUpEvent.mode = this.mode;\n            this.dispatchEvent(_mouseUpEvent);\n\n        }\n\n        this.dragging = false;\n        this.axis = null;\n\n    }\n\n    dispose() {\n\n        this.domElement.removeEventListener('pointerdown', this._onPointerDown);\n        this.domElement.removeEventListener('pointermove', this._onPointerHover);\n        this.domElement.ownerDocument.removeEventListener('pointermove', this._onPointerMove);\n        this.domElement.ownerDocument.removeEventListener('pointerup', this._onPointerUp);\n\n        this.traverse(function (child) {\n\n            if (child.geometry) child.geometry.dispose();\n            if (child.material) child.material.dispose();\n\n        });\n\n    }\n\n    // Set current object\n    attach(object) {\n\n        this.object = object;\n        this.visible = true;\n\n        return this;\n\n    }\n\n    // Detatch from object\n    detach() {\n\n        this.object = undefined;\n        this.visible = false;\n        this.axis = null;\n\n        return this;\n\n    }\n\n    // TODO: deprecate\n\n    getMode() {\n\n        return this.mode;\n\n    }\n\n    setMode(mode) {\n\n        this.mode = mode;\n\n    }\n\n    setTranslationSnap(translationSnap) {\n\n        this.translationSnap = translationSnap;\n\n    }\n\n    setRotationSnap(rotationSnap) {\n\n        this.rotationSnap = rotationSnap;\n\n    }\n\n    setScaleSnap(scaleSnap) {\n\n        this.scaleSnap = scaleSnap;\n\n    }\n\n    setSize(size) {\n\n        this.size = size;\n\n    }\n\n    setSpace(space) {\n\n        this.space = space;\n\n    }\n\n    update() {\n\n        console.warn('THREE.TransformControls: update function has no more functionality and therefore has been deprecated.');\n\n    }\n\n}\n\nTransformControls.prototype.isTransformControls = true;\n\n// mouse / touch event handlers\n\nfunction getPointer(event) {\n\n    if (this.domElement.ownerDocument.pointerLockElement) {\n\n        return {\n            x: 0,\n            y: 0,\n            button: event.button\n        };\n\n    } else {\n\n        const rect = this.domElement.getBoundingClientRect();\n\n        return {\n            x: (event.clientX - rect.left) / rect.width * 2 - 1,\n            y: - (event.clientY - rect.top) / rect.height * 2 + 1,\n            button: event.button\n        };\n\n    }\n\n}\n\nfunction onPointerHover(event) {\n\n    if (!this.enabled) return;\n\n    switch (event.pointerType) {\n\n        case 'mouse':\n        case 'pen':\n            this.pointerHover(this._getPointer(event));\n            break;\n\n    }\n\n}\n\nfunction onPointerDown(event) {\n\n    if (!this.enabled) return;\n\n    this.domElement.ownerDocument.addEventListener('pointermove', this._onPointerMove);\n\n    this.pointerHover(this._getPointer(event));\n    this.pointerDown(this._getPointer(event));\n\n}\n\nfunction onPointerMove(event) {\n\n    if (!this.enabled) return;\n\n    this.pointerMove(this._getPointer(event));\n\n}\n\nfunction onPointerUp(event) {\n\n    if (!this.enabled) return;\n\n    this.domElement.ownerDocument.removeEventListener('pointermove', this._onPointerMove);\n\n    this.pointerUp(this._getPointer(event));\n\n}\n\nfunction intersectObjectWithRay(object, raycaster, includeInvisible) {\n\n    const allIntersections = raycaster.intersectObject(object, true);\n\n    for (let i = 0; i < allIntersections.length; i++) {\n\n        if (allIntersections[i].object.visible || includeInvisible) {\n\n            return allIntersections[i];\n\n        }\n\n    }\n\n    return false;\n\n}\n\n//\n\n// Reusable utility variables\n\nconst _tempEuler = new Euler();\nconst _alignVector = new Vector3(0, 1, 0);\nconst _zeroVector = new Vector3(0, 0, 0);\nconst _lookAtMatrix = new Matrix4();\nconst _tempQuaternion2 = new Quaternion();\nconst _identityQuaternion = new Quaternion();\nconst _dirVector = new Vector3();\nconst _tempMatrix = new Matrix4();\n\nconst _unitX = new Vector3(1, 0, 0);\nconst _unitY = new Vector3(0, 1, 0);\nconst _unitZ = new Vector3(0, 0, 1);\n\nconst _v1 = new Vector3();\nconst _v2 = new Vector3();\nconst _v3 = new Vector3();\n\nclass TransformControlsGizmo extends Object3D {\n\n    constructor() {\n\n        super();\n\n        this.type = 'TransformControlsGizmo';\n\n        // shared materials\n\n        const gizmoMaterial = new MeshBasicMaterial({\n            depthTest: false,\n            depthWrite: false,\n            fog: false,\n            toneMapped: false,\n            transparent: true\n        });\n\n        const gizmoLineMaterial = new LineBasicMaterial({\n            depthTest: false,\n            depthWrite: false,\n            fog: false,\n            toneMapped: false,\n            transparent: true\n        });\n\n        // Make unique material for each axis/color\n\n        const matInvisible = gizmoMaterial.clone();\n        matInvisible.opacity = 0.15;\n\n        const matHelper = gizmoLineMaterial.clone();\n        matHelper.opacity = 1;\n        matHelper.color.setHex(0xFFD880);\n\n        const matRed = gizmoMaterial.clone();\n        matRed.color.setHex(0xFF8080);\n        matRed.side = DoubleSide;\n\n        const matRedArrow = gizmoMaterial.clone();\n        matRedArrow.color.setHex(0xFF8080);\n\n        const matGreen = gizmoMaterial.clone();\n        matGreen.color.setHex(0x80FFC9);\n        matGreen.side = DoubleSide;\n\n        const matGreenArrow = gizmoMaterial.clone();\n        matGreenArrow.color.setHex(0x80FFC9);\n\n        const matBlue = gizmoMaterial.clone();\n        matBlue.color.setHex(0x809CFF);\n        matBlue.side = DoubleSide;\n\n        const matBlueArrow = gizmoMaterial.clone();\n        matBlueArrow.color.setHex(0x809CFF);\n\n        const matRedTransparent = gizmoMaterial.clone();\n        matRedTransparent.color.setHex(0xFF8080);\n        matRedTransparent.opacity = 0.5;\n        matRedTransparent.name = \"matRedTransparent\";\n\n        const matGreenTransparent = gizmoMaterial.clone();\n        matGreenTransparent.color.setHex(0x80FFC9);\n        matGreenTransparent.opacity = 0.5;\n\n        const matBlueTransparent = gizmoMaterial.clone();\n        matBlueTransparent.color.setHex(0x809CFF);\n        matBlueTransparent.opacity = 0.5;\n\n        const matWhiteTransparent = gizmoMaterial.clone();\n        matWhiteTransparent.opacity = 0.25;\n\n        const matYellowTransparent = gizmoMaterial.clone();\n        matYellowTransparent.color.setHex(0xFFD880);\n        matYellowTransparent.opacity = 0.5;\n\n        const matYellow = gizmoMaterial.clone();\n        matYellow.color.setHex(0xFFD880);\n\n        const matGray = gizmoMaterial.clone();\n        matGray.color.setHex(0x787878);\n\n        // reusable geometry\n\n        const arrowGeometry = new CylinderGeometry(0, 0.055, 0.125, 12);\n        arrowGeometry.translate(0, 0.05, 0);\n\n        const arrowPickerGeometry = new CylinderGeometry(0.02, 0.06, 0.15, 12);\n        arrowPickerGeometry.translate(0, 0.05, 0);\n\n        const scaleHandleGeometry = new BoxGeometry(0.08, 0.08, 0.08);\n        scaleHandleGeometry.translate(0, 0.04, 0);\n\n        const lineGeometry = new BufferGeometry();\n        lineGeometry.setAttribute('position', new Float32BufferAttribute([0, 0, 0, 1, 0, 0], 3));\n\n        const lineGeometry2 = new CylinderGeometry(0.0075, 0.0075, 0.5, 3);\n        lineGeometry2.translate(0, 0.25, 0);\n\n        function CircleGeometry(radius) {\n            const geometry = new RingGeometry(radius + 0.01, radius + 0.1, 10, 10, 0.5, Math.PI / 2 - 1);\n            geometry.rotateY(Math.PI / 2);\n            geometry.rotateX(Math.PI / 2);\n            return geometry;\n        }\n\n        // Special geometry for transform helper. If scaled with position vector it spans from [0,0,0] to position\n\n        function TranslateHelperGeometry() {\n\n            const geometry = new BufferGeometry();\n\n            geometry.setAttribute('position', new Float32BufferAttribute([0, 0, 0, 1, 1, 1], 3));\n\n            return geometry;\n\n        }\n\n        // Gizmo definitions - custom hierarchy definitions for setupGizmo() function\n\n        const gizmoTranslate = {\n            X: [\n                [new Mesh(arrowGeometry, matRed), [0.5, 0, 0], [0, 0, - Math.PI / 2]],\n                // [new Mesh(arrowGeometry, matRed), [- 0.5, 0, 0], [0, 0, Math.PI / 2]],\n                // [new Mesh(lineGeometry2, matRed), [0, 0, 0], [0, 0, - Math.PI / 2]]\n            ],\n            Y: [\n                [new Mesh(arrowGeometry, matGreen), [0, 0.5, 0]],\n                // [new Mesh(arrowGeometry, matGreen), [0, - 0.5, 0], [Math.PI, 0, 0]],\n                // [new Mesh(lineGeometry2, matGreen)]\n            ],\n            Z: [\n                [new Mesh(arrowGeometry, matBlue), [0, 0, 0.5], [Math.PI / 2, 0, 0]],\n                // [new Mesh(arrowGeometry, matBlue), [0, 0, - 0.5], [- Math.PI / 2, 0, 0]],\n                // [new Mesh(lineGeometry2, matBlue), null, [Math.PI / 2, 0, 0]]\n            ],\n            // XYZ: [\n            //     [new Mesh(new OctahedronGeometry(0.1, 0), matWhiteTransparent.clone()), [0, 0, 0]]\n            // ],\n            // XY: [\n            //     [new Mesh(new BoxGeometry(0.15, 0.15, 0.01), matBlueTransparent.clone()), [0.15, 0.15, 0]]\n            // ],\n            // YZ: [\n            //     [new Mesh(new BoxGeometry(0.15, 0.15, 0.01), matRedTransparent.clone()), [0, 0.15, 0.15], [0, Math.PI / 2, 0]]\n            // ],\n            // XZ: [\n            //     [new Mesh(new BoxGeometry(0.15, 0.15, 0.01), matGreenTransparent.clone()), [0.15, 0, 0.15], [- Math.PI / 2, 0, 0]]\n            // ]\n        };\n\n        const pickerTranslate = {\n            X: [\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0.3, 0, 0], [0, 0, - Math.PI / 2]],\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [- 0.3, 0, 0], [0, 0, Math.PI / 2]]\n            ],\n            Y: [\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, 0.3, 0]],\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, - 0.3, 0], [0, 0, Math.PI]]\n            ],\n            Z: [\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, 0, 0.3], [Math.PI / 2, 0, 0]],\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, 0, - 0.3], [- Math.PI / 2, 0, 0]]\n            ],\n            // XYZ: [\n            //     [new Mesh(new OctahedronGeometry(0.2, 0), matInvisible)]\n            // ],\n            // XY: [\n            //     [new Mesh(new BoxGeometry(0.2, 0.2, 0.01), matInvisible), [0.15, 0.15, 0]]\n            // ],\n            // YZ: [\n            //     [new Mesh(new BoxGeometry(0.2, 0.2, 0.01), matInvisible), [0, 0.15, 0.15], [0, Math.PI / 2, 0]]\n            // ],\n            // XZ: [\n            //     [new Mesh(new BoxGeometry(0.2, 0.2, 0.01), matInvisible), [0.15, 0, 0.15], [- Math.PI / 2, 0, 0]]\n            // ]\n        };\n\n        const helperTranslate = {\n            START: [\n                [new Mesh(new OctahedronGeometry(0.01, 2), matHelper), null, null, null, 'helper']\n            ],\n            END: [\n                [new Mesh(new OctahedronGeometry(0.01, 2), matHelper), null, null, null, 'helper']\n            ],\n            DELTA: [\n                [new Line(TranslateHelperGeometry(), matHelper), null, null, null, 'helper']\n            ],\n            X: [\n                [new Line(lineGeometry, matHelper.clone()), [- 1e3, 0, 0], null, [1e6, 1, 1], 'helper']\n            ],\n            Y: [\n                [new Line(lineGeometry, matHelper.clone()), [0, - 1e3, 0], [0, 0, Math.PI / 2], [1e6, 1, 1], 'helper']\n            ],\n            Z: [\n                [new Line(lineGeometry, matHelper.clone()), [0, 0, - 1e3], [0, - Math.PI / 2, 0], [1e6, 1, 1], 'helper']\n            ]\n        };\n\n        const gizmoRotate = {\n            // XYZE: [\n            //     [new Mesh(CircleGeometry(0.5, 1), matGray), null, [0, Math.PI / 2, 0]]\n            // ],\n            X: [\n                [new Mesh(CircleGeometry(0.5, 0.5), matRed)]\n            ],\n            Y: [\n                [new Mesh(CircleGeometry(0.5, 0.5), matGreen), null, [0, 0, - Math.PI / 2]]\n            ],\n            Z: [\n                [new Mesh(CircleGeometry(0.5, 0.5), matBlue), null, [0, Math.PI / 2, 0]]\n            ],\n            // E: [\n            //     [new Mesh(CircleGeometry(0.75, 1), matYellowTransparent), null, [0, Math.PI / 2, 0]]\n            // ]\n        };\n\n        const helperRotate = {\n            AXIS: [\n                [new Line(lineGeometry, matHelper.clone()), [- 1e3, 0, 0], null, [1e6, 1, 1], 'helper']\n            ]\n        };\n\n        const pickerRotate = {\n            // XYZE: [\n            //     [new Mesh(new SphereGeometry(0.25, 10, 8), matInvisible)]\n            // ],\n            X: [\n                [new Mesh(new TorusGeometry(0.5, 0.1, 4, 24), matInvisible), [0, 0, 0], [0, - Math.PI / 2, - Math.PI / 2]],\n            ],\n            Y: [\n                [new Mesh(new TorusGeometry(0.5, 0.1, 4, 24), matInvisible), [0, 0, 0], [Math.PI / 2, 0, 0]],\n            ],\n            Z: [\n                [new Mesh(new TorusGeometry(0.5, 0.1, 4, 24), matInvisible), [0, 0, 0], [0, 0, - Math.PI / 2]],\n            ],\n            // E: [\n            //     [new Mesh(new TorusGeometry(0.75, 0.1, 2, 24), matInvisible)]\n            // ]\n        };\n\n        const gizmoScale = {\n            X: [\n                [new Mesh(scaleHandleGeometry, matRed), [0.5, 0, 0], [0, 0, - Math.PI / 2]],\n                [new Mesh(lineGeometry2, matRed), [0, 0, 0], [0, 0, - Math.PI / 2]],\n                [new Mesh(scaleHandleGeometry, matRed), [- 0.5, 0, 0], [0, 0, Math.PI / 2]],\n            ],\n            Y: [\n                [new Mesh(scaleHandleGeometry, matGreen), [0, 0.5, 0]],\n                [new Mesh(lineGeometry2, matGreen)],\n                [new Mesh(scaleHandleGeometry, matGreen), [0, - 0.5, 0], [0, 0, Math.PI]],\n            ],\n            Z: [\n                [new Mesh(scaleHandleGeometry, matBlue), [0, 0, 0.5], [Math.PI / 2, 0, 0]],\n                [new Mesh(lineGeometry2, matBlue), [0, 0, 0], [Math.PI / 2, 0, 0]],\n                [new Mesh(scaleHandleGeometry, matBlue), [0, 0, - 0.5], [- Math.PI / 2, 0, 0]]\n            ],\n            XY: [\n                [new Mesh(new BoxGeometry(0.15, 0.15, 0.01), matBlueTransparent), [0.15, 0.15, 0]]\n            ],\n            YZ: [\n                [new Mesh(new BoxGeometry(0.15, 0.15, 0.01), matRedTransparent), [0, 0.15, 0.15], [0, Math.PI / 2, 0]]\n            ],\n            XZ: [\n                [new Mesh(new BoxGeometry(0.15, 0.15, 0.01), matGreenTransparent), [0.15, 0, 0.15], [- Math.PI / 2, 0, 0]]\n            ],\n            XYZ: [\n                [new Mesh(new BoxGeometry(0.1, 0.1, 0.1), matWhiteTransparent.clone())],\n            ]\n        };\n\n        const pickerScale = {\n            X: [\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0.3, 0, 0], [0, 0, - Math.PI / 2]],\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [- 0.3, 0, 0], [0, 0, Math.PI / 2]]\n            ],\n            Y: [\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, 0.3, 0]],\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, - 0.3, 0], [0, 0, Math.PI]]\n            ],\n            Z: [\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, 0, 0.3], [Math.PI / 2, 0, 0]],\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, 0, - 0.3], [- Math.PI / 2, 0, 0]]\n            ],\n            XY: [\n                [new Mesh(new BoxGeometry(0.2, 0.2, 0.01), matInvisible), [0.15, 0.15, 0]],\n            ],\n            YZ: [\n                [new Mesh(new BoxGeometry(0.2, 0.2, 0.01), matInvisible), [0, 0.15, 0.15], [0, Math.PI / 2, 0]],\n            ],\n            XZ: [\n                [new Mesh(new BoxGeometry(0.2, 0.2, 0.01), matInvisible), [0.15, 0, 0.15], [- Math.PI / 2, 0, 0]],\n            ],\n            XYZ: [\n                [new Mesh(new BoxGeometry(0.2, 0.2, 0.2), matInvisible), [0, 0, 0]],\n            ]\n        };\n\n        const helperScale = {\n            X: [\n                [new Line(lineGeometry, matHelper.clone()), [- 1e3, 0, 0], null, [1e6, 1, 1], 'helper']\n            ],\n            Y: [\n                [new Line(lineGeometry, matHelper.clone()), [0, - 1e3, 0], [0, 0, Math.PI / 2], [1e6, 1, 1], 'helper']\n            ],\n            Z: [\n                [new Line(lineGeometry, matHelper.clone()), [0, 0, - 1e3], [0, - Math.PI / 2, 0], [1e6, 1, 1], 'helper']\n            ]\n        };\n\n        const gizmoCombined = {\n            XT: [\n                [new Mesh(arrowGeometry, matRedArrow), [0.2, 0, 0], [0, 0, - Math.PI / 2]],\n            ],\n            XR: [\n                [new Mesh(CircleGeometry(0.15, 0.5), matRed), null, [0, Math.PI / 2, Math.PI / 2]],\n            ],\n            YT: [\n                [new Mesh(arrowGeometry, matGreenArrow), [0, 0.2, 0]],\n            ],\n            YR: [\n                [new Mesh(CircleGeometry(0.15, 0.5), matGreen), null, [Math.PI / 2, Math.PI, Math.PI / 2]],\n            ],\n            ZT: [[new Mesh(arrowGeometry, matBlueArrow), [0, 0, 0.2], [Math.PI / 2, 0, 0]]\n            ],\n            ZR: [[new Mesh(CircleGeometry(0.15, 0.5), matBlue), null, [0, 0, 0]],\n            ],\n            XYZ: [\n                [new Mesh(new OctahedronGeometry(0.07, 0), matYellowTransparent.clone()), [0, 0, 0]]\n            ],\n        }\n\n        const pickerCombined = gizmoCombined;\n\n        const helperCombined = {\n            START: [\n                [new Mesh(new OctahedronGeometry(0.01, 2), matHelper), null, null, null, 'helper']\n            ],\n            END: [\n                [new Mesh(new OctahedronGeometry(0.01, 2), matHelper), null, null, null, 'helper']\n            ],\n            DELTA: [\n                [new Line(TranslateHelperGeometry(), matHelper), null, null, null, 'helper']\n            ],\n            XT: [\n                [new Line(lineGeometry, matHelper.clone()), [- 1e3, 0, 0], null, [1e6, 1, 1], 'helper']\n            ],\n            YT: [\n                [new Line(lineGeometry, matHelper.clone()), [0, - 1e3, 0], [0, 0, Math.PI / 2], [1e6, 1, 1], 'helper']\n            ],\n            ZT: [\n                [new Line(lineGeometry, matHelper.clone()), [0, 0, - 1e3], [0, - Math.PI / 2, 0], [1e6, 1, 1], 'helper']\n            ],\n        }\n\n        // Creates an Object3D with gizmos described in custom hierarchy definition.\n\n        function setupGizmo(gizmoMap) {\n\n            const gizmo = new Object3D();\n            // gizmo.renderOrder = 1000;\n\n            for (const name in gizmoMap) {\n\n                for (let i = gizmoMap[name].length; i--;) {\n\n                    const object = gizmoMap[name][i][0].clone();\n                    const position = gizmoMap[name][i][1];\n                    const rotation = gizmoMap[name][i][2];\n                    const scale = gizmoMap[name][i][3];\n                    const tag = gizmoMap[name][i][4];\n\n                    // name and tag properties are essential for picking and updating logic.\n                    object.name = name;\n                    object.tag = tag;\n\n                    if (position) {\n                        object.position.set(position[0], position[1], position[2]);\n                    }\n\n                    if (rotation) {\n                        object.rotation.set(rotation[0], rotation[1], rotation[2]);\n                    }\n\n                    if (scale) {\n                        object.scale.set(scale[0], scale[1], scale[2]);\n                    }\n\n                    object.updateMatrix();\n\n                    const tempGeometry = object.geometry.clone();\n                    tempGeometry.applyMatrix4(object.matrix);\n                    object.geometry = tempGeometry;\n                    // object.renderOrder = Infinity;\n\n                    object.position.set(0, 0, 0);\n                    object.rotation.set(0, 0, 0);\n                    object.scale.set(1, 1, 1);\n\n                    gizmo.add(object);\n\n                }\n\n            }\n\n            return gizmo;\n\n        }\n\n        // Gizmo creation\n\n        this.gizmo = {};\n        this.picker = {};\n        this.helper = {};\n\n        this.add(this.gizmo['translate'] = setupGizmo(gizmoTranslate));\n        this.add(this.gizmo['rotate'] = setupGizmo(gizmoRotate));\n        this.add(this.gizmo['scale'] = setupGizmo(gizmoScale));\n        this.add(this.picker['translate'] = setupGizmo(pickerTranslate));\n        this.add(this.picker['rotate'] = setupGizmo(pickerRotate));\n        this.add(this.picker['scale'] = setupGizmo(pickerScale));\n        this.add(this.helper['translate'] = setupGizmo(helperTranslate));\n        this.add(this.helper['rotate'] = setupGizmo(helperRotate));\n        this.add(this.helper['scale'] = setupGizmo(helperScale));\n\n        this.add(this.gizmo['combined'] = setupGizmo(gizmoCombined));\n        this.add(this.picker['combined'] = setupGizmo(pickerCombined));\n        this.add(this.helper['combined'] = setupGizmo(helperCombined));\n\n        // Pickers should be hidden always\n\n        this.picker['translate'].visible = false;\n        this.picker['rotate'].visible = false;\n        this.picker['scale'].visible = false;\n        this.picker['combined'].visible = false;\n\n    }\n\n    // updateMatrixWorld will update transformations and appearance of individual handles\n\n    updateMatrixWorld(force) {\n\n        const space = (this.mode === 'scale') ? 'local' : this.space; // scale always oriented to local rotation\n\n        const quaternion = (space === 'local') ? this.worldQuaternion : _identityQuaternion;\n\n        // Show only gizmos for current transform mode\n\n        this.gizmo['translate'].visible = this.mode === 'translate';\n        this.gizmo['rotate'].visible = this.mode === 'rotate';\n        this.gizmo['scale'].visible = this.mode === 'scale';\n        this.gizmo['combined'].visible = this.mode === 'combined';\n\n        this.helper['translate'].visible = this.mode === 'translate';\n        this.helper['rotate'].visible = this.mode === 'rotate';\n        this.helper['scale'].visible = this.mode === 'scale';\n        this.helper['combined'].visible = this.mode === 'combined';\n\n\n        let handles = [];\n        handles = handles.concat(this.picker[this.mode].children);\n        handles = handles.concat(this.gizmo[this.mode].children);\n        handles = handles.concat(this.helper[this.mode].children);\n\n        for (let i = 0; i < handles.length; i++) {\n\n            const handle = handles[i];\n\n            // hide aligned to camera\n\n            handle.visible = true;\n            handle.renderOrder = 10000;\n            handle.rotation.set(0, 0, 0);\n            handle.position.copy(this.worldPosition);\n\n            let factor;\n\n            if (this.camera.isOrthographicCamera) {\n\n                factor = (this.camera.top - this.camera.bottom) / this.camera.zoom;\n\n            } else {\n\n                factor = this.worldPosition.distanceTo(this.cameraPosition) * Math.min(1.9 * Math.tan(Math.PI * this.camera.fov / 360) / this.camera.zoom, 7);\n\n            }\n\n            handle.scale.set(1, 1, 1).multiplyScalar(factor * this.size / 4);\n\n            // TODO: simplify helpers and consider decoupling from gizmo\n\n            if (handle.tag === 'helper') {\n\n                handle.visible = false;\n\n                if (handle.name === 'AXIS') {\n\n                    handle.position.copy(this.worldPositionStart);\n                    handle.visible = !!this.axis;\n\n                    if (this.axis === 'X') {\n\n                        _tempQuaternion.setFromEuler(_tempEuler.set(0, 0, 0));\n                        handle.quaternion.copy(quaternion).multiply(_tempQuaternion);\n\n                        if (Math.abs(_alignVector.copy(_unitX).applyQuaternion(quaternion).dot(this.eye)) > 0.9) {\n\n                            handle.visible = false;\n\n                        }\n\n                    }\n\n                    if (this.axis === 'Y') {\n\n                        _tempQuaternion.setFromEuler(_tempEuler.set(0, 0, Math.PI / 2));\n                        handle.quaternion.copy(quaternion).multiply(_tempQuaternion);\n\n                        if (Math.abs(_alignVector.copy(_unitY).applyQuaternion(quaternion).dot(this.eye)) > 0.9) {\n\n                            handle.visible = false;\n\n                        }\n\n                    }\n\n                    if (this.axis === 'Z') {\n\n                        _tempQuaternion.setFromEuler(_tempEuler.set(0, Math.PI / 2, 0));\n                        handle.quaternion.copy(quaternion).multiply(_tempQuaternion);\n\n                        if (Math.abs(_alignVector.copy(_unitZ).applyQuaternion(quaternion).dot(this.eye)) > 0.9) {\n\n                            handle.visible = false;\n\n                        }\n\n                    }\n\n                    if (this.axis === 'XYZE') {\n\n                        _tempQuaternion.setFromEuler(_tempEuler.set(0, Math.PI / 2, 0));\n                        _alignVector.copy(this.rotationAxis);\n                        handle.quaternion.setFromRotationMatrix(_lookAtMatrix.lookAt(_zeroVector, _alignVector, _unitY));\n                        handle.quaternion.multiply(_tempQuaternion);\n                        handle.visible = this.dragging;\n\n                    }\n\n                    if (this.axis === 'E') {\n\n                        handle.visible = false;\n\n                    }\n\n\n                } else if (handle.name === 'START') {\n\n                    handle.position.copy(this.worldPositionStart);\n                    handle.visible = this.dragging;\n\n                } else if (handle.name === 'END') {\n\n                    handle.position.copy(this.worldPosition);\n                    handle.visible = this.dragging;\n\n                } else if (handle.name === 'DELTA') {\n\n                    handle.position.copy(this.worldPositionStart);\n                    handle.quaternion.copy(this.worldQuaternionStart);\n                    _tempVector.set(1e-10, 1e-10, 1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(- 1);\n                    _tempVector.applyQuaternion(this.worldQuaternionStart.clone().invert());\n                    handle.scale.copy(_tempVector);\n                    handle.visible = this.dragging;\n\n                } else {\n\n                    handle.quaternion.copy(quaternion);\n\n                    if (this.dragging) {\n\n                        handle.position.copy(this.worldPositionStart);\n\n                    } else {\n\n                        handle.position.copy(this.worldPosition);\n\n                    }\n\n                    if (this.axis) {\n\n                        handle.visible = this.axis.search(handle.name) !== - 1;\n\n                    }\n\n                }\n\n                // If updating helper, skip rest of the loop\n                continue;\n\n            }\n\n            // Align handles to current local or world rotation\n\n            handle.quaternion.copy(quaternion);\n\n            if (this.mode === 'translate' || this.mode === 'scale' || this.mode === 'combined') {\n\n                // Hide translate and scale axis facing the camera\n\n                const AXIS_FLIP_TRESHOLD = 0.2;\n                const PLANE_HIDE_TRESHOLD = 0.2;\n\n                if (handle.name === 'XT' || handle.name === 'XR') {\n\n                    if (Math.abs(_alignVector.copy(_unitX).applyQuaternion(quaternion).dot(this.eye)) > AXIS_FLIP_TRESHOLD) {\n\n                        // handle.scale.set(1e-10, 1e-10, 1e-10);\n                        // handle.scale.set(-handle.scale.x,handle.scale.y,handle.scale.z);\n                        // handle.visible = false;\n                        handle.renderOrder = 10001\n\n                    }\n\n                }\n\n                if (handle.name === 'YT' || handle.name === 'YR') {\n\n                    if (Math.abs(_alignVector.copy(_unitY).applyQuaternion(quaternion).dot(this.eye)) > AXIS_FLIP_TRESHOLD) {\n\n                        // handle.scale.set(1e-10, 1e-10, 1e-10);\n                        // handle.visible = false;\n                        //handle.scale.set(handle.scale.x,-handle.scale.y,handle.scale.z);\n                        handle.renderOrder = 10001\n\n                    }\n\n                }\n\n                if (handle.name === 'ZT' || handle.name === 'ZR') {\n\n                    if (Math.abs(_alignVector.copy(_unitZ).applyQuaternion(quaternion).dot(this.eye)) > AXIS_FLIP_TRESHOLD) {\n\n                        // handle.scale.set(1e-10, 1e-10, 1e-10);\n                        // handle.visible = false;\n                        //handle.scale.set(handle.scale.x,handle.scale.y,-handle.scale.z);\n                        handle.renderOrder = 10001\n\n                    }\n\n                }\n\n                if (handle.name === 'XY') {\n\n                    if (Math.abs(_alignVector.copy(_unitZ).applyQuaternion(quaternion).dot(this.eye)) < PLANE_HIDE_TRESHOLD) {\n\n                        handle.scale.set(1e-10, 1e-10, 1e-10);\n                        handle.visible = false;\n\n                    }\n\n                }\n\n                if (handle.name === 'YZ') {\n\n                    if (Math.abs(_alignVector.copy(_unitX).applyQuaternion(quaternion).dot(this.eye)) < PLANE_HIDE_TRESHOLD) {\n\n                        handle.scale.set(1e-10, 1e-10, 1e-10);\n                        handle.visible = false;\n\n                    }\n\n                }\n\n                if (handle.name === 'XZ') {\n\n                    if (Math.abs(_alignVector.copy(_unitY).applyQuaternion(quaternion).dot(this.eye)) < PLANE_HIDE_TRESHOLD) {\n\n                        handle.scale.set(1e-10, 1e-10, 1e-10);\n                        handle.visible = false;\n\n                    }\n\n                }\n\n            } else if (this.mode === 'rotate') {\n\n                // Align handles to current local or world rotation\n\n                _tempQuaternion2.copy(quaternion);\n                _alignVector.copy(this.eye).applyQuaternion(_tempQuaternion.copy(quaternion).invert());\n\n                if (handle.name.search('E') !== - 1) {\n\n                    handle.quaternion.setFromRotationMatrix(_lookAtMatrix.lookAt(this.eye, _zeroVector, _unitY));\n\n                }\n\n                if (handle.name === 'X') {\n\n                    _tempQuaternion.setFromAxisAngle(_unitX, Math.atan2(- _alignVector.y, _alignVector.z));\n                    _tempQuaternion.multiplyQuaternions(_tempQuaternion2, _tempQuaternion);\n                    handle.quaternion.copy(_tempQuaternion);\n\n                }\n\n                if (handle.name === 'Y') {\n\n                    _tempQuaternion.setFromAxisAngle(_unitY, Math.atan2(_alignVector.x, _alignVector.z));\n                    _tempQuaternion.multiplyQuaternions(_tempQuaternion2, _tempQuaternion);\n                    handle.quaternion.copy(_tempQuaternion);\n\n                }\n\n                if (handle.name === 'Z') {\n\n                    _tempQuaternion.setFromAxisAngle(_unitZ, Math.atan2(_alignVector.y, _alignVector.x));\n                    _tempQuaternion.multiplyQuaternions(_tempQuaternion2, _tempQuaternion);\n                    handle.quaternion.copy(_tempQuaternion);\n\n                }\n\n            }\n\n            // Hide disabled axes\n            handle.visible = handle.visible && (handle.name.indexOf('X') === - 1 || this.showX);\n            handle.visible = handle.visible && (handle.name.indexOf('Y') === - 1 || this.showY);\n            handle.visible = handle.visible && (handle.name.indexOf('Z') === - 1 || this.showZ);\n            handle.visible = handle.visible && (handle.name.indexOf('E') === - 1 || (this.showX && this.showY && this.showZ));\n\n            // highlight selected axis\n            handle.material._color = handle.material._color || handle.material.color.clone();\n            handle.material._opacity = handle.material._opacity || handle.material.opacity;\n\n            handle.material.color.copy(handle.material._color);\n            handle.material.opacity = handle.material._opacity;\n\n            if (this.enabled && this.axis) {\n\n                if (handle.name === this.axis) {\n\n                    handle.material.color.setHex(0xFFD880);\n                    handle.material.opacity = 1;\n                }\n\n                // else if (this.axis.split('').some(function (a) {\n\n                //     return handle.name === a;\n\n                // })) {\n\n                //     handle.material.color.setHex(0xffff00);\n                //     handle.material.opacity = 1.0;\n\n                // }\n\n            }\n\n        }\n\n        super.updateMatrixWorld(force);\n\n    }\n\n}\n\nTransformControlsGizmo.prototype.isTransformControlsGizmo = true;\n\n//\n\nclass TransformControlsPlane extends Mesh {\n\n    constructor() {\n\n        super(\n            new PlaneGeometry(100000, 100000, 2, 2),\n            new MeshBasicMaterial({ visible: false, wireframe: true, side: DoubleSide, transparent: true, opacity: 0.1, toneMapped: false })\n        );\n\n        this.type = 'TransformControlsPlane';\n\n    }\n\n    updateMatrixWorld(force) {\n\n        let space = this.space;\n\n        this.position.copy(this.worldPosition);\n\n        if (this.mode === 'scale') space = 'local'; // scale always oriented to local rotation\n\n        _v1.copy(_unitX).applyQuaternion(space === 'local' ? this.worldQuaternion : _identityQuaternion);\n        _v2.copy(_unitY).applyQuaternion(space === 'local' ? this.worldQuaternion : _identityQuaternion);\n        _v3.copy(_unitZ).applyQuaternion(space === 'local' ? this.worldQuaternion : _identityQuaternion);\n\n        // Align the plane for current transform mode, axis and space.\n\n        _alignVector.copy(_v2);\n\n        switch (this.mode) {\n\n            case 'translate':\n            case 'scale':\n                switch (this.axis) {\n\n                    case 'X':\n                        _alignVector.copy(this.eye).cross(_v1);\n                        _dirVector.copy(_v1).cross(_alignVector);\n                        break;\n                    case 'Y':\n                        _alignVector.copy(this.eye).cross(_v2);\n                        _dirVector.copy(_v2).cross(_alignVector);\n                        break;\n                    case 'Z':\n                        _alignVector.copy(this.eye).cross(_v3);\n                        _dirVector.copy(_v3).cross(_alignVector);\n                        break;\n                    case 'XY':\n                        _dirVector.copy(_v3);\n                        break;\n                    case 'YZ':\n                        _dirVector.copy(_v1);\n                        break;\n                    case 'XZ':\n                        _alignVector.copy(_v3);\n                        _dirVector.copy(_v2);\n                        break;\n                    case 'XYZ':\n                    case 'E':\n                        _dirVector.set(0, 0, 0);\n                        break;\n\n                }\n\n                break;\n            case 'rotate':\n            default:\n                // special case for rotate\n                _dirVector.set(0, 0, 0);\n\n        }\n\n        if (_dirVector.length() === 0) {\n\n            // If in rotate mode, make the plane parallel to camera\n            this.quaternion.copy(this.cameraQuaternion);\n\n        } else {\n\n            _tempMatrix.lookAt(_tempVector.set(0, 0, 0), _dirVector, _alignVector);\n\n            this.quaternion.setFromRotationMatrix(_tempMatrix);\n\n        }\n\n        super.updateMatrixWorld(force);\n\n    }\n\n}\n\nTransformControlsPlane.prototype.isTransformControlsPlane = true;\n\nexport { TransformControls, TransformControlsGizmo, TransformControlsPlane };\n","<template>\r\n  <div\r\n    class=\"draggable-window\"\r\n    :class=\"{ minimized: minimized }\"\r\n    :style=\"{ top: currentY + 'px', left: currentX + 'px' }\"\r\n    v-show=\"visible && !userClosed\"\r\n  >\r\n    <div class=\"window-header\" @mousedown=\"startDrag\" @touchstart=\"startDragTouch\">\r\n      <div class=\"drag-handle\">\r\n        <div class=\"handle-dots\">\r\n          <span></span><span></span><span></span>\r\n        </div>\r\n        <span class=\"title\">{{ title }}</span>\r\n      </div>\r\n      <div class=\"controls\">\r\n        <button \r\n          class=\"control-btn minimize\" \r\n          @click.stop=\"toggleMinimize\" \r\n          @mousedown.stop \r\n          @touchstart.stop\r\n        >\r\n          {{ minimized ? '+' : '' }}\r\n        </button>\r\n        <button \r\n          class=\"control-btn close\" \r\n          @click.stop=\"close\" \r\n          @mousedown.stop \r\n          @touchstart.stop\r\n        >\r\n          \r\n        </button>\r\n      </div>\r\n    </div>\r\n    <div class=\"window-content\" v-show=\"!minimized\" v-bind=\"$attrs\">\r\n      <slot></slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"DraggableWindow\",\r\n  inheritAttrs: false,\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: \"Window\",\r\n    },\r\n    initialX: {\r\n      type: Number,\r\n      default: 100,\r\n    },\r\n    initialY: {\r\n      type: Number,\r\n      default: 100,\r\n    },\r\n    visible: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    reopenTrigger: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    startOpen: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    isOpen: {\r\n      type: Boolean,\r\n      default: undefined,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      isDragging: false,\r\n      currentX: this.initialX,\r\n      currentY: this.initialY,\r\n      dragOffsetX: 0,\r\n      dragOffsetY: 0,\r\n      minimized: false,\r\n      userClosed: this.isOpen !== undefined ? !this.isOpen : !this.startOpen,\r\n    };\r\n  },\r\n  methods: {\r\n    startDrag(event) {\r\n      if (event.target.closest('.controls')) return;\r\n      this.isDragging = true;\r\n      this.dragOffsetX = event.clientX - this.currentX;\r\n      this.dragOffsetY = event.clientY - this.currentY;\r\n      document.addEventListener(\"mousemove\", this.onDrag);\r\n      document.addEventListener(\"mouseup\", this.stopDrag);\r\n    },\r\n    onDrag(event) {\r\n      if (this.isDragging) {\r\n        this.currentX = event.clientX - this.dragOffsetX;\r\n        this.currentY = event.clientY - this.dragOffsetY;\r\n      }\r\n    },\r\n    stopDrag() {\r\n      this.isDragging = false;\r\n      document.removeEventListener(\"mousemove\", this.onDrag);\r\n      document.removeEventListener(\"mouseup\", this.stopDrag);\r\n    },\r\n    // Touch support\r\n    startDragTouch(event) {\r\n      if (event.target.closest('.controls')) return;\r\n      const touch = event.touches[0];\r\n      this.isDragging = true;\r\n      this.dragOffsetX = touch.clientX - this.currentX;\r\n      this.dragOffsetY = touch.clientY - this.currentY;\r\n      document.addEventListener(\"touchmove\", this.onDragTouch);\r\n      document.addEventListener(\"touchend\", this.stopDragTouch);\r\n    },\r\n    onDragTouch(event) {\r\n       if (this.isDragging) {\r\n         event.preventDefault(); // Prevent scrolling while dragging\r\n         const touch = event.touches[0];\r\n         this.currentX = touch.clientX - this.dragOffsetX;\r\n         this.currentY = touch.clientY - this.dragOffsetY;\r\n       }\r\n    },\r\n    stopDragTouch() {\r\n       this.isDragging = false;\r\n       document.removeEventListener(\"touchmove\", this.onDragTouch);\r\n       document.removeEventListener(\"touchend\", this.stopDragTouch);\r\n    },\r\n    toggleMinimize() {\r\n      this.minimized = !this.minimized;\r\n    },\r\n    close() {\r\n      this.userClosed = true;\r\n      this.$emit(\"close\");\r\n    },\r\n  },\r\n  watch: {\r\n    reopenTrigger() {\r\n      this.userClosed = false;\r\n    },\r\n    isOpen(val) {\r\n      if (val !== undefined) {\r\n         this.userClosed = !val;\r\n      }\r\n    },\r\n    initialX(val) {\r\n      this.currentX = val;\r\n    },\r\n    initialY(val) {\r\n      this.currentY = val;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.draggable-window {\r\n  position: absolute;\r\n  z-index: 1000;\r\n  background: rgba(20, 20, 25, 0.65);\r\n  backdrop-filter: blur(24px) saturate(180%);\r\n  -webkit-backdrop-filter: blur(24px) saturate(180%);\r\n  border-radius: 20px;\r\n  box-shadow: \r\n    0 4px 6px -1px rgba(0, 0, 0, 0.1), \r\n    0 2px 4px -1px rgba(0, 0, 0, 0.06),\r\n    0 24px 60px -12px rgba(0, 0, 0, 0.5),\r\n    inset 0 1px 0 rgba(255, 255, 255, 0.1);\r\n  border: 1px solid rgba(255, 255, 255, 0.08);\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-width: 180px;\r\n  transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.2s ease, width 0.2s ease, height 0.2s ease;\r\n  overflow: visible;\r\n  user-select: none;\r\n  font-family: 'Inter', -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif;\r\n  color: #f0f0f0;\r\n  pointer-events: auto;\r\n}\r\n\r\n.minimized {\r\n  height: auto !important;\r\n  width: auto !important;\r\n  min-width: auto;\r\n  border-radius: 14px;\r\n  background: rgba(30, 30, 35, 0.85);\r\n  border: 1px solid rgba(255, 255, 255, 0.15);\r\n}\r\n\r\n.window-header {\r\n  height: 44px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0 14px;\r\n  cursor: grab;\r\n  background: linear-gradient(to bottom, rgba(255,255,255,0.06), transparent);\r\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\r\n  border-top-left-radius: 20px;\r\n  border-top-right-radius: 20px;\r\n}\r\n\r\n.window-header:active {\r\n  cursor: grabbing;\r\n}\r\n\r\n.drag-handle {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-grow: 1;\r\n}\r\n\r\n.handle-dots {\r\n  display: flex;\r\n  margin-right: 12px;\r\n  gap: 4px;\r\n}\r\n\r\n.handle-dots span {\r\n  width: 5px;\r\n  height: 5px;\r\n  background-color: rgba(255, 255, 255, 0.15);\r\n  border-radius: 50%;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.draggable-window:hover .handle-dots span {\r\n  background-color: rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n.title {\r\n  font-size: 13px;\r\n  font-weight: 600;\r\n  letter-spacing: 0.3px;\r\n  color: rgba(255, 255, 255, 0.9);\r\n  pointer-events: none;\r\n  text-shadow: 0 1px 2px rgba(0,0,0,0.5);\r\n}\r\n\r\n.controls {\r\n  display: flex;\r\n  gap: 8px;\r\n}\r\n\r\n.control-btn {\r\n  width: 22px;\r\n  height: 22px;\r\n  border-radius: 50%;\r\n  border: none;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 14px;\r\n  cursor: pointer;\r\n  padding: 0;\r\n  line-height: 1;\r\n  background-color: rgba(255, 255, 255, 0.08);\r\n  color: rgba(255, 255, 255, 0.6);\r\n  transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);\r\n  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.05);\r\n}\r\n\r\n.control-btn:hover {\r\n  background-color: rgba(255, 255, 255, 0.2);\r\n  color: white;\r\n  transform: scale(1.05);\r\n}\r\n\r\n.control-btn:active {\r\n  transform: scale(0.95);\r\n}\r\n\r\n.control-btn.close:hover {\r\n  background-color: rgba(255, 95, 87, 0.8);\r\n  color: white;\r\n}\r\n\r\n.window-content {\r\n  padding: 18px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n</style>\r\n","import { render } from \"./DraggableWindow.vue?vue&type=template&id=8e2218ae&scoped=true\"\nimport script from \"./DraggableWindow.vue?vue&type=script&lang=js\"\nexport * from \"./DraggableWindow.vue?vue&type=script&lang=js\"\n\nimport \"./DraggableWindow.vue?vue&type=style&index=0&id=8e2218ae&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8e2218ae\"]])\n\nexport default __exports__","import { render } from \"./Canvas.vue?vue&type=template&id=67a0d07b&scoped=true\"\nimport script from \"./Canvas.vue?vue&type=script&lang=js\"\nexport * from \"./Canvas.vue?vue&type=script&lang=js\"\n\nimport \"./Canvas.vue?vue&type=style&index=0&id=67a0d07b&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-67a0d07b\"]])\n\nexport default __exports__","import * as THREE from \"three\";\nimport { MeshLineRaycast } from \"meshline\";\nimport { scene } from \"../App.vue\";\n\nlet mirror = {\n    updateMirrorOf: function (obj, activeScene, localCanvas) {\n        if (obj.type === \"Group\") {\n            obj.children.forEach((child) => {\n                mirror.updateMirrorOf(child, activeScene, localCanvas);\n            });\n        } else if (obj.userData.mirrors && Array.isArray(obj.userData.mirrors)) {\n            obj.userData.mirrors.forEach(mirrorData => {\n                let mirroredObject = activeScene.getObjectByProperty(\n                    \"uuid\",\n                    mirrorData.uuid\n                );\n                if (!mirroredObject) return;\n\n                const axis = mirrorData.axis;\n\n                if (localCanvas) {\n                    const m = localCanvas.matrixWorld;\n                    const mInv = m.clone().invert();\n                    let sx = 1, sy = 1, sz = 1;\n                    if (axis === \"x\") sx = -1;\n                    else if (axis === \"y\") sy = -1;\n                    else if (axis === \"z\") sz = -1;\n                    const mFlip = new THREE.Matrix4().makeScale(sx, sy, sz);\n                    const transform = m.clone().multiply(mFlip).multiply(mInv);\n\n                    mirroredObject.position.copy(obj.position);\n                    mirroredObject.quaternion.copy(obj.quaternion);\n                    mirroredObject.scale.copy(obj.scale);\n                    mirroredObject.applyMatrix4(transform);\n                } else {\n                    var position = new THREE.Vector3();\n                    obj.getWorldPosition(position);\n                    var quaternion = new THREE.Quaternion();\n                    obj.getWorldQuaternion(quaternion);\n                    var scale = new THREE.Vector3();\n                    obj.getWorldScale(scale);\n\n                    switch (axis) {\n                        case \"x\":\n                            mirroredObject.position.set(-position.x, position.y, position.z);\n                            mirroredObject.quaternion.set(-quaternion.x, quaternion.y, quaternion.z, -quaternion.w);\n                            mirroredObject.scale.set(-scale.x, scale.y, scale.z);\n                            break;\n                        case \"y\":\n                            mirroredObject.position.set(position.x, -position.y, position.z);\n                            mirroredObject.quaternion.set(quaternion.x, -quaternion.y, quaternion.z, -quaternion.w);\n                            mirroredObject.scale.set(scale.x, -scale.y, scale.z);\n                            break;\n                        case \"z\":\n                            mirroredObject.position.set(position.x, position.y, -position.z);\n                            mirroredObject.quaternion.set(quaternion.x, quaternion.y, -quaternion.z, -quaternion.w);\n                            mirroredObject.scale.set(scale.x, scale.y, -scale.z);\n                            break;\n                    }\n                }\n                // Recursive update for nested mirrors (X then Y)\n                mirror.updateMirrorOf(mirroredObject, activeScene, localCanvas);\n            });\n            obj.matrixWorldNeedsUpdate = true;\n        }\n    },\n    object: function (obj, axis, activeScene, localCanvas) {\n        var clone = obj.clone();\n        clone.layers.set(1);\n        clone.raycast = MeshLineRaycast;\n\n        if (!obj.userData.mirrors) obj.userData.mirrors = [];\n        obj.userData.mirrors.push({ uuid: clone.uuid, axis: axis });\n\n        // The clone also needs to know it's a mirror and what axis it came from \n        // to support multi-axis update (A mirrors to B, then B mirrors to D)\n        clone.userData.mirrorParent = obj.uuid;\n        clone.userData.mirrorAxisFromParent = axis;\n\n        if (localCanvas) {\n            const m = localCanvas.matrixWorld;\n            const mInv = m.clone().invert();\n            let sx = 1, sy = 1, sz = 1;\n            if (axis === \"x\") sx = -1;\n            else if (axis === \"y\") sy = -1;\n            else if (axis === \"z\") sz = -1;\n            const mFlip = new THREE.Matrix4().makeScale(sx, sy, sz);\n            const transform = m.clone().multiply(mFlip).multiply(mInv);\n            clone.applyMatrix4(transform);\n        } else {\n            const mFlip = new THREE.Matrix4().makeScale(\n                axis === \"x\" ? -1 : 1,\n                axis === \"y\" ? -1 : 1,\n                axis === \"z\" ? -1 : 1\n            );\n            clone.applyMatrix4(mFlip);\n        }\n        activeScene.add(clone);\n        return clone;\n    },\n    eraseMirrorOf: function (obj) {\n        if (obj.userData.mirrors) {\n            obj.userData.mirrors.forEach(m => {\n                let mirroredObject = scene.getObjectByProperty(\"uuid\", m.uuid);\n                if (mirroredObject) {\n                    mirror.eraseMirrorOf(mirroredObject);\n                    scene.remove(mirroredObject);\n                }\n            });\n        }\n    },\n};\n\nexport { mirror };","\n<template>\n  <draggable-window title=\"History\" :initialX=\"12\" :initialY=\"window.innerHeight - 100\" :reopenTrigger=\"reopenTrigger\" :start-open=\"startOpen\" :is-open=\"isOpen\" @close=\"$emit('close')\">\n    <div class=\"history-controls\">\n      <button @click=\"undo\" :disabled=\"undoDisabled\">\n        <img src=\"@/assets/icons/undo.svg\" alt=\"undo\" />\n      </button>\n      <button @click=\"redo\" :disabled=\"redoDisabled\">\n        <img src=\"@/assets/icons/redo.svg\" alt=\"redo\" />\n      </button>\n    </div>\n  </draggable-window>\n</template>\n\n<script>\nimport UndoManager from \"undo-manager\";\nimport DraggableWindow from \"./DraggableWindow.vue\";\n\nexport let undoManager = new UndoManager();\nexport let undoRedoComponent;\n\nexport default {\n  name: \"UndoRedo\",\n  components: { DraggableWindow },\n  props: {\n    reopenTrigger: Number,\n    startOpen: {\n      type: Boolean,\n      default: true,\n    },\n    isOpen: Boolean,\n  },\n  emits: [\"selected-tool\", \"close\"],\n  data() {\n    return {\n      window: window,\n      undoDisabled: true,\n      redoDisabled: true,\n    };\n  },\n  methods: {\n    undo: function () {\n      undoManager.undo();\n      this.updateUi();\n    },\n    redo: function () {\n      undoManager.redo();\n      this.updateUi();\n    },\n    setTool: function (val) {\n      this.$emit(\"selected-tool\", val);\n    },\n    updateUi: function () {\n      this.undoDisabled = !undoManager.hasUndo();\n      this.redoDisabled = !undoManager.hasRedo();\n    },\n  },\n  watch: {},\n  mounted() {\n    undoRedoComponent = this;\n  },\n};\n</script>\n\n<style scoped>\n.history-controls {\n  display: flex;\n}\n\nbutton {\n  background-color: transparent;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px; /* Reset radius for individual buttons */\n  height: 40px;\n  width: 40px; /* Make them square */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n  padding: 0;\n  cursor: pointer;\n  margin-right: 4px;\n}\n\nbutton:last-child {\n  margin-right: 0;\n}\n\nbutton:hover:not(:disabled) {\n  background: rgba(255, 255, 255, 0.1);\n  border-color: rgba(255, 255, 255, 0.2);\n}\n\nbutton:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n\nbutton > img {\n  width: 24px;\n  height: 24px;\n  filter: brightness(0) invert(1);\n}\n</style>","import { render } from \"./UndoRedo.vue?vue&type=template&id=0bd31b88&scoped=true\"\nimport script from \"./UndoRedo.vue?vue&type=script&lang=js\"\nexport * from \"./UndoRedo.vue?vue&type=script&lang=js\"\n\nimport \"./UndoRedo.vue?vue&type=style&index=0&id=0bd31b88&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0bd31b88\"]])\n\nexport default __exports__","import * as THREE from \"three\";\nimport { scene, renderer, camera } from \"../App.vue\";\nimport { mirror } from \"./mirror.js\"\nimport { MeshLineMaterial } from \"meshline\";\nimport { draw } from \"./draw.js\";\nimport { undoManager, undoRedoComponent } from \"./UndoRedo.vue\"\n\nlet erase = {\n    e: undefined,\n    GPUPickHelper: class {\n        constructor() {\n            this.pickingTexture = new THREE.WebGLRenderTarget(1, 1);\n            this.pixelBuffer = new Uint8Array(4);\n            this.pickedObject = null;\n            this.pickedObjectSavedColor = 0;\n        }\n        calcPointsInBetween(x1, y1, x2, y2) {\n            var coordinatesArray = new Array();\n            // Define differences and error check\n            var dx = Math.abs(x2 - x1);\n            var dy = Math.abs(y2 - y1);\n            var sx = x1 < x2 ? 1 : -1;\n            var sy = y1 < y2 ? 1 : -1;\n            var err = dx - dy;\n            // Set first coordinates\n            coordinatesArray.push(new THREE.Vector2(x1, y1));\n            // Main loop\n            while (!(x1 == x2 && y1 == y2)) {\n                var e2 = err << 1;\n                if (e2 > -dy) {\n                    err -= dy;\n                    x1 += sx;\n                }\n                if (e2 < dx) {\n                    err += dx;\n                    y1 += sy;\n                }\n                // Set coordinates\n                coordinatesArray.push(new THREE.Vector2(x1, y1));\n            }\n            // Return the result\n            return coordinatesArray;\n        }\n        pick(cssPosition, scene, camera) {\n            const { pickingTexture, pixelBuffer } = this;\n            // set the view offset to represent just a single pixel under the mouse\n            const pixelRatio = renderer.getPixelRatio();\n            camera.setViewOffset(\n                renderer.getContext().drawingBufferWidth, // full width\n                renderer.getContext().drawingBufferHeight, // full top\n                (cssPosition.x * pixelRatio) | 0, // rect x\n                (cssPosition.y * pixelRatio) | 0, // rect y\n                1, // rect width\n                1 // rect height\n            );\n            // render the scene\n            renderer.setRenderTarget(pickingTexture);\n            renderer.render(scene, camera);\n            renderer.setRenderTarget(null);\n\n            // clear the view offset so rendering returns to normal\n            camera.clearViewOffset();\n            //read the pixel\n            renderer.readRenderTargetPixels(\n                pickingTexture,\n                0, // x\n                0, // y\n                1, // width\n                1, // height\n                pixelBuffer\n            );\n\n            const id = (pixelBuffer[0] << 16) | (pixelBuffer[1] << 8) | pixelBuffer[2];\n            const intersectedObject = erase.e.idToObject[id];\n\n            if (intersectedObject) {\n                return intersectedObject;\n            }\n        }\n        pickArea(x1, y1, x2, y2, scene, camera) {\n            const { pickingTexture, pixelBuffer } = this;\n            const width = () => {\n                if (x2 - x1 < 0) {\n                    return -(x2 - x1);\n                } else if (x2 - x1 == 0) {\n                    return 1;\n                } else {\n                    return x2 - x1;\n                }\n            };\n            const height = () => {\n                if (y2 - y1 < 0) {\n                    return -(y2 - y1);\n                } else if (y2 - y1 == 0) {\n                    return 1;\n                } else {\n                    return y2 - y1;\n                }\n            };\n            let intersectObjects = new Array();\n\n            // set the view offset to represent just a single pixel under the mouse\n            const pixelRatio = renderer.getPixelRatio();\n            camera.setViewOffset(\n                renderer.getContext().drawingBufferWidth, // full width\n                renderer.getContext().drawingBufferHeight, // full top\n                (x1 * pixelRatio) | 0, // rect x\n                (y1 * pixelRatio) | 0, // rect y\n                (width() * pixelRatio) | 1, // height\n                (height() * pixelRatio) | 1 // width\n            );\n            // render the scene\n            if (this.pickingTexture.width !== ((width() * pixelRatio) | 1) || this.pickingTexture.height !== ((height() * pixelRatio) | 1)) {\n                this.pickingTexture.setSize((width() * pixelRatio) | 1, (height() * pixelRatio) | 1);\n            }\n            renderer.setRenderTarget(pickingTexture);\n            renderer.render(scene, camera);\n            renderer.setRenderTarget(null);\n\n            // clear the view offset so rendering returns to normal\n            camera.clearViewOffset();\n            //read the pixel\n\n            this.calcPointsInBetween(0, 0, width(), height()).forEach((point) => {\n                renderer.readRenderTargetPixels(\n                    pickingTexture,\n                    point.x, // x\n                    point.y, // y\n                    1, // width\n                    1, // height\n                    pixelBuffer\n                );\n                const id =\n                    (pixelBuffer[0] << 16) | (pixelBuffer[1] << 8) | pixelBuffer[2];\n                const intersectedObject = erase.e.idToObject[id];\n                if (\n                    intersectedObject != undefined &&\n                    intersectObjects.indexOf(intersectedObject) < 0\n                ) {\n                    intersectObjects.push(intersectedObject);\n                }\n            });\n            return intersectObjects;\n        }\n    },\n    eraser: class {\n        constructor() {\n            this.pscene = new THREE.Scene();\n            this.pscene.background = new THREE.Color(0);\n            this.idToObject = {};\n            this.id = 1;\n            this.picker = new erase.GPUPickHelper()\n        }\n        setupPicking() {\n            scene.traverse((children) => {\n                if (children.layers && children.layers.mask == 2) {\n                    var clone = children.clone();\n                    // Fix: ensure lineWidth is valid for MeshLineMaterial\n                    let lw = 0.1;\n                    if (clone.material && clone.material.lineWidth) {\n                        lw = clone.material.lineWidth;\n                    } else if (clone.userData && clone.userData.stroke && clone.userData.stroke.lineWidth) {\n                        lw = clone.userData.stroke.lineWidth;\n                    }\n\n                    var cloneMaterial = new MeshLineMaterial({\n                        lineWidth: lw,\n                        sizeAttenuation: 1,\n                        color: new THREE.Color(this.id),\n                        side: THREE.DoubleSide,\n                        fog: false,\n                    });\n                    clone.material = cloneMaterial;\n                    this.pscene.add(clone);\n                    this.idToObject[this.id] = children;\n                    this.id = this.id + 1;\n                }\n            });\n        }\n        resetPicking() {\n            if (this.pscene != null) {\n                this.idToObject = {};\n                this.id = 1;\n                // Proper cleanup\n                while (this.pscene.children.length > 0) {\n                    const child = this.pscene.children[0];\n                    this.pscene.remove(child);\n                    if (child.material) child.material.dispose();\n                }\n            }\n        }\n        start(cx, cy) {\n            var pickedObjects = this.picker.pickArea(\n                cx - 5,\n                cy - 5,\n                cx + 5,\n                cy + 5,\n                this.pscene,\n                camera\n            );\n\n            if (pickedObjects != undefined && pickedObjects.length > 0) {\n                pickedObjects.forEach((object) => {\n                    erase.deleteObject(object)\n                });\n            }\n\n            renderer.render(scene, camera)\n        }\n        move(cx, cy) {\n\n            var pickedObjects = this.picker.pickArea(\n                cx - 5,\n                cy - 5,\n                cx + 5,\n                cy + 5,\n                this.pscene,\n                camera\n            );\n            if (pickedObjects != undefined && pickedObjects.length > 0) {\n                pickedObjects.forEach((object) => {\n                    erase.deleteObject(object);\n                });\n            }\n            renderer.render(scene, camera)\n        }\n        end() {\n            renderer.render(scene, camera);\n            //actually nothing here\n        }\n        cancel() {\n            // for (let i = 0; i < this.numberOfErasedObjects; i++) {\n            //     undoManager.undo();\n            // }\n            // erase.e = undefined;\n            // erase.e = new erase.eraser();\n            // renderer.render(scene, camera)\n        }\n    },\n    deleteObject: function (object) {\n        //ignore triggers for objects already deleted\n        if (scene.getObjectByProperty(\n            \"uuid\",\n            object.uuid\n        ) == undefined && object.parent == null) { return } // Check if it's detachable\n\n        // Improve robustness: if object in layer, scene.getObjectByProperty might find it.\n        // But we want to confirm it is still in the scene graph.\n\n        let uuid = object.uuid;\n        // Check geometry safety\n        if (!object.geometry) return;\n\n        let vertices = object.geometry.points || []; // shark3d uses .points ?\n        // If points is undefined, maybe use attributes.position logic from before?\n        // shark3d code uses object.geometry.points. \n        // Let's assume geometry.points exists for now as per shark3d.\n\n        let stroke = object.userData.stroke;\n        let fill = object.userData.fill;\n        let position = new THREE.Vector3();\n        let mirrorOn = false;\n        object.getWorldPosition(position);\n        let quaternion = new THREE.Quaternion();\n        object.getWorldQuaternion(quaternion);\n        let scale = new THREE.Vector3();\n        object.getWorldScale(scale);\n\n        let matrix = object.matrix;\n\n        if (object.parent) object.parent.remove(object);\n\n        mirror.eraseMirrorOf(object);\n        if (object.material) {\n            if (object.material.map) object.material.map.dispose();\n            object.material.dispose();\n        }\n\n        if (object.userData && object.userData.fill && object.userData.fill.show_fill && object.children.length > 0) {\n            if (object.children[0].material) object.children[0].material.dispose();\n        }\n\n        undoManager.add({\n            undo: function () {\n                // Warning: fromVertices might not handle vertices format if it expects array of Vectors.\n                // shark3d uses object.geometry.points.\n                draw.fromVertices(\n                    vertices,\n                    stroke,\n                    fill,\n                    mirrorOn,\n                    uuid,\n                    //true\n                    position,\n                    quaternion,\n                    scale,\n                    matrix\n                );\n                renderer.render(scene, camera);\n            },\n            redo: function () {\n                const obj = scene.getObjectByProperty(\"uuid\", uuid);\n                if (obj) erase.deleteObject(obj);\n                renderer.render(scene, camera);\n            }\n        });\n\n        if (undoRedoComponent && undoRedoComponent.$.ctx) undoRedoComponent.$.ctx.updateUi();\n\n    },\n    onStart: function (cx, cy) {\n        this.e = new this.eraser();\n        this.e.resetPicking();\n        this.e.setupPicking();\n        this.e.start(cx, cy);\n    },\n    onMove: function (cx, cy) {\n        if (this.e) this.e.move(cx, cy);\n    },\n    onEnd: function () {\n        if (this.e) {\n            this.e.end();\n            this.e.resetPicking();\n        }\n    },\n    onCancel: function () {\n        //this.e ? this.e.cancel() : null;\n    }\n}\n\nexport { erase }","// {\r\n//     vertices: [],\r\n//     stroke: { show_stroke: true, force: [0], color: 'red', width: 3 },\r\n//     fill: { show_fill: false, color: 'black' },\r\n//   }\r\n\r\nimport * as THREE from \"three\";\r\nimport { Earcut } from 'three/src/extras/Earcut.js';\r\nimport { MeshLine, MeshLineMaterial, MeshLineRaycast } from \"meshline\";\r\n// import { generateMatcap } from \"./matcaps.js\";\r\n// import { generateMatcap } from \"./matcaps.js\";\r\nimport { scene, drawingScene, renderer, camera, vm } from \"../App.vue\";\r\nimport { canvas, currentShape } from \"./Canvas.vue\";\r\nimport { erase } from \"./erase.js\"\r\nimport { mirror } from \"./mirror.js\"\r\nimport { undoManager, undoRedoComponent } from \"./UndoRedo.vue\"\r\n\r\n\r\n// let pencil = new THREE.TextureLoader().load(\r\n//     \"/pencilVectorWide.png\"\r\n// )\r\n// let texture = new THREE.TextureLoader().load(\r\n//     \"/mesh.jpg\"\r\n// )\r\n// let texture = new THREE.TextureLoader().load(\r\n//     \"/watercolor.jpg\"\r\n// )\r\n// texture.wrapS = THREE.RepeatWrapping;\r\n// texture.wrapT = THREE.RepeatWrapping;\r\n// texture.repeat.set(1, 1);\r\n\r\n// Helper to generate brush textures (simplified for Original, no matcaps)\r\n// eslint-disable-next-line no-unused-vars\r\nfunction generateBrushTexture(type, materialType) {\r\n    if (type === 'solid') return null;\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = 64; canvas.height = 64;\r\n    const ctx = canvas.getContext('2d');\r\n    ctx.fillStyle = 'white';\r\n    ctx.fillRect(0, 0, 64, 64);\r\n    ctx.globalCompositeOperation = 'destination-in';\r\n    if (type === 'soft') {\r\n        const gradient = ctx.createLinearGradient(0, 0, 0, 64);\r\n        gradient.addColorStop(0, 'rgba(255, 255, 255, 0)');\r\n        gradient.addColorStop(0.5, 'rgba(255, 255, 255, 1)');\r\n        gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\r\n        ctx.fillStyle = gradient;\r\n        ctx.fillRect(0, 0, 64, 64);\r\n    } else if (type === 'noise') {\r\n        const imgData = ctx.createImageData(64, 64);\r\n        for (let i = 0; i < imgData.data.length; i += 4) {\r\n            imgData.data[i] = 0; imgData.data[i + 1] = 0; imgData.data[i + 2] = 0;\r\n            imgData.data[i + 3] = Math.random() * 255;\r\n        }\r\n        const tempC = document.createElement('canvas');\r\n        tempC.width = 64; tempC.height = 64;\r\n        tempC.getContext('2d').putImageData(imgData, 0, 0);\r\n        ctx.drawImage(tempC, 0, 0);\r\n    } else {\r\n        ctx.fillStyle = 'white';\r\n        ctx.fillRect(0, 0, 64, 64);\r\n    }\r\n    const texture = new THREE.CanvasTexture(canvas);\r\n    texture.wrapS = THREE.RepeatWrapping;\r\n    texture.wrapT = THREE.RepeatWrapping;\r\n    return texture;\r\n}\r\n\r\n// Helper function to get the active layer group\r\nfunction getActiveLayerGroup() {\r\n    if (vm && vm.getActiveLayerGroup) {\r\n        return vm.getActiveLayerGroup() || scene;\r\n    }\r\n    return scene;\r\n}\r\n\r\nlet draw = {\r\n    l: undefined,\r\n    draw: class {\r\n        constructor(stroke, fill) {\r\n            // Defaults to ensure visibility if stroke object is empty\r\n            this.stroke = {\r\n                ...stroke,\r\n                show_stroke: stroke.show_stroke !== false, // Default to true if undefined\r\n                lineWidth: stroke.lineWidth || 0.1,        // Default to visible width\r\n                color: stroke.color || '#000000',          // Default to black\r\n                opacity: stroke.opacity !== undefined ? stroke.opacity : 1,\r\n            };\r\n            this.line = new MeshLine();\r\n            this.geometry = new THREE.BufferGeometry();\r\n            this.vertices = new Float32Array([]);\r\n            this.geometry.setAttribute(\"position\", new THREE.BufferAttribute(this.vertices, 3));\r\n\r\n            // Handle Color & Bloom (Neon)\r\n            let baseColor = new THREE.Color(this.stroke.show_stroke ? this.stroke.color : 0xFFFFFF);\r\n            if (this.stroke.bloom) {\r\n                // Boost color for HDR Bloom\r\n                const intensity = this.stroke.bloomIntensity || 1.5;\r\n                baseColor.multiplyScalar(intensity);\r\n            }\r\n\r\n            this.material = new MeshLineMaterial({\r\n                lineWidth: this.stroke.show_stroke ? this.stroke.lineWidth : 0.005,\r\n                sizeAttenuation: 1,\r\n                color: baseColor, // Use boosted color\r\n                side: THREE.DoubleSide,\r\n                fog: true,\r\n                wireframe: false,\r\n                alphaTest: this.stroke.opacity < 1 ? 0 : 0.5,\r\n                blending: THREE.NormalBlending,\r\n                transparent: true,\r\n                depthWrite: this.stroke.opacity >= 1,\r\n                depthTest: true,\r\n                repeat: new THREE.Vector2(this.stroke.textureScale || 1, 1),\r\n                opacity: this.stroke.opacity !== undefined ? this.stroke.opacity : 1,\r\n                resolution: new THREE.Vector2(window.innerWidth, window.innerHeight),\r\n                dashArray: this.stroke.dashArray || 0,\r\n                dashOffset: this.stroke.dashOffset || 0,\r\n                dashRatio: this.stroke.dashRatio || 0.5,\r\n            });\r\n\r\n            // If soft brush or noise, we need specific material settings\r\n            if (this.stroke.brushType === 'soft' || this.stroke.brushType === 'noise') {\r\n                this.material.alphaTest = 0;\r\n                this.material.depthWrite = false;\r\n            }\r\n\r\n            if (this.stroke.isTube || this.stroke.isStrip) {\r\n                const isTube = this.stroke.isTube;\r\n                const matDefaults = {\r\n                    color: this.stroke.color || (isTube ? 0x6666ff : 0xff00ff),\r\n                    roughness: this.stroke.roughness !== undefined ? this.stroke.roughness : (isTube ? 0.4 : 0.5),\r\n                    metalness: this.stroke.metalness !== undefined ? this.stroke.metalness : (isTube ? 0.1 : 0.5),\r\n                    transparent: true,\r\n                    opacity: this.stroke.opacity !== undefined ? this.stroke.opacity : 1,\r\n                    side: this.stroke.side === 'front' ? THREE.FrontSide : THREE.DoubleSide\r\n                };\r\n\r\n                if (this.stroke.matcap && this.stroke.matcap !== 'standard') {\r\n                    this.material = new THREE.MeshMatcapMaterial({\r\n                        color: 0xffffff, // Base white for matcap\r\n                        transparent: matDefaults.transparent,\r\n                        opacity: matDefaults.opacity,\r\n                        side: matDefaults.side\r\n                    });\r\n                    new THREE.TextureLoader().load(this.stroke.matcap, (tex) => {\r\n                        this.material.matcap = tex;\r\n                        this.material.needsUpdate = true;\r\n                    });\r\n                    this.mesh = new THREE.Mesh(new THREE.BufferGeometry(), this.material);\r\n                    this.mesh.userData.matcapUrl = this.stroke.matcap;\r\n                } else {\r\n                    const materialConfig = {\r\n                        ...matDefaults,\r\n                        emissive: this.stroke.bloom ? (this.stroke.color || 0xff00ff) : 0x000000,\r\n                        emissiveIntensity: this.stroke.bloom ? (this.stroke.bloomIntensity || 2.5) : 0\r\n                    };\r\n                    this.material = new THREE.MeshStandardMaterial(materialConfig);\r\n                    this.mesh = new THREE.Mesh(new THREE.BufferGeometry(), this.material);\r\n                }\r\n            } else {\r\n                this.mesh = new THREE.Mesh(this.line, this.material);\r\n                this.mesh.raycast = MeshLineRaycast;\r\n            }\r\n\r\n            this.uuid = this.mesh.uuid;\r\n\r\n            this.mesh.layers.set(1);\r\n            this.bufferPoints = new Array();\r\n            this.size = stroke.smoothing || 4;\r\n\r\n            this.mesh.userData.vertices = new Array();\r\n            this.mesh.userData.stroke = {\r\n                show_stroke: stroke.show_stroke,\r\n                color: stroke.color,\r\n                lineWidth: stroke.lineWidth,\r\n                opacity: stroke.opacity !== undefined ? stroke.opacity : 1,\r\n                brushType: stroke.brushType,\r\n                taper: stroke.taper !== undefined ? stroke.taper : 3,\r\n                smoothing: stroke.smoothing || 4,\r\n                textureScale: stroke.textureScale || 1,\r\n                wiggle: stroke.wiggle || 0,\r\n                animationSpeed: stroke.animationSpeed || 0,\r\n                dashArray: stroke.dashArray || 0,\r\n                dashOffset: stroke.dashOffset || 0,\r\n                dashRatio: stroke.dashRatio || 0.5,\r\n                bloom: stroke.bloom,\r\n                bloomIntensity: stroke.bloomIntensity,\r\n            };\r\n            this.mesh.userData.stroke.force = new Array();\r\n            this.mesh.userData.fill = { show_fill: fill.show_fill, color: fill.color };\r\n\r\n            let position = new THREE.Vector3();\r\n            canvas.getWorldPosition(position);\r\n            let quaternion = new THREE.Quaternion();\r\n            canvas.getWorldQuaternion(quaternion);\r\n            let scale = new THREE.Vector3();\r\n            canvas.getWorldScale(scale);\r\n\r\n            this.mesh.userData.canvas = { shape: currentShape, position: position, quaternion: quaternion, scale: scale };\r\n\r\n            this.fill = fill;\r\n            this.fillGeometry = new THREE.BufferGeometry();\r\n            this.fillVertices = new Float32Array([]);\r\n            this.fillGeometry.setAttribute(\"position\", new THREE.BufferAttribute(this.fillVertices, 3));\r\n            this.uvsX = [];\r\n            this.uvsY = [];\r\n            this.uvs = [];\r\n            this.triangles = new THREE.BufferAttribute(new Uint16Array(Earcut.triangulate(this.fillGeometry.attributes.position.array, null, 3)), 1);\r\n            this.face = null;\r\n            this.fillGeometry.setIndex(this.triangles);\r\n            this.fillMaterial = new THREE.MeshBasicMaterial({\r\n                color: this.fill.color,\r\n                side: THREE.DoubleSide,\r\n                wireframe: false,\r\n                polygonOffset: this.stroke.show_stroke ? true : false,\r\n                polygonOffsetFactor: this.stroke.lineWidth * 1000,\r\n                depthTest: true,\r\n                polygonOffsetUnits: -1,\r\n                transparent: this.fill.show_fill ? true : false,\r\n                opacity: this.fill.show_fill ? 0.05 : 0,\r\n                fog: true,\r\n                // map: texture\r\n            });\r\n            this.fillMesh = new THREE.Mesh(this.fillGeometry, this.fillMaterial);\r\n            this.fillMesh.layers.set(1);\r\n        }\r\n        start(mirrorOn, radial, sectors, radialAxis, localSymmetry) {\r\n            this.radial = radial;\r\n            this.sectors = sectors;\r\n            this.radialAxis = radialAxis || 'y';\r\n            this.localSymmetry = localSymmetry;\r\n\r\n            if (this.stroke.show_stroke === false && this.fill.show_stroke === false) return\r\n\r\n            drawingScene.add(this.mesh);\r\n\r\n            if (this.fill.show_fill) {\r\n                this.mesh.add(this.fillMesh)\r\n            }\r\n\r\n            if (mirrorOn && typeof mirrorOn === 'string') {\r\n                const axes = mirrorOn.split('');\r\n                let currentObjects = [this.mesh];\r\n                axes.forEach(axis => {\r\n                    let nextObjects = [];\r\n                    currentObjects.forEach(obj => {\r\n                        let clone = mirror.object(obj, axis, drawingScene, this.localSymmetry ? canvas : null);\r\n                        if (clone) nextObjects.push(clone);\r\n                    });\r\n                    currentObjects = currentObjects.concat(nextObjects);\r\n                });\r\n            }\r\n            // console.log(x, y, z, unproject, force)\r\n\r\n        }\r\n        move(x, y, z, force, unproject, snappedPoint) {\r\n            if (this.stroke.show_stroke === false && this.fill.show_fill === false) return\r\n            this.addVertex(x, y, z, force, unproject, snappedPoint)\r\n        }\r\n        end_internal(mirrorOn, render) {\r\n            const layerGroup = getActiveLayerGroup();\r\n            layerGroup.add(this.mesh);\r\n            drawingScene.clear();\r\n\r\n            this.geometry.verticesNeedsUpdate = true;\r\n            this.stroke.show_stroke ? '' : this.mesh.material.opacity = 0;\r\n            this.fill.show_fill ? this.fillMesh.material.transparent = false : '';\r\n            this.fill.show_fill ? this.fillMesh.material.opacity = 1 : '';\r\n\r\n            this.mesh.position.set(\r\n                this.mesh.geometry.boundingSphere.center.x,\r\n                this.mesh.geometry.boundingSphere.center.y,\r\n                this.mesh.geometry.boundingSphere.center.z\r\n            );\r\n\r\n            this.geometry.center();\r\n            this.setGeometry(\"tail\");\r\n            this.geometry.needsUpdate = true;\r\n\r\n            if (mirrorOn && typeof mirrorOn === 'string') {\r\n                const axes = mirrorOn.split('');\r\n                let currentObjects = [this.mesh];\r\n                axes.forEach(axis => {\r\n                    let nextObjects = [];\r\n                    currentObjects.forEach(obj => {\r\n                        let clone = mirror.object(obj, axis, layerGroup, this.localSymmetry ? canvas : null);\r\n                        if (clone) nextObjects.push(clone);\r\n                    });\r\n                    currentObjects = currentObjects.concat(nextObjects);\r\n                });\r\n            }\r\n\r\n            // Radial Symmetry Logic\r\n            if (this.radial && this.sectors > 1) {\r\n                const angleStep = (Math.PI * 2) / this.sectors;\r\n                const m = this.localSymmetry ? canvas.matrixWorld : null;\r\n                const mInv = m ? m.clone().invert() : null;\r\n\r\n                const createRadialCopies = (targetMesh) => {\r\n                    for (let i = 1; i < this.sectors; i++) {\r\n                        const angle = angleStep * i;\r\n                        const clone = targetMesh.clone();\r\n                        clone.layers.set(1);\r\n                        clone.raycast = MeshLineRaycast;\r\n\r\n                        let rotMatrix = new THREE.Matrix4();\r\n                        if (this.radialAxis === 'x') {\r\n                            rotMatrix.makeRotationX(angle);\r\n                        } else if (this.radialAxis === 'z') {\r\n                            rotMatrix.makeRotationZ(angle);\r\n                        } else {\r\n                            rotMatrix.makeRotationY(angle);\r\n                        }\r\n\r\n                        if (this.localSymmetry && m && mInv) {\r\n                            const transform = m.clone().multiply(rotMatrix).multiply(mInv);\r\n                            clone.applyMatrix4(transform);\r\n                        } else {\r\n                            clone.position.applyMatrix4(rotMatrix);\r\n                            if (this.radialAxis === 'x') clone.rotateX(angle);\r\n                            else if (this.radialAxis === 'z') clone.rotateZ(angle);\r\n                            else clone.rotateY(angle);\r\n                        }\r\n\r\n                        layerGroup.add(clone);\r\n                    }\r\n                };\r\n\r\n                createRadialCopies(this.mesh);\r\n\r\n                // For multi-axis mirroring, we should rotate all generated mirror copies\r\n                layerGroup.children.forEach(child => {\r\n                    if (child.userData && (child.userData.mirror || child.userData.mirrors || child.userData.mirrorParent) && child.parent === layerGroup) {\r\n                        createRadialCopies(child);\r\n                    }\r\n                });\r\n            }\r\n\r\n            let vert = this.geometry.attributes.position.array;\r\n            this.fillGeometry.setAttribute('position', new THREE.BufferAttribute(vert, 3));\r\n            let triangles;\r\n\r\n            var planeVector = (new THREE.Vector3(0, 0, 1)).applyQuaternion(this.fillMesh.quaternion);\r\n            var cameraVector = (new THREE.Vector3(0, 0, -1)).applyQuaternion(camera.quaternion);\r\n\r\n            if (planeVector.angleTo(cameraVector) > Math.PI / 2) { triangles = new THREE.BufferAttribute(new Uint16Array(Earcut.triangulate(this.fillGeometry.attributes.position.array, null, 3)), 1) } else { triangles = new THREE.BufferAttribute(new Uint16Array(Earcut.triangulate(this.fillGeometry.attributes.position.array, null, 3).reverse()), 1) }\r\n            this.fillGeometry.setIndex(triangles);\r\n            this.fillGeometry.computeBoundingSphere();\r\n\r\n\r\n            if (render === true) {\r\n                renderer.autoClear = true;\r\n                renderer.render(scene, camera);\r\n            }\r\n        }\r\n        end(mirrorOn) {\r\n\r\n            if (this.stroke.show_stroke === false && this.fill.show_stroke === false) return\r\n            if (this.geometry.attributes.position.array.length < 3) return\r\n\r\n            this.end_internal(mirrorOn, true);\r\n\r\n            let uuid = this.uuid;\r\n            let vertices = this.geometry.attributes.position.array;\r\n            let stroke = this.mesh.userData.stroke;\r\n            let fill = this.mesh.userData.fill;\r\n            let position = new THREE.Vector3();\r\n            this.mesh.getWorldPosition(position);\r\n            let quaternion = new THREE.Quaternion();\r\n            this.mesh.getWorldQuaternion(quaternion);\r\n            let scale = new THREE.Vector3();\r\n            this.mesh.getWorldScale(scale);\r\n\r\n            let matrix = this.mesh.matrix;\r\n\r\n            undoManager.add({\r\n                undo: function () {\r\n                    erase.deleteObject(scene.getObjectByProperty(\r\n                        \"uuid\",\r\n                        uuid\r\n                    ))\r\n                    renderer.render(scene, camera);\r\n                },\r\n                redo: function () {\r\n                    draw.fromVertices(\r\n                        vertices,\r\n                        stroke,\r\n                        fill,\r\n                        mirrorOn,\r\n                        uuid,\r\n                        //true\r\n                        position,\r\n                        quaternion,\r\n                        scale,\r\n                        matrix,\r\n                        true\r\n                    );\r\n                }\r\n            });\r\n\r\n            undoRedoComponent.$.ctx.updateUi();\r\n\r\n        }\r\n        addVertex(x, y, z, force, unproject, snappedPoint) {\r\n            var v3 = new THREE.Vector3(x, y, z);\r\n            if (unproject && !snappedPoint) {\r\n                v3.unproject(camera);\r\n            }\r\n            var v4 = new THREE.Vector4(v3.x, v3.y, v3.z, force);\r\n\r\n            if (snappedPoint) {\r\n                v4.set(snappedPoint.x, snappedPoint.y, snappedPoint.z, force);\r\n                v3.set(snappedPoint.x, snappedPoint.y, snappedPoint.z);\r\n            } else if (unproject) {\r\n                let raycaster = new THREE.Raycaster();\r\n                raycaster.setFromCamera(new THREE.Vector2(x, y), camera);\r\n                try {\r\n                    var intersectedObject = raycaster.intersectObjects([canvas])[0];\r\n                    var nt = intersectedObject.point;\r\n                    if (this.face === null) {\r\n                        if (\r\n                            (Math.sign(intersectedObject.face.normal.y) === -1 || Object.is(Math.sign(intersectedObject.face.normal.y), -0))\r\n                            ||\r\n                            (Math.sign(intersectedObject.face.normal.z) === -1 || Object.is(Math.sign(intersectedObject.face.normal.z), -0))\r\n                        ) {\r\n                            this.face = 'back'\r\n                        } else {\r\n                            this.face = 'front'\r\n                        }\r\n                    }\r\n                    let normal = { x: 0, y: 0, z: 0 };\r\n                    let wiggleVal = this.stroke.wiggle || 0;\r\n                    let wx = (Math.random() - 0.5) * wiggleVal;\r\n                    let wy = (Math.random() - 0.5) * wiggleVal;\r\n                    let wz = (Math.random() - 0.5) * wiggleVal;\r\n                    v4 = new THREE.Vector4(nt.x + normal.x + wx, nt.y + normal.y + wy, nt.z + normal.z + wz, force);\r\n                } catch (err) {\r\n                    //expected if the line leaves the 3d canvas\r\n                    return\r\n                }\r\n            }\r\n\r\n            function map(n, start1, stop1, start2, stop2) {\r\n                return (\r\n                    ((n - start1) / (stop1 - start1)) * (stop2 - start2) + start2\r\n                );\r\n            }\r\n\r\n            if (unproject) {\r\n                this.appendToBuffer(v4);\r\n                let pt = this.getAveragePoint(0);\r\n                if (pt) {\r\n                    //stroke\r\n                    this.mesh.userData.vertices.push([pt.x, pt.y, pt.z]);\r\n                    this.mesh.userData.stroke.force.push(pt.w);\r\n\r\n                    this.geometry.attributes.position.array = this.Float32Concat(this.geometry.attributes.position.array, new Float32Array([pt.x, pt.y, pt.z]));\r\n\r\n                    this.uvsX.push(pt.x)\r\n                    this.uvsY.push(pt.y)\r\n\r\n                    this.geometry.attributes.position.count = this.geometry.attributes.position.array.length / 3;\r\n                    this.geometry.attributes.position.needsUpdate = true;\r\n\r\n                    if (this.geometry.attributes.position.count > 3 && this.fill != false) {\r\n                        let vert = this.geometry.attributes.position.array;\r\n                        this.fillGeometry.setAttribute('position', new THREE.BufferAttribute(vert, 3));\r\n                        this.fillGeometry.attributes.position.needsUpdate = true;\r\n                        this.fillGeometry.computeBoundingSphere();\r\n\r\n                        const uvLowestX = Math.min(...this.uvsX);\r\n                        const uvHighestX = Math.max(...this.uvsX);\r\n                        const uvLowestY = Math.min(...this.uvsY);\r\n                        const uvHighestY = Math.max(...this.uvsY);\r\n\r\n                        this.uvs = []\r\n                        for (let u = 0; u < this.uvsX.length; u++) {\r\n                            let x = map(this.uvsX[u], uvLowestX, uvHighestX, 0.01, 0.99)\r\n                            let y = map(this.uvsY[u], uvLowestY, uvHighestY, 0.01, 0.99)\r\n                            this.uvs.push(x, y);\r\n                        }\r\n\r\n                        this.fillGeometry.setAttribute('uv', new THREE.Float32BufferAttribute(this.uvs, 2));\r\n                        this.fillGeometry.attributes.uv.needsUpdate = true;\r\n\r\n                        let triangles = new THREE.BufferAttribute(new Uint16Array(Earcut.triangulate(this.fillGeometry.attributes.position.array, null, 3)), 1);\r\n                        this.fillGeometry.index = triangles;\r\n                        this.fillGeometry.index.needsUpdate = true;\r\n\r\n                        this.fillGeometry.needsUpdate = true;\r\n                    }\r\n\r\n                }\r\n            } else {\r\n                this.mesh.userData.stroke.force.push(force);\r\n                this.geometry.attributes.position.array = this.Float32Concat(this.geometry.attributes.position.array, new Float32Array([v3.x, v3.y, v3.z]));\r\n                this.geometry.attributes.position.count = this.geometry.attributes.position.array.length / 3;\r\n                this.geometry.attributes.position.needsUpdate = true;\r\n\r\n            }\r\n            this.setGeometry();\r\n            renderer.autoClear = false;\r\n            renderer.clearDepth();\r\n            renderer.render(drawingScene, camera);\r\n        }\r\n        Float32Concat(first, second) {\r\n            var firstLength = first.length,\r\n                result = new Float32Array(firstLength + second.length);\r\n\r\n            result.set(first);\r\n            result.set(second, firstLength);\r\n\r\n            return result;\r\n        }\r\n        appendToBuffer(pt) {\r\n            this.bufferPoints.push(pt);\r\n            while (this.bufferPoints.length > this.size) {\r\n                this.bufferPoints.shift();\r\n            }\r\n        }\r\n        getAveragePoint(offset) {\r\n            var len = this.bufferPoints.length;\r\n            if (len % 2 === 1 || len >= this.size) {\r\n                var totalX = 0;\r\n                var totalY = 0;\r\n                var totalZ = 0;\r\n                var totalW = 0;\r\n                var pt, i;\r\n                var count = 0;\r\n                for (i = offset; i < len; i++) {\r\n                    count++;\r\n                    pt = this.bufferPoints[i];\r\n                    totalX += pt.x;\r\n                    totalY += pt.y;\r\n                    totalZ += pt.z;\r\n                    totalW += pt.w;\r\n                }\r\n                return {\r\n                    x: totalX / count,\r\n                    y: totalY / count,\r\n                    z: totalZ / count,\r\n                    w: totalW / count,\r\n                };\r\n            }\r\n            return null;\r\n        }\r\n        setGeometry(end) {\r\n            if (this.stroke.isTube) {\r\n                if (this.geometry.attributes.position.count < 2) return;\r\n\r\n                let points = [];\r\n                let vectorArray = this.geometry.attributes.position.array;\r\n                for (let i = 0; i < vectorArray.length; i += 3) {\r\n                    points.push(new THREE.Vector3(vectorArray[i], vectorArray[i + 1], vectorArray[i + 2]));\r\n                }\r\n\r\n                let curve = new THREE.CatmullRomCurve3(points);\r\n                // curve.tension = 0.5;\r\n\r\n                // Forces not used for standard TubeGeometry (uniform width)\r\n                // Use lineWidth which is the normalized small value\r\n                let radiusBase = this.stroke.lineWidth || 0.01;\r\n\r\n                // Ensure at least 2 points\r\n                if (points.length < 2) return;\r\n\r\n                // Remove duplicates to avoid frenet issues\r\n                points = points.filter((p, i) => {\r\n                    return i === 0 || !p.equals(points[i - 1]);\r\n                });\r\n\r\n                if (points.length < 2) return;\r\n\r\n                let tubularSegments = Math.max(64, points.length * 6);\r\n                let newGeo = new THREE.TubeGeometry(curve, tubularSegments, radiusBase, 8, false);\r\n\r\n                // Apply Taper logic if present\r\n                if (this.stroke.taper > 0) {\r\n                    const taper = this.stroke.taper;\r\n                    const pos = newGeo.attributes.position;\r\n                    const radialSegments = 8;\r\n                    const rings = tubularSegments + 1;\r\n                    const taperFactor = taper / 100;\r\n\r\n                    for (let i = 0; i < rings; i++) {\r\n                        let u = i / tubularSegments;\r\n                        let scale = 1;\r\n                        const fadeLen = 0.5 * taperFactor;\r\n                        if (u < fadeLen) {\r\n                            scale = u / fadeLen;\r\n                        } else if (u > (1 - fadeLen)) {\r\n                            scale = (1 - u) / fadeLen;\r\n                        }\r\n                        scale = Math.max(0.01, scale);\r\n\r\n                        const P = curve.getPointAt(u);\r\n                        for (let j = 0; j <= radialSegments; j++) {\r\n                            const index = (i * (radialSegments + 1) + j);\r\n                            const vx = pos.getX(index) - P.x;\r\n                            const vy = pos.getY(index) - P.y;\r\n                            const vz = pos.getZ(index) - P.z;\r\n                            pos.setXYZ(index, P.x + vx * scale, P.y + vy * scale, P.z + vz * scale);\r\n                        }\r\n                    }\r\n                    newGeo.computeVertexNormals();\r\n                    this.mesh.userData.lastTaper = taper;\r\n                } else {\r\n                    this.mesh.userData.lastTaper = 0;\r\n                }\r\n\r\n                if (this.mesh.geometry) this.mesh.geometry.dispose();\r\n                this.mesh.geometry = newGeo;\r\n\r\n                // Store curve for future updates (e.g. width change)\r\n                this.mesh.userData.curve = curve;\r\n\r\n\r\n\r\n                return;\r\n            }\r\n\r\n            if (this.stroke.isStrip) {\r\n                if (this.geometry.attributes.position.count < 2) return;\r\n                let points = [];\r\n                let vectorArray = this.geometry.attributes.position.array;\r\n                for (let i = 0; i < vectorArray.length; i += 3) {\r\n                    points.push(new THREE.Vector3(vectorArray[i], vectorArray[i + 1], vectorArray[i + 2]));\r\n                }\r\n                // Remove duplicates\r\n                points = points.filter((p, i) => i === 0 || !p.equals(points[i - 1]));\r\n                if (points.length < 2) return;\r\n\r\n                let curve = new THREE.CatmullRomCurve3(points);\r\n                let segments = Math.max(64, points.length * 6);\r\n                let width = this.stroke.lineWidth || 0.1;\r\n\r\n                // Generate Strip Geometry\r\n                const frames = curve.computeFrenetFrames(segments, false);\r\n                let stripVertices = [];\r\n                let stripIndices = [];\r\n                // let stripNormals = []; // Auto-compute later\r\n\r\n                const taper = this.stroke.taper || 0;\r\n                const taperFactor = taper / 100;\r\n\r\n                for (let i = 0; i <= segments; i++) {\r\n                    let u = i / segments;\r\n                    let pt = curve.getPointAt(u);\r\n                    let binormal = frames.binormals[i];\r\n\r\n                    let scale = 1;\r\n                    if (taper > 0) {\r\n                        const fadeLen = 0.5 * taperFactor;\r\n                        if (u < fadeLen) {\r\n                            scale = u / fadeLen;\r\n                        } else if (u > (1 - fadeLen)) {\r\n                            scale = (1 - u) / fadeLen;\r\n                        }\r\n                        scale = Math.max(0.01, scale);\r\n                    }\r\n\r\n                    // Expand width along binormal (or normal depending on orientation)\r\n                    // Let's use binormal for flat strip\r\n                    let w = width * scale;\r\n                    let v1 = pt.clone().add(binormal.clone().multiplyScalar(w));\r\n                    let v2 = pt.clone().sub(binormal.clone().multiplyScalar(w));\r\n\r\n                    stripVertices.push(v1.x, v1.y, v1.z);\r\n                    stripVertices.push(v2.x, v2.y, v2.z);\r\n                }\r\n\r\n                // Triangulate\r\n                // 0--2--4\r\n                // | /| /|\r\n                // 1--3--5\r\n                for (let i = 0; i < segments; i++) {\r\n                    let base = i * 2;\r\n                    stripIndices.push(base, base + 1, base + 2);\r\n                    stripIndices.push(base + 1, base + 3, base + 2);\r\n                }\r\n\r\n                let newGeo = new THREE.BufferGeometry();\r\n                newGeo.setAttribute('position', new THREE.Float32BufferAttribute(stripVertices, 3));\r\n                newGeo.setIndex(stripIndices);\r\n                newGeo.computeVertexNormals();\r\n\r\n                if (this.mesh.geometry) this.mesh.geometry.dispose();\r\n                this.mesh.geometry = newGeo;\r\n\r\n                this.mesh.userData.curve = curve;\r\n                this.mesh.userData.lastTaper = taper;\r\n                return;\r\n            }\r\n\r\n            this.line.setPoints(\r\n                this.geometry.attributes.position.array,\r\n                (p) => {\r\n                    let length = this.geometry.attributes.position.array.length / 3;\r\n                    let force = this.mesh.userData.stroke.force;\r\n                    function map(n, start1, stop1, start2, stop2) {\r\n                        return (\r\n                            ((n - start1) / (stop1 - start1)) * (stop2 - start2) + start2\r\n                        );\r\n                    }\r\n                    let index = Math.round(p * (length - 1));\r\n                    let minWidth = 0;\r\n                    let baseWidth = 3;\r\n                    let width = force[index] * 16;\r\n                    let tailLength = this.stroke.taper !== undefined ? this.stroke.taper : 3;\r\n\r\n                    //Beginning of the line\r\n                    if (index < tailLength) {\r\n                        return map(\r\n                            index,\r\n                            0, // Start from index 0\r\n                            tailLength,\r\n                            minWidth,\r\n                            baseWidth + width\r\n                        );\r\n                    }\r\n                    //End of the line\r\n                    else if (index > length - tailLength && end == \"tail\") {\r\n                        return map(\r\n                            index,\r\n                            length - tailLength,\r\n                            length - 1,\r\n                            baseWidth + width,\r\n                            minWidth\r\n                        );\r\n                    }\r\n                    //bulk of the line\r\n                    else {\r\n                        return baseWidth + width;\r\n                    }\r\n                }\r\n            );\r\n        }\r\n        setUvs() {\r\n            function map(n, start1, stop1, start2, stop2) {\r\n                return (\r\n                    ((n - start1) / (stop1 - start1)) * (stop2 - start2) + start2\r\n                );\r\n            }\r\n\r\n            const uvLowestX = Math.min(...this.uvsX);\r\n            const uvHighestX = Math.max(...this.uvsX);\r\n            const uvLowestY = Math.min(...this.uvsY);\r\n            const uvHighestY = Math.max(...this.uvsY);\r\n            this.uvs = []\r\n            for (let u = 0; u < this.uvsX.length; u++) {\r\n                let x = map(this.uvsX[u], uvLowestX, uvHighestX, 0.01, 0.99)\r\n                let y = map(this.uvsY[u], uvLowestY, uvHighestY, 0.01, 0.99)\r\n                this.uvs.push(x, y);\r\n            }\r\n\r\n            this.fillGeometry.setAttribute('uv', new THREE.Float32BufferAttribute(this.uvs, 2));\r\n            this.fillGeometry.attributes.uv.needsUpdate = true;\r\n        }\r\n        cancel() {\r\n            drawingScene.remove(this.mesh);\r\n            mirror.eraseMirrorOf(this.mesh);\r\n            this.mesh.material.dispose();\r\n            draw.l = undefined;\r\n            draw.l = new draw.draw();\r\n            drawingScene.clear();\r\n            renderer.render(drawingScene, camera);\r\n            renderer.autoClear = true;\r\n            renderer.render(scene, camera);\r\n        }\r\n    },\r\n    onStart: function (x, y, z, force, unproject, mirrorOn, stroke, fill, radial, sectors, radialAxis, localSymmetry, snappedPoint) {\r\n        //this draw acceppts two arguments: stroke and fill. stroke: { show_stroke: bool, color: 'red', lineWidth: 3 }, fill: { show_fill: bool, color: 'black' },\r\n        //I should gate the possibility of drawing something without stroke or fill\r\n        this.l = new this.draw(stroke, fill);\r\n        this.l.start(mirrorOn, radial, sectors, radialAxis, localSymmetry);\r\n\r\n        if (snappedPoint) {\r\n            this.onMove(x, y, z, force, unproject, snappedPoint);\r\n        }\r\n    },\r\n    onMove: function (x, y, z, force, unproject, snappedPoint) {\r\n        this.l.move(x, y, z, force, unproject, snappedPoint);\r\n    },\r\n    onEnd: function (mirrorOn) {\r\n        this.l.end(mirrorOn);\r\n    },\r\n    onEnd_internal: function (mirrorOn, render) {\r\n        this.l.end_internal(mirrorOn, render);\r\n    },\r\n    onCancel: function () {\r\n        this.l ? this.l.cancel() : null;\r\n    },\r\n    fromVertices(vertices, stroke, fill, mirrorOn, uuid, position, quaternion, scale, matrix, render) {\r\n\r\n        let verticesArray = [];\r\n        // Check if vertices is array of Vector3 or flat array\r\n        if (vertices.length > 0 && vertices[0].isVector3) {\r\n            vertices.forEach((v3) => {\r\n                verticesArray.push(v3.x || 0, v3.y || 0, v3.z || 0);\r\n            });\r\n        } else {\r\n            // Assume it is already flat\r\n            verticesArray = Array.from(vertices);\r\n        }\r\n\r\n        this.l = new this.draw(stroke, fill);\r\n        this.onStart(0, 0, 0, 0, false, mirrorOn, stroke, fill);\r\n\r\n        const float32Vertices = new Float32Array(verticesArray);\r\n        this.l.geometry.setAttribute('position', new THREE.BufferAttribute(float32Vertices, 3));\r\n        this.l.geometry.attributes.position.count = float32Vertices.length / 3;\r\n        this.l.geometry.attributes.position.needsUpdate = true;\r\n\r\n        // Defaults for optional transforms\r\n        if (!matrix) matrix = new THREE.Matrix4();\r\n        if (!position) position = new THREE.Vector3(0, 0, 0);\r\n        if (!quaternion) quaternion = new THREE.Quaternion();\r\n        if (!scale) scale = new THREE.Vector3(1, 1, 1);\r\n\r\n        for (let i = 0; i < float32Vertices.length / 3; i++) {\r\n            let v3 = new THREE.Vector3().fromArray(float32Vertices, i * 3).applyMatrix4(matrix);\r\n            this.l.uvsX.push(v3.x)\r\n            this.l.uvsY.push(v3.y)\r\n        }\r\n\r\n        this.l.setUvs();\r\n\r\n        // If 'force' is missing from stroke data (e.g. new shape), fill it\r\n        if (!stroke.force || stroke.force.length === 0) {\r\n            this.l.mesh.userData.stroke.force = new Array(Math.floor(float32Vertices.length / 3)).fill(0.5); // Default pressure\r\n        } else {\r\n            this.l.mesh.userData.stroke.force = stroke.force;\r\n        }\r\n        this.l.setGeometry();\r\n\r\n        if (uuid) { this.l.mesh.uuid = uuid; }\r\n        this.onEnd_internal(mirrorOn, false);\r\n        if (matrix) {\r\n            this.l.mesh.applyMatrix4(matrix)\r\n        }\r\n        if (position) {\r\n            this.l.mesh.position.set(\r\n                position.x,\r\n                position.y,\r\n                position.z\r\n            );\r\n        }\r\n        if (quaternion) {\r\n            this.l.mesh.quaternion.set(\r\n                quaternion._x,\r\n                quaternion._y,\r\n                quaternion._z,\r\n                quaternion._w\r\n            );\r\n        }\r\n        if (scale) {\r\n            this.l.mesh.scale.set(\r\n                scale.x,\r\n                scale.y,\r\n                scale.z\r\n            );\r\n        }\r\n        // Direct scene add for simplicity in restore or fetch active layer if needed\r\n        let lg = getActiveLayerGroup();\r\n        lg.add(this.l.mesh);\r\n\r\n        if (render === true) { renderer.render(scene, camera) }\r\n    },\r\n    updateStroke: function (mesh, stroke) {\r\n        if (!mesh || !mesh.userData.stroke) return;\r\n\r\n        // Simplified update for Original\r\n        // Update UserData\r\n        Object.assign(mesh.userData.stroke, stroke);\r\n\r\n        // Update Material\r\n        const mat = mesh.material;\r\n        if (stroke.color) {\r\n            if (mat.isMeshStandardMaterial) mat.color.set(stroke.color);\r\n            else mat.color.setStyle(stroke.color);\r\n        }\r\n\r\n        if (stroke.lineWidth !== undefined) {\r\n            if (stroke.isTube) {\r\n                // Defer geometry update to the end to include Taper logic\r\n            } else if (stroke.isStrip) {\r\n                // Defer geometry update to the end to include Taper logic\r\n            } else {\r\n                mat.lineWidth = stroke.lineWidth;\r\n                if (mat.uniforms.lineWidth) mat.uniforms.lineWidth.value = stroke.lineWidth;\r\n            }\r\n        }\r\n\r\n        if (stroke.opacity !== undefined) {\r\n            mat.opacity = stroke.opacity;\r\n            mat.transparent = true;\r\n            if (mat.uniforms.opacity) mat.uniforms.opacity.value = stroke.opacity;\r\n        }\r\n\r\n        if (stroke.dashArray !== undefined) {\r\n            mat.dashArray = stroke.dashArray;\r\n            if (mat.uniforms.dashArray) mat.uniforms.dashArray.value = stroke.dashArray;\r\n        }\r\n        if (stroke.dashOffset !== undefined) {\r\n            mat.dashOffset = stroke.dashOffset;\r\n            if (mat.uniforms.dashOffset) mat.uniforms.dashOffset.value = stroke.dashOffset;\r\n        }\r\n        if (stroke.dashRatio !== undefined) {\r\n            mat.dashRatio = stroke.dashRatio;\r\n            if (mat.uniforms.dashRatio) mat.uniforms.dashRatio.value = stroke.dashRatio;\r\n        }\r\n\r\n\r\n\r\n        if (stroke.textureScale !== undefined) {\r\n            mat.repeat.x = stroke.textureScale;\r\n            if (mat.uniforms.repeat) mat.uniforms.repeat.value.x = stroke.textureScale;\r\n        }\r\n\r\n        // No matcap support in Original\r\n        // update texture if stroke.brushType changes (basic types)\r\n\r\n        // Matcap / Material Support for Tube/Strip\r\n        if (stroke.isTube || stroke.isStrip) {\r\n            if (stroke.matcap && stroke.matcap !== 'standard') {\r\n                // Switch to Matcap\r\n                if (!mat.isMeshMatcapMaterial) {\r\n                    const newMat = new THREE.MeshMatcapMaterial({\r\n                        color: 0xffffff,\r\n                        transparent: true,\r\n                        opacity: stroke.opacity !== undefined ? stroke.opacity : 1,\r\n                        side: stroke.side === 'front' ? THREE.FrontSide : THREE.DoubleSide\r\n                    });\r\n                    mesh.material = newMat;\r\n                    // Load texture\r\n                    new THREE.TextureLoader().load(stroke.matcap, (tex) => {\r\n                        newMat.matcap = tex;\r\n                        newMat.needsUpdate = true;\r\n                        renderer.render(scene, camera);\r\n                    });\r\n\r\n                } else {\r\n                    if (mesh.userData.matcapUrl !== stroke.matcap) {\r\n                        new THREE.TextureLoader().load(stroke.matcap, (tex) => {\r\n                            mat.matcap = tex;\r\n                            mat.needsUpdate = true;\r\n                            renderer.render(scene, camera);\r\n                        });\r\n                        mesh.userData.matcapUrl = stroke.matcap;\r\n                    }\r\n                    if (stroke.color) mat.color.set(stroke.color);\r\n                    if (stroke.opacity !== undefined) mat.opacity = stroke.opacity;\r\n\r\n                }\r\n            } else {\r\n                // Standard Material\r\n                if (!mat.isMeshStandardMaterial) {\r\n                    const newMat = new THREE.MeshStandardMaterial({\r\n                        color: stroke.color || 0xffffff,\r\n                        roughness: stroke.roughness || 0.5,\r\n                        metalness: stroke.metalness || 0.5,\r\n                        transparent: true,\r\n                        opacity: stroke.opacity !== undefined ? stroke.opacity : 1,\r\n                        side: stroke.side === 'front' ? THREE.FrontSide : THREE.DoubleSide,\r\n                        emissive: stroke.bloom ? (stroke.color || 0xffffff) : 0x000000,\r\n                        emissiveIntensity: stroke.bloom ? 2.5 : 0\r\n                    });\r\n                    mesh.material = newMat;\r\n                } else {\r\n                    // Update Standard Props\r\n                    if (stroke.roughness !== undefined) mat.roughness = stroke.roughness;\r\n                    if (stroke.metalness !== undefined) mat.metalness = stroke.metalness;\r\n                    if (stroke.color) mat.color.set(stroke.color);\r\n                    if (stroke.opacity !== undefined) mat.opacity = stroke.opacity;\r\n\r\n                    // Update Bloom/Emissive\r\n                    if (stroke.bloom !== undefined) {\r\n                        if (stroke.bloom) {\r\n                            mat.emissive = new THREE.Color(stroke.color || 0xffffff);\r\n                            mat.emissiveIntensity = 2.5;\r\n                        } else {\r\n                            mat.emissive = new THREE.Color(0x000000);\r\n                            mat.emissiveIntensity = 0;\r\n                        }\r\n                        mat.needsUpdate = true;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Common Geometry Logic (Taper)\r\n            // Common Geometry Logic (Taper + Width for Tube)\r\n            if (stroke.isTube && mesh.userData.curve) {\r\n                const taper = stroke.taper !== undefined ? stroke.taper : (mesh.userData.lastTaper || 0);\r\n                const lineWidth = stroke.lineWidth !== undefined ? stroke.lineWidth : (mesh.userData.stroke.lineWidth || 0.1);\r\n\r\n                // Check if we need to update geometry\r\n                // Update if taper changed, OR if lineWidth changed.\r\n                // Note: stroke.lineWidth comes in scaled? In draw.js constructor we multiply by 0.1 usually.\r\n                // But updateStroke receives raw value from TubeSettings which emits `width / 500`.\r\n                // Let's assume the value in `stroke.lineWidth` is the final radius we want.\r\n\r\n                if (stroke.taper !== undefined || stroke.lineWidth !== undefined) {\r\n                    const radius = lineWidth;\r\n                    const curve = mesh.userData.curve;\r\n                    const tubularSegments = Math.max(64, curve.points.length * 6);\r\n\r\n                    // Custom Tube Generation with Taper\r\n                    // Note: If using Strip, this logic should be different.\r\n                    // But for now stroke.taper is mainly for Tube.\r\n                    // If isStrip, we need to regenerate strip.\r\n                    if (stroke.isTube) {\r\n                        const newGeo = new THREE.TubeGeometry(curve, tubularSegments, radius, 8, false);\r\n\r\n                        if (taper > 0) {\r\n                            const pos = newGeo.attributes.position;\r\n                            const radialSegments = 8;\r\n                            const rings = tubularSegments + 1;\r\n                            const taperFactor = taper / 100;\r\n\r\n                            for (let i = 0; i < rings; i++) {\r\n                                let u = i / tubularSegments;\r\n                                let scale = 1;\r\n                                const fadeLen = 0.5 * taperFactor;\r\n                                if (u < fadeLen) {\r\n                                    scale = u / fadeLen;\r\n                                } else if (u > (1 - fadeLen)) {\r\n                                    scale = (1 - u) / fadeLen;\r\n                                }\r\n                                scale = Math.max(0.01, scale);\r\n\r\n                                const P = curve.getPointAt(u);\r\n                                for (let j = 0; j <= radialSegments; j++) {\r\n                                    const index = (i * (radialSegments + 1) + j);\r\n                                    const vx = pos.getX(index) - P.x;\r\n                                    const vy = pos.getY(index) - P.y;\r\n                                    const vz = pos.getZ(index) - P.z;\r\n                                    pos.setXYZ(index, P.x + vx * scale, P.y + vy * scale, P.z + vz * scale);\r\n                                }\r\n                            }\r\n                            newGeo.computeVertexNormals();\r\n                        }\r\n                        if (mesh.geometry) mesh.geometry.dispose();\r\n                        mesh.geometry = newGeo;\r\n                        mesh.userData.lastTaper = taper;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Common Geometry Logic (Taper + Width for Strip)\r\n            if (stroke.isStrip && mesh.userData.curve) {\r\n                const taper = stroke.taper !== undefined ? stroke.taper : (mesh.userData.lastTaper || 0);\r\n                const lineWidth = stroke.lineWidth !== undefined ? stroke.lineWidth : (mesh.userData.stroke.lineWidth || 0.1);\r\n\r\n                if (stroke.taper !== undefined || stroke.lineWidth !== undefined) {\r\n                    const curve = mesh.userData.curve;\r\n                    const segments = Math.max(64, curve.points.length * 6);\r\n                    const frames = curve.computeFrenetFrames(segments, false);\r\n                    let stripVertices = [];\r\n                    let stripIndices = [];\r\n\r\n                    const taperFactor = taper / 100;\r\n\r\n                    for (let i = 0; i <= segments; i++) {\r\n                        let u = i / segments;\r\n                        let pt = curve.getPointAt(u);\r\n                        let binormal = frames.binormals[i];\r\n\r\n                        let scale = 1;\r\n                        if (taper > 0) {\r\n                            const fadeLen = 0.5 * taperFactor;\r\n                            if (u < fadeLen) {\r\n                                scale = u / fadeLen;\r\n                            } else if (u > (1 - fadeLen)) {\r\n                                scale = (1 - u) / fadeLen;\r\n                            }\r\n                            scale = Math.max(0.01, scale);\r\n                        }\r\n\r\n                        let w = lineWidth * scale;\r\n                        let v1 = pt.clone().add(binormal.clone().multiplyScalar(w));\r\n                        let v2 = pt.clone().sub(binormal.clone().multiplyScalar(w));\r\n\r\n                        stripVertices.push(v1.x, v1.y, v1.z);\r\n                        stripVertices.push(v2.x, v2.y, v2.z);\r\n                    }\r\n\r\n                    for (let i = 0; i < segments; i++) {\r\n                        let base = i * 2;\r\n                        stripIndices.push(base, base + 1, base + 2);\r\n                        stripIndices.push(base + 1, base + 3, base + 2);\r\n                    }\r\n\r\n                    let newGeo = new THREE.BufferGeometry();\r\n                    newGeo.setAttribute('position', new THREE.Float32BufferAttribute(stripVertices, 3));\r\n                    newGeo.setIndex(stripIndices);\r\n                    newGeo.computeVertexNormals();\r\n\r\n                    if (mesh.geometry) mesh.geometry.dispose();\r\n                    mesh.geometry = newGeo;\r\n                    mesh.userData.lastTaper = taper;\r\n                }\r\n            }\r\n\r\n\r\n        } else {\r\n            const brushTexture = generateBrushTexture(\r\n                stroke.brushType || mesh.userData.stroke.brushType,\r\n                'standard'\r\n            );\r\n\r\n            if (mat.map && mat.map !== brushTexture) mat.map.dispose();\r\n\r\n            if (brushTexture) {\r\n                mat.map = brushTexture;\r\n                mat.alphaMap = brushTexture;\r\n                mat.useMap = 1;\r\n                mat.transparent = true;\r\n\r\n                if (stroke.brushType === 'soft' || stroke.brushType === 'noise') {\r\n                    mat.alphaTest = 0;\r\n                    mat.depthWrite = false;\r\n                } else {\r\n                    mat.alphaTest = 0.5;\r\n                    mat.depthWrite = true;\r\n                }\r\n\r\n                if (mat.uniforms.map) mat.uniforms.map.value = brushTexture;\r\n                if (mat.uniforms.alphaMap) mat.uniforms.alphaMap.value = brushTexture;\r\n\r\n                // Re-apply opacity logic just in case\r\n                if (mat.opacity < 1) {\r\n                    mat.alphaTest = 0;\r\n                    mat.depthWrite = false;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    updateFill: function (mesh, fill) {\r\n        if (!mesh || !mesh.userData.fill) return;\r\n        Object.assign(mesh.userData.fill, fill);\r\n        // ... fill update logic if needed\r\n    },\r\n    animateLines: function (delta) {\r\n        let animated = false;\r\n        if (!scene) return false;\r\n\r\n        const updateMesh = (mesh) => {\r\n            if (mesh.userData && mesh.userData.stroke && mesh.userData.stroke.animationSpeed > 0) {\r\n                if (mesh.material.uniforms && mesh.material.uniforms.dashOffset) {\r\n                    mesh.material.uniforms.dashOffset.value -= mesh.userData.stroke.animationSpeed * delta;\r\n                    animated = true;\r\n                }\r\n            }\r\n        };\r\n\r\n        scene.traverse((child) => {\r\n            if (child.isMesh && child.userData.stroke) {\r\n                updateMesh(child);\r\n            }\r\n        });\r\n\r\n        return animated;\r\n    }\r\n}\r\n\r\n\r\nexport { draw }\r\n","import { renderScene } from \"../App.vue\";\n\nlet loop = false;\n\nlet animate = function () {\n    if (loop) {\n        requestAnimationFrame(animate);\n        renderScene();\n    }\n};\n\nlet startAnimating = function () {\n    loop = true;\n    animate();\n}\n\nlet stopAnimating = function () {\n    loop = false;\n}\n\nexport { startAnimating, stopAnimating, loop } ","import * as THREE from \"three\";\nimport { scene, renderer, camera, vm } from \"../App.vue\";\nimport { TransformControls } from \"./transformControls.js\";\nimport { mirror } from \"./mirror.js\"\n// import { erase } from \"./erase.js\"\n// import { MeshLineRaycast } from \"three.meshline\"; // Unused import\nimport { startAnimating, stopAnimating, loop } from \"./animate.js\"\nimport { undoManager, undoRedoComponent } from \"./UndoRedo.vue\"\n\nlet select = {\n    s: undefined,\n    dragged: false,\n    transformMode: \"combined\",\n    vertexSelection: class {\n        constructor() {\n            this.start = new THREE.Vector2();\n            this.end = new THREE.Vector2();\n            this.cssStart = new THREE.Vector2();\n            this.cssEnd = new THREE.Vector2();\n        }\n        pointInRect(x, y, z1, z2, z3, z4) {\n            let x1 = Math.min(z1, z3);\n            let x2 = Math.max(z1, z3);\n            let y1 = Math.min(z2, z4);\n            let y2 = Math.max(z2, z4);\n            if (x1 <= x && x <= x2 && y1 <= y && y <= y2) {\n                return true;\n            } else {\n                return false;\n            }\n        }\n        getObjectBoundingBoxPoints(object) {\n            let bb;\n            if (object.geometry.boundingBox != undefined) {\n                bb = object.geometry.boundingBox;\n            } else {\n                return;\n            }\n\n            var points = [\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n            ];\n\n            points[0].set(bb.min.x, bb.min.y, bb.min.z); // 000\n            points[1].set(bb.min.x, bb.min.y, bb.max.z); // 001\n            points[2].set(bb.min.x, bb.max.y, bb.min.z); // 010\n            points[3].set(bb.min.x, bb.max.y, bb.max.z); // 011\n            points[4].set(bb.max.x, bb.min.y, bb.min.z); // 100\n            points[5].set(bb.max.x, bb.min.y, bb.max.z); // 101\n            points[6].set(bb.max.x, bb.max.y, bb.min.z); // 110\n            points[7].set(bb.max.x, bb.max.y, bb.max.z); // 111\n            points[8].set(\n                object.geometry.boundingSphere.center.x,\n                object.geometry.boundingSphere.center.y,\n                object.geometry.boundingSphere.center.z\n            ); //does it make sense to add this?\n\n            points.forEach((point) => {\n                point.applyMatrix4(object.matrixWorld); // Use world matrix for accurate projection\n                point.project(camera);\n            });\n\n            return points;\n        }\n        select() {\n            let selectedObjects = new Array();\n\n            const traverse = (children) => {\n                children.forEach((object) => {\n                    if (object.isGroup) {\n                        traverse(object.children);\n                    }\n\n                    if (object.layers.mask == 2 && object.visible) {\n                        //get the projected bounding points of the rectangle\n                        let boundingBoxPoints = this.getObjectBoundingBoxPoints(object)\n                        if (boundingBoxPoints != undefined) {\n                            for (var j = boundingBoxPoints.length; j--;) {\n                                //check if any of the points is part of the selection\n                                let point = boundingBoxPoints[j];\n                                if (\n                                    this.pointInRect(\n                                        point.x,\n                                        point.y,\n                                        this.start.x,\n                                        this.start.y,\n                                        this.end.x,\n                                        this.end.y\n                                    )\n                                ) {\n                                    //If even one point is inside of the selection, it's worth checking for all the vertices (points), otherwise not\n                                    if (object.geometry && object.geometry.points) {\n                                        for (var k = object.geometry.points.length; k--;) {\n                                            let p = new THREE.Vector3(\n                                                object.geometry.points[k].x,\n                                                object.geometry.points[k].y,\n                                                object.geometry.points[k].z\n                                            );\n                                            p.applyMatrix4(object.matrixWorld); // Use matrixWorld for nested objects\n                                            p.project(camera);\n\n                                            if (\n                                                this.pointInRect(\n                                                    p.x,\n                                                    p.y,\n                                                    this.start.x,\n                                                    this.start.y,\n                                                    this.end.x,\n                                                    this.end.y\n                                                )\n                                            ) {\n                                                selectedObjects.push(object);\n                                                return;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                });\n            }\n            traverse(scene.children);\n            return selectedObjects;\n        }\n    },\n    selection: class {\n        constructor() {\n            this.selected = new Array();\n            this.undoRedoSelection = new Array();\n            this.undoRedoMatrix = undefined;\n            this.selector = new select.vertexSelection()\n            this.helper = undefined;\n            this.controls = undefined;\n            this.group;\n            this.raycaster = new THREE.Raycaster();\n            this.raycaster.params.Line.threshold = 1.0;\n            this.raycaster.layers.set(1);\n            this.color = \"red\";\n        }\n        start(tx, ty, cx, cy) {\n            this.raycaster.setFromCamera(new THREE.Vector2(tx, ty), camera);\n            try {\n                var intersects = this.raycaster.intersectObjects(scene.children, true);\n                if (intersects.length > 0) {\n                    var intersectedObject = intersects[0].object;\n                    console.log(\"Selection Hit:\", intersectedObject);\n                    this.selected.push(intersectedObject);\n                } else {\n                    console.log(\"Selection Miss\");\n                }\n            } catch (err) {\n                console.error(\"Selection Error\", err);\n            }\n            this.selector.start.x = tx;\n            this.selector.start.y = ty;\n            this.selector.cssStart.x = cx;\n            this.selector.cssStart.y = cy;\n        }\n        move(cx, cy) {\n            if (this.selected.length == 0) {\n                console.log(cx, cy)\n            }\n        }\n        end(tx, ty) {\n            this.selector.end.x = tx;\n            this.selector.end.y = ty;\n            let objectsInRect = this.selector.select();\n\n\n            try {\n                objectsInRect.forEach((object) => {\n                    this.selected.push(object);\n                });\n            } catch (err) {\n                //console.log(err)\n            }\n\n            // Dedup selection\n            this.selected = [...new Set(this.selected)];\n\n\n            if (this.selected.length == 0) {\n                this.deselect();\n                return\n            } else {\n                this.select(this.selected);\n            }\n            renderer.render(scene, camera)\n        }\n        select(selection, matrix) {\n\n            //this.undoRedoMatrix = undefined;\n\n            this.select_internal(selection, matrix)\n\n            let previouslySelected = this.undoRedoSelection;\n            //let originalMatrix = this.undoRedoMatrix;\n            this.selected.forEach(object => {\n                previouslySelected.push(object.uuid)\n            })\n\n            undoManager.add({\n                undo: function () {\n                    console.log(\"undoing select\")\n                    select.s.deselect();\n                    renderer.render(scene, camera);\n                },\n                redo: function () {\n                    console.log(\"redoing select\")\n                    let selection = [];\n                    previouslySelected.forEach(uuid => {\n                        selection.push(scene.getObjectByProperty(\n                            \"uuid\",\n                            uuid\n                        ))\n                    })\n                    select.s.select(selection);\n                    renderer.render(scene, camera);\n                }\n            });\n            undoRedoComponent.$.ctx.updateUi();\n\n            // this.selected = new Array(); // Don't clear selection!\n        }\n        select_internal(selection, matrix) {\n            console.log(\"select_internal called with:\", selection.length, \"items\");\n            //selection can not be zero so it's either 1 or more than 1\n            //It's a single element\n            if (selection.length == 1) {\n                this.toggleSelectionColor(selection[0], true);\n                this.controls = new TransformControls(camera, renderer.domElement);\n                this.controls.mode = select.transformMode;\n                this.controls.attach(selection[0]);\n                this.controls.addEventListener(\"mouseDown\", function () {\n                    startAnimating();\n                    var position = new THREE.Vector3();\n                    this.object.getWorldPosition(position);\n                    var quaternion = new THREE.Quaternion();\n                    this.object.getWorldQuaternion(quaternion);\n                    var scale = new THREE.Vector3();\n                    this.object.getWorldScale(scale);\n                    this.userData.startingTransform = {\n                        position: position,\n                        quaternion: quaternion,\n                        scale: scale\n                    }\n\n                    vm.$.ctx.setTransformToolbarDisplay(false);\n\n                })\n                this.controls.addEventListener(\"change\", function () {\n                    if (!loop) {\n                        if (select.s && select.s.helper) select.s.helper.update();\n                        renderer.render(scene, camera);\n                    }\n                })\n                this.controls.addEventListener(\"objectChange\", function () {\n                    mirror.updateMirrorOf(this.object, scene);\n                    if (select.s && select.s.helper) select.s.helper.update();\n                    if (vm && vm.setSelectionPosition) {\n                        vm.setSelectionPosition({\n                            x: this.object.position.x,\n                            y: this.object.position.y,\n                            z: this.object.position.z\n                        });\n                    }\n                });\n                this.controls.addEventListener(\"mouseUp\", function () {\n                    stopAnimating();\n                    var endPosition = new THREE.Vector3();\n                    this.object.getWorldPosition(endPosition);\n                    var endQuaternion = new THREE.Quaternion();\n                    this.object.getWorldQuaternion(endQuaternion);\n                    var endScale = new THREE.Vector3();\n                    this.object.getWorldScale(endScale);\n\n                    let startPosition = this.userData.startingTransform.position;\n                    let startQuaternion = this.userData.startingTransform.quaternion;\n                    let startScale = this.userData.startingTransform.scale;\n\n                    if (!startPosition.equals(endPosition) || !startQuaternion.equals(endQuaternion) || !startScale.equals(endScale)) {\n                        undoManager.add({\n                            undo: function () {\n                                select.s.controls.object.position.copy(startPosition);\n                                select.s.controls.object.quaternion.copy(startQuaternion);\n                                select.s.controls.object.scale.copy(startScale);\n                                select.s.helper.update();\n                                vm.$.ctx.setTransformToolbarDisplay(true)\n                                let transfromToolbarPosition = select.s.calculateTransfromToolbarPosition();\n                                vm.$.ctx.setTransformToolbarPosition({\n                                    left: transfromToolbarPosition.x,\n                                    top: transfromToolbarPosition.y,\n                                    location: transfromToolbarPosition.location,\n                                })\n                                select.s.helper.update();\n                                renderer.render(scene, camera);\n                            },\n                            redo: function () {\n                                select.s.controls.object.position.copy(endPosition);\n                                select.s.controls.object.quaternion.copy(endQuaternion);\n                                select.s.controls.object.scale.copy(endScale)\n                                select.s.helper.update();\n                                vm.$.ctx.setTransformToolbarDisplay(true)\n                                let transfromToolbarPosition = select.s.calculateTransfromToolbarPosition();\n                                vm.$.ctx.setTransformToolbarPosition({\n                                    left: transfromToolbarPosition.x,\n                                    top: transfromToolbarPosition.y,\n                                    location: transfromToolbarPosition.location,\n                                })\n                                select.s.helper.update();\n                                renderer.render(scene, camera);\n                            }\n                        });\n                    }\n\n                    vm.$.ctx.setTransformToolbarDisplay(true);\n                    let position = select.s.calculateTransfromToolbarPosition();\n                    vm.$.ctx.setTransformToolbarPosition({\n                        left: position.x,\n                        top: position.y,\n                        location: position.location,\n                    })\n                    select.s.helper.update();\n\n                    renderer.render(scene, camera);\n                })\n                this.helper = new THREE.BoxHelper(\n                    selection[0],\n                    new THREE.Color(this.color)\n                );\n                scene.add(this.controls);\n                scene.add(this.helper);\n                this.helper.geometry.computeBoundingBox();\n                this.helper.update();\n\n                vm.$.ctx.setTransformToolbarDisplay(true)\n                let position = this.calculateTransfromToolbarPosition();\n                vm.$.ctx.setTransformToolbarPosition({\n                    left: position.x,\n                    top: position.y,\n                    location: position.location,\n                })\n            }\n            //It's a group\n            else {\n                this.group = new THREE.Group();\n                scene.add(this.group);\n                //we pass a matrix into the selection only to restore the group matrix properly on undo. This way worldTransformations can be applied in referse efficiently \n                if (matrix) {\n                    this.group.applyMatrix4(matrix);\n                    this.undoRedoMatrix = this.group.matrix\n                } else {\n                    this.undoRedoMatrix = this.group.matrix\n                }\n                //calculate where is the center for the selected objects so we can set the center of the group before we attach objects to it;\n                var center = new THREE.Vector3();\n                selection.forEach((obj) => {\n                    this.toggleSelectionColor(obj, true);\n                    center.add(obj.position);\n                });\n                center.divideScalar(selection.length);\n                this.group.position.set(center.x, center.y, center.z);\n                //Clone all the elements in the selection to the temporary groups\n                selection.forEach((element) => {\n                    var clone = element.clone();\n                    scene.add(clone);\n                    this.group.attach(clone);\n                    clone.userData.uuid = element.uuid;\n                    clone.visible = false;\n                });\n                this.controls = new TransformControls(camera, renderer.domElement);\n                this.controls.mode = select.transformMode;\n                this.controls.attach(this.group);\n                this.controls.addEventListener(\"mouseDown\", function () {\n                    startAnimating();\n                    var position = new THREE.Vector3();\n                    this.object.getWorldPosition(position);\n                    var quaternion = new THREE.Quaternion();\n                    this.object.getWorldQuaternion(quaternion);\n                    var scale = new THREE.Vector3();\n                    this.object.getWorldScale(scale);\n\n                    this.userData.startingTransform = {\n                        position: position,\n                        quaternion: quaternion,\n                        scale: scale\n                    }\n\n                    vm.$.ctx.setTransformToolbarDisplay(false);\n\n                })\n                this.controls.addEventListener(\"change\", function () {\n                    if (!loop) {\n                        if (select.s && select.s.helper) select.s.helper.update();\n                        renderer.render(scene, camera);\n                    }\n                })\n                this.controls.addEventListener(\"objectChange\", function () {\n                    if (select.s && select.s.helper) select.s.helper.update();\n                    if (vm && vm.setSelectionPosition && this.object) {\n                        vm.setSelectionPosition({\n                            x: this.object.position.x,\n                            y: this.object.position.y,\n                            z: this.object.position.z\n                        });\n                    }\n                    this.object.children.forEach((obj) => {\n                        var position = new THREE.Vector3();\n                        obj.getWorldPosition(position);\n                        var quaternion = new THREE.Quaternion();\n                        obj.getWorldQuaternion(quaternion);\n                        var scale = new THREE.Vector3();\n                        obj.getWorldScale(scale);\n                        var selectedObj = scene.getObjectByProperty(\"uuid\", obj.userData.uuid);\n                        selectedObj.position.copy(position);\n                        selectedObj.quaternion.copy(quaternion);\n                        selectedObj.scale.copy(scale);\n                        mirror.updateMirrorOf(selectedObj, scene);\n                    });\n                });\n                this.controls.addEventListener(\"mouseUp\", function () {\n                    stopAnimating();\n\n                    var endPosition = new THREE.Vector3();\n                    this.object.getWorldPosition(endPosition);\n                    var endQuaternion = new THREE.Quaternion();\n                    this.object.getWorldQuaternion(endQuaternion);\n                    var endScale = new THREE.Vector3();\n                    this.object.getWorldScale(endScale);\n\n                    let startPosition = this.userData.startingTransform.position;\n                    let startQuaternion = this.userData.startingTransform.quaternion;\n                    let startScale = this.userData.startingTransform.scale;\n\n                    var delta = endQuaternion.clone().invert();\n                    delta.multiply(startQuaternion);\n\n                    if (!startPosition.equals(endPosition) || !startQuaternion.equals(endQuaternion) || !startScale.equals(endScale)) {\n\n                        //There is a problem when we are coming back from a deselect because the object position, scale, quaternion is reset. I think it's possible to adjust these to be deltas\n                        undoManager.add({\n                            undo: function () {\n\n                                select.s.controls.object.position.copy(startPosition);\n                                select.s.controls.object.quaternion.copy(startQuaternion);\n                                select.s.controls.object.scale.copy(startScale);\n\n                                select.s.helper.update();\n\n                                vm.$.ctx.setTransformToolbarDisplay(true)\n                                let transfromToolbarPosition = select.s.calculateTransfromToolbarPosition();\n                                vm.$.ctx.setTransformToolbarPosition({\n                                    left: transfromToolbarPosition.x,\n                                    top: transfromToolbarPosition.y,\n                                    location: transfromToolbarPosition.location,\n                                })\n\n                                select.s.helper.update();\n\n                                select.s.controls.object.children.forEach((obj) => {\n                                    var position = new THREE.Vector3();\n                                    obj.getWorldPosition(position);\n                                    var quaternion = new THREE.Quaternion();\n                                    obj.getWorldQuaternion(quaternion);\n                                    var scale = new THREE.Vector3();\n                                    obj.getWorldScale(scale);\n                                    var selectedObj = scene.getObjectByProperty(\"uuid\", obj.userData.uuid);\n                                    selectedObj.position.copy(position);\n                                    selectedObj.quaternion.copy(quaternion);\n                                    selectedObj.scale.copy(scale);\n                                    mirror.updateMirrorOf(selectedObj, scene);\n                                });\n\n                                renderer.render(scene, camera);\n                            },\n                            redo: function () {\n                                select.s.controls.object.position.copy(endPosition);\n                                select.s.controls.object.quaternion.copy(endQuaternion);\n                                select.s.controls.object.scale.copy(endScale)\n\n                                select.s.helper.update();\n\n                                vm.$.ctx.setTransformToolbarDisplay(true)\n                                let transfromToolbarPosition = select.s.calculateTransfromToolbarPosition();\n                                vm.$.ctx.setTransformToolbarPosition({\n                                    left: transfromToolbarPosition.x,\n                                    top: transfromToolbarPosition.y,\n                                    location: transfromToolbarPosition.location,\n                                })\n\n                                select.s.helper.update();\n\n                                select.s.controls.object.children.forEach((obj) => {\n                                    var position = new THREE.Vector3();\n                                    obj.getWorldPosition(position);\n                                    var quaternion = new THREE.Quaternion();\n                                    obj.getWorldQuaternion(quaternion);\n                                    var scale = new THREE.Vector3();\n                                    obj.getWorldScale(scale);\n                                    var selectedObj = scene.getObjectByProperty(\"uuid\", obj.userData.uuid);\n                                    selectedObj.position.copy(position);\n                                    selectedObj.quaternion.copy(quaternion);\n                                    selectedObj.scale.copy(scale);\n                                    mirror.updateMirrorOf(selectedObj, scene);\n                                });\n\n                                renderer.render(scene, camera);\n                            }\n                        });\n                    }\n\n                    vm.$.ctx.setTransformToolbarDisplay(true)\n                    let transfromToolbarPosition = select.s.calculateTransfromToolbarPosition();\n                    vm.$.ctx.setTransformToolbarPosition({\n                        left: transfromToolbarPosition.x,\n                        top: transfromToolbarPosition.y,\n                        location: transfromToolbarPosition.location,\n                    })\n                    select.s.helper.update();\n\n                    renderer.render(scene, camera);\n                })\n                scene.add(this.controls);\n                this.helper = new THREE.BoxHelper(\n                    this.group,\n                    new THREE.Color(this.color)\n                );\n                scene.add(this.helper);\n                this.helper.geometry.computeBoundingBox();\n                this.helper.update();\n            }\n\n            vm.$.ctx.setTransformToolbarDisplay(true)\n\n            if (vm && vm.setSelectionPosition && this.controls.object) {\n                let p = new THREE.Vector3();\n                this.controls.object.getWorldPosition(p);\n                vm.setSelectionPosition({ x: p.x, y: p.y, z: p.z });\n            }\n\n            let position = this.calculateTransfromToolbarPosition();\n            vm.$.ctx.setTransformToolbarPosition({\n                left: position.x,\n                top: position.y,\n                location: position.location,\n            })\n            this.helper.update();\n            renderer.render(scene, camera)\n\n        }\n        toggleSelectionColor(object, bool) {\n            if (bool) {\n                object.material.color = new THREE.Color(this.color);\n            } else {\n                object.userData.stroke != false ? object.material.color = new THREE.Color(object.userData.stroke.color) : '';\n            }\n        }\n        deselect() {\n            if (this.controls != undefined) {\n\n                this.deselect_internal();\n\n                let previouslySelected = this.undoRedoSelection;\n                this.selected.forEach(object => {\n                    previouslySelected.push(object.uuid)\n                })\n                let previousMatrix = this.undoRedoMatrix;\n\n                //TODO: deselect should update setTransformationToolbar on its own\n                undoManager.add({\n                    undo: function () {\n                        console.log(\"undoing deselect\")\n                        let selection = [];\n                        previouslySelected.forEach(uuid => {\n                            selection.push(scene.getObjectByProperty(\n                                \"uuid\",\n                                uuid\n                            ))\n                        })\n                        select.s = new select.selection();\n                        select.s.select(selection, previousMatrix);\n                        renderer.render(scene, camera);\n                    },\n                    redo: function () {\n\n                        console.log(\"redo deselect\")\n\n                        select.s.deselect()\n                        renderer.render(scene, camera);\n                    }\n                });\n\n                undoRedoComponent.$.ctx.updateUi();\n\n                renderer.render(scene, camera)\n            }\n        }\n        deselect_internal() {\n            if (this.controls && this.controls.object) {\n                switch (true) {\n                    case this.controls.object.type == \"Mesh\":\n                        this.undoRedoSelection = new Array();\n                        this.undoRedoSelection.push(this.controls.object.uuid); //for undo\n                        this.toggleSelectionColor(this.controls.object, false);\n                        //clear references to controls and helper\n                        scene.remove(this.controls);\n                        scene.remove(this.helper);\n                        this.controls.detach();\n                        this.controls.dispose();\n                        this.controls = undefined;\n                        this.helper = undefined;\n                        break;\n                    case this.controls.object.type == \"Group\":\n                        this.undoRedoSelection = new Array();\n                        this.undoRedoMatrix = this.controls.object.matrix;\n                        this.controls.object.children.forEach;\n                        for (var i = 0; i < this.controls.object.children.length; i++) {\n                            this.undoRedoSelection.push(this.controls.object.children[i].userData.uuid)\n                            this.toggleSelectionColor(this.controls.object.children[i], false);\n                        }\n                        scene.remove(this.group);\n                        //clear references to controls and helper\n                        scene.remove(this.controls);\n                        scene.remove(this.helper);\n                        this.controls.detach();\n                        this.controls.dispose();\n                        this.controls = undefined;\n                        this.helper = undefined;\n                        break;\n                    default:\n                    //do nothing, nothing is selected\n                }\n            } else {\n                // Fallback cleanup if object is missing but controls exist\n                if (this.controls) {\n                    scene.remove(this.controls);\n                    this.controls.detach();\n                    this.controls.dispose();\n                    this.controls = undefined;\n                }\n                if (this.helper) {\n                    scene.remove(this.helper);\n                    this.helper = undefined;\n                }\n                if (this.group) {\n                    scene.remove(this.group);\n                }\n            }\n            if (vm && vm.$.ctx) {\n                vm.$.ctx.setTransformToolbarDisplay(false);\n            }\n        }\n        duplicate(offset = new THREE.Vector3(1, 0, 0), copies = 1) {\n            // Updated Duplicate: Supports offset and copies\n            console.log(\"Duplicate triggered. Offset:\", offset, \"Copies:\", copies);\n\n            let previousSelectedArray = [];\n            let sourceObjects = [];\n\n            // Identify objects\n            if (this.controls && this.controls.object) {\n                if (this.controls.object.type == \"Mesh\") {\n                    // Single object\n                    sourceObjects.push(this.controls.object);\n                } else if (this.controls.object.type == \"Group\") {\n                    // Multiple objects\n                    this.controls.object.children.forEach((child) => {\n                        let original = scene.getObjectByProperty(\"uuid\", child.userData.uuid);\n                        if (original) sourceObjects.push(original);\n                    });\n                }\n            } else if (this.selected.length > 0) {\n                sourceObjects = this.selected;\n            }\n\n            if (sourceObjects.length === 0) return;\n\n            sourceObjects.forEach(obj => previousSelectedArray.push(obj.uuid));\n\n            let allNewObjects = [];\n\n            // Loop for copies\n            for (let i = 1; i <= copies; i++) {\n                sourceObjects.forEach(obj => {\n                    let clone = obj.clone();\n                    clone.uuid = THREE.MathUtils.generateUUID();\n\n                    // Safe material clone\n                    if (clone.material) {\n                        try {\n                            clone.material = clone.material.clone();\n                        } catch (e) {\n                            console.warn(\"Clone material failed\", e);\n                        }\n                    }\n\n                    // Apply Offset\n                    let move = offset.clone().multiplyScalar(i);\n                    clone.position.add(move);\n\n                    scene.add(clone);\n                    allNewObjects.push(clone);\n\n                    // Mirror handling if needed\n                    if (clone.userData.mirrorAxis) {\n                        mirror.object(clone, clone.userData.mirrorAxis, scene);\n                    }\n                });\n            }\n\n            // Select new objects\n            this.deselect_internal();\n            this.selected = allNewObjects;\n            this.select_internal(this.selected);\n            renderer.render(scene, camera);\n\n            // Undo logic\n            undoManager.add({\n                undo: function () {\n                    select.s.deselect_internal();\n\n                    // Manual remove to avoid adding to undo stack via erase.deleteObject\n                    allNewObjects.forEach(o => {\n                        if (o.parent) o.parent.remove(o);\n                        else scene.remove(o);\n\n                        // Clean mirrors\n                        if (o.userData && o.userData.mirrorAxis) {\n                            mirror.eraseMirrorOf(o);\n                        }\n\n                        // Dispose resources\n                        if (o.geometry) o.geometry.dispose();\n                        if (o.material) {\n                            if (o.material.map) o.material.map.dispose();\n                            o.material.dispose();\n                        }\n                    });\n\n                    // Select previous\n                    let prevSel = [];\n                    previousSelectedArray.forEach(id => {\n                        let o = scene.getObjectByProperty(\"uuid\", id);\n                        if (o) prevSel.push(o);\n                    });\n                    if (prevSel.length) {\n                        select.s = new select.selection();\n                        select.s.select(prevSel);\n                    }\n                    renderer.render(scene, camera);\n                },\n                redo: function () {\n                    // This redo is a bit simplistic, it relies on global state which might be risky.\n                    // But following the pattern of the original function:\n                    if (select.s) select.s.duplicate(offset, copies);\n                }\n            });\n            undoRedoComponent.$.ctx.updateUi();\n        }\n        calculateTransfromToolbarPosition() {\n            // FIXED POSITION: Bottom Center for Transform Toolbar\n            // x: Center of screen\n            // y: Bottom of screen with 250px padding\n            return {\n                x: window.innerWidth / 2,\n                y: window.innerHeight - 250,\n                location: \"fixed\"\n            };\n        }\n        cancel() {\n            this.s = undefined;\n            return;\n        }\n    },\n    transforming: function () {\n        if (this.s != undefined) {\n            if (this.s.controls === undefined) {\n                return false\n            } else {\n                if (this.s.controls.axis == null && this.s.controls.dragging == false && this.dragged == false) {\n                    return false\n                } else {\n                    return true\n                }\n            }\n        } else {\n            return false\n        }\n    },\n    onStart: function (tx, ty, cx, cy, ctrlKey) {\n        if (this.transforming() == false) {\n            let previousSelection = [];\n\n            if (this.s != undefined) {\n                if (ctrlKey) {\n                    if (this.s.controls && this.s.controls.object) {\n                        if (this.s.controls.object.type === \"Mesh\") {\n                            previousSelection.push(this.s.controls.object);\n                        } else if (this.s.controls.object.type === \"Group\") {\n                            this.s.controls.object.children.forEach(child => {\n                                let uuid = child.userData.uuid;\n                                if (scene) {\n                                    let original = scene.getObjectByProperty(\"uuid\", uuid);\n                                    if (original) previousSelection.push(original);\n                                }\n                            });\n                        }\n                    }\n                }\n                this.s.deselect();\n            }\n            this.s = new this.selection();\n\n            if (previousSelection.length > 0) {\n                this.s.selected = previousSelection;\n                // Restore highlight\n                previousSelection.forEach(obj => {\n                    this.s.toggleSelectionColor(obj, true);\n                });\n            }\n\n            this.s.start(tx, ty, cx, cy)\n        }\n\n    },\n    onMove: function (cx, cy) {\n        if (this.transforming() == false) {\n            this.s.move(cx, cy)\n        } else {\n            this.dragged = true;\n        }\n    },\n    onEnd: function (tx, ty) {\n        if (this.transforming() == false) {\n            if (this.s) this.s.end(tx, ty);\n        }\n        this.dragged = false;\n    },\n    onCancel: function () {\n        this.s ? this.s.cancel() : null;\n    }\n}\n\nexport { select }","import { render } from \"./Input.vue?vue&type=template&id=761f5fd8\"\nimport script from \"./Input.vue?vue&type=script&lang=js\"\nexport * from \"./Input.vue?vue&type=script&lang=js\"\n\nimport \"./Input.vue?vue&type=style&index=0&id=761f5fd8&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <draggable-window ref=\"win\" title=\"Tools\" :initialX=\"initialX || (window.innerWidth / 2 - 300)\" :initialY=\"initialY || 12\" :reopenTrigger=\"reopenTrigger\" :is-open=\"isOpen\" @close=\"$emit('close')\">\n    <div class=\"tools-container\">\n      <!-- Drawing Tools -->\n      <div class=\"tool-group\">\n        <button \n          class=\"tool-btn\"\n          :class=\"{ active: tool === 'select' }\"\n          @click=\"setTool('select', true)\"\n          :title=\"'Select'\"\n        >\n          <img src=\"@/assets/icons/Cursor.svg\" alt=\"Select\" />\n          <span class=\"tooltip\">Select</span>\n        </button>\n        <button \n          class=\"tool-btn\"\n          :class=\"{ active: tool === 'draw' }\"\n          @click=\"setTool('draw', true)\"\n          :title=\"'Draw'\"\n        >\n          <img src=\"@/assets/icons/draw.svg\" alt=\"Draw\" />\n          <span class=\"tooltip\">Draw</span>\n        </button>\n        \n        <button \n          class=\"tool-btn\"\n          :class=\"{ active: tool === 'erase' }\"\n          @click=\"setTool('erase', true)\"\n          :title=\"'Erase'\"\n        >\n          <img src=\"@/assets/icons/erase.svg\" alt=\"Erase\" />\n          <span class=\"tooltip\">Erase</span>\n        </button>\n      </div>\n\n      <div class=\"separator\"></div>\n\n      <!-- Brush Presets -->\n      <div class=\"tool-group brushes\">\n        <button \n          v-for=\"brush in brushes\" \n          :key=\"brush.name\"\n          class=\"tool-btn brush-btn\"\n          @click=\"selectPreset(brush)\"\n          :title=\"brush.name\"\n        >\n          <span class=\"brush-emoji\">{{ brush.icon }}</span>\n          <span class=\"tooltip\">{{ brush.name }}</span>\n        </button>\n      </div>\n\n      <div class=\"separator\"></div>\n\n      <!-- Properties Toggle -->\n      <button \n        class=\"tool-btn\"\n        @click=\"toggleProperties\"\n        title=\"Properties\"\n      >\n        <span class=\"properties-icon\"></span>\n        <span class=\"tooltip\">Properties</span>\n      </button>\n\n      <!-- Scene Toggle -->\n      <button \n        class=\"tool-btn\"\n        @click=\"toggleScene\"\n        title=\"Scene\"\n      >\n        <span class=\"properties-icon\"></span>\n        <span class=\"tooltip\">Scene</span>\n      </button>\n\n      <!-- 2D Shapes Toggle -->\n      <button \n        class=\"tool-btn\"\n        @click=\"$emit('toggle-2d-shapes')\"\n        title=\"2D Shapes\"\n      >\n        <span class=\"properties-icon\"></span>\n        <span class=\"tooltip\">Shapes</span>\n      </button>\n\n      <!-- Snap Toggle -->\n      <button \n        class=\"tool-btn\"\n        @click=\"$emit('toggle-snap')\"\n        title=\"Snap Settings\"\n      >\n        <span class=\"properties-icon\"></span>\n        <span class=\"tooltip\">Snap</span>\n      </button>\n\n      <!-- Drawing Modes Toggle -->\n      <button \n        class=\"tool-btn\"\n        @click=\"$emit('toggle-drawing-modes')\"\n        title=\"Drawing Plane\"\n      >\n        <span class=\"properties-icon\"></span>\n        <span class=\"tooltip\">Plane</span>\n      </button>\n\n      <div class=\"separator\"></div>\n\n      <!-- AR Toggle -->\n      <button \n        class=\"tool-btn\"\n        @click=\"$emit('toggle-ar')\"\n        title=\"AR Mode\"\n        :class=\"{ active: isArActive }\"\n      >\n        <span class=\"properties-icon\"></span>\n        <span class=\"tooltip\">AR Mode</span>\n      </button>\n\n      <div class=\"separator\"></div>\n\n      <!-- Code Editor Toggle -->\n      <button \n        class=\"tool-btn\"\n        @click=\"$emit('toggle-code-editor')\"\n        title=\"Code Editor\"\n      >\n        <span class=\"properties-icon\"></span>\n        <span class=\"tooltip\">Code</span>\n      </button>\n    </div>\n  </draggable-window>\n</template>\n\n<script>\nimport DraggableWindow from \"./DraggableWindow.vue\";\n\nexport default {\n  name: \"ToolSelector\",\n  components: { DraggableWindow },\n  data() {\n    return {\n      tool: undefined,\n      window: window,\n      brushes: [\n        { \n          name: \"Pencil\", \n          icon: \"\", \n          settings: { strokeWidth: 2, strokeColor: { r: 50, g: 50, b: 50 }, stroke: true, fill: false }\n        },\n        { \n          name: \"Pen\", \n          icon: \"\", \n          settings: { strokeWidth: 5, strokeColor: { r: 0, g: 0, b: 0 }, stroke: true, fill: false }\n        },\n        { \n          name: \"Marker\", \n          icon: \"\", \n          settings: { strokeWidth: 20, strokeColor: { r: 255, g: 0, b: 0 }, stroke: true, fill: false }\n        },\n        { \n          name: \"Dashed Pencil\", \n          icon: \"\", \n          settings: { \n            strokeWidth: 2, \n            strokeColor: { r: 50, g: 50, b: 50 }, \n            stroke: true, \n            fill: false,\n            dashArray: 0.1,\n            dashRatio: 0.5,\n          }\n        },\n        { \n          name: \"Highlighter\", \n          icon: \"\", \n          settings: { \n            strokeWidth: 30, \n            strokeColor: { r: 255, g: 255, b: 0 }, \n            stroke: true, \n            fill: false,\n            opacity: 0.3,\n            transparent: true,\n            depthTest: false,\n            alphaTest: 0.01,\n          }\n        },\n        { \n          name: \"Ghost Ink\", \n          icon: \"\", \n          settings: { \n            strokeWidth: 4, \n            strokeColor: { r: 200, g: 200, b: 255 }, \n            stroke: true, \n            fill: false,\n            opacity: 0.3,\n            transparent: true,\n            alphaTest: 0.0,\n          }\n        },\n        { \n          name: \"Cinta\", \n          icon: \"\", \n          settings: { \n            strokeWidth: 2, \n            strokeColor: { r: 255, g: 0, b: 100 }, \n            fillColor: { r: 255, g: 100, b: 150 },\n            stroke: true, \n            fill: true,\n          }\n        },\n\n      ]\n    };\n  },\n  props: {\n    selectedTool: String,\n    reopenTrigger: Number,\n    isOpen: Boolean,\n    initialX: Number,\n    initialY: Number,\n    isArActive: Boolean,\n  },\n  emits: [\"selected-tool\", \"set-preset\", \"toggle-properties\", \"toggle-scene\", \"toggle-2d-shapes\", \"toggle-snap\", \"toggle-drawing-modes\", \"toggle-ar\", \"toggle-code-editor\", \"close\"],\n  watch: {\n    selectedTool: function (val) {\n      this.tool = val;\n    },\n  },\n  methods: {\n    getPosition() {\n       return { \n         x: this.$refs.win.currentX, \n         y: this.$refs.win.currentY \n       };\n    },\n    setTool: function (val, emit) {\n      this.tool = val;\n      if (emit) {\n        this.$emit(\"selected-tool\", val);\n      }\n    },\n    selectPreset: function(brush) {\n      // Ensure we're in draw mode when selecting a brush\n      this.setTool('draw', true);\n      this.$emit(\"set-preset\", brush.settings);\n    },\n    toggleProperties: function() {\n      this.$emit(\"toggle-properties\");\n    },\n    toggleScene: function() {\n      this.$emit(\"toggle-scene\");\n    },\n  },\n  mounted() {\n    this.setTool(this.selectedTool);\n  },\n};\n</script>\n\n<style scoped>\n.tools-container {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.tool-group {\n  display: flex;\n  gap: 4px;\n}\n\n.tool-group.brushes {\n  gap: 4px;\n}\n\n.separator {\n  width: 1px;\n  height: 32px;\n  background-color: rgba(255, 255, 255, 0.1);\n}\n\n.tool-btn {\n  position: relative;\n  width: 40px;\n  height: 40px;\n  background: transparent;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n  padding: 0;\n}\n\n.tool-btn:hover {\n  background: rgba(255, 255, 255, 0.1);\n  border-color: rgba(255, 255, 255, 0.2);\n}\n\n.tool-btn.active {\n  background: rgba(255, 255, 255, 0.2);\n  border-color: rgba(255, 255, 255, 0.3);\n  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);\n}\n\n.tool-btn img {\n  width: 24px;\n  height: 24px;\n  filter: brightness(0) invert(1);\n}\n\n.brush-emoji {\n  font-size: 20px;\n  line-height: 1;\n}\n\n.properties-icon {\n  font-size: 20px;\n  line-height: 1;\n}\n\n/* Tooltip */\n.tooltip {\n  position: absolute;\n  bottom: -32px;\n  left: 50%;\n  transform: translateX(-50%);\n  background: rgba(0, 0, 0, 0.9);\n  color: white;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 11px;\n  white-space: nowrap;\n  pointer-events: none;\n  opacity: 0;\n  transition: opacity 0.2s;\n  z-index: 1000;\n}\n\n.tool-btn:hover .tooltip {\n  opacity: 1;\n}\n\n/* Arrow for tooltip */\n.tooltip::before {\n  content: '';\n  position: absolute;\n  top: -4px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 0;\n  height: 0;\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-bottom: 4px solid rgba(0, 0, 0, 0.9);\n}\n</style>","import { render } from \"./ToolSelector.vue?vue&type=template&id=6f17be84&scoped=true\"\nimport script from \"./ToolSelector.vue?vue&type=script&lang=js\"\nexport * from \"./ToolSelector.vue?vue&type=script&lang=js\"\n\nimport \"./ToolSelector.vue?vue&type=style&index=0&id=6f17be84&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6f17be84\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window ref=\"win\" title=\"Tube Tools\" :initialX=\"initialX !== undefined ? initialX : 20\" :initialY=\"initialY !== undefined ? initialY : 100\" :reopenTrigger=\"reopenTrigger\" :is-open=\"isOpen\" @close=\"$emit('close')\">\r\n    <div class=\"tools-container\">\r\n      \r\n      <!-- Brush Presets -->\r\n      <div class=\"tool-group brushes\">\r\n        <button \r\n          v-for=\"brush in brushes\" \r\n          :key=\"brush.name\"\r\n          class=\"tool-btn brush-btn\"\r\n          @click=\"selectPreset(brush)\"\r\n          :title=\"brush.name\"\r\n        >\r\n          <span class=\"brush-emoji\">{{ brush.icon }}</span>\r\n          <span class=\"tooltip\">{{ brush.name }}</span>\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"separator\"></div>\r\n\r\n      <!-- Properties Toggle -->\r\n      <button \r\n        class=\"tool-btn\"\r\n        @click=\"toggleProperties\"\r\n        title=\"Tube Properties\"\r\n      >\r\n        <span class=\"properties-icon\"></span>\r\n        <span class=\"tooltip\">Properties</span>\r\n      </button>\r\n\r\n      <!-- Draw Tool Force (Hidden logic but needed to be active?) \r\n           Actually, selecting a preset sets tool to 'draw'.\r\n           We might want to show if 'draw' is active AND isTube is true?\r\n           Visual feedback.\r\n      -->\r\n      \r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\n\r\nexport default {\r\n  name: \"TubeToolSelector\",\r\n  components: { DraggableWindow },\r\n  data() {\r\n    return {\r\n      window: window,\r\n      brushes: [\r\n        { \r\n          name: \"Cable\", \r\n          icon: \"\", \r\n          settings: { \r\n            strokeWidth: 0.5, \r\n            strokeColor: { r: 100, g: 100, b: 255 }, \r\n            stroke: true, \r\n            fill: false,\r\n            isTube: true,\r\n            taper: 0,\r\n            smoothing: 5,\r\n          }\r\n        },\r\n        // We can add more tube brushes here later\r\n      ]\r\n    };\r\n  },\r\n  props: {\r\n    selectedTool: String,\r\n    reopenTrigger: Number,\r\n    isOpen: Boolean,\r\n    initialX: Number,\r\n    initialY: Number,\r\n    isTube: Boolean, // To check if we are active\r\n  },\r\n  emits: [\"selected-tool\", \"set-preset\", \"toggle-properties\", \"close\"],\r\n  methods: {\r\n    selectPreset: function(brush) {\r\n      this.$emit(\"selected-tool\", \"draw\");\r\n      this.$emit(\"set-preset\", brush.settings);\r\n    },\r\n    toggleProperties: function() {\r\n      this.$emit(\"toggle-properties\");\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.tools-container {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.tool-group {\r\n  display: flex;\r\n  gap: 4px;\r\n}\r\n\r\n.separator {\r\n  width: 1px;\r\n  height: 32px;\r\n  background-color: rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.tool-btn {\r\n  position: relative;\r\n  width: 40px;\r\n  height: 40px;\r\n  background: transparent;\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s;\r\n  padding: 0;\r\n}\r\n\r\n.tool-btn:hover {\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border-color: rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n.tool-btn.active {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-color: rgba(255, 255, 255, 0.3);\r\n  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.brush-emoji {\r\n  font-size: 20px;\r\n  line-height: 1;\r\n}\r\n\r\n.properties-icon {\r\n  font-size: 20px;\r\n  line-height: 1;\r\n}\r\n\r\n/* Tooltip */\r\n.tooltip {\r\n  position: absolute;\r\n  bottom: -32px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  background: rgba(0, 0, 0, 0.9);\r\n  color: white;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  font-size: 11px;\r\n  white-space: nowrap;\r\n  pointer-events: none;\r\n  opacity: 0;\r\n  transition: opacity 0.2s;\r\n  z-index: 1000;\r\n}\r\n\r\n.tool-btn:hover .tooltip {\r\n  opacity: 1;\r\n}\r\n\r\n.tooltip::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: -4px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  width: 0;\r\n  height: 0;\r\n  border-left: 4px solid transparent;\r\n  border-right: 4px solid transparent;\r\n  border-bottom: 4px solid rgba(0, 0, 0, 0.9);\r\n}\r\n</style>\r\n","import { render } from \"./TubeToolSelector.vue?vue&type=template&id=362d5e44&scoped=true\"\nimport script from \"./TubeToolSelector.vue?vue&type=script&lang=js\"\nexport * from \"./TubeToolSelector.vue?vue&type=script&lang=js\"\n\nimport \"./TubeToolSelector.vue?vue&type=style&index=0&id=362d5e44&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-362d5e44\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window ref=\"win\" title=\"Strip Tools\" :initialX=\"initialX !== undefined ? initialX : 20\" :initialY=\"initialY !== undefined ? initialY : 180\" :reopenTrigger=\"reopenTrigger\" :is-open=\"isOpen\" @close=\"$emit('close')\">\r\n    <div class=\"tools-container\">\r\n      \r\n      <!-- Brush Presets -->\r\n      <div class=\"tool-group brushes\">\r\n        <button \r\n          v-for=\"brush in brushes\" \r\n          :key=\"brush.name\"\r\n          class=\"tool-btn brush-btn\"\r\n          @click=\"selectPreset(brush)\"\r\n          :title=\"brush.name\"\r\n        >\r\n          <span class=\"brush-emoji\">{{ brush.icon }}</span>\r\n          <span class=\"tooltip\">{{ brush.name }}</span>\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"separator\"></div>\r\n\r\n      <!-- Properties Toggle -->\r\n      <button \r\n        class=\"tool-btn\"\r\n        @click=\"toggleProperties\"\r\n        title=\"Strip Properties\"\r\n      >\r\n        <span class=\"properties-icon\"></span>\r\n        <span class=\"tooltip\">Properties</span>\r\n      </button>\r\n      \r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\n\r\nexport default {\r\n  name: \"StripToolSelector\",\r\n  components: { DraggableWindow },\r\n  data() {\r\n    return {\r\n      window: window,\r\n      brushes: [\r\n        { \r\n          name: \"Ribbon\", \r\n          icon: \"\", \r\n          settings: { \r\n            strokeWidth: 20, \r\n            strokeColor: { r: 255, g: 0, b: 255 }, \r\n            stroke: true, \r\n            fill: false,\r\n            isStrip: true,\r\n            isTube: false,\r\n            taper: 0,\r\n            smoothing: 5,\r\n          }\r\n        },\r\n      ]\r\n    };\r\n  },\r\n  props: {\r\n    selectedTool: String,\r\n    reopenTrigger: Number,\r\n    isOpen: Boolean,\r\n    initialX: Number,\r\n    initialY: Number,\r\n    isStrip: Boolean, \r\n  },\r\n  emits: [\"selected-tool\", \"set-preset\", \"toggle-properties\", \"close\"],\r\n  methods: {\r\n    selectPreset: function(brush) {\r\n      this.$emit(\"selected-tool\", \"draw\");\r\n      this.$emit(\"set-preset\", brush.settings);\r\n    },\r\n    toggleProperties: function() {\r\n      this.$emit(\"toggle-properties\");\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.tools-container {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.tool-group {\r\n  display: flex;\r\n  gap: 4px;\r\n}\r\n\r\n.separator {\r\n  width: 1px;\r\n  height: 32px;\r\n  background-color: rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.tool-btn {\r\n  position: relative;\r\n  width: 40px;\r\n  height: 40px;\r\n  background: transparent;\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s;\r\n  padding: 0;\r\n}\r\n\r\n.tool-btn:hover {\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border-color: rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n.tool-btn.active {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-color: rgba(255, 255, 255, 0.3);\r\n  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.brush-emoji {\r\n  font-size: 20px;\r\n  line-height: 1;\r\n}\r\n\r\n.properties-icon {\r\n  font-size: 20px;\r\n  line-height: 1;\r\n}\r\n\r\n/* Tooltip */\r\n.tooltip {\r\n  position: absolute;\r\n  bottom: -32px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  background: rgba(0, 0, 0, 0.9);\r\n  color: white;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  font-size: 11px;\r\n  white-space: nowrap;\r\n  pointer-events: none;\r\n  opacity: 0;\r\n  transition: opacity 0.2s;\r\n  z-index: 1000;\r\n}\r\n\r\n.tool-btn:hover .tooltip {\r\n  opacity: 1;\r\n}\r\n\r\n.tooltip::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: -4px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  width: 0;\r\n  height: 0;\r\n  border-left: 4px solid transparent;\r\n  border-right: 4px solid transparent;\r\n  border-bottom: 4px solid rgba(0, 0, 0, 0.9);\r\n}\r\n</style>\r\n","import { render } from \"./StripToolSelector.vue?vue&type=template&id=5e4163b9&scoped=true\"\nimport script from \"./StripToolSelector.vue?vue&type=script&lang=js\"\nexport * from \"./StripToolSelector.vue?vue&type=script&lang=js\"\n\nimport \"./StripToolSelector.vue?vue&type=style&index=0&id=5e4163b9&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5e4163b9\"]])\n\nexport default __exports__","<template>\n  <draggable-window \n    title=\"View\" \n    :initialX=\"window.innerWidth - 170\"   \n    :initialY=\"12\"\n    :reopenTrigger=\"reopenTrigger\"\n    :is-open=\"isOpen\"\n    @close=\"$emit('close')\"\n  >\n    <div class=\"viewport-controls\">\n      <div\n        @touchstart=\"handleInput\"\n        @touchmove=\"handleInput\"\n        @touchend=\"handleInput\"\n        @mousedown=\"handleInput\"\n        @mousemove=\"handleInput\"\n        @mouseup=\"handleInput\"\n        class=\"viewport-cube\"\n      >\n        <canvas id=\"viewportCanvas\"></canvas>\n      </div>\n      \n      <button \n        class=\"reset-btn\"\n        @click=\"resetCamera()\"\n        @touchstart=\"resetCamera()\"\n        :disabled=\"cameraResetDisabled\"\n      >\n        <img src=\"@/assets/icons/reset.svg\" alt=\"Reset camera\" />\n        <span>Reset Camera</span>\n      </button>\n    </div>\n  </draggable-window>\n</template>\n\n<script>\nimport * as THREE from \"three\";\nimport { cameraControls } from \"../App.vue\";\nimport DraggableWindow from \"./DraggableWindow.vue\";\n\nlet viewPortRenderer, viewPortScene, viewPortCamera;\n\nexport default {\n  name: \"ViewportCube\",\n  components: { DraggableWindow },\n  props: {\n    quaternion: Array,\n    cameraResetDisabled: Boolean,\n    reopenTrigger: Number,\n    isOpen: Boolean,\n  },\n  emits: [\"close\"],\n  data() {\n    return {\n      window: window,\n      mouse: {\n        down: false,\n        tx: 0,\n        ty: 0,\n        cx: 0,\n        cy: 0,\n        dragStartPosition: new THREE.Vector2(),\n        lastDragPosition: new THREE.Vector2(),\n        force: 0,\n      },\n    };\n  },\n  methods: {\n    updateMouseCoordinates: function (event) {\n      const canvas = document.getElementById(\"viewportCanvas\");\n      const rect = canvas.getBoundingClientRect();\n      \n      if (event.touches) {\n        const touch = event.changedTouches[0];\n        this.mouse.tx = ((touch.clientX - rect.left) / 150) * 2 - 1;\n        this.mouse.ty = -((touch.clientY - rect.top) / 150) * 2 + 1;\n        this.mouse.cx = touch.clientX - rect.left;\n        this.mouse.cy = touch.clientY - rect.top;\n\n        if (event.touches[0] && event.touches[0][\"force\"] !== undefined) {\n          this.mouse.force = event.touches[0][\"force\"];\n        } else {\n          this.mouse.force = 0;\n        }\n      } else {\n        if (event.button == 0) {\n          this.mouse.tx = ((event.clientX - rect.left) / 150) * 2 - 1;\n          this.mouse.ty = -((event.clientY - rect.top) / 150) * 2 + 1;\n          this.mouse.cx = event.clientX - rect.left;\n          this.mouse.cy = event.clientY - rect.top;\n        }\n      }\n    },\n    render: function () {\n      viewPortRenderer.render(viewPortScene, viewPortCamera);\n    },\n    init: function () {\n      viewPortRenderer = new THREE.WebGLRenderer({\n        antialias: true,\n        alpha: true,\n        canvas: document.getElementById(\"viewportCanvas\"),\n      });\n      viewPortRenderer.setPixelRatio(window.devicePixelRatio);\n      viewPortRenderer.setSize(150, 150);\n\n      viewPortCamera = new THREE.OrthographicCamera();\n      viewPortCamera.position.set(0, 0, 10);\n      viewPortCamera.zoom = 160;\n\n      viewPortScene = new THREE.Scene();\n\n      this.addViewPortCube();\n\n      this.render();\n    },\n    addViewPortCube: function () {\n      let right = new THREE.TextureLoader().load(\n        require(\"@/assets/viewport/right.png\")\n      );\n      let left = new THREE.TextureLoader().load(\n        require(\"@/assets/viewport/left.png\")\n      );\n      let top = new THREE.TextureLoader().load(\n        require(\"@/assets/viewport/top.png\")\n      );\n      let bottom = new THREE.TextureLoader().load(\n        require(\"@/assets/viewport/bottom.png\")\n      );\n      let front = new THREE.TextureLoader().load(\n        require(\"@/assets/viewport/front.png\")\n      );\n      let back = new THREE.TextureLoader().load(\n        require(\"@/assets/viewport/back.png\"),\n        () => {\n          this.render();\n        }\n      );\n\n      const materials = [\n        new THREE.MeshBasicMaterial({ map: right }),\n        new THREE.MeshBasicMaterial({ map: left }),\n        new THREE.MeshBasicMaterial({ map: top }),\n        new THREE.MeshBasicMaterial({ map: bottom }),\n        new THREE.MeshBasicMaterial({ map: front }),\n        new THREE.MeshBasicMaterial({ map: back }),\n      ];\n\n      const geometry = new THREE.BoxGeometry(1, 1, 1);\n      const cube = new THREE.Mesh(geometry, materials);\n      viewPortScene.add(cube);\n    },\n    rotate: function (deltaX, deltaY) {\n      let w = 150;\n      var PI_2 = Math.PI * 2;\n      var speed = 0.5;\n      var theta = (PI_2 * speed * deltaX) / w;\n      var phi = (PI_2 * speed * deltaY) / w;\n      cameraControls.rotate(theta, phi, false);\n    },\n    evalFaceIndexAndRepositionCamera: function (index) {\n      let target = new THREE.Vector3();\n      target = cameraControls.getTarget(target);\n      let adj = 0.0001;\n\n      let lookAt = function (x, y, z) {\n        cameraControls.dampingFactor = 0.5;\n        cameraControls.enabled = false;\n        cameraControls.setLookAt(x, y, z, target.x, target.y, target.z, true);\n        cameraControls.enabled = true;\n        setTimeout(() => {\n          cameraControls.dampingFactor = 20;\n        }, 100);\n      };\n\n      switch (index) {\n        case 0:\n        case 1:\n          lookAt(target.x + 10, target.y + adj, target.z + adj);\n          break;\n        case 2:\n        case 3:\n          lookAt(target.x - 10, target.y + adj, target.z + adj);\n          break;\n        case 4:\n        case 5:\n          lookAt(target.x, target.y + 10, target.z + adj);\n          break;\n        case 6:\n        case 7:\n          lookAt(target.x, target.y - 10, target.z + adj);\n          break;\n        case 8:\n        case 9:\n          lookAt(target.x + adj, target.y, target.z + 10);\n          break;\n        case 10:\n        case 11:\n          lookAt(target.x + adj, target.y, target.z - 10);\n          break;\n        default:\n      }\n    },\n    onTapStart: function () {\n      this.mouse.down = true;\n      this.mouse.dragStartPosition = new THREE.Vector2(\n        this.mouse.cx,\n        this.mouse.cy\n      );\n      this.mouse.lastDragPosition = new THREE.Vector2(\n        this.mouse.cx,\n        this.mouse.cy\n      );\n      document.addEventListener(\"mousemove\", this.handleInput);\n      document.addEventListener(\"mouseup\", this.handleInput);\n      document.addEventListener(\"touchmove\", this.handleInput);\n      document.addEventListener(\"touchend\", this.handleInput);\n    },\n    onTapMove: function () {\n      if (this.mouse.down) {\n        this.rotate(\n          this.mouse.lastDragPosition.x - this.mouse.cx,\n          this.mouse.lastDragPosition.y - this.mouse.cy\n        );\n        this.mouse.lastDragPosition = new THREE.Vector2(\n          this.mouse.cx,\n          this.mouse.cy\n        );\n      }\n    },\n    onTapEnd: function (raycaster) {\n      if (\n        this.mouse.dragStartPosition.distanceTo(this.mouse.lastDragPosition) < 5\n      ) {\n        raycaster.setFromCamera(\n          new THREE.Vector2(this.mouse.tx, this.mouse.ty),\n          viewPortCamera\n        );\n\n        try {\n          this.evalFaceIndexAndRepositionCamera(\n            raycaster.intersectObjects(viewPortScene.children)[0].faceIndex\n          );\n        } catch (error) {\n          //raycaster didn't find anything\n        }\n      }\n      this.mouse.dragStartPosition = new THREE.Vector2();\n      this.mouse.lastDragPosition = new THREE.Vector2();\n      this.mouse.cx = 0;\n      this.mouse.cy = 0;\n      document.removeEventListener(\"mousemove\", this.handleInput);\n      document.removeEventListener(\"mouseup\", this.handleInput);\n      document.removeEventListener(\"touchmove\", this.handleInput);\n      document.removeEventListener(\"touchend\", this.handleInput);\n      this.mouse.down = false;\n    },\n    resetCamera: function () {\n      cameraControls.dampingFactor = 0.5;\n      cameraControls.enabled = false;\n      cameraControls.setLookAt(0, 0, 10, 0, 0, 0, true);\n      cameraControls.zoomTo(3, true);\n      setTimeout(() => {\n        cameraControls.dampingFactor = 20;\n        cameraControls.enabled = true;\n      }, 100);\n    },\n    handleInput: function (event) {\n      this.updateMouseCoordinates(event);\n      event.preventDefault();\n      let raycaster = new THREE.Raycaster();\n\n      switch (event.type) {\n        case \"mousedown\":\n        case \"touchstart\":\n          this.onTapStart();\n          break;\n        case \"mousemove\":\n        case \"touchmove\":\n          this.onTapMove();\n          break;\n        case \"touchend\":\n        case \"mouseup\":\n          this.onTapEnd(raycaster);\n          break;\n        default:\n      }\n    },\n  },\n  watch: {\n    quaternion: function (val) {\n      viewPortScene.setRotationFromQuaternion(\n        new THREE.Quaternion(val[0], val[1], val[2], val[3]).invert()\n      );\n      this.render();\n    },\n  },\n  mounted() {\n    this.init();\n    this.render();\n  },\n};\n</script>\n\n<style scoped>\n.viewport-controls {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  align-items: center;\n}\n\n.viewport-cube {\n  width: 150px;\n  height: 150px;\n  position: relative;\n  cursor: grab;\n}\n\n.viewport-cube:active {\n  cursor: grabbing;\n}\n\n#viewportCanvas {\n  width: 150px;\n  height: 150px;\n  background-color: rgba(0, 0, 0, 0);\n  border-radius: 8px;\n}\n\n.reset-btn {\n  background: transparent;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  color: white;\n  border-radius: 8px;\n  padding: 8px 12px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  transition: all 0.2s;\n  font-size: 0.9em;\n  width: 100%;\n  justify-content: center;\n}\n\n.reset-btn:hover:not(:disabled) {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.reset-btn:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n\n.reset-btn img {\n  width: 16px;\n  height: 16px;\n}\n</style>","import { render } from \"./ViewportCube.vue?vue&type=template&id=c6f5d5b0&scoped=true\"\nimport script from \"./ViewportCube.vue?vue&type=script&lang=js\"\nexport * from \"./ViewportCube.vue?vue&type=script&lang=js\"\n\nimport \"./ViewportCube.vue?vue&type=style&index=0&id=c6f5d5b0&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c6f5d5b0\"]])\n\nexport default __exports__","<template>\n  <draggable-window \n    title=\"Properties\" \n    :initialX=\"12\" \n    :initialY=\"300\"\n    :visible=\"forceVisible || selectedTool == 'draw'\"\n    :reopenTrigger=\"reopenTrigger\"\n    :is-open=\"isOpen\"\n    @close=\"$emit('close')\"\n  >\n      <div class=\"panel\">\n        <line-sliders\n          mode=\"stroke\"\n          :active=\"stroke\"\n          @color=\"setStrokeColor\"\n          @active=\"setStrokeActive\"\n          @width=\"setStrokeWidth\"\n        />\n        \n        <div v-if=\"stroke\" class=\"extra-settings\">\n          <div class=\"section-title\">Brush Settings</div>\n          <!-- Shape -->\n          <div class=\"setting-row\">\n            <span>Shape</span>\n            <div class=\"ratio-buttons\">\n              <button class=\"ratio-btn\" :class=\"{ active: brushType === 'solid' }\" @click=\"brushType = 'solid'\">Solid</button>\n              <button class=\"ratio-btn\" :class=\"{ active: brushType === 'soft' }\" @click=\"brushType = 'soft'\">Soft</button>\n              <button class=\"ratio-btn\" :class=\"{ active: brushType === 'noise' }\" @click=\"brushType = 'noise'\">Sketch</button>\n            </div>\n          </div>\n\n\n\n          <!-- Taper -->\n           <div class=\"setting-row\">\n            <span>Taper</span>\n            <input type=\"range\" min=\"0\" max=\"20\" step=\"1\" v-model.number=\"taper\" />\n            <span class=\"value\">{{ taper }}</span>\n          </div>\n\n          <!-- Smoothing -->\n           <div class=\"setting-row\">\n            <span>Smooth</span>\n            <input type=\"range\" min=\"1\" max=\"20\" step=\"1\" v-model.number=\"smoothing\" />\n            <span class=\"value\">{{ smoothing }}</span>\n          </div>\n\n          <!-- Texture Scale -->\n          <div class=\"setting-row\" v-if=\"brushType !== 'solid' || brushMaterial !== 'standard'\">\n            <span>Tex Scale</span>\n            <input type=\"range\" min=\"0.1\" max=\"5\" step=\"0.1\" v-model.number=\"textureScale\" />\n            <span class=\"value\">{{ textureScale }}</span>\n          </div>\n\n          <!-- Wiggle -->\n           <div class=\"setting-row\">\n            <span>Wiggle</span>\n            <input type=\"range\" min=\"0\" max=\"0.5\" step=\"0.01\" v-model.number=\"wiggle\" />\n            <span class=\"value\">{{ Math.round(wiggle * 100) }}</span>\n          </div>\n\n          <div class=\"section-title\" style=\"margin-top: 8px;\">Effects</div>\n\n          <!-- Neon Toggle -->\n           <div class=\"setting-row\">\n            <span>Neon</span>\n            <div class=\"ratio-buttons\">\n              <button class=\"ratio-btn\" :class=\"{ active: bloom }\" @click=\"bloom = !bloom\">Active</button>\n            </div>\n          </div>\n\n          <!-- Bloom Intensity -->\n          <div class=\"setting-row\" v-if=\"bloom\">\n            <span>Intensity</span>\n            <input type=\"range\" min=\"1\" max=\"30\" step=\"1\" v-model.number=\"bloomIntensity\" />\n            <span class=\"value\">{{ bloomIntensity }}</span>\n          </div>\n\n          <div class=\"section-title\" style=\"margin-top: 8px;\">Line Settings</div>\n\n          <!-- Opacity -->\n          <div class=\"setting-row\">\n            <span>Opacity</span>\n            <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" v-model.number=\"opacity\" />\n            <span class=\"value\">{{ Math.round(opacity * 100) }}%</span>\n          </div>\n\n          <!-- Dash Size -->\n          <div class=\"setting-row\">\n            <span>Dash Size</span>\n            <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" v-model.number=\"dashArray\" />\n          </div>\n\n          <!-- Dash Ratio -->\n          <div class=\"setting-row\">\n             <span>Dash Scale</span>\n             <div class=\"ratio-buttons\">\n                <button class=\"ratio-btn\" :class=\"{ active: Math.abs(dashRatio - 0.66) < 0.1 }\" @click=\"dashRatio = 0.66\">2:1</button>\n                <button class=\"ratio-btn\" :class=\"{ active: Math.abs(dashRatio - 0.5) < 0.1 }\" @click=\"dashRatio = 0.5\">1:1</button>\n                <button class=\"ratio-btn\" :class=\"{ active: Math.abs(dashRatio - 0.33) < 0.1 }\" @click=\"dashRatio = 0.33\">1:2</button>\n             </div>\n          </div>\n\n          <div class=\"section-title\" style=\"margin-top: 8px;\">Animation</div>\n\n          <!-- Animation Speed -->\n          <div class=\"setting-row\">\n            <span>Speed</span>\n            <input type=\"range\" min=\"0\" max=\"2\" step=\"0.01\" v-model.number=\"animationSpeed\" />\n            <span class=\"value\">{{ Math.round(animationSpeed * 100) }}</span>\n          </div>\n        </div>\n\n        <line-sliders\n          :active=\"fill\"\n          mode=\"fill\"\n          @color=\"setFillColor\"\n          @active=\"setFillActive\"\n        />\n\n        <div v-if=\"fill\" class=\"extra-settings\">\n          <div class=\"setting-row\">\n            <span>Opacity</span>\n            <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" v-model.number=\"fillOpacity\" />\n            <span class=\"value\">{{ Math.round(fillOpacity * 100) }}%</span>\n          </div>\n        </div>\n      </div>\n  </draggable-window>\n</template>\n\n<script>\nimport LineSliders from \"./LineSliders.vue\";\n// import LineWidthSelector from \"./LineWidthSelector.vue\";\n\nimport DraggableWindow from \"./DraggableWindow.vue\";\n\nexport default {\n  components: { LineSliders, DraggableWindow },\n  name: \"Modal\",\n  data() {\n    return {\n      window: window,\n      stroke: true,\n      strokeColor: \"#1C1C1E\",\n      strokeWidth: 5,\n      fill: false,\n      fillColor: \"#000000\",\n      // panelVisible: false, // Removed\n      dashArray: 0,\n      dashOffset: 0,\n      dashRatio: 0.5,\n      opacity: 1,\n      fillOpacity: 1,\n      transparent: false,\n      alphaTest: 0.5,\n      brushType: 'solid',\n      brushMaterial: 'standard',\n      taper: 3,\n      smoothing: 4,\n      textureScale: 1,\n      wiggle: 0,\n\n      animationSpeed: 0,\n      bloom: false,\n      bloomIntensity: 1.5,\n    };\n  },\n  props: {\n    selectedTool: String,\n    forceVisible: Boolean,\n    reopenTrigger: Number,\n    isOpen: Boolean,\n  },\n  emits: [\"stroke\", \"fill\", \"close\"],   \n  methods: {\n    setStrokeColor: function (val) {\n      this.strokeColor = \"rgb(\" + val.r + \",\" + val.g + \",\" + val.b + \")\";\n    },\n    setStrokeActive: function (val) {\n      this.stroke = val.active;\n    },\n    setStrokeWidth: function (val) {\n      this.strokeWidth = val.width;\n    },\n    setFillColor: function (val) {\n      this.fillColor = \"rgb(\" + val.r + \",\" + val.g + \",\" + val.b + \")\";\n    },\n    setFillActive: function (val) {\n      this.fill = val.active;\n    },\n    emitStroke: function () {\n      this.$emit(\"stroke\", {\n        show_stroke: this.stroke,\n        lineWidth: this.strokeWidth / 500,\n        color: this.strokeColor,\n        dashArray: this.dashArray,\n        dashOffset: this.dashOffset,\n        dashRatio: this.dashRatio,\n        opacity: this.opacity,\n        transparent: this.transparent,\n        alphaTest: this.alphaTest,\n        brushType: this.brushType,\n        brushMaterial: this.brushMaterial,\n        taper: this.taper,\n        smoothing: this.smoothing,\n        textureScale: this.textureScale,\n        wiggle: this.wiggle,\n        animationSpeed: this.animationSpeed,\n        bloom: this.bloom,\n        bloomIntensity: this.bloomIntensity,\n      });\n    },\n    emitFill: function () {\n      this.$emit(\"fill\", { show_fill: this.fill, color: this.fillColor, opacity: this.fillOpacity });\n    },\n    updateSettings: function (settings) {\n      if (settings.stroke !== undefined) this.stroke = settings.stroke;\n      if (settings.strokeColor !== undefined) {\n         this.strokeColor = \"rgb(\" + settings.strokeColor.r + \",\" + settings.strokeColor.g + \",\" + settings.strokeColor.b + \")\";\n      }\n      if (settings.strokeWidth !== undefined) this.strokeWidth = settings.strokeWidth;\n      \n      this.dashArray = settings.dashArray !== undefined ? settings.dashArray : 0;\n      this.dashOffset = settings.dashOffset !== undefined ? settings.dashOffset : 0;\n      this.dashRatio = settings.dashRatio !== undefined ? settings.dashRatio : 0.5;\n      this.opacity = settings.opacity !== undefined ? settings.opacity : 1;\n      this.transparent = settings.transparent !== undefined ? settings.transparent : false;\n      this.alphaTest = settings.alphaTest !== undefined ? settings.alphaTest : 0.5;\n\n      if (settings.brushType !== undefined) this.brushType = settings.brushType;\n      if (settings.brushMaterial !== undefined) this.brushMaterial = settings.brushMaterial;\n      if (settings.taper !== undefined) this.taper = settings.taper;\n      if (settings.smoothing !== undefined) this.smoothing = settings.smoothing;\n      if (settings.textureScale !== undefined) this.textureScale = settings.textureScale;\n      if (settings.wiggle !== undefined) this.wiggle = settings.wiggle;\n      if (settings.animationSpeed !== undefined) this.animationSpeed = settings.animationSpeed;\n      if (settings.bloom !== undefined) this.bloom = settings.bloom;\n      if (settings.bloomIntensity !== undefined) this.bloomIntensity = settings.bloomIntensity;\n\n      if (settings.fill !== undefined) this.fill = settings.fill;\n      if (settings.fillColor !== undefined) {\n         this.fillColor = \"rgb(\" + settings.fillColor.r + \",\" + settings.fillColor.g + \",\" + settings.fillColor.b + \")\";\n      }\n      if (settings.fillOpacity !== undefined) this.fillOpacity = settings.fillOpacity;\n    },\n  },\n  watch: {\n    stroke: function () {\n      this.emitStroke();\n    },\n    strokeWidth: function () {\n      this.emitStroke();\n    },\n    strokeColor: function () {\n      this.emitStroke();\n    },\n    fill: function () {\n      this.emitFill();\n    },\n    fillColor: function () {\n      this.emitFill();\n    },\n    fillOpacity: function() {\n      this.emitFill();\n    },\n    dashArray: function () {\n      this.emitStroke();\n    },\n    dashRatio: function () {\n      this.emitStroke();\n    },\n    opacity: function () {\n      this.emitStroke();\n    },\n    brushType: function() {\n      this.emitStroke();\n    },\n    taper: function() {\n      this.emitStroke();\n    },\n    smoothing: function() {\n      this.emitStroke();\n    },\n    textureScale: function() {\n      this.emitStroke();\n    },\n    wiggle: function() {\n      this.emitStroke();\n    },\n    animationSpeed: function() {\n      this.emitStroke();\n    },\n    bloom: function() {\n      this.emitStroke();\n    },\n    bloomIntensity: function() {\n      this.emitStroke();\n    },\n  },\n  mounted() {\n    this.emitStroke();\n    this.emitFill();\n  },\n};\n</script>\n\n<style>\n.panel {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  /* background-color: white; Remove bg since window has glass */\n  /* filter: drop-shadow(0px 0px 24px rgba(0, 0, 0, 0.08)); */\n  width: fit-content;\n  /* padding: 8px; */\n  /* border-radius: 8px; */\n}\n\n.extra-settings {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  padding: 0 8px 0 44px; /* Align with sliders roughly */\n}\n\n.setting-row {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  color: white;\n  font-size: 12px;\n  font-family: 'Inter', sans-serif;\n}\n\n.setting-row > span:first-child {\n  width: 70px;\n  opacity: 0.8;\n}\n\n.setting-row input[type=\"range\"] {\n  height: 4px;\n  -webkit-appearance: none;\n  appearance: none;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 2px;\n  flex: 1;\n  outline: none;\n}\n\n.setting-row input[type=\"range\"]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  background: white;\n  cursor: pointer;\n  border: 2px solid rgba(0,0,0,0.5);\n}\n\n.setting-row .value {\n  width: 32px;\n  text-align: right;\n  font-family: monospace;\n}\n\n.ratio-buttons {\n  display: flex;\n  gap: 4px;\n}\n\n.ratio-btn {\n  background: transparent;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  color: white;\n  border-radius: 4px;\n  padding: 4px 8px;\n  cursor: pointer;\n  font-size: 10px;\n  transition: all 0.2s;\n}\n\n.ratio-btn:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.ratio-btn.active {\n  background: rgba(255, 255, 255, 0.2);\n  border-color: rgba(255, 255, 255, 0.6);\n  font-weight: bold;\n}\n\n.section-title {\n  color: white;\n  font-size: 10px;\n  font-weight: bold;\n  opacity: 0.5;\n  text-transform: uppercase;\n  margin-bottom: 4px;\n}\n</style>","\n<template>\n  <div class=\"color\" :style=\"cssProps\">\n    <div class=\"toggle\" @click=\"setActive\">\n      <img src=\"@/assets/icons/checkbox.svg\" v-if=\"!active\" alt=\"Enable\" />\n      <img\n        src=\"@/assets/icons/checkbox-checked.svg\"\n        v-if=\"active\"\n        alt=\"Disable\"\n      /><span>{{\n        this.mode.charAt(0).toUpperCase() + this.mode.substr(1).toLowerCase()\n      }}</span>\n    </div>\n    <div class=\"sliders\" v-if=\"active\">\n      <span class=\"width-slider\" v-if=\"mode === 'stroke'\"\n        ><span>w</span\n        ><input type=\"range\" min=\"1\" max=\"20\" id=\"width-slider\" v-model=\"width\"\n      /></span>\n      <span class=\"hsb-slider\"\n        ><span>h</span\n        ><input type=\"range\" min=\"0\" max=\"359\" id=\"hue-slider\" v-model=\"hue\"\n      /></span>\n      <span class=\"hsb-slider\"\n        ><span>s</span\n        ><input\n          type=\"range\"\n          min=\"0\"\n          max=\"99\"\n          class=\"hsb-slider\"\n          id=\"saturation-slider\"\n          v-model=\"saturation\"\n          :style=\"{\n            background: `linear-gradient(\n    to right,\n    hsl(${hue}, 0%, 50%) 0%,\n    hsl(${hue}, 50%, 50%) 90%\n  )`,\n          }\"\n      /></span>\n      <span class=\"hsb-slider\"\n        ><span>b</span\n        ><input\n          type=\"range\"\n          min=\"0\"\n          max=\"99\"\n          class=\"hsb-slider\"\n          id=\"brightness-slider\"\n          v-model=\"brightness\"\n      /></span>\n    </div>\n  </div>\n</template>\n\n<script>\n//https://codepen.io/HunorMarton/details/eWvewo\n\nexport default {\n  name: \"ColorSelector\",\n  data() {\n    return {\n      hue: 0,\n      saturation: 0,\n      brightness: 25,\n      width: 5,\n      r: 0,\n      g: 0,\n      b: 0,\n    };\n  },\n  props: { mode: String, active: Boolean },\n  emits: [\"color\", \"active\", \"width\"],\n  computed: {\n    cssProps() {\n      return {\n        \"--width-margin\": this.map(this.width, 1, 20, -6, +6) + \"px\",\n        \"--width-radius\": this.calcRadius(this.width * 4, 1, 80), //workaround because range is othewise so low\n        \"--hue-margin\": this.map(this.hue, 0, 359, -6, +6) + \"px\",\n        \"--hue-radius\": this.calcRadius(this.hue, 0, 359),\n        \"--saturation-margin\": this.map(this.saturation, 0, 99, -6, +6) + \"px\",\n        \"--saturation-radius\": this.calcRadius(this.saturation, 0, 99),\n        \"--brightness-margin\": this.map(this.brightness, 0, 99, -6, +6) + \"px\",\n        \"--brightness-radius\": this.calcRadius(this.brightness, 0, 99),\n      };\n    },\n  },\n  methods: {\n    map: function (n, start1, stop1, start2, stop2) {\n      return ((n - start1) / (stop1 - start1)) * (stop2 - start2) + start2;\n    },\n    calcRadius: function (val, min, max) {\n      if (val < min + 4) {\n        return \"0px 4px 4px 0px\";\n      } else if (val > max - 4) {\n        return \"4px 0px 0px 4px\";\n      } else {\n        return \"4px\";\n      }\n    },\n    updateColor: function (h, s, v) {\n      var r, g, b, i, f, p, q, t;\n      if (arguments.length === 1) {\n        (s = h.s), (v = h.v), (h = h.h);\n      }\n      i = Math.floor(h * 6);\n      f = h * 6 - i;\n      p = v * (1 - s);\n      q = v * (1 - f * s);\n      t = v * (1 - (1 - f) * s);\n      switch (i % 6) {\n        case 0:\n          (r = v), (g = t), (b = p);\n          break;\n        case 1:\n          (r = q), (g = v), (b = p);\n          break;\n        case 2:\n          (r = p), (g = v), (b = t);\n          break;\n        case 3:\n          (r = p), (g = q), (b = v);\n          break;\n        case 4:\n          (r = t), (g = p), (b = v);\n          break;\n        case 5:\n          (r = v), (g = p), (b = q);\n          break;\n      }\n\n      (this.r = Math.round(r * 255)),\n        (this.g = Math.round(g * 255)),\n        (this.b = Math.round(b * 255));\n\n      this.$emit(\"color\", { r: this.r, g: this.g, b: this.b });\n    },\n    setActive() {\n      this.$emit(\"active\", { active: !this.active });\n    },\n  },\n  watch: {\n    width: function (val) {\n      this.$emit(\"width\", { width: val });\n    },\n    hue: function () {\n      this.updateColor(\n        this.hue / 359,\n        this.saturation / 99,\n        this.brightness / 99\n      );\n    },\n    saturation: function () {\n      this.updateColor(\n        this.hue / 359,\n        this.saturation / 99,\n        this.brightness / 99\n      );\n    },\n    brightness: function () {\n      this.updateColor(\n        this.hue / 359,\n        this.saturation / 99,\n        this.brightness / 99\n      );\n    },\n  },\n  mounted() {\n    this.updateColor(\n      this.hue / 359,\n      this.saturation / 99,\n      this.brightness / 99\n    );\n  },\n};\n</script>\n\n<style scoped>\n.toggle {\n  height: 32px;\n  float: left;\n  display: flex;\n  flex-direction: row;\n  gap: 8px;\n}\n\n.color-bubble {\n  border-radius: 22px;\n  height: 36px;\n  width: 36px;\n  border: 1px solid #1c1c1e;\n}\n\n.sliders {\n  float: left;\n  display: flex;\n  gap: 8px;\n  flex-direction: column;\n}\n\ninput {\n  width: 200px;\n}\n\n.width-slider > input[type=\"range\"] {\n  border: 1px solid #1c1c1e;\n  border-radius: 4px;\n}\n\n.hsb-slider,\n.width-slider {\n  display: flex;\n  align-content: center;\n  align-items: center;\n  gap: 12px;\n}\n\n.hsb-slider span,\n.width-slider span {\n  width: 20px;\n  text-align: center;\n}\n\ninput[type=\"range\"] {\n  -webkit-appearance: none; /* Override default CSS styles */\n  appearance: none;\n  height: 8px;\n}\n\ninput[type=\"range\"]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  background-color: rgba(255, 255, 255, 0);\n  border: 6px solid #1c1c1e;\n  border-radius: 3px;\n  width: 20px;\n  height: 20px;\n  margin-top: 0px;\n  overflow: visible;\n  position: relative;\n}\n\n#width-slider {\n  border-radius: var(--width-radius);\n}\n\n#width-slider::-webkit-slider-thumb {\n  left: var(--width-margin);\n}\n\n#hue-slider {\n  border-radius: var(--hue-radius);\n}\n\n#hue-slider::-webkit-slider-thumb {\n  left: var(--hue-margin);\n}\n\n#saturation-slider {\n  border-radius: var(--saturation-radius);\n}\n\n#saturation-slider::-webkit-slider-thumb {\n  left: var(--saturation-margin);\n}\n\n#brightness-slider {\n  border-radius: var(--brightness-radius);\n}\n\n#brightness-slider::-webkit-slider-thumb {\n  left: var(--brightness-margin);\n}\n\n#hue-slider {\n  background: linear-gradient(\n    to right,\n    hsl(0, 100%, 50%) 0%,\n    hsl(60, 100%, 50%) 16.67%,\n    hsl(120, 100%, 50%) 33.33%,\n    hsl(180, 100%, 50%) 50%,\n    hsl(240, 100%, 50%) 66.67%,\n    hsl(320, 100%, 50%) 83.33%,\n    hsl(360, 100%, 50%) 100%\n  );\n}\n\n#brightness-slider {\n  background: linear-gradient(\n    to right,\n    hsl(0, 0%, 0%) 0%,\n    hsl(0, 0%, 100%) 100%\n  );\n}\n\nlabel {\n  display: flex;\n  font-size: 0.45em;\n}\n</style>","import { render } from \"./LineSliders.vue?vue&type=template&id=209b775a&scoped=true\"\nimport script from \"./LineSliders.vue?vue&type=script&lang=js\"\nexport * from \"./LineSliders.vue?vue&type=script&lang=js\"\n\nimport \"./LineSliders.vue?vue&type=style&index=0&id=209b775a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-209b775a\"]])\n\nexport default __exports__","import { render } from \"./LineSettings.vue?vue&type=template&id=276dd090\"\nimport script from \"./LineSettings.vue?vue&type=script&lang=js\"\nexport * from \"./LineSettings.vue?vue&type=script&lang=js\"\n\nimport \"./LineSettings.vue?vue&type=style&index=0&id=276dd090&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <draggable-window \r\n    title=\"Cable Properties\" \r\n    :initialX=\"12\" \r\n    :initialY=\"300\"\r\n    :visible=\"forceVisible || (selectedTool == 'draw' && isTube)\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n      <div class=\"panel\">\r\n        <line-sliders\r\n          mode=\"stroke\"\r\n          :active=\"true\"\r\n          @color=\"setColor\"\r\n          @active=\"() => {}\"\r\n          @width=\"setWidth\"\r\n        />\r\n        \r\n        <div class=\"extra-settings\">\r\n          <div class=\"section-title\">Geometry</div>\r\n          <div class=\"setting-row\">\r\n            <span>Taper</span>\r\n            <input type=\"range\" min=\"0\" max=\"100\" step=\"1\" v-model.number=\"taper\" />\r\n            <span class=\"value\">{{ taper }}%</span>\r\n          </div>\r\n          <div class=\"setting-row\">\r\n            <span>Smooth</span>\r\n            <input type=\"range\" min=\"0\" max=\"20\" step=\"1\" v-model.number=\"smoothing\" />\r\n            <span class=\"value\">{{ smoothing }}</span>\r\n          </div>\r\n          <div class=\"setting-row\">\r\n            <span>Wiggle</span>\r\n            <input type=\"range\" min=\"0\" max=\"10\" step=\"0.1\" v-model.number=\"wiggle\" />\r\n            <span class=\"value\">{{ Math.round(wiggle) }}</span>\r\n          </div>\r\n\r\n          <div class=\"section-title\">Material</div>\r\n          \r\n          <!-- Roughness -->\r\n          <div class=\"setting-row\">\r\n            <span>Roughness</span>\r\n            <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" v-model.number=\"roughness\" />\r\n            <span class=\"value\">{{ Math.round(roughness * 100) }}%</span>\r\n          </div>\r\n\r\n          <!-- Metalness -->\r\n          <div class=\"setting-row\">\r\n            <span>Metalness</span>\r\n            <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" v-model.number=\"metalness\" />\r\n            <span class=\"value\">{{ Math.round(metalness * 100) }}%</span>\r\n          </div>\r\n          \r\n          <!-- Opacity -->\r\n            <div class=\"setting-row\">\r\n            <span>Opacity</span>\r\n            <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" v-model.number=\"opacity\" />\r\n            <span class=\"value\">{{ Math.round(opacity * 100) }}%</span>\r\n          </div>\r\n\r\n\r\n\r\n          <div class=\"section-title\">Matcap</div>\r\n          <div class=\"materials-container\">\r\n              <button \r\n                v-for=\"mat in matcaps\" \r\n                :key=\"mat.name\"\r\n                class=\"matcap-btn\"\r\n                :class=\"{ active: currentMatcap === mat.value }\"\r\n                @click=\"selectMatcap(mat.value)\"\r\n                :title=\"mat.name\"\r\n              >\r\n                <div v-if=\"mat.value === 'standard'\" class=\"std-preview\"></div>\r\n                <img v-else :src=\"mat.image\" class=\"matcap-img\" />\r\n              </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport LineSliders from \"./LineSliders.vue\";\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\n\r\nexport default {\r\n  components: { LineSliders, DraggableWindow },\r\n  name: \"TubeSettings\",\r\n  data() {\r\n    return {\r\n      color: \"#6666ff\",\r\n      width: 0.5,\r\n      roughness: 0.4,\r\n      metalness: 0.1,\r\n      opacity: 1.0,\r\n      taper: 0,\r\n      smoothing: 5,\r\n      wiggle: 0,\r\n      currentMatcap: 'standard',\r\n      matcaps: [\r\n        { name: 'Standard', value: 'standard' },\r\n        { name: 'Clay', value: 'matcaps/clay_studio.jpeg', image: 'matcaps/clay_studio.jpeg' },\r\n        { name: 'Gold', value: 'matcaps/metal_shiny.jpeg', image: 'matcaps/metal_shiny.jpeg' },\r\n        { name: 'Metal', value: 'matcaps/metal_lead.jpeg', image: 'matcaps/metal_lead.jpeg' },\r\n        { name: 'Pearl', value: 'matcaps/pearl.jpeg', image: 'matcaps/pearl.jpeg' },\r\n        { name: 'Jade', value: 'matcaps/jade.jpeg', image: 'matcaps/jade.jpeg' },\r\n        { name: 'Skin', value: 'matcaps/skin.jpeg', image: 'matcaps/skin.jpeg' },\r\n        { name: 'Toon', value: 'matcaps/toon.jpeg', image: 'matcaps/toon.jpeg' },\r\n      ]\r\n    };\r\n  },\r\n  props: {\r\n    selectedTool: String,\r\n    forceVisible: Boolean,\r\n    reopenTrigger: Number,\r\n    isOpen: Boolean,\r\n    isTube: Boolean,\r\n  },\r\n  emits: [\"stroke\", \"close\"],   \r\n  methods: {\r\n    setColor: function (val) {\r\n      this.color = \"rgb(\" + val.r + \",\" + val.g + \",\" + val.b + \")\";\r\n    },\r\n    setWidth: function (val) {\r\n      this.width = val.width;\r\n    },\r\n    selectMatcap(val) {\r\n        this.currentMatcap = val;\r\n        this.emitSettings();\r\n    },\r\n    emitSettings: function () {\r\n      this.$emit(\"stroke\", {\r\n        show_stroke: true, \r\n        lineWidth: this.width / 500, \r\n        color: this.color,\r\n        isTube: true,\r\n        roughness: this.roughness,\r\n        metalness: this.metalness,\r\n        opacity: this.opacity,\r\n        taper: this.taper,\r\n        smoothing: this.smoothing,\r\n        wiggle: this.wiggle,\r\n        matcap: this.currentMatcap,\r\n      });\r\n    },\r\n    updateSettings: function (settings) {\r\n      if (settings.strokeColor !== undefined) {\r\n         this.color = typeof settings.strokeColor === 'string' ? settings.strokeColor : \"rgb(\" + settings.strokeColor.r + \",\" + settings.strokeColor.g + \",\" + settings.strokeColor.b + \")\";\r\n      }\r\n      if (settings.strokeWidth !== undefined) {\r\n          this.width = settings.strokeWidth;\r\n      }\r\n      \r\n      if (settings.roughness !== undefined) this.roughness = settings.roughness;\r\n      if (settings.metalness !== undefined) this.metalness = settings.metalness;\r\n      if (settings.opacity !== undefined) this.opacity = settings.opacity;\r\n      if (settings.taper !== undefined) this.taper = settings.taper;\r\n      if (settings.smoothing !== undefined) this.smoothing = settings.smoothing;\r\n      if (settings.wiggle !== undefined) this.wiggle = settings.wiggle;\r\n      if (settings.matcap !== undefined) this.currentMatcap = settings.matcap;\r\n    },\r\n  },\r\n  watch: {\r\n    color: function () { this.emitSettings(); },\r\n    width: function () { this.emitSettings(); },\r\n    roughness: function () { this.emitSettings(); },\r\n    metalness: function () { this.emitSettings(); },\r\n    opacity: function () { this.emitSettings(); },\r\n    taper: function () { this.emitSettings(); },\r\n    smoothing: function () { this.emitSettings(); },\r\n    wiggle: function () { this.emitSettings(); },\r\n    currentMatcap: function () { this.emitSettings(); },\r\n  },\r\n  mounted() {\r\n    this.emitSettings();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.panel {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n  width: fit-content;\r\n}\r\n\r\n.extra-settings {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n  padding: 0 8px 0 44px;\r\n}\r\n\r\n.materials-container {\r\n    display: flex;\r\n    gap: 4px;\r\n    flex-wrap: wrap;\r\n    margin-bottom: 8px;\r\n}\r\n\r\n.matcap-btn {\r\n  position: relative;\r\n  width: 32px;\r\n  height: 32px;\r\n  background: rgba(255, 255, 255, 0.03);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s;\r\n  padding: 0;\r\n  overflow: hidden;\r\n}\r\n\r\n.matcap-btn:hover {\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border-color: rgba(255, 255, 255, 0.2);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.matcap-btn.active {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-color: var(--accent-color, #ffb000);\r\n  box-shadow: 0 0 0 1px var(--accent-color, #ffb000);\r\n}\r\n\r\n.matcap-img, .std-preview {\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: cover;\r\n}\r\n\r\n.std-preview {\r\n    background: #e6edf5;\r\n}\r\n\r\n.setting-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  color: white;\r\n  font-size: 12px;\r\n  font-family: 'Inter', sans-serif;\r\n}\r\n\r\n.setting-row > span:first-child {\r\n  width: 70px;\r\n  opacity: 0.8;\r\n}\r\n\r\n.setting-row input[type=\"range\"] {\r\n  height: 4px;\r\n  -webkit-appearance: none;\r\n  appearance: none;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-radius: 2px;\r\n  flex: 1;\r\n  outline: none;\r\n}\r\n\r\n.setting-row input[type=\"range\"]::-webkit-slider-thumb {\r\n  -webkit-appearance: none;\r\n  width: 16px;\r\n  height: 16px;\r\n  border-radius: 50%;\r\n  background: white;\r\n  cursor: pointer;\r\n  border: 2px solid rgba(0,0,0,0.5);\r\n}\r\n\r\n.setting-row .value {\r\n  width: 32px;\r\n  text-align: right;\r\n  font-family: monospace;\r\n}\r\n\r\n.section-title {\r\n  color: white;\r\n  font-size: 10px;\r\n  font-weight: bold;\r\n  opacity: 0.5;\r\n  text-transform: uppercase;\r\n  margin-bottom: 4px;\r\n  margin-top: 4px;\r\n}\r\n\r\n\r\n</style>\r\n","import { render } from \"./TubeSettings.vue?vue&type=template&id=0b214183&scoped=true\"\nimport script from \"./TubeSettings.vue?vue&type=script&lang=js\"\nexport * from \"./TubeSettings.vue?vue&type=script&lang=js\"\n\nimport \"./TubeSettings.vue?vue&type=style&index=0&id=0b214183&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0b214183\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window \r\n    title=\"Strip Properties\" \r\n    :initialX=\"12\" \r\n    :initialY=\"300\"\r\n    :visible=\"forceVisible || (selectedTool == 'draw' && isStrip)\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n      <div class=\"panel\">\r\n        <line-sliders\r\n          mode=\"stroke\"\r\n          :active=\"true\"\r\n          @color=\"setColor\"\r\n          @active=\"() => {}\"\r\n          @width=\"setWidth\"\r\n        />\r\n        \r\n        <div class=\"extra-settings\">\r\n          <div class=\"section-title\">Geometry</div>\r\n          <div class=\"setting-row\">\r\n            <span>Taper</span>\r\n            <input type=\"range\" min=\"0\" max=\"100\" step=\"1\" v-model.number=\"taper\" />\r\n            <span class=\"value\">{{ taper }}%</span>\r\n          </div>\r\n          <div class=\"setting-row\">\r\n            <span>Smooth</span>\r\n            <input type=\"range\" min=\"0\" max=\"20\" step=\"1\" v-model.number=\"smoothing\" />\r\n            <span class=\"value\">{{ smoothing }}</span>\r\n          </div>\r\n          <div class=\"setting-row\">\r\n            <span>Wiggle</span>\r\n            <input type=\"range\" min=\"0\" max=\"10\" step=\"0.1\" v-model.number=\"wiggle\" />\r\n            <span class=\"value\">{{ Math.round(wiggle) }}</span>\r\n          </div>\r\n\r\n          <div class=\"section-title\">Material</div>\r\n          \r\n          <!-- Roughness -->\r\n          <div class=\"setting-row\">\r\n            <span>Roughness</span>\r\n            <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" v-model.number=\"roughness\" />\r\n            <span class=\"value\">{{ Math.round(roughness * 100) }}%</span>\r\n          </div>\r\n\r\n          <!-- Metalness -->\r\n          <div class=\"setting-row\">\r\n            <span>Metalness</span>\r\n            <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" v-model.number=\"metalness\" />\r\n            <span class=\"value\">{{ Math.round(metalness * 100) }}%</span>\r\n          </div>\r\n\r\n          <!-- Opacity -->\r\n          <div class=\"setting-row\">\r\n            <span>Opacity</span>\r\n            <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" v-model.number=\"opacity\" />\r\n            <span class=\"value\">{{ Math.round(opacity * 100) }}%</span>\r\n          </div>\r\n\r\n          <!-- Bloom (Neon Effect) -->\r\n          <div class=\"setting-row\">\r\n            <span>Bloom</span>\r\n            <div class=\"ratio-buttons\">\r\n              <button class=\"ratio-btn\" :class=\"{ active: bloom === false }\" @click=\"bloom = false\">Off</button>\r\n              <button class=\"ratio-btn\" :class=\"{ active: bloom === true }\" @click=\"bloom = true\">On</button>\r\n            </div>\r\n          </div>\r\n\r\n\r\n\r\n          <div class=\"setting-row\">\r\n            <span>Side</span>\r\n             <div class=\"ratio-buttons\">\r\n              <button class=\"ratio-btn\" :class=\"{ active: side === 'double' }\" @click=\"side = 'double'\">Double</button>\r\n              <button class=\"ratio-btn\" :class=\"{ active: side === 'front' }\" @click=\"side = 'front'\">Front</button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"section-title\">Matcap</div>\r\n          <div class=\"materials-container\">\r\n              <button \r\n                  v-for=\"cap in matcaps\" \r\n                  :key=\"cap.value\"\r\n                  class=\"matcap-btn\"\r\n                  :class=\"{ active: currentMatcap === cap.value }\"\r\n                  :title=\"cap.name\"\r\n                  @click=\"selectMatcap(cap.value)\"\r\n              >\r\n                  <img v-if=\"cap.image\" :src=\"cap.image\" class=\"matcap-img\" />\r\n                  <div v-else class=\"std-preview\">{{ cap.name.substr(0,1) }}</div>\r\n              </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport LineSliders from \"./LineSliders.vue\";\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\n\r\nexport default {\r\n  components: { LineSliders, DraggableWindow },\r\n  name: \"StripSettings\",\r\n  data() {\r\n    return {\r\n      color: \"#ff00ff\",\r\n      width: 1.0,\r\n      side: 'double',\r\n      roughness: 0.5,\r\n      metalness: 0.5,\r\n      opacity: 1.0,\r\n      bloom: false,\r\n      taper: 0,\r\n      smoothing: 5,\r\n      wiggle: 0,\r\n      currentMatcap: 'standard',\r\n      matcaps: [\r\n        { name: 'Standard', value: 'standard' },\r\n        { name: 'Clay', value: 'matcaps/clay_studio.jpeg', image: 'matcaps/clay_studio.jpeg' },\r\n        { name: 'Gold', value: 'matcaps/metal_shiny.jpeg', image: 'matcaps/metal_shiny.jpeg' },\r\n        { name: 'Metal', value: 'matcaps/metal_lead.jpeg', image: 'matcaps/metal_lead.jpeg' },\r\n        { name: 'Pearl', value: 'matcaps/pearl.jpeg', image: 'matcaps/pearl.jpeg' },\r\n        { name: 'Jade', value: 'matcaps/jade.jpeg', image: 'matcaps/jade.jpeg' },\r\n        { name: 'Skin', value: 'matcaps/skin.jpeg', image: 'matcaps/skin.jpeg' },\r\n        { name: 'Toon', value: 'matcaps/toon.jpeg', image: 'matcaps/toon.jpeg' },\r\n      ]\r\n    };\r\n  },\r\n  props: {\r\n    selectedTool: String,\r\n    forceVisible: Boolean,\r\n    reopenTrigger: Number,\r\n    isOpen: Boolean,\r\n    isStrip: Boolean,\r\n  },\r\n  emits: [\"stroke\", \"close\"],   \r\n  methods: {\r\n    setColor: function (val) {\r\n      this.color = \"rgb(\" + val.r + \",\" + val.g + \",\" + val.b + \")\";\r\n    },\r\n    setWidth: function (val) {\r\n      this.width = val.width;\r\n    },\r\n    selectMatcap(val) {\r\n        this.currentMatcap = val;\r\n        this.emitSettings();\r\n    },\r\n    emitSettings: function () {\r\n      this.$emit(\"stroke\", {\r\n        show_stroke: true, \r\n        lineWidth: this.width / 100, // Scaling\r\n        color: this.color,\r\n        isStrip: true,\r\n        side: this.side,\r\n        isTube: false,\r\n        roughness: this.roughness,\r\n        metalness: this.metalness,\r\n        opacity: this.opacity,\r\n        bloom: this.bloom,\r\n        taper: this.taper,\r\n        smoothing: this.smoothing,\r\n        wiggle: this.wiggle,\r\n        matcap: this.currentMatcap,\r\n      });\r\n    },\r\n    updateSettings: function (settings) {\r\n      if (settings.strokeColor !== undefined) {\r\n         this.color = typeof settings.strokeColor === 'string' ? settings.strokeColor : \"rgb(\" + settings.strokeColor.r + \",\" + settings.strokeColor.g + \",\" + settings.strokeColor.b + \")\";\r\n      }\r\n      if (settings.strokeWidth !== undefined) {\r\n          this.width = settings.strokeWidth;\r\n      }\r\n      \r\n      if (settings.roughness !== undefined) this.roughness = settings.roughness;\r\n      if (settings.metalness !== undefined) this.metalness = settings.metalness;\r\n      if (settings.opacity !== undefined) this.opacity = settings.opacity;\r\n      if (settings.bloom !== undefined) this.bloom = settings.bloom;\r\n      if (settings.taper !== undefined) this.taper = settings.taper;\r\n      if (settings.smoothing !== undefined) this.smoothing = settings.smoothing;\r\n      if (settings.wiggle !== undefined) this.wiggle = settings.wiggle;\r\n      if (settings.matcap !== undefined) this.currentMatcap = settings.matcap;\r\n    },\r\n  },\r\n  watch: {\r\n    color: function () { this.emitSettings(); },\r\n    width: function () { this.emitSettings(); },\r\n    side: function () { this.emitSettings(); },\r\n    roughness: function () { this.emitSettings(); },\r\n    metalness: function () { this.emitSettings(); },\r\n    opacity: function () { this.emitSettings(); },\r\n    bloom: function () { this.emitSettings(); },\r\n    taper: function () { this.emitSettings(); },\r\n    smoothing: function () { this.emitSettings(); },\r\n    wiggle: function () { this.emitSettings(); },\r\n    currentMatcap: function () { this.emitSettings(); },\r\n  },\r\n  mounted() {\r\n    this.emitSettings();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.panel {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n  width: fit-content;\r\n}\r\n\r\n.extra-settings {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n  padding: 0 8px 0 44px;\r\n}\r\n\r\n.setting-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  color: white;\r\n  font-size: 12px;\r\n  font-family: 'Inter', sans-serif;\r\n}\r\n\r\n.setting-row > span:first-child {\r\n  width: 70px;\r\n  opacity: 0.8;\r\n}\r\n\r\n.ratio-buttons {\r\n  display: flex;\r\n  gap: 4px;\r\n}\r\n\r\n.ratio-btn {\r\n  background: transparent;\r\n  border: 1px solid rgba(255, 255, 255, 0.2);\r\n  color: white;\r\n  border-radius: 4px;\r\n  padding: 4px 8px;\r\n  cursor: pointer;\r\n  font-size: 10px;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.ratio-btn:hover {\r\n  background: rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.ratio-btn.active {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-color: rgba(255, 255, 255, 0.6);\r\n  font-weight: bold;\r\n}\r\n\r\n.section-title {\r\n  color: white;\r\n  font-size: 10px;\r\n  font-weight: bold;\r\n  opacity: 0.5;\r\n  text-transform: uppercase;\r\n  margin-bottom: 4px;\r\n  margin-top: 4px;\r\n}\r\n\r\n.materials-container {\r\n    display: flex;\r\n    gap: 4px;\r\n    flex-wrap: wrap;\r\n    margin-bottom: 8px;\r\n}\r\n\r\n.matcap-btn {\r\n  position: relative;\r\n  width: 32px;\r\n  height: 32px;\r\n  background: rgba(255, 255, 255, 0.03);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s;\r\n  padding: 0;\r\n  overflow: hidden;\r\n}\r\n\r\n.matcap-btn:hover {\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border-color: rgba(255, 255, 255, 0.2);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.matcap-btn.active {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-color: var(--accent-color, #ffb000);\r\n  box-shadow: 0 0 0 1px var(--accent-color, #ffb000);\r\n}\r\n\r\n.matcap-img, .std-preview {\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: cover;\r\n}\r\n\r\n.std-preview {\r\n    background: #e6edf5;\r\n}\r\n\r\n.setting-row input[type=\"range\"] {\r\n  height: 4px;\r\n  -webkit-appearance: none;\r\n  appearance: none;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-radius: 2px;\r\n  flex: 1;\r\n  outline: none;\r\n}\r\n\r\n.setting-row input[type=\"range\"]::-webkit-slider-thumb {\r\n  -webkit-appearance: none;\r\n  width: 16px;\r\n  height: 16px;\r\n  border-radius: 50%;\r\n  background: white;\r\n  cursor: pointer;\r\n  border: 2px solid rgba(0,0,0,0.5);\r\n}\r\n\r\n.setting-row .value {\r\n  width: 32px;\r\n  text-align: right;\r\n  font-family: monospace;\r\n}\r\n\r\n\r\n</style>\r\n","import { render } from \"./StripSettings.vue?vue&type=template&id=2e7970ff&scoped=true\"\nimport script from \"./StripSettings.vue?vue&type=script&lang=js\"\nexport * from \"./StripSettings.vue?vue&type=script&lang=js\"\n\nimport \"./StripSettings.vue?vue&type=style&index=0&id=2e7970ff&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2e7970ff\"]])\n\nexport default __exports__","<template>\n  <div>\n    <div class=\"popup\" v-if=\"show\">\n      <ToggleWindow label=\"Tools\" @click=\"toggleWindow('tools')\" :checked=\"windowStates && windowStates.tools\" />\n      <ToggleWindow label=\"Tube Tools\" @click=\"toggleWindow('tubeTools')\" :checked=\"windowStates && windowStates.tubeTools\" />\n      <ToggleWindow label=\"Strip Tools\" @click=\"toggleWindow('stripTools')\" :checked=\"windowStates && windowStates.stripTools\" />\n      <ToggleWindow label=\"Properties\" @click=\"toggleWindow('properties')\" :checked=\"windowStates && windowStates.properties\" />\n      <ToggleWindow label=\"Canvas\" @click=\"toggleWindow('canvas')\" :checked=\"windowStates && windowStates.canvas\" />\n      <ToggleWindow label=\"Shapes\" @click=\"toggleWindow('shapes')\" :checked=\"windowStates && windowStates.shapes\" />\n      <ToggleWindow label=\"Object Manager\" @click=\"toggleWindow('objectManager')\" :checked=\"windowStates && windowStates.objectManager\" />\n      <ToggleWindow label=\"History\" @click=\"toggleWindow('history')\" :checked=\"windowStates && windowStates.history\" />\n      <ToggleWindow label=\"View\" @click=\"toggleWindow('view')\" :checked=\"windowStates && windowStates.view\" />\n      <ToggleWindow label=\"Colors\" @click=\"toggleWindow('colors')\" :checked=\"windowStates && windowStates.colors\" />\n      <ToggleWindow label=\"Scene\" @click=\"toggleWindow('scene')\" :checked=\"windowStates && windowStates.scene\" />\n      <ToggleWindow label=\"Symmetry\" @click=\"toggleWindow('symmetry')\" :checked=\"windowStates && windowStates.symmetry\" />\n      <ToggleWindow label=\"Layers\" @click=\"toggleWindow('layers')\" :checked=\"windowStates && windowStates.layers\" />\n      <div class=\"separator\"></div>\n      <Save />\n      <Load ref=\"load\" />\n      <div class=\"separator\"></div>\n      <export-for-blender @modal=\"showModal\" />\n      <export-for-procreate @modal=\"showModal\" />\n      <ExportUSDZ v-if=\"isSafari\" />\n      <ExportGLB />\n      <ExportHTML @modal=\"showModal\" />\n      <start-preview @preview=\"startPreview\" />\n    </div>\n    <button\n      class=\"toggle-menu\"\n      @click=\"show = !show\"\n      v-bind:style=\"[show === true ? 'z-index: 10' : '']\"\n    >\n      <img src=\"@/assets/icons/share.svg\" alt=\"Share your sketch\" />\n    </button>\n    <div class=\"fade\" v-if=\"show\" @click=\"show = false\"></div>\n  </div>\n</template>\n\n<script>\nimport ToggleWindow from \"./MenuButtons/ToggleWindow.vue\";\nimport Save from \"./MenuButtons/Save.vue\";\nimport Load from \"./MenuButtons/Load.vue\";\nimport ExportForBlender from \"./MenuButtons/ExportForBlender.vue\";\nimport ExportForProcreate from \"./MenuButtons/ExportForProcreate.vue\";\nimport StartPreview from \"./MenuButtons/StartPreview.vue\";\nimport ExportUSDZ from \"./MenuButtons/ExportUSDZ.vue\";\nimport ExportGLB from \"./MenuButtons/ExportGLB.vue\";\nimport ExportHTML from \"./MenuButtons/ExportHTML.vue\";\n\nexport default {\n  name: \"Share\",\n  props: {\n    windowStates: Object,\n  },\n  components: {\n    ToggleWindow,\n    Save,\n    Load,\n    ExportForBlender,\n    ExportForProcreate,\n    StartPreview,\n    ExportUSDZ,\n    ExportGLB,\n    ExportHTML,\n  },\n  emits: [\"modal-set\", \"preview\", \"toggle-window\"],\n  data() {\n    return {\n      show: false,\n      isSafari: false,\n    };\n  },\n  methods: {\n    hide: function () {\n      this.show = false;\n    },\n    showModal: function (val) {\n      this.$emit(\"modal-set\", val);\n      this.hide();\n    },\n    startPreview: function (val) {\n      this.$emit(\"preview\", val);\n      this.hide();\n    },\n    toggleWindow: function (windowName) {\n      this.$emit(\"toggle-window\", windowName);\n    },\n  },\n  watch: {},\n  mounted() {\n    this.isSafari =\n      navigator.vendor &&\n      navigator.vendor.indexOf(\"Apple\") > -1 &&\n      navigator.userAgent &&\n      navigator.userAgent.indexOf(\"CriOS\") == -1 &&\n      navigator.userAgent.indexOf(\"FxiOS\") == -1;\n  },\n};\n</script>\n\n<style scoped>\n\n.popup {\n  position: absolute;\n  z-index: 10;\n  bottom: 64px;\n  right: 68px;\n  background-color: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(10px);\n  filter: drop-shadow(0px 4px 24px rgba(0, 0, 0, 0.15));\n  border-radius: 16px;\n  padding: 8px;\n  \n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 6px;\n  \n  max-height: 80vh;\n  overflow-y: auto;\n  width: 320px;\n}\n\n/* Custom Scrollbar */\n.popup::-webkit-scrollbar {\n  width: 6px;\n}\n.popup::-webkit-scrollbar-track {\n  background: transparent;\n}\n.popup::-webkit-scrollbar-thumb {\n  background-color: rgba(0, 0, 0, 0.1);\n  border-radius: 3px;\n}\n\n.title {\n    grid-column: 1 / -1;\n    font-size: 10px;\n    text-transform: uppercase;\n    opacity: 0.5;\n    margin: 4px 4px 0 4px;\n    font-weight: bold;\n}\n\n.toggle-menu {\n  position: absolute;\n  z-index: 5;\n  bottom: 12px;\n  right: 62px;\n  width: 44px;\n  height: 44px;\n  background-color: white;\n  filter: drop-shadow(0px 0px 24px rgba(0, 0, 0, 0.08));\n  border-radius: 22px;\n  padding: 0;\n  cursor: pointer;\n  transition: transform 0.2s;\n}\n\n.toggle-menu:hover {\n    transform: scale(1.05);\n}\n\n.toggle-menu:active {\n    transform: scale(0.95);\n}\n\nbutton {\n  font-family: 'Inter', sans-serif;\n  align-content: center;\n  background-color: rgba(0, 0, 0, 0.03);\n  border: none;\n  min-height: 40px;\n  padding: 0 12px;\n  border-radius: 8px;\n  font-size: 13px;\n  font-weight: 600;\n  color: #1c1c1e;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\nbutton:hover {\n    background-color: rgba(0, 0, 0, 0.06);\n}\n\n.separator {\n  height: 1px;\n  background-color: rgba(0, 0, 0, 0.1);\n  margin: 8px 0;\n  grid-column: 1 / -1;\n}\n\n.fade {\n  position: absolute;\n  z-index: 9;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.2);\n}\n</style>","<template>\r\n  <button @click=\"$emit('click')\">\r\n    <span class=\"label\">{{ label }}</span>\r\n    <span class=\"check\" v-if=\"checked\"></span>\r\n  </button>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ToggleWindow\",\r\n  props: {\r\n    label: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    checked: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  emits: [\"click\"],\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nbutton {\r\n  font-family: Avenir, Helvetica, Arial, sans-serif;\r\n  align-content: center;\r\n  background-color: rgba(0, 0, 0, 0);\r\n  border: none;\r\n  height: 44px;\r\n  padding-left: 12px;\r\n  padding-right: 12px;\r\n  border-bottom: 1px solid #ffe8b3;\r\n  font-size: 0.8em;\r\n  text-align: left;\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  width: 100%;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: rgba(255, 232, 179, 0.1);\r\n}\r\n\r\n.check {\r\n    font-weight: bold;\r\n    color: #ffb000;\r\n}\r\n</style>\r\n","import { render } from \"./ToggleWindow.vue?vue&type=template&id=50198f32&scoped=true\"\nimport script from \"./ToggleWindow.vue?vue&type=script&lang=js\"\nexport * from \"./ToggleWindow.vue?vue&type=script&lang=js\"\n\nimport \"./ToggleWindow.vue?vue&type=style&index=0&id=50198f32&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-50198f32\"]])\n\nexport default __exports__","<template>\n  <button @click=\"exportToJson\">Save</button>\n</template>\n\n<script>\nimport * as THREE from \"three\";\n// import { draw } from \"./draw.js\";\nimport { scene } from \"../../App.vue\";\n\nexport default {\n  name: \"Import\",\n  props: {},\n  data() {\n    return {};\n  },\n  methods: {\n    exportToJson: function () {\n      const json = [];\n      scene.children.forEach((obj) => {\n        //check if it's a line, if it's in the right layer and that we don't already have its original\n        if (\n          obj.geometry &&\n          obj.geometry.type == \"MeshLine\" &&\n          obj.layers.mask == 2\n        ) {\n          let line = {};\n\n          console.log(obj.geometry);\n\n          line.vertices = Array.from(obj.geometry.points);\n          line.stroke = obj.userData.stroke;\n          line.fill = obj.userData.fill;\n          line.mirrorOn = false;\n          line.position = new THREE.Vector3();\n          obj.getWorldPosition(line.position);\n          line.quaternion = new THREE.Quaternion();\n          obj.getWorldQuaternion(line.quaternion);\n          line.scale = new THREE.Vector3();\n          obj.getWorldScale(line.scale);\n          line.matrix = obj.matrix;\n          json.push(line);\n        }\n      });\n      console.log(json);\n\n      var dataStr =\n        \"data:text/json;charset=utf-8,\" +\n        encodeURIComponent(JSON.stringify(json));\n\n      var filename = prompt(\"Enter a name for your file\", \"sketch\");\n\n      if (filename != null) {\n        var el = document.createElement(\"a\");\n        el.setAttribute(\"href\", dataStr);\n        el.setAttribute(\"download\", filename + \".json\");\n        el.click();\n      }\n    },\n  },\n  watch: {},\n  mounted() {},\n};\n</script>\n\n<style scoped>\n</style>","import { render } from \"./Save.vue?vue&type=template&id=0d7c2da8\"\nimport script from \"./Save.vue?vue&type=script&lang=js\"\nexport * from \"./Save.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <button @click=\"importFromJson\">{{ text }}</button>\n</template>\n\n<script>\nimport { draw } from \"../draw.js\";\nimport { scene, renderer, camera } from \"../../App.vue\";\n\nexport default {\n  name: \"Import\",\n  props: {},\n  data() {\n    return {\n      text: \"Load\",\n    };\n  },\n  methods: {\n    importFromJson: function () {\n      var file;\n      var input = document.createElement(\"input\");\n      input.style.display = \"none\";\n      input.type = \"file\";\n      document.body.appendChild(input);\n      input.onchange = (event) => {\n        file = event.target.files[0];\n        function onReaderLoad(event) {\n          var json = JSON.parse(event.target.result);\n          let i = 0;\n          function drawLine(l) {\n            draw.fromVertices(\n              new Float32Array(l.vertices),\n              l.stroke,\n              l.fill,\n              l.mirrorOn,\n              null, //uuid, not necessary to restore in import\n              l.position,\n              l.quaternion,\n              l.scale,\n              l.matrix\n            );\n            if (i < json.length - 1) {\n              i++;\n              drawLine(json[i]);\n            } else {\n              renderer.render(scene, camera);\n            }\n          }\n          drawLine(json[i]);\n        }\n        if (file.type == \"application/json\") {\n          var reader = new FileReader();\n          reader.onload = onReaderLoad;\n          reader.readAsText(file);\n        } else {\n          //   app.toast.show = true;\n          //   app.toast.text = \"Error. File type not correct\";\n          //   setTimeout(function () {\n          //     app.toast.show = false;\n          //   }, 2000);\n        }\n      };\n      input.click();\n    },\n    // updateText: function (index, length) {\n    //   this.text = \"Loading \" + index + \"/\" + length;\n    // },\n  },\n  watch: {},\n  mounted() {},\n};\n</script>\n\n<style scoped>\n</style>","import { render } from \"./Load.vue?vue&type=template&id=301cc407\"\nimport script from \"./Load.vue?vue&type=script&lang=js\"\nexport * from \"./Load.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <button @click=\"showExportModal\">Export for Blender</button>\n</template>\n\n<script>\nexport default {\n  name: \"Export\",\n  props: {},\n  data() {\n    return {};\n  },\n  methods: {\n    showExportModal: function () {\n      this.$emit(\"modal\", { display: true, mode: \"blender\" });\n    },\n  },\n  watch: {},\n  mounted() {},\n};\n</script>\n\n<style scoped>\n</style>","import { render } from \"./ExportForBlender.vue?vue&type=template&id=359f140a\"\nimport script from \"./ExportForBlender.vue?vue&type=script&lang=js\"\nexport * from \"./ExportForBlender.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <button @click=\"showExportModal\">Export for Procreate</button>\n</template>\n\n<script>\nexport default {\n  name: \"Export\",\n  props: {},\n  data() {\n    return {};\n  },\n  methods: {\n    showExportModal: function () {\n      this.$emit(\"modal\", { display: true, mode: \"procreate\" });\n    },\n  },\n  watch: {},\n  mounted() {},\n};\n</script>\n\n<style scoped>\n</style>","import { render } from \"./ExportForProcreate.vue?vue&type=template&id=a5e737f4\"\nimport script from \"./ExportForProcreate.vue?vue&type=script&lang=js\"\nexport * from \"./ExportForProcreate.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <button @click=\"startPreview\">Make video</button>\n</template>\n\n<script>\nexport default {\n  name: \"StartPreview\",\n  props: {},\n  data() {\n    return {};\n  },\n  methods: {\n    startPreview: function () {\n      this.$emit(\"preview\", true);\n    },\n  },\n  watch: {},\n  mounted() {},\n};\n</script>\n\n<style scoped>\n</style>","import { render } from \"./StartPreview.vue?vue&type=template&id=b3643c28\"\nimport script from \"./StartPreview.vue?vue&type=script&lang=js\"\nexport * from \"./StartPreview.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <button\n    v-bind:class=\"[mode === 'default' || mode === 'exporting' ? '' : 'hidden']\"\n    @click=\"mode === 'default' ? exportForAr() : ''\"\n  >\n    {{ mode === \"default\" ? \"Export for AR\" : \"Exporting...\" }}\n  </button>\n  <a v-bind:class=\"[mode === 'view' ? 'ar' : 'ar hidden']\" id=\"ar\" rel=\"ar\">\n    <img src=\"@/assets/icons/View_in_AR.svg\" />\n  </a>\n  <a\n    id=\"download\"\n    v-bind:class=\"[mode === 'view' ? 'ar' : 'ar hidden']\"\n    download=\"sketch.usdz\"\n    target=\"_blank\"\n  >\n    Download USDZ\n  </a>\n</template>\n\n<script>\nimport * as THREE from \"three\";\nimport { USDZExporter } from \"three/examples/jsm/exporters/USDZExporter.js\";\nimport { scene } from \"../../App.vue\";\nimport {\n  convertMeshlineToGeometry,\n  convertMeshlineFillToGeometry,\n} from \"../convertMeshlineToGeometry.js\";\nlet sceneUSDZ;\n\nexport default {\n  name: \"ExportUSDZ\",\n  props: {},\n  data() {\n    return {\n      lightbox: false,\n      text: \"Export for AR\",\n      mode: \"default\", //default || exporting || view\n      url: undefined,\n    };\n  },\n  methods: {\n    exportForAr: function () {\n      this.mode = \"exporting\";\n      //there are better ways but this is good enough. The export floods the processor so vue doesn't update even with nextTick\n      setTimeout(() => {\n        this.viewInAr();\n      }, 500);\n    },\n    viewInAr: async function () {\n      sceneUSDZ = new THREE.Scene();\n\n      scene.children.forEach((obj) => {\n        if (\n          obj != undefined &&\n          obj.geometry &&\n          obj.geometry.type == \"MeshLine\" &&\n          obj.layers.mask == 2 &&\n          obj.geometry.attributes.position.array.length > 6\n        ) {\n          // The stroke\n          if (obj.userData.stroke.show_stroke === true) {\n            sceneUSDZ.add(convertMeshlineToGeometry(obj, \"standard\"));\n          }\n\n          // The fill\n          if (obj.userData.fill.show_fill === true) {\n            convertMeshlineFillToGeometry(obj, \"standard\", false, true).forEach(\n              (mesh) => {\n                sceneUSDZ.add(mesh);\n              }\n            );\n          }\n        }\n      });\n\n      // for (let o = 0; o <= scene.children.length; o++) {\n      //   let obj = scene.children[o];\n\n      //   if (\n      //     obj != undefined &&\n      //     obj.geometry &&\n      //     obj.geometry.type == \"MeshLine\" &&\n      //     obj.layers.mask == 2 &&\n      //     obj.geometry.attributes.position.array.length > 0\n      //   ) {\n      //     // The stroke\n      //     if (obj.userData.stroke.show_stroke === true) {\n      //       let geometry = obj.geometry.clone();\n      //       geometry.applyMatrix4(obj.matrix);\n      //       let vertices = [];\n      //       let points = Array.from(geometry.attributes.position.array);\n\n      //       for (let i = 0; i <= points.length; i = i + 6) {\n      //         let v3 = new THREE.Vector3(\n      //           points[i],\n      //           points[i + 1],\n      //           points[i + 2]\n      //         );\n      //         //why do I have 0,0,0 points in my positions? :thinking:\n      //         if (v3.x != 0 && v3.y != 0 && v3.z != 0) {\n      //           vertices.push(v3);\n      //         }\n      //       }\n\n      //       //if the line is too short, we skip this iteration\n      //       if (vertices.length < 2) continue;\n\n      //       let force = [0];\n      //       for (let i = 0; i < obj.userData.stroke.force.length; i++) {\n      //         let length = obj.userData.stroke.force.length;\n      //         let minWidth = 0;\n      //         let baseWidth = obj.userData.stroke.lineWidth;\n\n      //         //https://github.com/spite/THREE.MeshLine/blob/master/src/THREE.MeshLine.js#L424\n      //         //in the shader it seems like it's base witdth * width\n      //         let width = obj.userData.stroke.force[i] / (baseWidth * 10000);\n      //         let tailLength = 3;\n\n      //         //Beginning of the line\n      //         if (i < tailLength) {\n      //           let n = map(\n      //             i,\n      //             minWidth,\n      //             tailLength,\n      //             minWidth,\n      //             baseWidth + width\n      //           );\n\n      //           force.push(n);\n      //         }\n      //         //End of the line\n      //         else if (i > length - tailLength) {\n      //           let n = map(\n      //             i,\n      //             length - tailLength,\n      //             length - 1,\n      //             baseWidth + width,\n      //             minWidth\n      //           );\n\n      //           force.push(n);\n      //         }\n      //         //bulk of the line\n      //         else {\n      //           force.push(baseWidth + width);\n      //         }\n      //       }\n\n      //       var pathBase = new THREE.CatmullRomCurve3(vertices);\n      //       const tubeGeometry = new TubeBufferGeometry(\n      //         pathBase,\n      //         vertices.length,\n      //         force,\n      //         8,\n      //         !true\n      //       );\n\n      //       const material = new THREE.MeshStandardMaterial({\n      //         color: obj.userData.stroke.color,\n      //         flatShading: true,\n      //         roughness: 1,\n      //         shininess: 0,\n      //         metalness: 1,\n      //       });\n      //       const mesh = new THREE.Mesh(tubeGeometry, material);\n      //       if (mesh.geometry.attributes.uv != undefined) {\n      //         group.attach(mesh);\n      //         sceneUSDZ.add(mesh);\n      //       } else {\n      //         continue;\n      //       }\n      //     }\n\n      //     // The fill\n      //     if (obj.userData.fill.show_fill === true) {\n      //       let fill = obj.children[0].clone();\n      //       let fillGeometry = obj.children[0].geometry.clone();\n\n      //       // let flippedFaces = obj.children[0].geometry.clone();\n      //       // let flippedArray = flippedFaces.index.array.reverse();\n      //       // flippedFaces.index.array = flippedArray;\n      //       // const mergedFaces = new Uint16Array(\n      //       //   fillGeometry.index.array.length + flippedFaces.index.array.length\n      //       // );\n      //       // for (var f = 0; f < fillGeometry.index.array.length; f++)\n      //       //   mergedFaces[f] = fillGeometry.index.array[f];\n      //       // for (var e = 0; e < flippedFaces.index.array.length; e++)\n      //       //   mergedFaces[fillGeometry.index.array.lenght + e] =\n      //       //     flippedFaces.index.array[e];\n      //       // fillGeometry.index.array = mergedFaces;\n      //       // fillGeometry.index.count = mergedFaces.length;\n\n      //       fill.geometry = fillGeometry;\n      //       fill.geometry.applyMatrix4(obj.matrix);\n      //       fill.position.set(0, 0, 0);\n      //       fill.rotation.set(0, 0, 0);\n      //       fill.scale.set(1, 1, 1);\n\n      //       fill.material = new THREE.MeshStandardMaterial({\n      //         color: obj.userData.fill.color,\n      //         side: THREE.DoubleSide,\n      //       });\n\n      //       let texture;\n      //       if (obj.children[0].material.map) {\n      //         texture = obj.children[0].material.map.clone();\n      //         fill.material.map = texture;\n      //       }\n\n      //       sceneUSDZ.add(fill);\n\n      //       let fillFlipped = fill.clone();\n      //       let fillFlippedGeometry = fill.geometry.clone();\n      //       fillFlippedGeometry.index.array =\n      //         fillFlippedGeometry.index.array.reverse();\n      //       fillFlipped.geometry = fillFlippedGeometry;\n      //       fillFlipped.material = new THREE.MeshStandardMaterial({\n      //         color: obj.userData.fill.color,\n      //         side: THREE.DoubleSide,\n      //       });\n      //       sceneUSDZ.add(fillFlipped);\n      //     }\n      //   }\n      // }\n\n      sceneUSDZ.scale.set(0.1, 0.1, 0.1);\n      sceneUSDZ.updateMatrixWorld(true);\n\n      const exporter = new USDZExporter();\n      const arraybuffer = await exporter.parse(sceneUSDZ);\n      //.parse ( input : Object3D, onCompleted : Function)\n      const blob = new Blob([arraybuffer], {\n        type: \"application/octet-stream\",\n      });\n      // var el = document.createElement(\"a\");\n      var el = document.getElementById(\"ar\");\n      el.setAttribute(\"href\", URL.createObjectURL(blob));\n      el.setAttribute(\"download\", \"sketch.usdz\");\n      document\n        .getElementById(\"download\")\n        .setAttribute(\"href\", URL.createObjectURL(blob));\n      this.mode = \"view\";\n    },\n  },\n  watch: {},\n  mounted() {},\n};\n</script>\n\n<style scoped>\nbutton {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  font-weight: 900;\n  font-size: 0.8em;\n  border-bottom: 1px solid #ffe8b3;\n}\n\n.ar {\n  width: 100%;\n  align-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0);\n  border: none;\n  height: 44px;\n  padding-top: 6px;\n  padding-left: 12px;\n  padding-right: 12px;\n  border-bottom: 1px solid #ffe8b3;\n  box-sizing: border-box;\n}\n\na.ar {\n  color: #1c1c1e;\n  font-weight: 900;\n  line-height: 30px;\n  text-align: center;\n  font-size: 0.8em;\n}\n\n.ar > img {\n  width: auto;\n}\n</style>","//http://web.archive.org/web/20170106063058/http://www.lab4games.net/zz85/blog/2012/04/24/spline-extrusions-tubes-and-knots-of-sorts/\n//https://mattdesl.svbtle.com/shaping-curves-with-parametric-equations\n//https://github.com/mattdesl/parametric-curves/blob/45f321fd43af3a0786aa2dd4016931cc39325944/lib/shaders/tube.vert#L66-L162\n//https://stackoverflow.com/questions/31660099/threejs-tubegeometry-applying-custom-curve-causes-unexpected-twisting\n\n//https://avikdas.com/2020/09/08/rendering-curves-in-3d.html\n//https://avikdas.com/assets/js/curve-optimization/curve-geometry.mjs\n\nimport { BufferGeometry } from 'three';\nimport { Float32BufferAttribute } from 'three';\nimport { Vector2 } from 'three';\nimport { Vector3 } from 'three';\n\n// TubeBufferGeometry\n\nclass TubeBufferGeometry extends BufferGeometry {\n\n    constructor(path, tubularSegments = 10, radius = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1], radialSegments = 8, closed = false) {\n\n        super();\n        this.type = 'TubeBufferGeometry';\n\n        this.parameters = {\n            path: path,\n            tubularSegments: tubularSegments,\n            radius: radius,\n            radialSegments: radialSegments,\n            closed: closed\n        };\n\n        tubularSegments = tubularSegments || 64;\n        radius = radius || 1;\n        radialSegments = radialSegments || 8;\n        closed = closed || false;\n\n        var frames = path.computeFrenetFrames(tubularSegments, closed);\n\n        // expose internals\n\n        this.tangents = frames.tangents;\n        this.normals = frames.normals;\n        this.binormals = frames.binormals;\n\n        // helper variables\n\n        var vertex = new Vector3();\n        var normal = new Vector3();\n        var uv = new Vector2();\n        var P = new Vector3();\n\n        var i, j;\n\n        // buffer\n\n        var vertices = [];\n        var normals = [];\n        var uvs = [];\n        var indices = [];\n\n        // create buffer data\n\n        generateBufferData();\n\n        // build geometry\n\n        this.setIndex(indices);\n        this.setAttribute('position', new Float32BufferAttribute(vertices, 3));\n        // Commenting out normals and UVs. For exporting to USDZ the result is better if the object has none of them\n        this.setAttribute('normal', new Float32BufferAttribute(normals, 3));\n        this.setAttribute('uv', new Float32BufferAttribute(uvs, 2));\n\n        // functions\n\n        function generateBufferData() {\n\n            for (i = 0; i < tubularSegments; i++) {\n\n                generateSegment(i);\n\n            }\n\n            // if the geometry is not closed, generate the last row of vertices and normals\n            // at the regular position on the given path\n            //\n            // if the geometry is closed, duplicate the first row of vertices and normals (uvs will differ)\n\n            generateSegment((closed === false) ? tubularSegments : 0);\n\n            // uvs are generated in a separate function.\n            // this makes it easy compute correct values for closed geometries\n            generateUVs();\n\n            // finally create faces\n\n            generateIndices();\n\n        }\n\n        function generateSegment(i) {\n\n            // we use getPointAt to sample evenly distributed points from the given path\n\n            P = path.getPointAt(i / tubularSegments, P);\n\n            // If you avoid rotations completely, the model looks flatter but works\n            // var N = frames.normals[0];\n            // var B = frames.binormals[0];\n\n            // retrieve corresponding normal and binormal\n            var N = frames.normals[i];\n            var B = frames.binormals[i];\n\n            // generate normals and vertices for the current segment\n\n            for (j = 0; j <= radialSegments; j++) {\n\n                var v = j / radialSegments * Math.PI * 2;\n\n                var sin = Math.sin(v);\n                var cos = - Math.cos(v);\n\n                normal\n                normal.x = (cos * N.x + sin * B.x);\n                normal.y = (cos * N.y + sin * B.y);\n                normal.z = (cos * N.z + sin * B.z);\n                normal.normalize();\n\n                normals.push(normal.x, normal.y, normal.z);\n\n                // vertex\n                const r = (typeof radius === 'function') ? radius(i / tubularSegments) : radius[i];\n                // const r = (typeof radius === 'function') ? radius(i / tubularSegments) : radius;\n\n                vertex.x = P.x + r * normal.x;\n                vertex.y = P.y + r * normal.y;\n                vertex.z = P.z + r * normal.z;\n\n                vertices.push(vertex.x, vertex.y, vertex.z);\n\n            }\n\n        }\n\n        function generateIndices() {\n\n            for (j = 1; j <= tubularSegments; j++) {\n\n                for (i = 1; i <= radialSegments; i++) {\n\n                    var a = (radialSegments + 1) * (j - 1) + (i - 1);\n                    var b = (radialSegments + 1) * j + (i - 1);\n                    var c = (radialSegments + 1) * j + i;\n                    var d = (radialSegments + 1) * (j - 1) + i;\n\n                    // faces\n\n                    indices.push(a, b, d);\n                    indices.push(b, c, d);\n\n                }\n\n            }\n\n        }\n\n        function generateUVs() {\n\n            for (i = 0; i <= tubularSegments; i++) {\n\n                for (j = 0; j <= radialSegments; j++) {\n\n                    uv.x = i / tubularSegments;\n                    uv.y = j / radialSegments;\n\n                    uvs.push(uv.x, uv.y);\n\n                }\n\n            }\n\n        }\n\n    }\n}\n\n// TubeBufferGeometry.prototype = Object.create(THREE.BufferGeometry.prototype);\n// TubeBufferGeometry.prototype.constructor = TubeBufferGeometry;\n\nexport { TubeBufferGeometry };","import * as THREE from \"three\";\nimport { TubeBufferGeometry } from \"./TubeGeometryWithVariableWidth.js\";\n\nexport function map(n, start1, stop1, start2, stop2) {\n    return ((n - start1) / (stop1 - start1)) * (stop2 - start2) + start2;\n}\n\nexport function convertMeshlineToGeometry(line, material) {\n    let obj = line;\n    let geometry = obj.geometry.clone();\n    geometry.applyMatrix4(obj.matrix);\n    let vertices = [];\n    let points = Array.from(geometry.attributes.position.array);\n\n\n    for (let i = 0; i <= points.length; i = i + 6) {\n        let v3 = new THREE.Vector3(\n            points[i],\n            points[i + 1],\n            points[i + 2]\n        );\n        //why do I have 0,0,0 points in my positions? :thinking:\n        if (v3.x != 0 && v3.y != 0 && v3.z != 0) {\n            vertices.push(v3);\n        }\n    }\n\n\n    let force = [0];\n    for (let i = 0; i < obj.userData.stroke.force.length; i++) {\n        let length = obj.userData.stroke.force.length;\n        let minWidth = 0;\n        let baseWidth = obj.userData.stroke.lineWidth * 2.5;\n\n        //https://github.com/spite/THREE.MeshLine/blob/master/src/THREE.MeshLine.js#L424\n        //in the shader it seems like it's base witdth * width\n        let width = obj.userData.stroke.force[i] / 15;\n        let tailLength = 3;\n\n        //Beginning of the line\n        if (i < tailLength) {\n            let n = map(\n                i,\n                minWidth,\n                tailLength,\n                minWidth,\n                baseWidth + width\n            );\n\n            force.push(n);\n        }\n        //End of the line\n        else if (i > length - tailLength) {\n            let n = map(\n                i,\n                length - tailLength,\n                length - 1,\n                baseWidth + width,\n                minWidth\n            );\n\n            force.push(n);\n        }\n        //bulk of the line\n        else {\n            force.push(baseWidth + width);\n        }\n    }\n\n    var pathBase = new THREE.CatmullRomCurve3(vertices);\n    const tubeGeometry = new TubeBufferGeometry(\n        pathBase,\n        vertices.length,\n        force,\n        8,\n        !true\n    );\n\n    let tubeMaterial\n\n    if (material === \"basic\") {\n        tubeMaterial = new THREE.MeshBasicMaterial({\n            color: obj.userData.stroke.color,\n            flatShading: true,\n        });\n    } else {\n        tubeMaterial = new THREE.MeshStandardMaterial({\n            color: obj.userData.stroke.color,\n            flatShading: true,\n            roughness: 1,\n            shininess: 0,\n            metalness: 1,\n        });\n    }\n    const mesh = new THREE.Mesh(tubeGeometry, tubeMaterial);\n    return mesh;\n}\n\n\nexport function convertMeshlineFillToGeometry(mesh, material, edges, duplicate) {\n    let obj = mesh;\n    let fill = obj.children[0].clone();\n    let fillGeometry = obj.children[0].geometry.clone();\n    fill.geometry = fillGeometry;\n    fill.geometry.applyMatrix4(obj.matrix);\n    fill.position.set(0, 0, 0);\n    fill.rotation.set(0, 0, 0);\n    fill.scale.set(1, 1, 1);\n\n    let fillMaterial;\n\n    if (material === \"basic\") {\n        fillMaterial = new THREE.MeshBasicMaterial({\n            color: obj.userData.fill.color,\n            side: THREE.FrontSide,\n            wireframe: false\n        });\n    }\n    else {\n        fillMaterial = new THREE.MeshStandardMaterial({\n            color: obj.userData.fill.color,\n            side: THREE.DoubleSide,\n        });\n    }\n\n    let fillMesh = new THREE.Mesh(fillGeometry, fillMaterial);\n    let fillMeshFlipped;\n\n    if (duplicate === true) {\n        let fillFlippedGeometry = fillGeometry.clone();\n        fillFlippedGeometry.index.array =\n            fillFlippedGeometry.index.array.reverse();\n        let fillMeshMaterial = new THREE.MeshStandardMaterial({\n            color: obj.userData.fill.color,\n            side: THREE.DoubleSide,\n        });\n        fillMeshFlipped = new THREE.Mesh(fillFlippedGeometry, fillMeshMaterial)\n    }\n\n    if (edges === true) {\n        const edges = new THREE.EdgesGeometry(fillGeometry);\n        const line = new THREE.LineSegments(\n            edges,\n            new THREE.LineBasicMaterial({\n                color: obj.userData.fill.color,\n            })\n        );\n\n        fillMesh.attach(line);\n    }\n\n\n    if (duplicate === true) {\n        let arr = [fillMesh, fillMeshFlipped]\n        return arr\n    } else {\n        return fillMesh;\n    }\n}\n","import { render } from \"./ExportUSDZ.vue?vue&type=template&id=206058b5&scoped=true\"\nimport script from \"./ExportUSDZ.vue?vue&type=script&lang=js\"\nexport * from \"./ExportUSDZ.vue?vue&type=script&lang=js\"\n\nimport \"./ExportUSDZ.vue?vue&type=style&index=0&id=206058b5&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-206058b5\"]])\n\nexport default __exports__","<template>\n  <button @click=\"exportToGltf()\">Export to GLB</button>\n</template>\n\n<script>\nimport * as THREE from \"three\";\nimport { GLTFExporter } from \"three/examples/jsm/exporters/GLTFExporter.js\";\nimport { scene } from \"../../App.vue\";\nimport {\n  convertMeshlineToGeometry,\n  convertMeshlineFillToGeometry,\n} from \"../convertMeshlineToGeometry.js\";\nlet sceneGLTF;\n\nexport default {\n  name: \"ExportGLTF\",\n  props: {},\n  data() {\n    return {};\n  },\n  methods: {\n    exportToGltf: async function () {\n      this.text = \"Exporting...\";\n      sceneGLTF = new THREE.Scene();\n\n      const group = new THREE.Group();\n\n      scene.children.forEach((obj) => {\n        if (\n          obj != undefined &&\n          obj.geometry &&\n          obj.geometry.type == \"MeshLine\" &&\n          obj.layers.mask == 2 &&\n          obj.geometry.attributes.position.array.length > 6\n        ) {\n          // The stroke\n          if (obj.userData.stroke.show_stroke === true) {\n            group.attach(convertMeshlineToGeometry(obj));\n          }\n\n          // The fill\n          if (obj.userData.fill.show_fill === true) {\n            sceneGLTF.add(convertMeshlineFillToGeometry(obj));\n          }\n        }\n      });\n\n      sceneGLTF.add(group);\n      sceneGLTF.scale.set(0.1, 0.1, 0.1);\n      sceneGLTF.updateMatrixWorld(true);\n      console.log(sceneGLTF);\n\n      const exporter = new GLTFExporter();\n      exporter.parse(\n        sceneGLTF,\n        function (result) {\n          if (result instanceof ArrayBuffer) {\n            saveArrayBuffer(result, \"scene.glb\");\n          } else {\n            const output = JSON.stringify(result, null, 2);\n            saveString(output, \"scene.gltf\");\n          }\n        },\n        { binary: true }\n      );\n      const link = document.createElement(\"a\");\n      link.style.display = \"none\";\n      document.body.appendChild(link);\n\n      function save(blob, filename) {\n        link.href = URL.createObjectURL(blob);\n        link.download = filename;\n        link.click();\n\n        // URL.revokeObjectURL( url ); breaks Firefox...\n      }\n\n      function saveString(text, filename) {\n        save(new Blob([text], { type: \"text/plain\" }), filename);\n      }\n\n      function saveArrayBuffer(buffer, filename) {\n        save(\n          new Blob([buffer], { type: \"application/octet-stream\" }),\n          filename\n        );\n      }\n    },\n  },\n  watch: {},\n  mounted() {},\n};\n</script>\n\n<style scoped>\nbutton {\n  border-bottom: 1px solid #ffe8b3;\n}\n\n.ar {\n  width: 100%;\n  align-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0);\n  border: none;\n  height: 44px;\n  padding-top: 6px;\n  padding-left: 12px;\n  padding-right: 12px;\n  border-bottom: 1px solid #ffe8b3;\n  box-sizing: border-box;\n}\n\n.ar > img {\n  width: auto;\n}\n</style>","import { render } from \"./ExportGLB.vue?vue&type=template&id=e1688084&scoped=true\"\nimport script from \"./ExportGLB.vue?vue&type=script&lang=js\"\nexport * from \"./ExportGLB.vue?vue&type=script&lang=js\"\n\nimport \"./ExportGLB.vue?vue&type=style&index=0&id=e1688084&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e1688084\"]])\n\nexport default __exports__","<template>\r\n  <button @click=\"showModal\">Export to HTML</button>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ExportHTML\",\r\n  methods: {\r\n    showModal: function () {\r\n      this.$emit(\"modal\", { display: true, mode: \"export-html\" });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nbutton {\r\n  border-bottom: 1px solid #ffe8b3;\r\n}\r\n</style>\r\n","import { render } from \"./ExportHTML.vue?vue&type=template&id=302ae2fb&scoped=true\"\nimport script from \"./ExportHTML.vue?vue&type=script&lang=js\"\nexport * from \"./ExportHTML.vue?vue&type=script&lang=js\"\n\nimport \"./ExportHTML.vue?vue&type=style&index=0&id=302ae2fb&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-302ae2fb\"]])\n\nexport default __exports__","import { render } from \"./Share.vue?vue&type=template&id=1a0e0249&scoped=true\"\nimport script from \"./Share.vue?vue&type=script&lang=js\"\nexport * from \"./Share.vue?vue&type=script&lang=js\"\n\nimport \"./Share.vue?vue&type=style&index=0&id=1a0e0249&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1a0e0249\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window\r\n    title=\"Shapes & Materials\"\r\n    :initialX=\"12\"\r\n    :initialY=\"140\"\r\n    :visible=\"selectedTool == 'draw'\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :start-open=\"startOpen\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"container-column\">\r\n      <div class=\"group-label\">Geometry</div>\r\n      <div class=\"shapes-container\">\r\n        <button\r\n          v-for=\"shapeOption in shapes\"\r\n          :key=\"shapeOption.value\"\r\n          class=\"shape-btn\"\r\n          :class=\"{ active: shape === shapeOption.value }\"\r\n          @click=\"selectShape(shapeOption.value)\"\r\n          :title=\"shapeOption.name\"\r\n        >\r\n          <img :src=\"shapeOption.icon\" :alt=\"shapeOption.name\" />\r\n          <span class=\"tooltip\">{{ shapeOption.name }}</span>\r\n        </button>\r\n        \r\n        <!-- Custom models list -->\r\n         <button\r\n            v-for=\"model in customModels\"\r\n            :key=\"model.id\"\r\n            class=\"shape-btn\"\r\n            :class=\"{ active: shape === model.id }\"\r\n            @click=\"selectCustomModel(model.id)\"\r\n            :title=\"model.name\"\r\n          >\r\n            <img src=\"@/assets/icons/Canvas-Custom.svg\" alt=\"Custom Model\" />\r\n            <span class=\"tooltip\">{{ model.name }}</span>\r\n          </button>\r\n\r\n         <button class=\"shape-btn\" @click=\"$refs.fileInput.click()\" title=\"Load Custom GLB\">\r\n             <span style=\"font-size: 18px; color: rgba(255,255,255,0.6)\">+</span>\r\n             <span class=\"tooltip\">Load GLB</span>\r\n         </button>\r\n\r\n        <input\r\n          type=\"file\"\r\n          ref=\"fileInput\"\r\n          class=\"hidden\"\r\n          accept=\".glb,.gltf\"\r\n          @change=\"onFileChange\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"separator-horizontal\"></div>\r\n\r\n      <div class=\"group-label\">Material</div>\r\n      <div class=\"materials-container\">\r\n          <button \r\n            v-for=\"mat in matcaps\" \r\n            :key=\"mat.name\"\r\n            class=\"matcap-btn\"\r\n            :class=\"{ active: currentMaterial === mat.value }\"\r\n            @click=\"selectMaterial(mat.value)\"\r\n            :title=\"mat.name\"\r\n          >\r\n            <div v-if=\"mat.value === 'standard'\" class=\"std-preview\"></div>\r\n            <img v-else :src=\"mat.image\" class=\"matcap-img\" />\r\n          </button>\r\n      </div>\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\n\r\nexport default {\r\n  name: \"ShapeSelector\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    selectedTool: String,\r\n    selectedShape: String,\r\n    reopenTrigger: Number,\r\n    startOpen: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    isOpen: Boolean,\r\n  },\r\n  emits: [\"selected-canvas-shape\", \"close\", \"load-custom-model\", \"set-material\"],\r\n  data() {\r\n    return {\r\n      window: window,\r\n      shape: \"plane\",\r\n      currentMaterial: \"standard\",\r\n      shapes: [\r\n        { value: \"plane\", name: \"Plane\", icon: require(\"@/assets/icons/Canvas-Plane.svg\") },\r\n        { value: \"cube\", name: \"Cube\", icon: require(\"@/assets/icons/Canvas-Cube.svg\") },\r\n        { value: \"cylinder\", name: \"Cylinder\", icon: require(\"@/assets/icons/Canvas-Cylinder.svg\") },\r\n        { value: \"sphere\", name: \"Sphere\", icon: require(\"@/assets/icons/Canvas-Sphere.svg\") },\r\n        { value: \"head\", name: \"Head\", icon: require(\"@/assets/icons/Canvas-Head.svg\") },\r\n      ],\r\n      customModels: [],\r\n      matcaps: [\r\n        { name: 'Standard', value: 'standard' },\r\n        { name: 'Clay', value: 'matcaps/clay_studio.jpeg', image: 'matcaps/clay_studio.jpeg' },\r\n        { name: 'Gold', value: 'matcaps/metal_shiny.jpeg', image: 'matcaps/metal_shiny.jpeg' },\r\n        { name: 'Metal', value: 'matcaps/metal_lead.jpeg', image: 'matcaps/metal_lead.jpeg' },\r\n        { name: 'Pearl', value: 'matcaps/pearl.jpeg', image: 'matcaps/pearl.jpeg' },\r\n        { name: 'Jade', value: 'matcaps/jade.jpeg', image: 'matcaps/jade.jpeg' },\r\n        { name: 'Skin', value: 'matcaps/skin.jpeg', image: 'matcaps/skin.jpeg' },\r\n        { name: 'Toon', value: 'matcaps/toon.jpeg', image: 'matcaps/toon.jpeg' },\r\n      ]\r\n    };\r\n  },\r\n  methods: {\r\n    selectShape(value) {\r\n        this.shape = value;\r\n        this.$emit(\"selected-canvas-shape\", value);\r\n    },\r\n    selectMaterial(value) {\r\n        this.currentMaterial = value;\r\n        this.$emit(\"set-material\", value);\r\n    },\r\n    onFileChange(e) {\r\n      const file = e.target.files[0];\r\n      if (file) {\r\n        const url = URL.createObjectURL(file);\r\n        const modelId = Date.now().toString();\r\n        this.customModels.push({ id: modelId, name: file.name, url });\r\n        this.$emit(\"load-custom-model\", { url, id: modelId });\r\n        this.selectCustomModel(modelId);\r\n        e.target.value = \"\";\r\n      }\r\n    },\r\n    selectCustomModel(id) {\r\n      this.shape = id; \r\n      this.$emit(\"selected-canvas-shape\", { customId: id });\r\n    },\r\n  },\r\n  watch: {\r\n    selectedShape(val) {\r\n      if (val) {\r\n        this.shape = val;\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    if (this.selectedShape) {\r\n      this.shape = this.selectedShape;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container-column {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 12px;\r\n}\r\n\r\n.shapes-container {\r\n  display: flex;\r\n  gap: 8px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.materials-container {\r\n    display: flex;\r\n    gap: 8px;\r\n    flex-wrap: wrap;\r\n}\r\n\r\n.group-label {\r\n    font-size: 10px;\r\n    text-transform: uppercase;\r\n    opacity: 0.5;\r\n    font-weight: bold;\r\n    letter-spacing: 0.5px;\r\n    margin-bottom: -4px;\r\n}\r\n\r\n.separator-horizontal {\r\n  height: 1px;\r\n  background: rgba(255,255,255,0.1);\r\n  width: 100%;\r\n}\r\n\r\n.shape-btn, .matcap-btn {\r\n  position: relative;\r\n  width: 36px;\r\n  height: 36px;\r\n  background: rgba(255, 255, 255, 0.03);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s;\r\n  padding: 0;\r\n  overflow: hidden;\r\n}\r\n\r\n.shape-btn:hover, .matcap-btn:hover {\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border-color: rgba(255, 255, 255, 0.2);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.shape-btn.active, .matcap-btn.active {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-color: var(--accent-color, #ffb000);\r\n  box-shadow: 0 0 0 1px var(--accent-color, #ffb000);\r\n}\r\n\r\n.shape-btn img {\r\n  width: 20px;\r\n  height: 20px;\r\n  filter: brightness(0) invert(1);\r\n}\r\n\r\n.matcap-img {\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: cover;\r\n}\r\n\r\n.std-preview {\r\n    width: 100%;\r\n    height: 100%;\r\n    background: #e6edf5;\r\n}\r\n\r\n.tooltip {\r\n  position: absolute;\r\n  bottom: -28px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  background: rgba(0, 0, 0, 0.9);\r\n  color: white;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  font-size: 10px;\r\n  white-space: nowrap;\r\n  pointer-events: none;\r\n  opacity: 0;\r\n  transition: opacity 0.2s;\r\n  z-index: 1000;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.2);\r\n}\r\n\r\n.shape-btn:hover .tooltip, .matcap-btn:hover .tooltip {\r\n  opacity: 1;\r\n}\r\n</style>\r\n","import { render } from \"./ShapeSelector.vue?vue&type=template&id=29b5f1dc&scoped=true\"\nimport script from \"./ShapeSelector.vue?vue&type=script&lang=js\"\nexport * from \"./ShapeSelector.vue?vue&type=script&lang=js\"\n\nimport \"./ShapeSelector.vue?vue&type=style&index=0&id=29b5f1dc&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-29b5f1dc\"]])\n\nexport default __exports__","\n<template>\n  <div v-if=\"modalProp.display\" class=\"fade\" @click.self=\"hideModal\">\n    <div class=\"modal\">\n      <div class=\"component-container\">\n        <Welcome v-if=\"modalProp.mode === 'about'\" />\n        <Feedback v-if=\"modalProp.mode === 'feedback'\" />\n        <export-for-blender v-if=\"modalProp.mode === 'blender'\" />\n        <export-for-procreate v-if=\"modalProp.mode === 'procreate'\" />\n        <Tutorial v-if=\"modalProp.mode === 'tutorial'\" />\n        <Survey v-if=\"modalProp.mode === 'survey'\" />\n        <brush-library v-if=\"modalProp.mode === 'brush-library'\" @set-preset=\"handleSetPreset\" />\n        <export-h-t-m-l-content v-if=\"modalProp.mode === 'export-html'\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Welcome from \"./ModalContent/Welcome.vue\";\nimport Feedback from \"./ModalContent/Feedback.vue\";\nimport ExportForBlender from \"./ModalContent/ExportForBlender.vue\";\nimport ExportForProcreate from \"./ModalContent/ExportForProcreate.vue\";\nimport Tutorial from \"./ModalContent/Tutorial.vue\";\nimport Survey from \"./ModalContent/Survey.vue\";\nimport BrushLibrary from \"./ModalContent/BrushLibrary.vue\";\nimport ExportHTMLContent from \"./ModalContent/ExportHTMLContent.vue\";\n\nexport default {\n  name: \"VideoExportPreview\",\n  components: {\n    Welcome,\n    Feedback,\n    ExportForBlender,\n    ExportForProcreate,\n    Tutorial,\n    Survey,\n    BrushLibrary,\n    ExportHTMLContent,\n  },\n  data() {\n    return {};\n  },\n  props: {\n    modalProp: Object,\n  },\n  methods: {\n    hideModal: function () {\n      this.$emit(\"modal-set\", { show: false, mode: \"about\" });\n    },\n    handleSetPreset: function (settings) {\n      this.$emit(\"set-preset\", settings);\n      this.hideModal();\n    },\n  },\n  watch: {\n    modalProp: function (val) {\n      console.log(val);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.fade {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.8);\n  z-index: 10;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.modal {\n  width: fit-content;\n  min-width: 50%;\n  max-width: 75%;\n  max-width: 800px;\n  height: fit-content;\n  min-height: 50%;\n  max-height: 70%;\n  overflow-y: scroll;\n  background-color: white;\n  filter: drop-shadow(0px 0px 24px rgba(0, 0, 0, 0.08));\n  border-radius: 8px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: text;\n  touch-action: none;\n  padding: 32px;\n}\n\n.component-container {\n  height: 100%;\n  overflow-y: scroll;\n  -webkit-overflow-scrolling: touch;\n}\n</style>","\n<template>\n  <div>\n    <h1>Penzil</h1>\n    <h2>Ver 0.2</h2>\n\n    <h2>\n      Penzil is a 3d sketching app designed and developed by\n      <a href=\"http://twitter.com/jacopocolo\" target=\"_blank\">Jacopo Col</a>\n    </h2>\n    <p>\n      Penzil is built on top of the work of many people: the whole community\n      behind\n      <a href=\"https://github.com/vuejs/vue\" target=\"_blank\">vue.js</a>, the\n      whole community behind\n      <a href=\"https://github.com/mrdoob/three.js/\" target=\"_blank\">three.js</a\n      >,\n      <a href=\"https://github.com/spite/THREE.MeshLine\" target=\"_blank\"\n        >THREE.Meshline</a\n      >\n      by spite,\n      <a href=\"https://github.com/yomotsu/camera-controls\" target=\"_blank\"\n        >camera controls</a\n      >\n      by yomotsu,\n      <a\n        href=\"https://github.com/Fyrestar/THREE.InfiniteGridHelper\"\n        target=\"_blank\"\n        >InfiniteGridHelper</a\n      >\n      by Fyrestar,\n      <a\n        href=\"https://github.com/ArthurClemens/Javascript-Undo-Manager\"\n        target=\"_blank\"\n        >Undo-Manager</a\n      >\n      by ArthurClemens,\n      <a\n        href=\"https://github.com/TrevorSundberg/h264-mp4-encoder\"\n        target=\"_blank\"\n        >h264-mp4-encoder</a\n      >\n      by TrevorSundberg. This project would have been impossible without the\n      work of these people.\n    </p>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Welcome\",\n  data() {\n    return {};\n  },\n};\n</script>\n\n<style scoped>\ndiv {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\nh1 {\n  font-size: 2em;\n}\n\nh2 {\n  font-size: 18px;\n  line-height: 120%;\n}\n\np {\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 1.5em;\n}\n</style>","import { render } from \"./Welcome.vue?vue&type=template&id=4d550b7e&scoped=true\"\nimport script from \"./Welcome.vue?vue&type=script&lang=js\"\nexport * from \"./Welcome.vue?vue&type=script&lang=js\"\n\nimport \"./Welcome.vue?vue&type=style&index=0&id=4d550b7e&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4d550b7e\"]])\n\nexport default __exports__","\n<template>\n  <div>\n    <h1>Feedback</h1>\n    <p>Thanks for trying out Penzil.</p>\n    <p>\n      There are two ways to send feedback: first of all, you can reach out\n      <a href=\"http://twitter.com/jacopocolo\" target=\"_blank\"\n        >directly to me on Twitter</a\n      >. Otherwise, you can join the\n      <a href=\"https://discord.gg/jvzjNpZGCk\" target=\"_blank\">Penzil Discord</a>\n      server and post there. If you found something that you think it's a bug,\n      you can also\n      <a href=\"https://github.com/jacopocolo/Penzil/issues\" target=\"_blank\"\n        >open a new issue on Github</a\n      >.\n    </p>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Feedback\",\n  data() {\n    return {};\n  },\n};\n</script>\n\n<style scoped>\ndiv {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\nh1 {\n  font-size: 2em;\n  display: inline;\n}\n\nh1 > h2 {\n  display: inline;\n}\n\nh2 {\n  font-size: 18px;\n  line-height: 120%;\n}\n\np {\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 1.5em;\n}\n</style>","import { render } from \"./Feedback.vue?vue&type=template&id=1af5b4e9&scoped=true\"\nimport script from \"./Feedback.vue?vue&type=script&lang=js\"\nexport * from \"./Feedback.vue?vue&type=script&lang=js\"\n\nimport \"./Feedback.vue?vue&type=style&index=0&id=1af5b4e9&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1af5b4e9\"]])\n\nexport default __exports__","\n<template>\n  <div>\n    <h1>Export for Blender</h1>\n\n    <p>\n      You can export your sketch for Blender with the button below but there\n      isn't a proper improter yet, just a script. Hop in\n      <a href=\"https://discord.gg/jvzjNpZGCk\" target=\"_blank\">Penzil Discord</a>\n      server and I'll guide you along.\n    </p>\n    <button @click=\"exportToGp\">Export for Blender</button>\n  </div>\n</template>\n\n<script>\nimport * as THREE from \"three\";\nimport { scene } from \"../../App.vue\";\n\nexport default {\n  name: \"Export\",\n  data() {\n    return {};\n  },\n  methods: {\n    exportToGp: function () {\n      const json = [];\n      scene.children.forEach((obj) => {\n        //check if it's a line, if it's in the right layer and that we don't already have its original\n        if (\n          obj.geometry &&\n          obj.geometry.type == \"MeshLine\" &&\n          obj.layers.mask == 2\n        ) {\n          let line = {};\n\n          let geometry = obj.geometry.clone();\n          geometry.applyMatrix(obj.matrix);\n\n          line.vertices = Array.from(geometry.attributes.position.array);\n          line.stroke = obj.userData.stroke;\n          line.fill = obj.userData.fill;\n          line.mirrorOn = false;\n          line.position = new THREE.Vector3(0, 0, 0);\n          line.quaternion = new THREE.Quaternion(0, 0, 0, 1);\n          line.scale = new THREE.Vector3(1, 1, 1);\n          line.matrix = obj.matrix;\n          json.push(line);\n        }\n      });\n      console.log(json);\n\n      var dataStr =\n        \"data:text/json;charset=utf-8,\" +\n        encodeURIComponent(JSON.stringify(json));\n\n      var filename = prompt(\"Enter a name for your file\", \"gp_\");\n\n      if (filename != null) {\n        var el = document.createElement(\"a\");\n        el.setAttribute(\"href\", dataStr);\n        el.setAttribute(\"download\", filename + \".json\");\n        el.click();\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\ndiv {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\nh1 {\n  font-size: 2em;\n  display: inline;\n}\n\nh1 > h2 {\n  display: inline;\n}\n\nh2 {\n  font-size: 18px;\n  line-height: 120%;\n}\n\np {\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 1.5em;\n}\n\nbutton {\n  align-content: center;\n  background-color: rgba(0, 0, 0, 0);\n  border: none;\n  height: 44px;\n  width: 50%;\n  padding-left: 16px;\n  padding-right: 16px;\n  border: 1px solid #ffb000;\n  border-radius: 8px;\n}\n</style>","import { render } from \"./ExportForBlender.vue?vue&type=template&id=96b7a698&scoped=true\"\nimport script from \"./ExportForBlender.vue?vue&type=script&lang=js\"\nexport * from \"./ExportForBlender.vue?vue&type=script&lang=js\"\n\nimport \"./ExportForBlender.vue?vue&type=style&index=0&id=96b7a698&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-96b7a698\"]])\n\nexport default __exports__","\n<template>\n  <div>\n    <h1>Export for Procreate</h1>\n    <div class=\"row\">\n      <div id=\"scene-usdz-canvas\" class=\"column\">\n        <canvas id=\"usdz-canvas\"></canvas>\n        <span class=\"canvas-instructions\"\n          >Tap or click on a fill (visible face or edge) to flip it</span\n        >\n      </div>\n      <div id=\"usdz-options\" class=\"column\">\n        <p>\n          <input type=\"checkbox\" name=\"strokes\" v-model=\"mergeLines\" />\n          <label for=\"strokes\"\n            >Merge strokes (reccomended)\n            <p>\n              All strokes will appear as a single layer in Procreate. You will\n              lose individual stroke colors but you'll be able to repaint them\n              in Procreate. This settings allows you to import bigger Penzil\n              sketches before your artwork exceeds the device capabilities for\n              import.\n            </p></label\n          >\n          <br />\n          <input type=\"checkbox\" name=\"fills\" v-model=\"checkFills\" />\n          <label for=\"fills\"\n            >Manually check your fills. Tap or click on a visible face or edge\n            to flip it\n            <p>\n              Procrete only support single face meshes and you can only paint\n              their front side. Check that your fills are facing the direction\n              you want. If you just see an outline you are looking at the back\n              of a fill. Tap on its edge or turn it around and tap on it to flip\n              it.\n            </p>\n          </label>\n        </p>\n        <button @click=\"exportToUSDZ\">Export</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as THREE from \"three\";\nimport { scene } from \"../../App.vue\";\nimport { mergeBufferGeometries } from \"three/examples/jsm/utils/BufferGeometryUtils.js\";\nimport { USDZExporter } from \"three/examples/jsm/exporters/USDZExporter.js\";\nimport {\n  convertMeshlineToGeometry,\n  convertMeshlineFillToGeometry,\n} from \"../convertMeshlineToGeometry.js\";\nimport CameraControls from \"camera-controls\";\nCameraControls.install({ THREE: THREE });\n\nlet raycaster = new THREE.Raycaster();\nraycaster.params.Line.threshold = 0.1;\n// let texture = new THREE.TextureLoader().load(\"/watercolor.jpg\");\n// texture.wrapS = THREE.RepeatWrapping;\n// texture.wrapT = THREE.RepeatWrapping;\n// texture.repeat.set(1, 1);\nlet sceneUSDZ = new THREE.Scene();\nlet sceneExport = new THREE.Scene();\nlet rendererUSDZ = new THREE.WebGLRenderer({\n  antialias: true,\n  alpha: true,\n});\nlet cameraUSDZ = new THREE.PerspectiveCamera(\n  100,\n  window.innerWidth / window.innerHeight,\n  1,\n  1000\n);\nlet clock, cameraControls;\n\nexport default {\n  name: \"Export\",\n  data() {\n    return {\n      mergeLines: true,\n      checkFills: false,\n    };\n  },\n  methods: {\n    previewUSDZ: function () {\n      sceneUSDZ.background = new THREE.Color(0xf0f0f0);\n\n      rendererUSDZ = new THREE.WebGLRenderer({\n        antialias: true,\n        alpha: false,\n        canvas: document.getElementById(\"usdz-canvas\"),\n      });\n\n      rendererUSDZ.setPixelRatio(window.devicePixelRatio);\n\n      cameraUSDZ.zoom = 3;\n      cameraUSDZ.position.set(5, 5, 10);\n      cameraUSDZ.updateProjectionMatrix();\n\n      clock = new THREE.Clock();\n\n      cameraControls = new CameraControls(cameraUSDZ, rendererUSDZ.domElement);\n      cameraControls.dampingFactor = 20;\n      cameraControls.draggingDampingFactor = 200;\n      cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n      cameraControls.mouseButtons.wheel = CameraControls.ACTION.ROTATE;\n      document.addEventListener(\"keydown\", (event) => {\n        if (event.code === \"Space\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.TRUCK;\n          this.toolEnabled = false;\n        }\n      });\n      document.addEventListener(\"keyup\", (event) => {\n        if (event.code === \"Space\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n          this.toolEnabled = true;\n        }\n      });\n      document.addEventListener(\"keydown\", (event) => {\n        if (event.code === \"AltLeft\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n          this.toolEnabled = false;\n        }\n      });\n      document.addEventListener(\"keyup\", (event) => {\n        if (event.code === \"AltLeft\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n          this.toolEnabled = true;\n        }\n      });\n      cameraControls.mouseButtons.middle = CameraControls.ACTION.DOLLY;\n      cameraControls.mouseButtons.right = CameraControls.ACTION.ZOOM;\n      cameraControls.touches.one = CameraControls.ACTION.TOUCH_ROTATE;\n      cameraControls.touches.two = CameraControls.ACTION.TOUCH_ZOOM_ROTATE;\n      cameraControls.touches.three = CameraControls.ACTION.TOUCH_DOLLY_TRUCK;\n      cameraControls.enabled = true;\n      cameraControls.maxZoom = 4000;\n      cameraControls.minZoom = 1.5;\n\n      // const group = new THREE.Group();\n\n      scene.children.forEach((obj) => {\n        if (\n          obj != undefined &&\n          obj.geometry &&\n          obj.geometry.type == \"MeshLine\" &&\n          obj.layers.mask == 2 &&\n          obj.geometry.attributes.position.array.length > 6\n        ) {\n          // The stroke\n          if (obj.userData.stroke.show_stroke === true) {\n            sceneUSDZ.add(convertMeshlineToGeometry(obj, \"basic\"));\n          }\n\n          // The fill\n          if (obj.userData.fill.show_fill === true) {\n            sceneUSDZ.add(convertMeshlineFillToGeometry(obj, \"basic\", true));\n          }\n        }\n      });\n\n      // sceneUSDZ.add(group);\n      sceneUSDZ.updateMatrixWorld(true);\n\n      rendererUSDZ.render(sceneUSDZ, cameraUSDZ);\n\n      rendererUSDZ.domElement.addEventListener(\"pointerup\", this.flipFace);\n      window.addEventListener(\"resize\", this.onWindowResize);\n      window.addEventListener(\"orientationchange\", this.onWindowResize);\n      this.onWindowResize();\n    },\n    onWindowResize: function () {\n      const canvas = rendererUSDZ.domElement;\n      cameraUSDZ.aspect = canvas.clientWidth / canvas.clientHeight;\n      cameraUSDZ.updateProjectionMatrix();\n      rendererUSDZ.setSize(canvas.clientWidth, canvas.clientHeight);\n      // renderer.setViewport(0, 0, window.innerWidth, window.innerHeight);\n      rendererUSDZ.render(sceneUSDZ, cameraUSDZ);\n    },\n    flipFace: function (event) {\n      let canvasBounds = rendererUSDZ.context.canvas.getBoundingClientRect();\n      let x =\n        ((event.clientX - canvasBounds.left) /\n          (canvasBounds.right - canvasBounds.left)) *\n          2 -\n        1;\n      let y =\n        -(\n          (event.clientY - canvasBounds.top) /\n          (canvasBounds.bottom - canvasBounds.top)\n        ) *\n          2 +\n        1;\n      raycaster.setFromCamera(new THREE.Vector2(x, y), cameraUSDZ);\n      var intersectedObject = raycaster.intersectObjects(sceneUSDZ.children)[0];\n      if (intersectedObject != undefined) {\n        if (intersectedObject.object.type === \"LineSegments\") {\n          let renderOrder = intersectedObject.object.parent.renderOrder;\n          let lineRenderOrder = intersectedObject.object.renderOrder;\n          intersectedObject.object.parent.geometry.index.array =\n            intersectedObject.object.parent.geometry.index.array.reverse();\n          intersectedObject.object.parent.geometry.index.needsUpdate = true;\n          intersectedObject.object.renderOrder = lineRenderOrder;\n          intersectedObject.object.parent.renderOrder = renderOrder;\n        } else {\n          let renderOrder = intersectedObject.object.renderOrder;\n          intersectedObject.object.geometry.index.array =\n            intersectedObject.object.geometry.index.array.reverse();\n          intersectedObject.object.geometry.index.needsUpdate = true;\n          intersectedObject.object.renderOrder = renderOrder;\n        }\n      }\n      rendererUSDZ.render(sceneUSDZ, cameraUSDZ);\n    },\n    animtateSceneUSDZ: function () {\n      const delta = clock.getDelta();\n      let hasCameraControlsUpdated = cameraControls.update(delta);\n\n      requestAnimationFrame(this.animtateSceneUSDZ);\n      if (hasCameraControlsUpdated) {\n        rendererUSDZ.render(sceneUSDZ, cameraUSDZ);\n      }\n    },\n    exportToUSDZ: async function () {\n      sceneExport = new THREE.Scene();\n      const group = new THREE.Group();\n      let geometries = [];\n      let uvs = [];\n\n      //potentially UVs could be kept by scaling and ofsetting\n      //https://stackoverflow.com/questions/23530449/rotate-scale-and-translate-2d-coordinates\n\n      for (let o = 0; o < sceneUSDZ.children.length; o++) {\n        const obj = sceneUSDZ.children[o];\n        if (obj.material?.type === \"MeshBasicMaterial\") {\n          let newObj = obj.clone();\n          newObj.material = new THREE.MeshStandardMaterial({\n            color: obj.material.color,\n          });\n          if (\n            this.mergeLines === true &&\n            obj.geometry?.type === \"TubeBufferGeometry\"\n          ) {\n            //these are strokes\n            let geometry = obj.geometry;\n            geometries.push(geometry);\n\n            let uv = Array.from(obj.geometry.attributes.uv.array);\n            uvs.push(uv);\n          } else {\n            //these are fills\n            sceneExport.add(newObj);\n          }\n        }\n      }\n\n      if (geometries.length > 0) {\n        const material = new THREE.MeshStandardMaterial({\n          color: 0x1c1c1e,\n          flatShading: true,\n        });\n        const mergedGeometry = mergeBufferGeometries(geometries, false);\n\n        const cells = Math.ceil(Math.sqrt(uvs.length));\n        const offset = 1 / cells;\n        let count = 0;\n\n        console.log({ uvs_length: uvs.length, cells: cells, offset: offset });\n\n        for (let y = 0; y < cells; y++) {\n          for (let x = 0; x < cells; x++) {\n            let i = count;\n            if (i > uvs.length - 1) {\n              continue;\n            } else {\n              for (let z = 0; z < uvs[i].length; z = z + 2) {\n                uvs[i][z] = uvs[i][z] + (x / offset) * offset;\n                uvs[i][z + 1] = uvs[i][z + 1] + (y / offset) * offset;\n              }\n              count++;\n            }\n          }\n        }\n\n        let mergedUvs = [].concat.apply([], uvs);\n        for (let a = 0; a < mergedUvs.length; a++) {\n          mergedUvs[a] = mergedUvs[a] * offset;\n        }\n        mergedGeometry.setAttribute(\n          \"uv\",\n          new THREE.Float32BufferAttribute(mergedUvs, 2)\n        );\n        mergedGeometry.attributes.uv.needsUpdate = true;\n\n        const mesh = new THREE.Mesh(mergedGeometry, material);\n\n        sceneExport.add(mesh);\n        group.add(mesh);\n        sceneExport.add(group);\n      }\n\n      const exporter = new USDZExporter();\n      const arraybuffer = await exporter.parse(sceneExport);\n      const blob = new Blob([arraybuffer], {\n        type: \"application/octet-stream\",\n      });\n      var el = document.createElement(\"a\");\n      el.setAttribute(\"href\", URL.createObjectURL(blob));\n      el.setAttribute(\"download\", \"sketch.usdz\");\n      el.click();\n    },\n    clear: function (obj) {\n      while (obj.children.length > 0) {\n        this.clear(obj.children[0]);\n        obj.remove(obj.children[0]);\n      }\n      if (obj.geometry) obj.geometry.dispose();\n\n      if (obj.material) {\n        Object.keys(obj.material).forEach((prop) => {\n          if (!obj.material[prop]) return;\n          if (\n            obj.material[prop] !== null &&\n            typeof obj.material[prop].dispose === \"function\"\n          )\n            obj.material[prop].dispose();\n        });\n        obj.material.dispose();\n      }\n    },\n  },\n  mounted() {\n    this.previewUSDZ();\n    this.animtateSceneUSDZ();\n    const canvas = rendererUSDZ.domElement;\n    rendererUSDZ.setSize(canvas.clientWidth, canvas.clientHeight);\n  },\n  unmounted() {\n    this.clear(sceneUSDZ);\n    this.clear(sceneExport);\n  },\n};\n</script>\n\n<style scoped>\n.row {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  width: 100%;\n  padding-top: 1em;\n  padding-bottom: 1em;\n}\n\n@media (orientation: portrait) {\n  .row {\n    flex-direction: column;\n  }\n\n  #usdz-options {\n    padding-left: 0px;\n  }\n}\n\n@media (orientation: landscape) {\n  #usdz-options {\n    padding-left: 16px;\n  }\n}\n\n.column {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  /* flex-basis: 100%; */\n}\n\n#usdz-canvas {\n  position: relative;\n  top: 0;\n  width: 95%;\n  height: 100%;\n}\n\n.canvas-instructions {\n  position: relative;\n  top: 0.5em;\n  text-align: center;\n  width: 90%;\n  margin-bottom: 1em;\n}\n\ninput > label {\n  text-indent: 1.25em;\n}\n\nlabel {\n  margin-left: 0.25em;\n  font-weight: 900;\n}\n\nlabel > p {\n  margin-left: 1em;\n  margin-top: 0.5em;\n  font-size: 1em;\n}\n\nh1 {\n  font-size: 2em;\n  display: inline;\n}\n\nh1 > h2 {\n  display: inline;\n}\n\nh2 {\n  font-size: 18px;\n  line-height: 120%;\n}\n\np {\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 1.5em;\n  margin-top: 1em;\n}\n\nbutton {\n  align-content: center;\n  background-color: rgba(0, 0, 0, 0);\n  border: none;\n  height: 44px;\n  width: 50%;\n  padding-left: 16px;\n  padding-right: 16px;\n  border: 1px solid #ffb000;\n  border-radius: 8px;\n  margin-top: 1.5em;\n}\n</style>","import { render } from \"./ExportForProcreate.vue?vue&type=template&id=d410ddd2&scoped=true\"\nimport script from \"./ExportForProcreate.vue?vue&type=script&lang=js\"\nexport * from \"./ExportForProcreate.vue?vue&type=script&lang=js\"\n\nimport \"./ExportForProcreate.vue?vue&type=style&index=0&id=d410ddd2&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d410ddd2\"]])\n\nexport default __exports__","\n<template>\n  <div>\n    <p class=\"self-destruct\">\n      This tutorial will self-destruct\n      {{ 4 - count === 0 ? \"the next\" : \"in \" + countDown + \"\" }}\n      {{ 4 - count > 1 ? \"sessions\" : \"session\" }}.\n    </p>\n    <h1>A quick intro to Penzil v 0.2</h1>\n\n    <p>\n      Penzil is a web application for sketching in 3d. It is primarily designed\n      for touch screens but it works on desktop as well (although, if you are on\n      desktop, I recommend you look into\n      <a href=\"https://www.youtube.com/watch?v=c57qq2nE3B0\" target=\"_blank\"\n        >Blender's Grease Pencil</a\n      >).\n    </p>\n    <p>\n      In Penzil, you draw on a \"3d canvas\". The \"3d canvas\" is the white surface\n      at the center of the screen. You can only draw on the canvas. By moving\n      and rotating the canvas around, you can sketch in 3d.\n    </p>\n    <h2>Drawing and erasing</h2>\n    <p>\n      You can draw and erase with the left mouse button, finger or pen on top of\n      the \"3d canvas\".\n    </p>\n    <p>\n      Switch between drawing and erasing using the bar at the top of the screen.\n    </p>\n\n    <div class=\"container\">\n      <iframe\n        src=\"https://www.youtube.com/embed/yeyGktOCNfk\"\n        title=\"YouTube video player\"\n        frameborder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        class=\"video\"\n      ></iframe>\n    </div>\n\n    <h2>Rotate or move the 3d canvas</h2>\n    <p>\n      You can move the \"3d canvas\" by grabbing the arrow heads at the center of\n      the \"3d canvas\". You can rotate the \"3d canvas\" by grabbing the arcs. You\n      grab arrow heads and arcs simply by tapping on them or clicking with the\n      left mouse and dragging.\n    </p>\n\n    <div class=\"container\">\n      <iframe\n        src=\"https://www.youtube.com/embed/sPfi9Alqugk\"\n        title=\"YouTube video player\"\n        frameborder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        class=\"video\"\n      ></iframe>\n    </div>\n\n    <h2>Look around and pan</h2>\n    <p>\n      You can look around using two fingers, using a trackpad, a trackball or by\n      pressing the Option key (\"Alt\") and using the left mouse button. You can\n      pan by swiping with three fingers or by pressing the spacebar and clicking\n      with the left button.<br />You can also use the cube in the top right\n      corner to look around. To position the camera precisely, tap on any of the\n      faces of the cube.\n    </p>\n\n    <div class=\"container\">\n      <iframe\n        src=\"https://www.youtube.com/embed/ON1rNnmjKbQ\"\n        title=\"YouTube video player\"\n        frameborder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        class=\"video\"\n      ></iframe>\n    </div>\n\n    <h2>\"3d canvas\" shapes</h2>\n    <p>\n      Penzil comes with several \"3d canvas\" shapes. The default one is a flat\n      plane but you can also pick: a cube, a cylinder, a sphere and a simplified\n      head model. They all behave the same: draw on them and your lines will\n      stick to the surface of the \"3d canvas\".\n    </p>\n\n    <div class=\"container\">\n      <iframe\n        src=\"https://www.youtube.com/embed/iwI_lWCxttE\"\n        title=\"YouTube video player\"\n        frameborder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        class=\"video\"\n      ></iframe>\n    </div>\n\n    <h2>\"3d canvas\" settings</h2>\n    <p>\n      There are several settings available for the \"3d canvas\". Most are\n      self-explanatory: you can lock and unlock the movement of the \"3d canvas\"\n      and you can show or hide it. But you can also switch the transformation\n      tools between Move and Scale.<br />The Scale tool allows you to resize the\n      \"3d canvas\". Note that depth transformations are not availalbe for flat\n      surfaceses like the plane.<br />The snap toggle allows you to turn on or\n      off snapping. The snapping allows you to move and rotate the \"3d canvas\"\n      in fixed increments.<br />Finally the reset button resets all the\n      transformations applies to the \"3d canvas\".\n    </p>\n\n    <div class=\"container\">\n      <iframe\n        src=\"https://www.youtube.com/embed/cXAbjI5YEM0\"\n        title=\"YouTube video player\"\n        frameborder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        class=\"video\"\n      ></iframe>\n    </div>\n\n    <h2>Stroke and fill settings</h2>\n    <p>\n      The round icon next to the draw tool at the top allows you to change the\n      size and the color of the stroke, and the color of fill. Stroke and fill\n      can also be toggled on independently.\n      <br />When using fill, note that results may vary when drawing on surfaces\n      that are not flat. To improve quality of the fill, try to draw the same\n      shape but slower.\n    </p>\n\n    <div class=\"container\">\n      <iframe\n        src=\"https://www.youtube.com/embed/8A0j1mu0i_Y\"\n        title=\"YouTube video player\"\n        frameborder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        class=\"video\"\n      ></iframe>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Tutorial\",\n  data() {\n    return {\n      count: 0,\n      countDown: 0,\n    };\n  },\n  mounted() {\n    if (localStorage.getItem(\"tut01\") === null) {\n      this.count = 0;\n    } else {\n      this.count = parseInt(window.localStorage.tut02);\n    }\n    this.countDown = -(this.count - 4);\n  },\n};\n</script>\n\n<style scoped>\ndiv {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  max-width: 95%;\n  height: calc(100% + 1px);\n}\n\nh1 {\n  font-size: 2em;\n}\n\nh2 {\n  font-size: 18px;\n  line-height: 120%;\n}\n\np {\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 1.6em;\n}\n\n.self-destruct {\n  font-size: 16px;\n  background-color: #ffe8b3;\n  width: 100%;\n  padding-left: 8px;\n}\n\n.container {\n  position: relative;\n  width: 100%;\n  height: 0;\n  padding-bottom: 56.25%;\n}\n\n.video {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n</style>","import { render } from \"./Tutorial.vue?vue&type=template&id=6ea82b80&scoped=true\"\nimport script from \"./Tutorial.vue?vue&type=script&lang=js\"\nexport * from \"./Tutorial.vue?vue&type=script&lang=js\"\n\nimport \"./Tutorial.vue?vue&type=style&index=0&id=6ea82b80&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6ea82b80\"]])\n\nexport default __exports__","<template>\n  <div>\n    <iframe\n      src=\"https://docs.google.com/forms/d/e/1FAIpQLSccJWlem-HLrgscUJLXLqKpFXOC3LnDkUUJOoF7Saxrq3gNKQ/viewform?embedded=true\"\n      width=\"100%\"\n      height=\"2478\"\n      frameborder=\"0\"\n      marginheight=\"0\"\n      marginwidth=\"0\"\n      >Loading</iframe\n    >\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Survey\",\n  data() {\n    return {};\n  },\n  mounted() {},\n};\n</script>\n\n<style scoped>\ndiv {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  max-width: 95%;\n  height: calc(100% + 1px);\n}\n\nh1 {\n  font-size: 40px;\n}\n\nh2 {\n  font-size: 18px;\n  line-height: 120%;\n}\n\np {\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 1.6em;\n}\n\n.self-destruct {\n  font-size: 16px;\n  background-color: #ffe8b3;\n  width: 100%;\n  padding-left: 8px;\n}\n\n.container {\n  position: relative;\n  width: 100%;\n  height: 0;\n  padding-bottom: 56.25%;\n}\n\n.video {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n</style>\n","import { render } from \"./Survey.vue?vue&type=template&id=57022cc6&scoped=true\"\nimport script from \"./Survey.vue?vue&type=script&lang=js\"\nexport * from \"./Survey.vue?vue&type=script&lang=js\"\n\nimport \"./Survey.vue?vue&type=style&index=0&id=57022cc6&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-57022cc6\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"brush-library\">\r\n    <h2>Brush Library</h2>\r\n    <div class=\"presets\">\r\n      <div class=\"preset\" @click=\"selectPreset('pencil')\">\r\n        <div class=\"icon\"></div>\r\n        <div class=\"info\">\r\n          <h3>Pencil</h3>\r\n          <p>Fine lines for sketching.</p>\r\n        </div>\r\n      </div>\r\n      <div class=\"preset\" @click=\"selectPreset('pen')\">\r\n        <div class=\"icon\"></div>\r\n        <div class=\"info\">\r\n          <h3>Pen</h3>\r\n          <p>Clean lines for inking.</p>\r\n        </div>\r\n      </div>\r\n      <div class=\"preset\" @click=\"selectPreset('marker')\">\r\n        <div class=\"icon\"></div>\r\n        <div class=\"info\">\r\n          <h3>Marker</h3>\r\n          <p>Thick lines for coloring.</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"BrushLibrary\",\r\n  emits: [\"set-preset\"],\r\n  methods: {\r\n    selectPreset(type) {\r\n      let settings = {};\r\n      switch (type) {\r\n        case \"pencil\":\r\n          settings = {\r\n            strokeWidth: 2,\r\n            strokeColor: { r: 50, g: 50, b: 50 },\r\n            stroke: true,\r\n            fill: false\r\n          };\r\n          break;\r\n        case \"pen\":\r\n          settings = {\r\n            strokeWidth: 5,\r\n            strokeColor: { r: 0, g: 0, b: 0 },\r\n            stroke: true,\r\n            fill: false\r\n          };\r\n          break;\r\n        case \"marker\":\r\n          settings = {\r\n            strokeWidth: 20,\r\n            strokeColor: { r: 255, g: 0, b: 0 }, // Red marker by default? Or maybe blue?\r\n            stroke: true,\r\n            fill: false\r\n          };\r\n          break;\r\n      }\r\n      this.$emit(\"set-preset\", settings);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.brush-library {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n  width: 100%;\r\n}\r\n\r\n.presets {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n}\r\n\r\n.preset {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n  padding: 12px;\r\n  background-color: #f5f5f5;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.preset:hover {\r\n  background-color: #ffe8b3;\r\n}\r\n\r\n.icon {\r\n  font-size: 2em;\r\n}\r\n\r\n.info h3 {\r\n  margin: 0 0 4px 0;\r\n  font-size: 1.1em;\r\n}\r\n\r\n.info p {\r\n  margin: 0;\r\n  color: #666;\r\n  font-size: 0.9em;\r\n  font-weight: normal;\r\n}\r\n</style>\r\n","import { render } from \"./BrushLibrary.vue?vue&type=template&id=5811f743&scoped=true\"\nimport script from \"./BrushLibrary.vue?vue&type=script&lang=js\"\nexport * from \"./BrushLibrary.vue?vue&type=script&lang=js\"\n\nimport \"./BrushLibrary.vue?vue&type=style&index=0&id=5811f743&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5811f743\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"export-html-container\">\r\n    <h2>Export to HTML</h2>\r\n    <p>Create a standalone HTML file to view your 3D scene in any browser.</p>\r\n    \r\n    <div class=\"options\">\r\n      <label>\r\n        <input type=\"checkbox\" v-model=\"includeAr\"> Enable AR (WebXR)\r\n      </label>\r\n      <label>\r\n        <input type=\"checkbox\" v-model=\"autoRotate\"> Auto Rotate\r\n      </label>\r\n    </div>\r\n\r\n    <button @click=\"exportHtml\">Download HTML</button>\r\n    <p v-if=\"status\">{{ status }}</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as THREE from \"three\";\r\nimport { GLTFExporter } from \"three/examples/jsm/exporters/GLTFExporter.js\";\r\nimport { scene } from \"../../App.vue\";\r\nimport {\r\n  convertMeshlineToGeometry,\r\n  convertMeshlineFillToGeometry,\r\n} from \"../convertMeshlineToGeometry.js\";\r\n\r\nexport default {\r\n  name: \"ExportHTMLContent\",\r\n  data() {\r\n    return {\r\n      status: \"\",\r\n      includeAr: true,\r\n      autoRotate: true\r\n    };\r\n  },\r\n  methods: {\r\n    exportHtml: async function() {\r\n        this.status = \"Generating 3D model...\";\r\n        \r\n        // 1. Prepare Scene for Export\r\n        const exportScene = new THREE.Scene();\r\n        const group = new THREE.Group();\r\n\r\n        scene.traverse((obj) => {\r\n            // Check if it's a part of our drawing layer (Layer 1 usually) or visible\r\n            // And ensure it's a Mesh\r\n            if (obj.isMesh && obj.visible && !obj.isTransformControl) {\r\n                // If it's a MeshLine\r\n                if (obj.geometry && obj.geometry.type === 'MeshLine') {\r\n                       if (obj.userData.stroke && obj.userData.stroke.show_stroke) {\r\n                           group.add(convertMeshlineToGeometry(obj));\r\n                       }\r\n                       if (obj.userData.fill && obj.userData.fill.show_fill) {\r\n                           exportScene.add(convertMeshlineFillToGeometry(obj));\r\n                       }\r\n                } else if (obj.userData.stroke || obj.geometry.type === 'BufferGeometry') {\r\n                    // Standard Mesh (Tube/Strip or other)\r\n                    // We need to clone it to avoid modifying the live scene\r\n                    const clone = obj.clone();\r\n                    group.add(clone);\r\n                }\r\n            }\r\n        });\r\n        \r\n        exportScene.add(group);\r\n        exportScene.scale.set(0.1, 0.1, 0.1); // Penzi scale adjustment\r\n        \r\n        // 2. Export to GLB\r\n        this.status = \"Encoding GLB...\";\r\n        const exporter = new GLTFExporter();\r\n        \r\n        exporter.parse(\r\n            exportScene,\r\n            (result) => {\r\n                const blob = new Blob([result], { type: 'application/octet-stream' });\r\n                this.generateHtml(blob);\r\n            },\r\n            { binary: true }\r\n        );\r\n    },\r\n    generateHtml(glbBlob) {\r\n        this.status = \"Creating HTML...\";\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(glbBlob);\r\n        reader.onloadend = () => {\r\n             const base64data = reader.result;\r\n             \r\n             const htmlContent = `<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Penzil 3D Scene</title>\r\n    <script type=\"module\" src=\"https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js\"></scr` + `ipt>\r\n    <style>\r\n        body { margin: 0; padding: 0; width: 100vw; height: 100vh; background-color: #222; }\r\n        model-viewer { width: 100%; height: 100%; }\r\n    </style>\r\n</head>\r\n<body>\r\n    <model-viewer \r\n        src=\"${base64data}\" \r\n        camera-controls \r\n        ${this.autoRotate ? 'auto-rotate' : ''} \r\n        ${this.includeAr ? 'ar ar-modes=\"webxr scene-viewer quick-look\"' : ''} \r\n        shadow-intensity=\"1\">\r\n    </model-viewer>\r\n</body>\r\n</html>`;\r\n\r\n             this.downloadFile(\"scene.html\", htmlContent);\r\n             this.status = \"Done!\";\r\n        };\r\n    },\r\n    downloadFile(filename, content) {\r\n        const element = document.createElement('a');\r\n        element.setAttribute('href', 'data:text/html;charset=utf-8,' + encodeURIComponent(content));\r\n        element.setAttribute('download', filename);\r\n        element.style.display = 'none';\r\n        document.body.appendChild(element);\r\n        element.click();\r\n        document.body.removeChild(element);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.export-html-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n  color: #333;\r\n}\r\nh2 {\r\n    margin: 0;\r\n}\r\n.options {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 8px;\r\n}\r\nbutton {\r\n    background: #ffb000;\r\n    color: white;\r\n    border: none;\r\n    padding: 12px;\r\n    border-radius: 8px;\r\n    cursor: pointer;\r\n    font-weight: bold;\r\n}\r\n</style>\r\n","import { render } from \"./ExportHTMLContent.vue?vue&type=template&id=3cc9c38a&scoped=true\"\nimport script from \"./ExportHTMLContent.vue?vue&type=script&lang=js\"\nexport * from \"./ExportHTMLContent.vue?vue&type=script&lang=js\"\n\nimport \"./ExportHTMLContent.vue?vue&type=style&index=0&id=3cc9c38a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3cc9c38a\"]])\n\nexport default __exports__","import { render } from \"./Modal.vue?vue&type=template&id=0bfba0f8&scoped=true\"\nimport script from \"./Modal.vue?vue&type=script&lang=js\"\nexport * from \"./Modal.vue?vue&type=script&lang=js\"\n\nimport \"./Modal.vue?vue&type=style&index=0&id=0bfba0f8&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0bfba0f8\"]])\n\nexport default __exports__","\n<template>\n  <div v-if=\"previewing\" class=\"fade\">\n    <div class=\"fade-controls\">\n      <button @click=\"cancel()\">Cancel</button>\n      <span class=\"rightAlign\">\n        <input\n          type=\"radio\"\n          name=\"360\"\n          value=\"360\"\n          id=\"360\"\n          v-model=\"loop\"\n          :disabled=\"recording\"\n        />\n        <label for=\"360\">360</label>\n        <input\n          type=\"radio\"\n          name=\"bf\"\n          value=\"bf\"\n          id=\"bf\"\n          v-model=\"loop\"\n          :disabled=\"recording\"\n        />\n        <label for=\"bf\">Back and forth</label>\n        <button @click=\"startRecording()\" :disabled=\"recording\" style=\"pointer-events: auto; background: rgba(0,0,0,0.1); border: 1px solid #ccc;\">\n          {{ !recording ? \"Start recording\" : \"Recording...\" }}\n        </button>\n      </span>\n      <span v-if=\"recording\"\n        >Recording frame {{ currentLength }} of {{ length }}</span\n      >\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as THREE from \"three\";\nimport { renderer, camera, scene, cameraControls } from \"../App.vue\";\nimport * as HME from \"h264-mp4-encoder\";\n\nexport default {\n  name: \"VideoExport\",\n  components: {},\n  data() {\n    return {\n      previewing: false,\n      recording: false,\n      loop: \"360\",\n      length: 240, //in frames\n      currentLength: 0, //current frame\n      startAzimuthAngle: undefined,\n      polarAngle: undefined,\n      pos: [],\n    };\n  },\n  emits: [\"stop-previewing\"],\n  props: {\n    show: Boolean,\n  },\n  methods: {\n    easeInOutQuad(t, b, c, d) {\n      t /= d / 2;\n      if (t < 1) return (c / 2) * t * t + b;\n      t--;\n      return (-c / 2) * (t * (t - 2) - 1) + b;\n    },\n    easeInOutQuadYoyo(t, b, c, d) {\n      if (t <= d / 2) {\n        this.pos.push(this.easeInOutQuad(t, b, c, d / 2));\n        let v = this.pos[this.pos.length - 1];\n        return v;\n      } else {\n        let v = this.pos.pop();\n        return v;\n      }\n    },\n    easing(loop) {\n      //easing function: http://gizma.com/easing/\n      if (loop == \"360\") {\n        return this.easeInOutQuad(\n          this.currentLength,\n          this.startAzimuthAngle,\n          360 * THREE.MathUtils.DEG2RAD,\n          this.length\n        );\n      } else if (loop == \"bf\") {\n        return this.easeInOutQuadYoyo(\n          this.currentLength,\n          this.startAzimuthAngle,\n          Math.PI / 20,\n          this.length\n        );\n      }\n    },\n    animate(ctx, encoder) {\n      if (!this.previewing) {\n        return;\n      }\n      \n      // If we are recording but no encoder is passed, this is the old preview loop. Kill it.\n      if (this.recording && !encoder) {\n          return;\n      }\n\n      renderer.render(scene, camera);\n      let f = this.easing(this.loop);\n      cameraControls.rotateTo(f, this.polarAngle, false);\n      if (!this.recording) {\n        //animate in loop\n        if (this.currentLength < this.length) {\n          requestAnimationFrame(() => this.animate(ctx, encoder));\n          this.currentLength++;\n        } else {\n          this.currentLength = 0;\n          requestAnimationFrame(() => this.animate(ctx, encoder));\n          //cameraControls.enabled = true;\n        }\n      } else {\n        //record and exit\n        //only record after the fist frame, it's needed to let the camera riposition properly\n        if (this.currentLength > 0) {\n          var buf = new Uint8Array(\n            ctx.drawingBufferWidth * ctx.drawingBufferHeight * 4\n          );\n          ctx.readPixels(\n            0,\n            0,\n            ctx.drawingBufferWidth,\n            ctx.drawingBufferHeight,\n            ctx.RGBA,\n            ctx.UNSIGNED_BYTE,\n            buf\n          );\n          var halfHeight = (ctx.drawingBufferHeight / 2) | 0; // the | 0 keeps the result an int\n          var bytesPerRow = ctx.drawingBufferWidth * 4;\n          // make a temp buffer to hold one row\n          var temp = new Uint8Array(ctx.drawingBufferWidth * 4);\n          for (var y = 0; y < halfHeight; ++y) {\n            var topOffset = y * bytesPerRow;\n            var bottomOffset = (ctx.drawingBufferHeight - y - 1) * bytesPerRow;\n            // make copy of a row on the top half\n            temp.set(buf.subarray(topOffset, topOffset + bytesPerRow));\n            // copy a row from the bottom half to the top\n            buf.copyWithin(topOffset, bottomOffset, bottomOffset + bytesPerRow);\n            // copy the copy of the top half row to the bottom half\n            buf.set(temp, bottomOffset);\n          }\n          encoder.addFrameRgba(buf);\n        }\n\n        if (this.currentLength < this.length) {\n          requestAnimationFrame(() => {\n            this.animate(ctx, encoder);\n          });\n          this.currentLength++;\n        } else {\n          encoder.finalize();\n          const uint8Array = encoder.FS.readFile(encoder.outputFilename);\n          this.download(\n            URL.createObjectURL(new Blob([uint8Array], { type: \"video/mp4\" }))\n          );\n          encoder.delete();\n          this.cancel();\n        }\n      }\n    },\n    startRecording() {\n      // Force 1x pixel ratio and even dimensions for recording safety\n      renderer.setPixelRatio(1);\n      const width = window.innerWidth % 2 === 0 ? window.innerWidth : window.innerWidth - 1;\n      const height = window.innerHeight % 2 === 0 ? window.innerHeight : window.innerHeight - 1;\n      renderer.setSize(width, height);\n\n      cameraControls.normalizeRotations();\n      HME.createH264MP4Encoder().then((encoder) => {\n        let ctx = renderer.getContext();\n        encoder.width = ctx.drawingBufferWidth;\n        encoder.height = ctx.drawingBufferHeight;\n        encoder.initialize();\n        this.recording = true;\n        this.currentLength = 0;\n        this.animate(ctx, encoder);\n      });\n    },\n    startPreview() {\n      cameraControls.normalizeRotations();\n      this.startAzimuthAngle = cameraControls.azimuthAngle;\n      this.polarAngle = cameraControls.polarAngle;\n      this.previewing = true;\n      cameraControls.dampingFactor = 0.5;\n      this.animate();\n    },\n    download(url, filename) {\n      const anchor = document.createElement(\"a\");\n      anchor.href = url;\n      anchor.download = filename || \"download\";\n      anchor.click();\n    },\n    cancel: function () {\n      this.previewing = false;\n      this.recording = false;\n      \n      // Restore renderer settings\n      renderer.setPixelRatio(window.devicePixelRatio);\n      window.dispatchEvent(new Event('resize'));\n\n      this.currentLength = 0;\n      this.pos = [];\n      camera.layers.enable(0);\n      this.loop = \"360\";\n      cameraControls.dampingFactor = 0.5;\n      cameraControls.rotateTo(this.startAzimuthAngle, this.polarAngle, true);\n      this.startAzimuthAngle = undefined;\n      this.polarAngle = undefined;\n      // cameraControls.enabled = true;\n      setTimeout(() => {\n        cameraControls.dampingFactor = 20;\n        cameraControls.normalizeRotations();\n      }, 100);\n      renderer.render(scene, camera);\n      this.$emit(\"stop-previewing\", false);\n    },\n  },\n  watch: {\n    show: function (val) {\n      if (val === true) {\n        this.startPreview();\n      }\n    },\n    loop: function () {\n      this.currentLength = 0;\n    },\n  },\n  mounted() {},\n};\n</script>\n\n<style>\n.fade {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.2);\n  z-index: 10;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.fade-controls {\n  background-color: white;\n  color: black;\n  margin: 0 auto;\n  position: absolute;\n  bottom: 0px;\n  padding: 10px;\n  width: 100vw;\n  z-index: 5;\n}\n\n.rightAlign > label {\n  width: 200px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\nbutton {\n  align-content: center;\n  background-color: rgba(0, 0, 0, 0);\n  border: none;\n  height: 44px;\n  padding-left: 16px;\n  padding-right: 16px;\n  margin-right: 2px;\n  cursor: pointer;\n  z-index: 100;\n  position: relative;\n}\n\n.rightAlign {\n  float: right;\n  display: flex;\n}\n</style>","import { render } from \"./VideoExportPreview.vue?vue&type=template&id=5584fdcf\"\nimport script from \"./VideoExportPreview.vue?vue&type=script&lang=js\"\nexport * from \"./VideoExportPreview.vue?vue&type=script&lang=js\"\n\nimport \"./VideoExportPreview.vue?vue&type=style&index=0&id=5584fdcf&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <draggable-window \r\n    title=\"Scene Setup\" \r\n    :initialX=\"window.innerWidth - 240\" \r\n    :initialY=\"400\"\r\n    :visible=\"visible\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :start-open=\"startOpen\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"scene-settings\">\r\n      <!-- Background Settings -->\r\n      <div class=\"group-title\">Background</div>\r\n      <div class=\"setting-row\">\r\n        <span>Color</span>\r\n        <input type=\"color\" v-model=\"backgroundColor\" @input=\"updateBackground\">\r\n      </div>\r\n       <div class=\"setting-row\">\r\n          <span>Fog</span>\r\n          <div class=\"toggle\" @click=\"toggleFog\">\r\n            <img :src=\"fogVisible ? require('@/assets/icons/checkbox-checked.svg') : require('@/assets/icons/checkbox.svg')\" />\r\n          </div>\r\n      </div>\r\n\r\n      <div class=\"separator\"></div>\r\n\r\n      <!-- Environment Settings -->\r\n      <div class=\"group-title\">Environment (HDRI)</div>\r\n      <div class=\"setting-row\">\r\n        <span>Image (.hdr, .jpg)</span>\r\n        <label class=\"custom-file-upload\">\r\n            <input type=\"file\" @change=\"handleFileChange\" accept=\".hdr,.jpg,.png,.jpeg\" />\r\n            Upload\r\n        </label>\r\n      </div>\r\n      <div class=\"setting-row\">\r\n        <span>Active (Lighting)</span>\r\n        <div class=\"toggle\" @click=\"toggleHdriActive\">\r\n          <img :src=\"hdriActive ? require('@/assets/icons/checkbox-checked.svg') : require('@/assets/icons/checkbox.svg')\" />\r\n        </div>\r\n      </div>\r\n       <div class=\"setting-row\" v-if=\"hdriActive\">\r\n        <span>Visible Background</span>\r\n        <div class=\"toggle\" @click=\"toggleHdriBackground\">\r\n          <img :src=\"hdriBackgroundVisible ? require('@/assets/icons/checkbox-checked.svg') : require('@/assets/icons/checkbox.svg')\" />\r\n        </div>\r\n      </div>\r\n\r\n       <div class=\"separator\"></div>\r\n\r\n\r\n\r\n\r\n      <div class=\"separator\"></div>\r\n\r\n      <!-- Grid Settings -->\r\n      <div class=\"group-title\">Grid</div>\r\n      <div class=\"setting-row\">\r\n        <span>Visible</span>\r\n        <div class=\"toggle\" @click=\"toggleGrid\">\r\n          <img :src=\"gridVisible ? require('@/assets/icons/checkbox-checked.svg') : require('@/assets/icons/checkbox.svg')\" />\r\n        </div>\r\n      </div>\r\n       <div class=\"setting-row\" v-if=\"gridVisible\">\r\n        <span>Color</span>\r\n        <input type=\"color\" v-model=\"gridColor\" @input=\"updateGrid\">\r\n      </div>\r\n      <div class=\"setting-row\" v-if=\"gridVisible\">\r\n        <span>Size</span>\r\n        <input type=\"range\" min=\"1\" max=\"100\" v-model.number=\"gridSize\" @input=\"updateGrid\">\r\n      </div>\r\n      <div class=\"setting-row\" v-if=\"gridVisible\">\r\n        <span>Divisions</span>\r\n        <input type=\"range\" min=\"1\" max=\"50\" v-model.number=\"gridDivisions\" @input=\"updateGrid\">\r\n      </div>\r\n      <div class=\"setting-row\" v-if=\"gridVisible\">\r\n        <span>Divisions Color</span>\r\n        <input type=\"color\" v-model=\"divisionsColor\" @input=\"updateGrid\">\r\n      </div>\r\n      <div class=\"setting-row\">\r\n        <span>Fade Dist</span>\r\n        <input type=\"range\" min=\"10\" max=\"2000\" v-model.number=\"fadeDistance\" @input=\"updateGrid\">\r\n      </div>\r\n      <div class=\"setting-row\">\r\n        <span>Fade Near</span>\r\n        <input type=\"range\" min=\"0\" max=\"1000\" v-model.number=\"fadeDistanceNear\" @input=\"updateGrid\">\r\n      </div>\r\n\r\n      <div class=\"setting-row\">\r\n          <span>Infinite</span>\r\n          <div class=\"toggle\" @click=\"toggleInfiniteGrid\">\r\n            <img :src=\"infiniteGrid ? require('@/assets/icons/checkbox-checked.svg') : require('@/assets/icons/checkbox.svg')\" />\r\n          </div>\r\n      </div>\r\n\r\n      <div class=\"separator\"></div>\r\n\r\n      <!-- Effects Settings -->\r\n      <div class=\"group-title\">Effects</div>\r\n      <div class=\"setting-row\">\r\n        <span>Bloom (Glow)</span>\r\n        <div class=\"toggle\" @click=\"toggleBloom\">\r\n          <img :src=\"bloomEnabled ? require('@/assets/icons/checkbox-checked.svg') : require('@/assets/icons/checkbox.svg')\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"setting-row\" v-if=\"bloomEnabled\">\r\n        <span>Strength</span>\r\n        <input type=\"range\" min=\"0\" max=\"10\" step=\"0.1\" v-model.number=\"bloomStrength\" @input=\"updateBloom\">\r\n      </div>\r\n      <div class=\"setting-row\" v-if=\"bloomEnabled\">\r\n        <span>Threshold</span>\r\n        <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" v-model.number=\"bloomThreshold\" @input=\"updateBloom\">\r\n      </div>\r\n      <div class=\"setting-row\" v-if=\"bloomEnabled\">\r\n        <span>Radius</span>\r\n        <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" v-model.number=\"bloomRadius\" @input=\"updateBloom\">\r\n      </div>\r\n\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\nimport * as THREE from \"three\";\r\nimport { RGBELoader } from \"three/examples/jsm/loaders/RGBELoader.js\";\r\nimport { scene, renderer, renderScene } from \"../App.vue\";\r\n// import { canvas } from \"./Canvas.vue\";\r\nimport InfiniteGridHelper from \"./InfiniteGridHelper.js\";\r\n\r\nexport default {\r\n  name: \"SceneSettings\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    visible: Boolean,\r\n    reopenTrigger: Number,\r\n    startOpen: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    isOpen: Boolean,\r\n  },\r\n  emits: [\"close\", \"bloomChange\"],\r\n  data() {\r\n    return {\r\n      window: window,\r\n      backgroundColor: \"#dddddd\",\r\n      gridVisible: true,\r\n      gridColor: \"#0000ff\",\r\n      gridSize: 10,\r\n      gridDivisions: 10,\r\n      infiniteGrid: true,\r\n      fadeDistance: 400,\r\n      fadeDistanceNear: 0,\r\n      divisionsColor: \"#ff0000\",\r\n      fogVisible: true,\r\n      hdriActive: false,\r\n      hdriBackgroundVisible: false,\r\n      sceneEnvironment: null,\r\n      bloomEnabled: false,\r\n      bloomStrength: 2.0,\r\n      bloomThreshold: 0.2,\r\n      bloomRadius: 0.4,\r\n    };\r\n  },\r\n  created() {\r\n    this.gridHelper = null;\r\n    this.infiniteGridHelper = null;\r\n  },\r\n  methods: {\r\n    updateBackground() {\r\n      if (scene) {\r\n        if (this.hdriActive && this.hdriBackgroundVisible && this.sceneEnvironment) {\r\n             scene.background = this.sceneEnvironment;\r\n        } else {\r\n             scene.background = new THREE.Color(this.backgroundColor);\r\n        }\r\n        this.updateFog();\r\n        renderScene();\r\n      }\r\n    },\r\n    updateFog() {\r\n        if (!scene) return;\r\n        if (this.fogVisible) {\r\n            scene.fog = new THREE.Fog(this.backgroundColor, this.fadeDistanceNear + 10, this.fadeDistance);\r\n        } else {\r\n            scene.fog = null;\r\n        }\r\n    },\r\n    toggleGrid() {\r\n        this.gridVisible = !this.gridVisible;\r\n        this.updateGrid();\r\n    },\r\n    toggleInfiniteGrid() {\r\n        this.infiniteGrid = !this.infiniteGrid;\r\n        this.updateGrid();\r\n    },\r\n    toggleFog() {\r\n        this.fogVisible = !this.fogVisible;\r\n        this.updateFog();\r\n        renderScene();\r\n    },\r\n    updateGrid() {\r\n        if (!scene) return;\r\n\r\n        this.updateFog(); // Update fog when grid settings (like fade distance) change\r\n\r\n        // Remove existing grids\r\n        if (this.gridHelper) {\r\n            scene.remove(this.gridHelper);\r\n            this.gridHelper = null;\r\n        }\r\n        if (this.infiniteGridHelper) {\r\n            scene.remove(this.infiniteGridHelper);\r\n            this.infiniteGridHelper = null;\r\n        }\r\n\r\n        if (!this.gridVisible) {\r\n          renderScene();\r\n          return;\r\n        }\r\n\r\n        if (this.infiniteGrid) {\r\n             // Pass divisionsColor as the second color (for large grid)\r\n             this.infiniteGridHelper = new InfiniteGridHelper(\r\n                 this.gridSize/10, \r\n                 this.gridDivisions, \r\n                 new THREE.Color(this.gridColor), \r\n                 this.fadeDistance,\r\n                 'xzy',\r\n                 new THREE.Color(this.divisionsColor),\r\n                 this.fadeDistanceNear\r\n             );\r\n             scene.add(this.infiniteGridHelper);\r\n        } else {\r\n             this.gridHelper = new THREE.GridHelper(\r\n                 this.gridSize * 10, \r\n                 this.gridDivisions * 10, \r\n                 new THREE.Color(this.divisionsColor), \r\n                 new THREE.Color(this.gridColor)\r\n             );\r\n             scene.add(this.gridHelper);\r\n        }\r\n        renderScene();\r\n    },\r\n\r\n\r\n    handleFileChange(event) {\r\n      const file = event.target.files[0];\r\n      if (!file) return;\r\n\r\n      const url = URL.createObjectURL(file);\r\n      const isHDR = file.name.toLowerCase().endsWith('.hdr');\r\n\r\n      if (isHDR) {\r\n        new RGBELoader()\r\n            .setDataType( THREE.UnsignedByteType ) // Depending on three version, might not be needed or might be FloatType\r\n            .load(url, (texture) => {\r\n                const pmremGenerator = new THREE.PMREMGenerator(renderer);\r\n                pmremGenerator.compileEquirectangularShader();\r\n                const envMap = pmremGenerator.fromEquirectangular(texture).texture;\r\n                \r\n                this.sceneEnvironment = envMap;\r\n                this.hdriActive = true; \r\n                this.updateEnvironment();\r\n                \r\n                texture.dispose();\r\n                pmremGenerator.dispose();\r\n            });\r\n      } else {\r\n          new THREE.TextureLoader().load(url, (texture) => {\r\n                texture.mapping = THREE.EquirectangularReflectionMapping;\r\n                this.sceneEnvironment = texture;\r\n                this.hdriActive = true;\r\n                this.updateEnvironment();\r\n          });\r\n      }\r\n    },\r\n    toggleHdriActive() {\r\n        this.hdriActive = !this.hdriActive;\r\n        this.updateEnvironment();\r\n    },\r\n    toggleHdriBackground() {\r\n        this.hdriBackgroundVisible = !this.hdriBackgroundVisible;\r\n        this.updateBackground();\r\n    },\r\n    updateEnvironment() {\r\n        if (!scene) return;\r\n\r\n        if (this.hdriActive && this.sceneEnvironment) {\r\n            scene.environment = this.sceneEnvironment;\r\n        } else {\r\n            scene.environment = null;\r\n        }\r\n        this.updateBackground();\r\n    },\r\n    toggleBloom() {\r\n        this.bloomEnabled = !this.bloomEnabled;\r\n        this.updateBloom();\r\n    },\r\n    updateBloom() {\r\n        this.$emit('bloomChange', {\r\n            enabled: this.bloomEnabled,\r\n            strength: this.bloomStrength,\r\n            threshold: this.bloomThreshold,\r\n            radius: this.bloomRadius\r\n        });\r\n    }\r\n  },\r\n  mounted() {\r\n      // Initialize with existing scene state if possible, or defaults\r\n      this.updateGrid();\r\n  },\r\n  beforeUnmount() {\r\n      if (this.gridHelper) scene.remove(this.gridHelper);\r\n      if (this.infiniteGridHelper) scene.remove(this.infiniteGridHelper);\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.scene-settings {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n  color: white;\r\n  min-width: 200px;\r\n}\r\n\r\n.group-title {\r\n  font-size: 10px;\r\n  text-transform: uppercase;\r\n  opacity: 0.6;\r\n  font-weight: bold;\r\n  letter-spacing: 1px;\r\n}\r\n\r\n.setting-row {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  font-size: 13px;\r\n}\r\n\r\n.setting-row input[type=\"color\"] {\r\n  border: none;\r\n  width: 24px;\r\n  height: 24px;\r\n  padding: 0;\r\n  background: none;\r\n  cursor: pointer;\r\n}\r\n\r\n.setting-row input[type=\"range\"] {\r\n  width: 100px;\r\n  height: 4px;\r\n  -webkit-appearance: none;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-radius: 2px;\r\n  outline: none;\r\n}\r\n\r\n.setting-row input[type=\"range\"]::-webkit-slider-thumb {\r\n  -webkit-appearance: none;\r\n  width: 12px;\r\n  height: 12px;\r\n  border-radius: 50%;\r\n  background: white;\r\n  cursor: pointer;\r\n}\r\n\r\n.toggle {\r\n    cursor: pointer;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.toggle img {\r\n    width: 20px;\r\n    height: 20px;\r\n    filter: brightness(0) invert(1);\r\n}\r\n\r\n.separator {\r\n  height: 1px;\r\n  background: rgba(255, 255, 255, 0.1);\r\n  width: 100%;\r\n}\r\n\r\n.custom-file-upload {\r\n    border: 1px solid rgba(255, 255, 255, 0.2);\r\n    display: inline-block;\r\n    padding: 2px 6px;\r\n    cursor: pointer;\r\n    border-radius: 4px;\r\n    font-size: 11px;\r\n    background: rgba(255, 255, 255, 0.05);\r\n}\r\n\r\n.custom-file-upload:hover {\r\n    background: rgba(255, 255, 255, 0.15);\r\n}\r\n\r\n.custom-file-upload input[type=\"file\"] {\r\n    display: none;\r\n}\r\n</style>\r\n","import { render } from \"./SceneSettings.vue?vue&type=template&id=f4b48902&scoped=true\"\nimport script from \"./SceneSettings.vue?vue&type=script&lang=js\"\nexport * from \"./SceneSettings.vue?vue&type=script&lang=js\"\n\nimport \"./SceneSettings.vue?vue&type=style&index=0&id=f4b48902&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f4b48902\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window \r\n    title=\"Colores\" \r\n    :initialX=\"window.innerWidth - 550\" \r\n    :initialY=\"160\"\r\n    :visible=\"visible\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :start-open=\"startOpen\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"color-palette\">\r\n      <div v-for=\"(group, index) in colorGroups\" :key=\"index\" class=\"color-group\">\r\n        <div class=\"group-title\">{{ group.name }}</div>\r\n        <div class=\"colors-grid\">\r\n          <div \r\n            v-for=\"color in group.colors\" \r\n            :key=\"color.name\"\r\n            class=\"color-item\"\r\n            :style=\"{ backgroundColor: color.hex }\"\r\n            @click=\"selectColor(color)\"\r\n            :title=\"color.name\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\n\r\nexport default {\r\n  name: \"ColorPalette\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    visible: Boolean,\r\n    reopenTrigger: Number,\r\n    startOpen: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    isOpen: Boolean,\r\n  },\r\n  emits: [\"set-color\", \"close\"],\r\n  data() {\r\n    return {\r\n      window: window,\r\n      colorGroups: [\r\n        {\r\n          name: \"GRIS CLARO  Volmenes iniciales\",\r\n          colors: [\r\n            { name: \"Gris Muy Claro\", hex: \"#F5F5F5\" },\r\n            { name: \"Gris Claro\", hex: \"#E6E6E6\" },\r\n            { name: \"Gris Clido Claro\", hex: \"#E8E2DC\" },\r\n            { name: \"Gris Neutro Suave\", hex: \"#E1E1E1\" },\r\n          ]\r\n        },\r\n        {\r\n          name: \"GRIS MEDIO  Sombras principales\",\r\n          colors: [\r\n            { name: \"Gris Medio\", hex: \"#C8C8C8\" },\r\n            { name: \"Gris Medio Clido\", hex: \"#CEC6BC\" },\r\n            { name: \"Gris 3040%\", hex: \"#B4B4B4\" },\r\n          ]\r\n        },\r\n        {\r\n          name: \"GRIS OSCURO  Contraste\",\r\n          colors: [\r\n            { name: \"Gris Oscuro\", hex: \"#828282\" },\r\n            { name: \"Gris Muy Oscuro\", hex: \"#5A5A5A\" },\r\n            { name: \"Gris Oscuro Clido\", hex: \"#6E665F\" },\r\n            { name: \"Gris 70%\", hex: \"#646464\" },\r\n          ]\r\n        },\r\n        {\r\n          name: \"NEGRO  Detalles finales\",\r\n          colors: [\r\n            { name: \"Negro trazado\", hex: \"#000000\" },\r\n            { name: \"Negro suave\", hex: \"#141414\" },\r\n          ]\r\n        },\r\n        {\r\n          name: \"ACENTOS DE COLOR\",\r\n          colors: [\r\n            { name: \"Azul Tcnico Claro\", hex: \"#ADD8E6\" },\r\n            { name: \"Azul Tcnico Medio\", hex: \"#6495ED\" },\r\n            { name: \"Azul Conceptual\", hex: \"#4682B4\" },\r\n            { name: \"Rojo Claro\", hex: \"#FF6347\" },\r\n            { name: \"Rojo Industrial\", hex: \"#DC143C\" },\r\n            { name: \"Naranja Industrial\", hex: \"#FF8C00\" },\r\n          ]\r\n        },\r\n        {\r\n          name: \"BLANCO  Highlights\",\r\n          colors: [\r\n            { name: \"Blanco puro\", hex: \"#FFFFFF\" },\r\n            { name: \"Blanco suave\", hex: \"#FAFAFA\" },\r\n          ]\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  methods: {\r\n    selectColor(color) {\r\n      // Convert hex to rgb object for the app\r\n      const rgb = this.hexToRgb(color.hex);\r\n      this.$emit(\"set-color\", rgb);\r\n    },\r\n    hexToRgb(hex) {\r\n      var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n      return result ? {\r\n        r: parseInt(result[1], 16),\r\n        g: parseInt(result[2], 16),\r\n        b: parseInt(result[3], 16)\r\n      } : null;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.color-palette {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n  color: white;\r\n  min-width: 280px;\r\n}\r\n\r\n.group-title {\r\n  font-size: 10px;\r\n  text-transform: uppercase;\r\n  opacity: 0.6;\r\n  font-weight: bold;\r\n  letter-spacing: 1px;\r\n  margin-bottom: 6px;\r\n}\r\n\r\n.colors-grid {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 8px;\r\n}\r\n\r\n.color-item {\r\n  width: 32px;\r\n  height: 32px;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  border: 1px solid rgba(255, 255, 255, 0.2);\r\n  transition: transform 0.1s, border-color 0.1s;\r\n}\r\n\r\n.color-item:hover {\r\n  transform: scale(1.1);\r\n  border-color: white;\r\n  z-index: 1;\r\n}\r\n\r\n.color-item:active {\r\n  transform: scale(0.95);\r\n}\r\n</style>\r\n","import { render } from \"./ColorPalette.vue?vue&type=template&id=1576e0cc&scoped=true\"\nimport script from \"./ColorPalette.vue?vue&type=script&lang=js\"\nexport * from \"./ColorPalette.vue?vue&type=script&lang=js\"\n\nimport \"./ColorPalette.vue?vue&type=style&index=0&id=1576e0cc&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1576e0cc\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window \r\n    title=\"Symmetry\" \r\n    :initialX=\"12\" \r\n    :initialY=\"680\"\r\n    :visible=\"visible\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"symmetry-controls\">\r\n      <div class=\"symmetry-options\">\r\n        <button \r\n          class=\"symmetry-btn\"\r\n          :class=\"{ active: isAxisActive('x') }\"\r\n          @click=\"toggleAxis('x')\"\r\n        >\r\n          <span>X</span>\r\n        </button>\r\n        <button \r\n          class=\"symmetry-btn\"\r\n          :class=\"{ active: isAxisActive('y') }\"\r\n          @click=\"toggleAxis('y')\"\r\n        >\r\n          <span>Y</span>\r\n        </button>\r\n        <button \r\n          class=\"symmetry-btn\"\r\n          :class=\"{ active: isAxisActive('z') }\"\r\n          @click=\"toggleAxis('z')\"\r\n        >\r\n          <span>Z</span>\r\n        </button>\r\n      </div>\r\n      \r\n      <div class=\"symmetry-row\" v-if=\"(typeof mirror === 'string' && mirror.length > 0) || radial\">\r\n        <label class=\"toggle-control\">\r\n            <input type=\"checkbox\" :checked=\"localSymmetry\" @change=\"toggleLocal\">\r\n            Local Symmetry\r\n            <span class=\"info-icon\" title=\"Symmetry relative to the Canvas instead of World Origin\">?</span>\r\n        </label>\r\n      </div>\r\n      \r\n      <div class=\"radial-section\">\r\n        <label class=\"radial-toggle\">\r\n            <input type=\"checkbox\" :checked=\"radial\" @change=\"toggleRadial\">\r\n            Radial\r\n        </label>\r\n        \r\n        <div class=\"symmetry-options\" v-if=\"radial\">\r\n            <button \r\n              class=\"symmetry-btn small\"\r\n              :class=\"{ active: radialAxis === 'x' }\"\r\n              @click=\"setRadialAxis('x')\"\r\n            >\r\n              <span>X</span>\r\n            </button>\r\n            <button \r\n              class=\"symmetry-btn small\"\r\n              :class=\"{ active: radialAxis === 'y' }\"\r\n              @click=\"setRadialAxis('y')\"\r\n            >\r\n              <span>Y</span>\r\n            </button>\r\n            <button \r\n              class=\"symmetry-btn small\"\r\n              :class=\"{ active: radialAxis === 'z' }\"\r\n              @click=\"setRadialAxis('z')\"\r\n            >\r\n              <span>Z</span>\r\n            </button>\r\n        </div>\r\n\r\n        <div class=\"sectors-control\" v-if=\"radial\">\r\n            <span>{{ sectors }}</span>\r\n            <input \r\n                type=\"range\" \r\n                min=\"2\" \r\n                max=\"36\" \r\n                step=\"1\" \r\n                :value=\"sectors\" \r\n                @input=\"updateSectors\"\r\n            >\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\n\r\nexport default {\r\n  name: \"SymmetrySettings\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    visible: Boolean,\r\n    reopenTrigger: Number,\r\n    isOpen: Boolean,\r\n    mirror: [Boolean, String],\r\n    radial: Boolean,\r\n    sectors: Number,\r\n    radialAxis: {\r\n        type: String,\r\n        default: 'y'\r\n    },\r\n    localSymmetry: Boolean\r\n  },\r\n  emits: [\"set-mirror\", \"set-radial\", \"set-sectors\", \"set-radial-axis\", \"set-local-symmetry\", \"close\"],\r\n  methods: {\r\n    toggleAxis(axis) {\r\n      let current = typeof this.mirror === 'string' ? this.mirror : \"\";\r\n      if (current.includes(axis)) {\r\n          current = current.replace(axis, \"\");\r\n      } else {\r\n          current += axis;\r\n      }\r\n      this.$emit(\"set-mirror\", current);\r\n    },\r\n    isAxisActive(axis) {\r\n      return typeof this.mirror === 'string' && this.mirror.includes(axis);\r\n    },\r\n    toggleLocal(e) {\r\n      this.$emit(\"set-local-symmetry\", e.target.checked);\r\n    },\r\n    toggleRadial(e) {\r\n      this.$emit(\"set-radial\", e.target.checked);\r\n    },\r\n    updateSectors(e) {\r\n      this.$emit(\"set-sectors\", parseInt(e.target.value));\r\n    },\r\n    setRadialAxis(val) {\r\n      this.$emit(\"set-radial-axis\", val);\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.symmetry-controls {\r\n  padding: 8px;\r\n  background: rgba(30, 30, 30, 0.8);\r\n  border-radius: 8px;\r\n}\r\n\r\n.symmetry-options {\r\n  display: flex;\r\n  gap: 8px;\r\n}\r\n\r\n.symmetry-btn {\r\n  width: 40px;\r\n  height: 40px;\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 8px;\r\n  color: white;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.symmetry-btn:hover {\r\n  background: rgba(255, 255, 255, 0.15);\r\n}\r\n\r\n.symmetry-btn.active {\r\n  background: var(--accent-color, #ffb000);\r\n  border-color: var(--accent-color, #ffb000);\r\n  color: black;\r\n}\r\n\r\n.radial-section {\r\n    margin-top: 12px;\r\n    border-top: 1px solid rgba(255,255,255,0.1);\r\n    padding-top: 12px;\r\n    color: white;\r\n    font-size: 12px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 8px;\r\n}\r\n\r\n.radial-toggle, .toggle-control {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    cursor: pointer;\r\n}\r\n\r\n.symmetry-row {\r\n    margin-top: 12px;\r\n    padding-top: 8px;\r\n    border-top: 1px solid rgba(255,255,255,0.05);\r\n    color: white;\r\n    font-size: 11px;\r\n}\r\n\r\n.info-icon {\r\n    width: 14px;\r\n    height: 14px;\r\n    background: rgba(255,255,255,0.2);\r\n    border-radius: 50%;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    font-size: 9px;\r\n    margin-left: 4px;\r\n}\r\n\r\n.sectors-control {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n}\r\n\r\n.sectors-control input {\r\n    flex: 1;\r\n}\r\n\r\n.symmetry-btn.small {\r\n    width: 30px;\r\n    height: 30px;\r\n    font-size: 10px;\r\n}\r\n</style>\r\n","import { render } from \"./SymmetrySettings.vue?vue&type=template&id=04aa6b76&scoped=true\"\nimport script from \"./SymmetrySettings.vue?vue&type=script&lang=js\"\nexport * from \"./SymmetrySettings.vue?vue&type=script&lang=js\"\n\nimport \"./SymmetrySettings.vue?vue&type=style&index=0&id=04aa6b76&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-04aa6b76\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window \r\n    title=\"Layers\" \r\n    :initialX=\"12\" \r\n    :initialY=\"520\"\r\n    :visible=\"visible\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"layers-container\">\r\n      <div class=\"layers-header\">\r\n        <button class=\"layer-btn\" @click=\"addLayer\" title=\"Add Layer\">\r\n          <span>+</span>\r\n        </button>\r\n        <button class=\"layer-btn\" @click=\"deleteLayer\" title=\"Delete Layer\" :disabled=\"layers.length <= 1\">\r\n          <span></span>\r\n        </button>\r\n        <button class=\"layer-btn\" @click=\"duplicateLayer\" title=\"Duplicate Layer\">\r\n          <span></span>\r\n        </button>\r\n      </div>\r\n      \r\n      <div class=\"layers-list\">\r\n        <div \r\n          v-for=\"layer in layers\" \r\n          :key=\"layer.id\"\r\n          class=\"layer-item\"\r\n          :class=\"{ active: layer.id === activeLayerId }\"\r\n          @click=\"selectLayer(layer.id)\"\r\n        >\r\n          <div class=\"layer-visibility\">\r\n            <button \r\n              class=\"visibility-btn\" \r\n              @click.stop=\"toggleVisibility(layer.id)\"\r\n              :class=\"{ hidden: !layer.visible }\"\r\n            >\r\n              {{ layer.visible ? '' : '' }}\r\n            </button>\r\n          </div>\r\n          \r\n          <div class=\"layer-info\">\r\n            <input \r\n              v-if=\"editingLayerId === layer.id\"\r\n              v-model=\"layer.name\"\r\n              @blur=\"stopEditing\"\r\n              @keyup.enter=\"stopEditing\"\r\n              @click.stop\r\n              class=\"layer-name-input\"\r\n              ref=\"nameInput\"\r\n            />\r\n            <span \r\n              v-else\r\n              class=\"layer-name\"\r\n              @dblclick.stop=\"startEditing(layer.id)\"\r\n            >\r\n              {{ layer.name }}\r\n            </span>\r\n          </div>\r\n          \r\n          <div class=\"layer-opacity\">\r\n            <input \r\n              type=\"range\" \r\n              min=\"0\" \r\n              max=\"100\" \r\n              v-model=\"layer.opacity\"\r\n              @input=\"updateLayerOpacity(layer.id, $event.target.value)\"\r\n              @click.stop\r\n              class=\"opacity-slider\"\r\n            />\r\n            <span class=\"opacity-value\">{{ layer.opacity }}%</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\n\r\nexport default {\r\n  name: \"Layers\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    visible: Boolean,\r\n    reopenTrigger: Number,\r\n    isOpen: Boolean,\r\n  },\r\n  emits: [\"close\", \"layer-change\", \"layer-add\", \"layer-delete\", \"layer-select\"],\r\n  data() {\r\n    return {\r\n      layers: [\r\n        { id: 1, name: \"Layer 1\", visible: true, opacity: 100, locked: false }\r\n      ],\r\n      activeLayerId: 1,\r\n      nextLayerId: 2,\r\n      editingLayerId: null,\r\n      lockLayers: false,\r\n      mergeOnExport: false,\r\n    };\r\n  },\r\n  methods: {\r\n    addLayer() {\r\n      const newLayer = {\r\n        id: this.nextLayerId++,\r\n        name: `Layer ${this.nextLayerId - 1}`,\r\n        visible: true,\r\n        opacity: 100,\r\n        locked: false\r\n      };\r\n      this.layers.unshift(newLayer);\r\n      this.selectLayer(newLayer.id);\r\n      this.$emit(\"layer-add\", newLayer);\r\n    },\r\n    \r\n    deleteLayer() {\r\n      if (this.layers.length <= 1) return;\r\n      \r\n      const index = this.layers.findIndex(l => l.id === this.activeLayerId);\r\n      if (index !== -1) {\r\n        const deletedLayer = this.layers[index];\r\n        this.layers.splice(index, 1);\r\n        \r\n        // Select the layer below or above\r\n        if (this.layers.length > 0) {\r\n          const newIndex = Math.min(index, this.layers.length - 1);\r\n          this.selectLayer(this.layers[newIndex].id);\r\n        }\r\n        \r\n        this.$emit(\"layer-delete\", deletedLayer);\r\n      }\r\n    },\r\n    \r\n    duplicateLayer() {\r\n      const layer = this.layers.find(l => l.id === this.activeLayerId);\r\n      if (layer) {\r\n        const newLayer = {\r\n          id: this.nextLayerId++,\r\n          name: `${layer.name} Copy`,\r\n          visible: layer.visible,\r\n          opacity: layer.opacity,\r\n          locked: layer.locked\r\n        };\r\n        const index = this.layers.findIndex(l => l.id === this.activeLayerId);\r\n        this.layers.splice(index, 0, newLayer);\r\n        this.selectLayer(newLayer.id);\r\n        this.$emit(\"layer-duplicate\", { newLayer, originalLayerId: layer.id });\r\n        this.$emit(\"layer-add\", newLayer);\r\n      }\r\n    },\r\n    \r\n    selectLayer(layerId) {\r\n      this.activeLayerId = layerId;\r\n      const layer = this.layers.find(l => l.id === layerId);\r\n      this.$emit(\"layer-select\", layer);\r\n    },\r\n    \r\n    toggleVisibility(layerId) {\r\n      const index = this.layers.findIndex(l => l.id === layerId);\r\n      if (index !== -1) {\r\n        const layer = this.layers[index];\r\n        // Toggle between opacity 0 (hidden) and 100 (visible)\r\n        const newOpacity = layer.opacity === 0 ? 100 : 0;\r\n        this.layers[index].opacity = newOpacity;\r\n        // Also update visible for UI feedback\r\n        this.layers[index].visible = newOpacity > 0;\r\n        \r\n        console.log(`Layer ${layerId} opacity toggled to:`, newOpacity);\r\n        console.log('Emitting layer-change event with:', this.layers[index]);\r\n        this.$emit(\"layer-change\", this.layers[index]);\r\n        console.log('layer-change event emitted');\r\n      }\r\n    },\r\n    \r\n    updateLayerOpacity(layerId, opacity) {\r\n      const layer = this.layers.find(l => l.id === layerId);\r\n      if (layer) {\r\n        layer.opacity = parseInt(opacity);\r\n        this.$emit(\"layer-change\", layer);\r\n      }\r\n    },\r\n    \r\n    startEditing(layerId) {\r\n      this.editingLayerId = layerId;\r\n      this.$nextTick(() => {\r\n        if (this.$refs.nameInput && this.$refs.nameInput[0]) {\r\n          this.$refs.nameInput[0].focus();\r\n          this.$refs.nameInput[0].select();\r\n        }\r\n      });\r\n    },\r\n    \r\n    stopEditing() {\r\n      this.editingLayerId = null;\r\n    },\r\n    \r\n    toggleLockLayers() {\r\n      this.layers.forEach(layer => {\r\n        layer.locked = this.lockLayers;\r\n      });\r\n      this.$emit(\"layer-change\", { lockAll: this.lockLayers });\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.layers-container {\r\n  background: rgba(30, 30, 30, 0.95);\r\n  border-radius: 8px;\r\n  padding: 6px;\r\n  min-width: 220px;\r\n  max-width: 260px;\r\n}\r\n\r\n.layers-header {\r\n  display: flex;\r\n  gap: 6px;\r\n  margin-bottom: 8px;\r\n  padding-bottom: 8px;\r\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.layer-btn {\r\n  flex: 1;\r\n  height: 28px;\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 6px;\r\n  color: white;\r\n  font-weight: 600;\r\n  font-size: 18px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.layer-btn:hover:not(:disabled) {\r\n  background: rgba(255, 255, 255, 0.15);\r\n}\r\n\r\n.layer-btn:disabled {\r\n  opacity: 0.3;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.layers-list {\r\n  max-height: 300px;\r\n  overflow-y: auto;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.layer-item {\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 6px;\r\n  padding: 6px;\r\n  margin-bottom: 4px;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.layer-item:hover {\r\n  background: rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.layer-item.active {\r\n  background: var(--accent-color, #ffb000);\r\n  border-color: var(--accent-color, #ffb000);\r\n}\r\n\r\n.layer-item.active .layer-name,\r\n.layer-item.active .opacity-value {\r\n  color: black;\r\n  font-weight: 700;\r\n}\r\n\r\n.layer-visibility {\r\n  display: flex;\r\n  align-items: center;\r\n  z-index: 10;\r\n  position: relative;\r\n}\r\n\r\n.visibility-btn {\r\n  background: transparent;\r\n  border: none;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  padding: 4px;\r\n  transition: all 0.2s;\r\n  pointer-events: auto;\r\n  z-index: 11;\r\n  position: relative;\r\n  min-width: 20px;\r\n  min-height: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.visibility-btn:hover {\r\n  transform: scale(1.1);\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border-radius: 4px;\r\n}\r\n\r\n.visibility-btn.hidden {\r\n  opacity: 0.4;\r\n}\r\n\r\n.layer-info {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.layer-name {\r\n  color: white;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  user-select: none;\r\n}\r\n\r\n.layer-name-input {\r\n  background: rgba(0, 0, 0, 0.3);\r\n  border: 1px solid rgba(255, 255, 255, 0.3);\r\n  border-radius: 4px;\r\n  color: white;\r\n  padding: 4px 8px;\r\n  font-size: 14px;\r\n  width: 100%;\r\n}\r\n\r\n.layer-opacity {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.opacity-slider {\r\n  width: 60px;\r\n  flex: none;\r\n  height: 4px;\r\n  border-radius: 2px;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  outline: none;\r\n  -webkit-appearance: none;\r\n}\r\n\r\n.opacity-slider::-webkit-slider-thumb {\r\n  -webkit-appearance: none;\r\n  appearance: none;\r\n  width: 10px;\r\n  height: 10px;\r\n  border-radius: 50%;\r\n  background: white;\r\n  cursor: pointer;\r\n}\r\n\r\n.opacity-slider::-moz-range-thumb {\r\n  width: 10px;\r\n  height: 10px;\r\n  border-radius: 50%;\r\n  background: white;\r\n  cursor: pointer;\r\n  border: none;\r\n}\r\n\r\n.opacity-value {\r\n  color: white;\r\n  font-size: 11px;\r\n  min-width: 35px;\r\n  text-align: right;\r\n}\r\n\r\n.layer-item.active .opacity-value {\r\n  color: black;\r\n}\r\n\r\n\r\n\r\n/* Scrollbar styling */\r\n.layers-list::-webkit-scrollbar {\r\n  width: 6px;\r\n}\r\n\r\n.layers-list::-webkit-scrollbar-track {\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border-radius: 3px;\r\n}\r\n\r\n.layers-list::-webkit-scrollbar-thumb {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-radius: 3px;\r\n}\r\n\r\n.layers-list::-webkit-scrollbar-thumb:hover {\r\n  background: rgba(255, 255, 255, 0.3);\r\n}\r\n</style>\r\n","import { render } from \"./Layers.vue?vue&type=template&id=b061a208&scoped=true\"\nimport script from \"./Layers.vue?vue&type=script&lang=js\"\nexport * from \"./Layers.vue?vue&type=script&lang=js\"\n\nimport \"./Layers.vue?vue&type=style&index=0&id=b061a208&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b061a208\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window \r\n    title=\"Scene Objects\" \r\n    :initialX=\"12\" \r\n    :initialY=\"300\"\r\n    :visible=\"visible\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"manager-container\">\r\n      <!-- Object List -->\r\n      <div class=\"section-title\">Add Shape</div>\r\n      <div class=\"shapes-row\">\r\n        <button class=\"shape-add-btn\" @click=\"addShape('plane')\" title=\"Plane\"></button>\r\n        <button class=\"shape-add-btn\" @click=\"addShape('cube')\" title=\"Cube\"></button>\r\n        <button class=\"shape-add-btn\" @click=\"addShape('sphere')\" title=\"Sphere\"></button>\r\n        <button class=\"shape-add-btn\" @click=\"addShape('cylinder')\" title=\"Cylinder\"></button>\r\n      </div>\r\n\r\n      <div class=\"separator\"></div>\r\n\r\n      <div class=\"section-title\">Scene Objects</div>\r\n      <div class=\"object-list\">\r\n        <div v-if=\"shapes.length === 0\" class=\"empty-state\">No objects</div>\r\n        <div \r\n          v-for=\"(obj, index) in shapes\" \r\n          :key=\"obj.uuid\"\r\n          class=\"object-item\"\r\n          :class=\"{ active: isSelected(obj) }\"\r\n          @click=\"selectShape(obj)\"\r\n        >\r\n          <span class=\"object-name\">{{ getObjectName(obj, index) }}</span>\r\n          <span class=\"object-type\">{{ getObjectType(obj) }}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"separator\"></div>\r\n\r\n      <!-- Controls -->\r\n      <div v-if=\"selectedObj\" class=\"controls-section\">\r\n        <div class=\"section-title\">Properties</div>\r\n        \r\n        <div class=\"control-row\">\r\n          <label>Color</label>\r\n          <input type=\"color\" class=\"color-picker\" :value=\"getObjectColor(selectedObj)\" @input=\"updateColor\" />\r\n        </div>\r\n        \r\n        <div class=\"control-row\">\r\n          <label>Transparency</label>\r\n           <input type=\"range\" min=\"0\" max=\"100\" :value=\"getObjectOpacity(selectedObj)\" @input=\"updateOpacity\" />\r\n        </div>\r\n        \r\n        <div class=\"control-row\">\r\n           <button class=\"delete-obj-btn\" @click=\"deleteSelectedObject\">Delete Object</button>\r\n        </div>\r\n\r\n        <div class=\"control-row\">\r\n          <label>Texture</label>\r\n          <label class=\"custom-file-upload\">\r\n            <input type=\"file\" @change=\"handleImageUpload\" accept=\".jpg,.jpeg,.png,.webp\" />\r\n            <span> Load Image</span>\r\n          </label>\r\n        </div>\r\n\r\n        <div class=\"separator\"></div>\r\n\r\n        <!-- History -->\r\n        <div class=\"history-section\">\r\n            <div class=\"history-header\">\r\n                <span class=\"section-title\">Position History</span>\r\n                <button class=\"small-btn\" @click=\"saveState\">+ Save</button>\r\n            </div>\r\n            <div class=\"history-list\">\r\n                <div v-if=\"getHistory(selectedObj).length === 0\" class=\"empty-state\">No saved states</div>\r\n                <div v-for=\"(state, sIndex) in getHistory(selectedObj)\" :key=\"sIndex\" class=\"history-item\">\r\n                    <span>{{ state.name }}</span>\r\n                    <div class=\"actions\">\r\n                        <button class=\"icon-btn\" @click=\"restoreState(state)\" title=\"Restore\"></button>\r\n                        <button class=\"icon-btn delete\" @click=\"deleteState(sIndex)\" title=\"Delete\"></button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n      </div>\r\n      <div v-else class=\"empty-selection\">\r\n        Select an object to edit properties\r\n      </div>\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\nimport * as THREE from \"three\";\r\nimport { shapes, canvas } from \"./Canvas.vue\"; // shapes is reactive\r\nimport { scene, renderer, camera, vm } from \"../App.vue\";\r\n\r\nexport default {\r\n  name: \"ObjectManager\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    visible: Boolean,\r\n    reopenTrigger: Number,\r\n    isOpen: Boolean,\r\n  },\r\n  emits: [\"close\"],\r\n  computed: {\r\n    shapes() {\r\n        return shapes;\r\n    },\r\n    selectedObj() {\r\n        // We trigger re-render by using canvas in computed? \r\n        // canvas is an exported let, not reactive. \r\n        // We relied on Canvas.vue to make shapes reactive. \r\n        // For selection state, we might need a way to know 'canvas' changed.\r\n        // But clicking the list updates selection. \r\n        // We can track local selection or poll? \r\n        // Let's rely on user clicking our list to set 'currentSelection' locally for UI.\r\n        return this.currentSelection;\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      currentSelection: null\r\n    };\r\n  },\r\n  mounted() {\r\n      // Try to sync with initial canvas\r\n      this.currentSelection = canvas;\r\n      // Optional: Polling or event listener to sync if selection changes from viewport\r\n      this.timer = setInterval(() => {\r\n          if (canvas !== this.currentSelection) {\r\n              this.currentSelection = canvas;\r\n          }\r\n      }, 500);\r\n  },\r\n  beforeUnmount() {\r\n      clearInterval(this.timer);\r\n  },\r\n  methods: {\r\n    addShape(type) {\r\n        if (vm && vm.$refs.raycastCanvas) {\r\n            vm.$refs.raycastCanvas.addPrimitive(type);\r\n        }\r\n    },\r\n    selectShape(obj) {\r\n        this.currentSelection = obj;\r\n        if (vm && vm.$refs.raycastCanvas) {\r\n            vm.$refs.raycastCanvas.selectObject(obj);\r\n        }\r\n    },\r\n    isSelected(obj) {\r\n        return this.currentSelection === obj; // logic simplified\r\n    },\r\n    getObjectName(obj, index) {\r\n        return obj.name || `Object ${index + 1}`;\r\n    },\r\n    getObjectType(obj) {\r\n        if (obj.isGroup) return \"Group/GLB\";\r\n        if (obj.geometry) return obj.geometry.type.replace(\"Geometry\", \"\").replace(\"Buffer\", \"\");\r\n        return \"Object\";\r\n    },\r\n    getObjectMaterial(obj) {\r\n        // Find first material\r\n        let mat = null;\r\n        if (obj.material) mat = obj.material;\r\n        else {\r\n            obj.traverse(child => {\r\n                if (!mat && child.isMesh && child.material) mat = child.material;\r\n            });\r\n        }\r\n        return mat;\r\n    },\r\n    getObjectColor(obj) {\r\n        const mat = this.getObjectMaterial(obj);\r\n        if (mat && mat.color) {\r\n            return \"#\" + mat.color.getHexString();\r\n        }\r\n        return \"#ffffff\";\r\n    },\r\n    updateColor(event) {\r\n        const color = event.target.value;\r\n        const obj = this.selectedObj;\r\n        if (!obj) return;\r\n        \r\n        const mat = this.getObjectMaterial(obj);\r\n        if (mat) {\r\n             // If array of materials?\r\n            if (Array.isArray(mat)) {\r\n                mat.forEach(m => m.color.set(color));\r\n            } else {\r\n                mat.color.set(color);\r\n            }\r\n            renderer.render(scene, camera);\r\n        } else if (obj.isGroup) {\r\n             // traverse and set all\r\n             obj.traverse(child => {\r\n                 if (child.isMesh && child.material) {\r\n                     child.material.color.set(color);\r\n                 }\r\n             });\r\n             renderer.render(scene, camera);\r\n        }\r\n    },\r\n    getObjectOpacity(obj) {\r\n        const mat = this.getObjectMaterial(obj);\r\n        if (mat) {\r\n             return (mat.opacity !== undefined ? mat.opacity : 1) * 100;\r\n        }\r\n        return 100;\r\n    },\r\n    updateOpacity(event) {\r\n        const opacity = parseFloat(event.target.value) / 100;\r\n        const obj = this.selectedObj;\r\n        if (!obj) return;\r\n        \r\n        const updateMatOpacity = (m) => {\r\n            m.opacity = opacity;\r\n            m.transparent = opacity < 1;\r\n            m.needsUpdate = true;\r\n        };\r\n\r\n        const mat = this.getObjectMaterial(obj);\r\n        if (mat) {\r\n            if (Array.isArray(mat)) {\r\n                mat.forEach(m => updateMatOpacity(m));\r\n            } else {\r\n                updateMatOpacity(mat);\r\n            }\r\n        } else if (obj.isGroup) {\r\n             obj.traverse(child => {\r\n                 if (child.isMesh && child.material) {\r\n                      updateMatOpacity(child.material);\r\n                 }\r\n             });\r\n        }\r\n        renderer.render(scene, camera);\r\n    },\r\n    deleteSelectedObject() {\r\n        const obj = this.selectedObj;\r\n        if (!obj) return;\r\n        \r\n        // Remove from scene\r\n        if (obj.parent) {\r\n            obj.parent.remove(obj);\r\n        }\r\n        \r\n        // Remove from shapes array\r\n        const index = shapes.indexOf(obj);\r\n        if (index > -1) {\r\n            shapes.splice(index, 1);\r\n        }\r\n        \r\n        // Clear selection\r\n        this.currentSelection = null;\r\n        if (vm && vm.$refs.raycastCanvas) {\r\n             vm.$refs.raycastCanvas.selectObject(null);\r\n        }\r\n        \r\n         renderer.render(scene, camera);\r\n    },\r\n    handleImageUpload(event) {\r\n         const file = event.target.files[0];\r\n        if (!file || !this.selectedObj) return;\r\n\r\n        const url = URL.createObjectURL(file);\r\n        new THREE.TextureLoader().load(url, (texture) => {\r\n            const obj = this.selectedObj;\r\n            if (obj.isGroup) {\r\n                 obj.traverse(child => {\r\n                     if (child.isMesh && child.material) {\r\n                         child.material.map = texture;\r\n                         child.material.needsUpdate = true;\r\n                         // Reset color to white so texture shows\r\n                         child.material.color.set(0xffffff);\r\n                     }\r\n                 });\r\n            } else if (obj.material) {\r\n                obj.material.map = texture;\r\n                obj.material.needsUpdate = true;\r\n                obj.material.color.set(0xffffff);\r\n            }\r\n            renderer.render(scene, camera);\r\n        });\r\n    },\r\n    getHistory(obj) {\r\n        if (!obj) return [];\r\n        if (!obj.userData.history) obj.userData.history = [];\r\n        return obj.userData.history;\r\n    },\r\n    saveState() {\r\n        const obj = this.selectedObj;\r\n        if (!obj) return;\r\n        \r\n        const history = this.getHistory(obj);\r\n        const state = {\r\n            name: `State ${history.length + 1}`,\r\n            position: obj.position.clone(),\r\n            quaternion: obj.quaternion.clone(),\r\n            scale: obj.scale.clone()\r\n        };\r\n        history.push(state);\r\n    },\r\n    restoreState(state) {\r\n        const obj = this.selectedObj;\r\n        if (!obj) return;\r\n        \r\n        obj.position.copy(state.position);\r\n        obj.quaternion.copy(state.quaternion);\r\n        obj.scale.copy(state.scale);\r\n        renderer.render(scene, camera);\r\n    },\r\n    deleteState(index) {\r\n        const obj = this.selectedObj;\r\n        if (!obj) return;\r\n        obj.userData.history.splice(index, 1);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.manager-container {\r\n  background: rgba(30, 30, 30, 0.95);\r\n  backdrop-filter: blur(10px);\r\n  border-radius: 8px;\r\n  padding: 10px;\r\n  min-width: 250px;\r\n  color: white;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n  max-height: 80vh; \r\n  overflow: hidden;\r\n}\r\n\r\n.section-title {\r\n    font-size: 11px;\r\n    text-transform: uppercase;\r\n    opacity: 0.6;\r\n    font-weight: 800;\r\n    letter-spacing: 0.5px;\r\n    margin-bottom: 4px;\r\n}\r\n\r\n\r\n.shapes-row {\r\n    display: flex;\r\n    gap: 8px;\r\n    justify-content: space-around;\r\n}\r\n\r\n.shape-add-btn {\r\n    background: rgba(255,255,255,0.1);\r\n    border: 1px solid rgba(255,255,255,0.2);\r\n    border-radius: 4px;\r\n    width: 32px;\r\n    height: 32px;\r\n    cursor: pointer;\r\n    font-size: 16px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.shape-add-btn:hover {\r\n    background: rgba(255,255,255,0.2);\r\n    transform: scale(1.1);\r\n}\r\n\r\n.object-list {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 4px;\r\n    max-height: 150px;\r\n    overflow-y: auto;\r\n}\r\n\r\n.object-item {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 6px 8px;\r\n    background: rgba(255,255,255,0.05);\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    font-size: 13px;\r\n    border: 1px solid transparent;\r\n}\r\n\r\n.object-item:hover {\r\n    background: rgba(255,255,255,0.1);\r\n}\r\n\r\n.object-item.active {\r\n    background: rgba(255, 176, 0, 0.2);\r\n    border-color: rgba(255, 176, 0, 0.5);\r\n    color: #ffb000;\r\n}\r\n\r\n.object-type {\r\n    font-size: 10px;\r\n    opacity: 0.5;\r\n    background: rgba(0,0,0,0.2);\r\n    padding: 2px 4px;\r\n    border-radius: 4px;\r\n}\r\n\r\n.separator {\r\n    height: 1px;\r\n    background: rgba(255,255,255,0.1);\r\n    width: 100%;\r\n}\r\n\r\n.controls-section {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 8px;\r\n}\r\n\r\n.control-row {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    font-size: 13px;\r\n}\r\n\r\n.color-picker {\r\n    width: 40px;\r\n    height: 24px;\r\n    border: none;\r\n    padding: 0;\r\n    background: none;\r\n    cursor: pointer;\r\n}\r\n\r\n.custom-file-upload {\r\n    border: 1px solid rgba(255,255,255,0.2);\r\n    border-radius: 4px;\r\n    padding: 4px 8px;\r\n    font-size: 11px;\r\n    cursor: pointer;\r\n    background: rgba(255,255,255,0.05);\r\n}\r\n\r\n.delete-obj-btn {\r\n    width: 100%;\r\n    padding: 6px;\r\n    background: rgba(255, 50, 50, 0.2);\r\n    border: 1px solid rgba(255, 50, 50, 0.4);\r\n    color: #ffcccc;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    font-size: 12px;\r\n    margin-top: 8px;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.delete-obj-btn:hover {\r\n    background: rgba(255, 50, 50, 0.4);\r\n}\r\n.custom-file-upload input {\r\n    display: none;\r\n}\r\n.custom-file-upload:hover {\r\n    background: rgba(255,255,255,0.1);\r\n}\r\n\r\n.empty-state, .empty-selection {\r\n    text-align: center;\r\n    opacity: 0.5;\r\n    font-size: 12px;\r\n    padding: 10px;\r\n}\r\n\r\n.history-section {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 8px;\r\n}\r\n\r\n.history-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n\r\n.small-btn {\r\n    font-size: 10px;\r\n    padding: 2px 6px;\r\n    background: #ffb000;\r\n    color: black;\r\n    border: none;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    font-weight: bold;\r\n}\r\n\r\n.history-list {\r\n    max-height: 120px;\r\n    overflow-y: auto;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 4px;\r\n}\r\n\r\n.history-item {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 4px 8px;\r\n    background: rgba(0,0,0,0.2);\r\n    border-radius: 4px;\r\n    font-size: 12px;\r\n}\r\n\r\n.actions {\r\n    display: flex;\r\n    gap: 4px;\r\n}\r\n\r\n.icon-btn {\r\n    background: transparent;\r\n    border: 1px solid rgba(255,255,255,0.1);\r\n    color: white;\r\n    width: 20px;\r\n    height: 20px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border-radius: 3px;\r\n    cursor: pointer;\r\n    font-size: 10px;\r\n}\r\n.icon-btn:hover {\r\n    background: rgba(255,255,255,0.1);\r\n}\r\n.icon-btn.delete:hover {\r\n    background: rgba(255,50,50,0.3);\r\n}\r\n\r\n/* Scrollbars */\r\n.object-list::-webkit-scrollbar, .history-list::-webkit-scrollbar {\r\n    width: 4px;\r\n}\r\n.object-list::-webkit-scrollbar-thumb, .history-list::-webkit-scrollbar-thumb {\r\n    background: rgba(255,255,255,0.2);\r\n    border-radius: 2px;\r\n}\r\n</style>\r\n","import { render } from \"./ObjectManager.vue?vue&type=template&id=9d553bfc&scoped=true\"\nimport script from \"./ObjectManager.vue?vue&type=script&lang=js\"\nexport * from \"./ObjectManager.vue?vue&type=script&lang=js\"\n\nimport \"./ObjectManager.vue?vue&type=style&index=0&id=9d553bfc&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9d553bfc\"]])\n\nexport default __exports__","<template>\n  <div\n    class=\"transform-toolbar\"\n    v-bind:style=\"{\n        top: posTop + 'px',\n        left: posLeft + 'px'\n    }\"\n    v-bind:class=\"{ hide: !display }\"\n    @mousedown.stop=\"startDrag\"\n    @touchstart.stop=\"startDrag\"\n  >\n    <div class=\"toolbar-title\" style=\"margin-bottom: 8px; font-size: 11px; opacity: 0.5; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; cursor: move;\">Transformation</div>\n    <div class=\"transform-modes\">\n      <span class=\"mode-btn\" @click=\"setMode('combined')\" :class=\"{ active: mode === 'combined' }\">\n        <img v-if=\"mode === 'combined'\" src=\"@/assets/icons/translate.svg\" class=\"icon-active\"/>\n        <img v-else src=\"@/assets/icons/translate.svg\" class=\"icon-inactive\"/>\n        Move & Rotate\n      </span>\n      <span class=\"mode-btn\" @click=\"setMode('scale')\" :class=\"{ active: mode === 'scale' }\">\n        <img v-if=\"mode === 'scale'\" src=\"@/assets/icons/scale.svg\" class=\"icon-active\"/>\n        <img v-else src=\"@/assets/icons/scale.svg\" class=\"icon-inactive\"/>\n        Scale\n      </span>\n    </div>\n\n    <div class=\"duplicate-controls\" v-bind:class=\"{ hide: selectedTool == 'model' }\">\n        <div class=\"offset-group\">\n             <button class=\"dup-btn\" @click=\"duplicate\" style=\"width: 100%; padding: 8px;\">\n                 Duplicate Selection\n             </button>\n        </div>\n\n        <div class=\"offset-group\" style=\"border-top: 1px solid rgba(255,255,255,0.1); padding-top: 8px;\">\n             <label style=\"font-size: 10px; opacity: 0.7;\">Duplicate with Offset</label>\n             <div class=\"inputs\">\n                 <input v-model=\"offset.x\" placeholder=\"X\" type=\"number\" step=\"0.1\" />\n                 <input v-model=\"offset.y\" placeholder=\"Y\" type=\"number\" step=\"0.1\" />\n                 <input v-model=\"offset.z\" placeholder=\"Z\" type=\"number\" step=\"0.1\" />\n             </div>\n             <div class=\"inputs\" style=\"margin-top: 4px;\">\n                <input v-model=\"copies\" placeholder=\"N\" type=\"number\" min=\"1\" step=\"1\" style=\"width: 40px;\" title=\"Copies\" />\n                <button class=\"dup-btn\" @click=\"duplicateOffset\" style=\"flex-grow: 1;\">Apply</button>\n             </div>\n        </div>\n\n        <div class=\"offset-group\" style=\"border-top: 1px solid rgba(255,255,255,0.1); padding-top: 8px;\">\n            <label style=\"font-size: 10px; opacity: 0.7;\">Position (Read-Only)</label>\n            <div class=\"inputs\">\n                <input :value=\"selectionPosition ? selectionPosition.x.toFixed(2) : 0\" readonly placeholder=\"X\" type=\"number\" />\n                <input :value=\"selectionPosition ? selectionPosition.y.toFixed(2) : 0\" readonly placeholder=\"Y\" type=\"number\" />\n                <input :value=\"selectionPosition ? selectionPosition.z.toFixed(2) : 0\" readonly placeholder=\"Z\" type=\"number\" />\n            </div>\n        </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport { select } from \"./select.js\";\nimport { scene, renderer, camera } from \"../App.vue\";\nimport * as THREE from 'three';\n\nexport default {\n  name: \"TransformToolbar\",\n  props: {\n    top: Number,\n    left: Number,\n    location: String,\n    display: Boolean,\n    selectedTool: String,\n    selectionPosition: Object,\n  },\n  data() {\n    return {\n      mode: \"combined\",\n      posTop: 0,\n      posLeft: 0,\n      offset: { x: 1, y: 0, z: 0 },\n      copies: 1,\n      isDragging: false,\n      dragOffset: { x: 0, y: 0 }\n    };\n  },\n  methods: {\n    startDrag(e) {\n      if (e.target.closest('input') || e.target.closest('.mode-btn') || e.target.closest('button')) return;\n      this.isDragging = true;\n      const clientX = e.type === 'touchstart' ? e.touches[0].clientX : e.clientX;\n      const clientY = e.type === 'touchstart' ? e.touches[0].clientY : e.clientY;\n      const rect = this.$el.getBoundingClientRect();\n      this.dragOffset.x = clientX - rect.left;\n      this.dragOffset.y = clientY - rect.top;\n      \n      document.addEventListener('mousemove', this.doDrag);\n      document.addEventListener('touchmove', this.doDrag);\n      document.addEventListener('mouseup', this.stopDrag);\n      document.addEventListener('touchend', this.stopDrag);\n    },\n    doDrag(e) {\n      if (!this.isDragging) return;\n      // Prevent default to stop scrolling on touch\n      if (e.type === 'touchmove') e.preventDefault();\n      \n      const clientX = e.type === 'touchmove' ? e.touches[0].clientX : e.clientX;\n      const clientY = e.type === 'touchmove' ? e.touches[0].clientY : e.clientY;\n      \n      let newLeft = clientX - this.dragOffset.x;\n      let newTop = clientY - this.dragOffset.y;\n      \n      // Keep within screen bounds\n      newLeft = Math.max(0, Math.min(window.innerWidth - this.$el.offsetWidth, newLeft));\n      newTop = Math.max(0, Math.min(window.innerHeight - this.$el.offsetHeight, newTop));\n      \n      this.posLeft = newLeft;\n      this.posTop = newTop;\n    },\n    stopDrag() {\n      this.isDragging = false;\n      document.removeEventListener('mousemove', this.doDrag);\n      document.removeEventListener('touchmove', this.doDrag);\n      document.removeEventListener('mouseup', this.stopDrag);\n      document.removeEventListener('touchend', this.stopDrag);\n    },\n    duplicate: function () {\n      select.s.duplicate();\n    },\n    duplicateOffset: function() {\n        console.log(\"Duplicate Offset Triggered\", this.offset, this.copies);\n        if(select.s) {\n            let parseVal = (val) => {\n                if (typeof val === 'number') return val;\n                if (typeof val === 'string') return parseFloat(val.replace(',', '.')) || 0;\n                return 0;\n            };\n            \n            let x = parseVal(this.offset.x);\n            let y = parseVal(this.offset.y);\n            let z = parseVal(this.offset.z);\n            let copies = parseInt(this.copies) || 1;\n            \n            console.log(\"Applying Array:\", {x,y,z}, copies);\n            select.s.duplicate(new THREE.Vector3(x, y, z), copies);\n        } else {\n            console.warn(\"No selection active for duplicate\");\n        }\n    },\n    setMode(newMode) {\n        this.mode = newMode;\n    }\n  },\n  watch: {\n    mode: function (val) {\n      if (this.selectedTool == \"select\" && select.s && select.s.controls) {\n        select.s.controls.mode = val;\n        //this maintains the selection from the last used transformation\n        this.mode = val;\n        select.transformMode = val;\n        select.s.helper.update();\n      }\n      if (this.selectedTool == \"model\") {\n        let controls = scene.getObjectByName(\"canvasTransformControls\");\n        console.log(controls);\n        this.mode = val;\n        if(controls) controls.mode = this.mode;\n        // In combined mode, standard transform controls might need specific setup?\n        // But our custom TransformControls handles 'combined' (showing both translate/rotate).\n        renderer.render(scene, camera);\n      }\n    },\n    display: function (val) {\n      if (val) {\n        //this maintains the selection from the last used transformation\n        if (this.selectedTool == \"select\" && select.s && select.s.controls) {\n          select.s.controls.mode = this.mode; // Use the new 'mode' property\n        }\n        if (this.selectedTool == \"model\") {\n          let controls = scene.getObjectByName(\"canvasTransformControls\");\n          if(controls) controls.mode = this.mode; // Use the new 'mode' property\n        }\n      }\n    },\n    left: function (val) {\n      if (this.isDragging) return;\n      // If fixed, center it. The 'val' passed from select.js is already centered.\n      // But we adjust for width (240px / 2 = 120)\n       this.posLeft = val - 120;\n    },\n    top: function (val) {\n      if (this.isDragging) return;\n      // If fixed, use value directly\n      this.posTop = val;\n    },\n  },\n  mounted() {},\n};\n</script>\n\n<style scoped>\n.transform-toolbar {\n  padding: 8px;\n  position: absolute;\n  z-index: 999;\n  background-color: rgba(30,30,30,0.9);\n  color: white;\n  width: 240px;\n  border-radius: 8px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  border: 1px solid rgba(255,255,255,0.1);\n}\n\n.transform-modes {\n  display: flex;\n  gap: 12px;\n  margin-bottom: 8px;\n}\n\n.mode-btn {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    padding: 6px 12px;\n    background: rgba(255, 255, 255, 0.1);\n    border-radius: 6px;\n    cursor: pointer;\n    font-size: 12px;\n    color: #1c1c1e;\n    border: 1px solid transparent;\n    transition: all 0.2s;\n}\n\n.mode-btn:hover {\n    background: rgba(0, 0, 0, 0.05);\n}\n\n.mode-btn.active {\n    background: #007aff;\n    color: white;\n}\n\n.mode-btn img {\n    width: 16px;\n    height: 16px;\n}\n\n.mode-btn.active img {\n    filter: brightness(0) invert(1);\n}\n\n.duplicate-controls {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n.offset-group {\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n}\n\n.inputs {\n    display: flex;\n    gap: 4px;\n}\n\n.inputs input {\n    width: 100%;\n    background: rgba(0,0,0,0.5);\n    border: 1px solid rgba(255,255,255,0.2);\n    color: white;\n    padding: 2px 4px;\n    border-radius: 4px;\n    font-size: 12px;\n}\n\n.dup-btn {\n    background: rgba(255,255,255,0.1);\n    border: none;\n    color: white;\n    padding: 4px 8px;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 12px;\n    transition: background 0.2s;\n}\n\n.dup-btn:hover {\n    background: rgba(255,255,255,0.2);\n}\n\n.hide {\n  display: none;\n}\n</style>","import { render } from \"./TransformToolbar.vue?vue&type=template&id=4a36b9a2&scoped=true\"\nimport script from \"./TransformToolbar.vue?vue&type=script&lang=js\"\nexport * from \"./TransformToolbar.vue?vue&type=script&lang=js\"\n\nimport \"./TransformToolbar.vue?vue&type=style&index=0&id=4a36b9a2&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4a36b9a2\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window\r\n    title=\"2D Shapes\"\r\n    :initialX=\"100\"\r\n    :initialY=\"140\"\r\n    :visible=\"visible\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"shapes-grid\">\r\n      <button class=\"shape-btn\" @click.stop=\"createShape('line')\" @mousedown.stop @mouseup.stop title=\"Line\">\r\n         <span class=\"icon\">/</span>\r\n      </button>\r\n      <button class=\"shape-btn\" @click.stop=\"createShape('triangle')\" @mousedown.stop @mouseup.stop title=\"Triangle\">\r\n         <span class=\"icon\"></span>\r\n      </button>\r\n       <button class=\"shape-btn\" @click.stop=\"createShape('square')\" @mousedown.stop @mouseup.stop title=\"Square\">\r\n         <span class=\"icon\"></span>\r\n      </button>\r\n      <button class=\"shape-btn\" @click.stop=\"createShape('circle')\" @mousedown.stop @mouseup.stop title=\"Circle\">\r\n         <span class=\"icon\"></span>\r\n      </button>\r\n      <button class=\"shape-btn\" @click.stop=\"createShape('ellipse')\" @mousedown.stop @mouseup.stop title=\"Ellipse\">\r\n         <span class=\"icon\"></span>\r\n      </button>\r\n      <button class=\"shape-btn\" @click.stop=\"createShape('hexagon')\" @mousedown.stop @mouseup.stop title=\"Hexagon\">\r\n         <span class=\"icon\"></span>\r\n      </button>\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\nimport { canvas } from \"./Canvas.vue\";\r\nimport * as THREE from \"three\";\r\nimport { camera } from \"../App.vue\";\r\n\r\nexport default {\r\n  name: \"TwoDShapes\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    visible: Boolean,\r\n    reopenTrigger: Number,\r\n    isOpen: Boolean,\r\n  },\r\n  emits: [\"close\", \"add-shape\"],\r\n  methods: {\r\n    getCenterPoint() {\r\n        const raycaster = new THREE.Raycaster();\r\n        raycaster.setFromCamera(new THREE.Vector2(0, 0), camera);\r\n        \r\n        let target = canvas;\r\n        // If canvas is not directly available (e.g. not exported properly or not mounted), fallback\r\n        if (!target) {\r\n             const vec = new THREE.Vector3(0, 0, -10);\r\n             vec.applyQuaternion(camera.quaternion);\r\n             vec.add(camera.position);\r\n             return { point: vec, normal: new THREE.Vector3(0, 0, 1) };\r\n        }\r\n\r\n        const intersects = raycaster.intersectObject(target, true); // true for recursive if canvas is group\r\n        \r\n        if (intersects.length > 0) {\r\n            return { point: intersects[0].point, normal: intersects[0].face.normal };\r\n        }\r\n        \r\n        // Fallback if no hit\r\n        const vec = new THREE.Vector3(0, 0, -10);\r\n        vec.applyQuaternion(camera.quaternion);\r\n        vec.add(camera.position);\r\n        return { point: vec, normal: new THREE.Vector3(0, 0, 1) };\r\n    },\r\n    createShape(type) {\r\n      const { point: center, normal } = this.getCenterPoint();\r\n      const size = 1.0; \r\n      \r\n      const shape = new THREE.Shape();\r\n      \r\n      switch (type) {\r\n        case 'line': {\r\n            // Create a thin rectangle for the line\r\n            const thickness = 0.05;\r\n            shape.moveTo(-size, -thickness);\r\n            shape.lineTo(size, -thickness);\r\n            shape.lineTo(size, thickness);\r\n            shape.lineTo(-size, thickness);\r\n            shape.lineTo(-size, -thickness);\r\n            break;\r\n        }\r\n        case 'triangle':\r\n            shape.moveTo(size * Math.cos(-Math.PI/2), size * Math.sin(-Math.PI/2));\r\n            shape.lineTo(size * Math.cos(Math.PI/6), size * Math.sin(Math.PI/6));\r\n            shape.lineTo(size * Math.cos(5*Math.PI/6), size * Math.sin(5*Math.PI/6));\r\n            shape.closePath();\r\n            break;\r\n        case 'square':\r\n             shape.moveTo(-size, -size);\r\n             shape.lineTo(size, -size);\r\n             shape.lineTo(size, size);\r\n             shape.lineTo(-size, size);\r\n             shape.closePath();\r\n            break;\r\n        case 'circle':\r\n             shape.absarc(0, 0, size, 0, Math.PI * 2, false);\r\n            break;\r\n        case 'ellipse':\r\n             shape.ellipse(0, 0, size * 1.5, size * 0.75, 0, Math.PI * 2, false, 0);\r\n            break;\r\n        case 'hexagon':\r\n              for (let i = 0; i < 6; i++) {\r\n                const angle = (i * 2 * Math.PI) / 6;\r\n                const x = size * Math.cos(angle);\r\n                const y = size * Math.sin(angle);\r\n                if (i === 0) shape.moveTo(x, y);\r\n                else shape.lineTo(x, y);\r\n            }\r\n            shape.closePath();\r\n            break;\r\n      }\r\n      \r\n      const geometry = new THREE.ShapeGeometry(shape);\r\n      const mesh = new THREE.Mesh(geometry); // Material will be assigned by Canvas.vue\r\n      \r\n      // Orientation and Position\r\n      mesh.quaternion.copy(camera.quaternion);\r\n      \r\n      // Apply offset to center\r\n      let offset = normal.clone().multiplyScalar(0.05);\r\n      let finalCenter = center.clone().add(offset);\r\n      mesh.position.copy(finalCenter);\r\n      \r\n      mesh.name = type.charAt(0).toUpperCase() + type.slice(1);\r\n      \r\n      this.$emit('add-shape', mesh); // Delegate to App.vue\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.shapes-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  gap: 8px;\r\n  padding: 8px;\r\n}\r\n\r\n.shape-btn {\r\n  width: 40px;\r\n  height: 40px;\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border: 1px solid rgba(255, 255, 255, 0.2);\r\n  border-radius: 4px;\r\n  color: white;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.shape-btn:hover {\r\n  background: rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n.icon {\r\n   line-height: 1;\r\n}\r\n</style>\r\n","import { render } from \"./TwoDShapes.vue?vue&type=template&id=4262662a&scoped=true\"\nimport script from \"./TwoDShapes.vue?vue&type=script&lang=js\"\nexport * from \"./TwoDShapes.vue?vue&type=script&lang=js\"\n\nimport \"./TwoDShapes.vue?vue&type=style&index=0&id=4262662a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4262662a\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window \r\n    ref=\"win\"\r\n    title=\"Object Snap\" \r\n    :initialX=\"initialX || (window.innerWidth - 300)\" \r\n    :initialY=\"initialY || 100\"\r\n    :visible=\"isOpen\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"snap-settings\">\r\n      <div class=\"control-group\">\r\n        <div class=\"control-header\">\r\n          <span class=\"label\">Enable Snapping</span>\r\n          <label class=\"switch\">\r\n            <input type=\"checkbox\" v-model=\"config.enabled\" @change=\"updateConfig\">\r\n            <span class=\"slider round\"></span>\r\n          </label>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"separator\"></div>\r\n\r\n      <div class=\"options-grid\" :class=\"{ disabled: !config.enabled }\">\r\n        <button \r\n          class=\"option-btn\" \r\n          :class=\"{ active: config.endpoints }\" \r\n          @click=\"toggleOption('endpoints')\"\r\n          :disabled=\"!config.enabled\"\r\n        >\r\n          <div class=\"icon-box\">\r\n             <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" stroke=\"currentColor\" stroke-width=\"2\" fill=\"none\">\r\n               <rect x=\"2\" y=\"2\" width=\"6\" height=\"6\" />\r\n               <rect x=\"16\" y=\"16\" width=\"6\" height=\"6\" />\r\n               <line x1=\"8\" y1=\"8\" x2=\"16\" y2=\"16\" />\r\n             </svg>\r\n          </div>\r\n          <span>Endpoints</span>\r\n        </button>\r\n\r\n        <button \r\n          class=\"option-btn\" \r\n          :class=\"{ active: config.midpoints }\" \r\n          @click=\"toggleOption('midpoints')\"\r\n          :disabled=\"!config.enabled\"\r\n        >\r\n          <div class=\"icon-box\">\r\n             <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" stroke=\"currentColor\" stroke-width=\"2\" fill=\"none\">\r\n               <polygon points=\"12,2 22,12 12,22 2,12\" />\r\n             </svg>\r\n          </div>\r\n          <span>Midpoints</span>\r\n        </button>\r\n\r\n        <button \r\n          class=\"option-btn\" \r\n          :class=\"{ active: config.grid }\" \r\n          @click=\"toggleOption('grid')\"\r\n          :disabled=\"!config.enabled\"\r\n        >\r\n          <div class=\"icon-box\">\r\n             <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" stroke=\"currentColor\" stroke-width=\"2\" fill=\"none\">\r\n               <path d=\"M3 3h18v18H3z M3 9h18 M3 15h18 M9 3v18 M15 3v18\" />\r\n             </svg>\r\n          </div>\r\n          <span>Grid</span>\r\n        </button>\r\n        \r\n        <button \r\n          class=\"option-btn\" \r\n          :class=\"{ active: config.center }\" \r\n          @click=\"toggleOption('center')\"\r\n          :disabled=\"!config.enabled\"\r\n        >\r\n          <div class=\"icon-box\">\r\n             <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" stroke=\"currentColor\" stroke-width=\"2\" fill=\"none\">\r\n               <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n               <circle cx=\"12\" cy=\"12\" r=\"2\" fill=\"currentColor\" />\r\n             </svg>\r\n          </div>\r\n          <span>Center</span>\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"separator\"></div>\r\n\r\n      <div class=\"control-group\" :class=\"{ disabled: !config.enabled }\">\r\n        <div class=\"slider-header\">\r\n          <span class=\"label\">Snap Radius</span>\r\n          <span class=\"value\">{{ config.threshold }}</span>\r\n        </div>\r\n        <input \r\n          type=\"range\" \r\n          min=\"0.1\" \r\n          max=\"2.0\" \r\n          step=\"0.1\" \r\n          v-model.number=\"config.threshold\" \r\n          @input=\"updateConfig\"\r\n          :disabled=\"!config.enabled\"\r\n        >\r\n      </div>\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\n\r\nexport default {\r\n  name: \"SnapSettings\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    isOpen: Boolean,\r\n    reopenTrigger: Number,\r\n    initialX: Number,\r\n    initialY: Number,\r\n  },\r\n  data() {\r\n    return {\r\n      config: {\r\n        enabled: false,\r\n        endpoints: true,\r\n        midpoints: true,\r\n        grid: false,\r\n        center: false,\r\n        threshold: 0.5,\r\n      },\r\n      window: window,\r\n    };\r\n  },\r\n  methods: {\r\n    toggleOption(option) {\r\n      if (!this.config.enabled) return;\r\n      this.config[option] = !this.config[option];\r\n      this.updateConfig();\r\n    },\r\n    updateConfig() {\r\n      this.$emit(\"config-change\", { ...this.config });\r\n    },\r\n  },\r\n  mounted() {\r\n      this.updateConfig();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.snap-settings {\r\n  padding: 12px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n  min-width: 220px;\r\n}\r\n\r\n.control-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.control-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.label {\r\n  font-size: 13px;\r\n  font-weight: 500;\r\n  color: rgba(255, 255, 255, 0.9);\r\n}\r\n\r\n.separator {\r\n  height: 1px;\r\n  background: rgba(255, 255, 255, 0.1);\r\n  margin: 0 -12px;\r\n}\r\n\r\n.options-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 8px;\r\n  transition: opacity 0.3s;\r\n}\r\n\r\n.options-grid.disabled {\r\n  opacity: 0.4;\r\n  pointer-events: none;\r\n}\r\n\r\n.option-btn {\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 8px;\r\n  padding: 10px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 6px;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  color: rgba(255, 255, 255, 0.6);\r\n}\r\n\r\n.option-btn:hover {\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border-color: rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n.option-btn.active {\r\n  background: rgba(66, 133, 244, 0.2);\r\n  border-color: rgba(66, 133, 244, 0.5);\r\n  color: #4285f4;\r\n}\r\n\r\n.icon-box {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.option-btn span {\r\n  font-size: 11px;\r\n  font-weight: 500;\r\n}\r\n\r\n.slider-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.value {\r\n  font-size: 11px;\r\n  color: #4285f4;\r\n  font-family: monospace;\r\n}\r\n\r\ninput[type=\"range\"] {\r\n  width: 100%;\r\n  accent-color: #4285f4;\r\n}\r\n\r\n/* Switch styling */\r\n.switch {\r\n  position: relative;\r\n  display: inline-block;\r\n  width: 34px;\r\n  height: 20px;\r\n}\r\n\r\n.switch input {\r\n  opacity: 0;\r\n  width: 0;\r\n  height: 0;\r\n}\r\n\r\n.slider {\r\n  position: absolute;\r\n  cursor: pointer;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(255, 255, 255, 0.1);\r\n  transition: .4s;\r\n}\r\n\r\n.slider:before {\r\n  position: absolute;\r\n  content: \"\";\r\n  height: 14px;\r\n  width: 14px;\r\n  left: 3px;\r\n  bottom: 3px;\r\n  background-color: white;\r\n  transition: .4s;\r\n}\r\n\r\ninput:checked + .slider {\r\n  background-color: #4285f4;\r\n}\r\n\r\ninput:checked + .slider:before {\r\n  transform: translateX(14px);\r\n}\r\n\r\n.slider.round {\r\n  border-radius: 20px;\r\n}\r\n\r\n.slider.round:before {\r\n  border-radius: 50%;\r\n}\r\n\r\n.disabled {\r\n  opacity: 0.5;\r\n  pointer-events: none;\r\n}\r\n</style>\r\n","import { render } from \"./SnapSettings.vue?vue&type=template&id=e4e7cb64&scoped=true\"\nimport script from \"./SnapSettings.vue?vue&type=script&lang=js\"\nexport * from \"./SnapSettings.vue?vue&type=script&lang=js\"\n\nimport \"./SnapSettings.vue?vue&type=style&index=0&id=e4e7cb64&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e4e7cb64\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"window\" id=\"drawing-modes-window\">\r\n    <div class=\"window-header\">\r\n      <div class=\"window-title\">Drawing Plane</div>\r\n      <div class=\"window-controls\">\r\n        <div class=\"close-button\" @click=\"$emit('close')\">\r\n          <svg width=\"10\" height=\"10\" viewBox=\"0 0 10 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path d=\"M1 1L9 9M9 1L1 9\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\r\n          </svg>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"window-content\">\r\n      <div class=\"mode-buttons\">\r\n        <button \r\n          class=\"mode-btn\" \r\n          :class=\"{ active: currentMode === 'surface' }\"\r\n          @click=\"selectMode('surface')\"\r\n          title=\"Draw on Surface (Canvas)\"\r\n        >\r\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n            <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" />\r\n            <path d=\"M3 9h18M9 21V9\" />\r\n          </svg>\r\n          <span>Surface</span>\r\n        </button>\r\n\r\n        <button \r\n          class=\"mode-btn\" \r\n          :class=\"{ active: currentMode === 'grid' }\"\r\n          @click=\"selectMode('grid')\"\r\n          title=\"Draw on Ground Grid\"\r\n        >\r\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n            <path d=\"M3 12h18M3 6h18M3 18h18M12 3v18M6 3v18M18 3v18\" />\r\n          </svg>\r\n          <span>Grid (Ground)</span>\r\n        </button>\r\n\r\n        <button \r\n          class=\"mode-btn\" \r\n          :class=\"{ active: currentMode === 'view' }\"\r\n          @click=\"selectMode('view')\"\r\n          title=\"Draw in Screen Space (View Plane)\"\r\n        >\r\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n             <rect x=\"2\" y=\"3\" width=\"20\" height=\"14\" rx=\"2\" />\r\n             <path d=\"M8 21h8M12 17v4\" />\r\n          </svg>\r\n          <span>View (Screen)</span>\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"mode-description\">\r\n        <span v-if=\"currentMode === 'surface'\">Drawing projected onto the 3D Object/Canvas.</span>\r\n        <span v-if=\"currentMode === 'grid'\">Drawing projected onto the horizontal Ground Plane.</span>\r\n        <span v-if=\"currentMode === 'view'\">Drawing projected onto a plane facing the Camera.</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"DrawingModes\",\r\n  props: {\r\n    isOpen: Boolean,\r\n    currentMode: {\r\n        type: String,\r\n        default: 'surface'\r\n    }\r\n  },\r\n  emits: [\"close\", \"mode-change\"],\r\n  methods: {\r\n    selectMode(mode) {\r\n      this.$emit(\"mode-change\", mode);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.window {\r\n  position: absolute;\r\n  top: 100px; /* Default position */\r\n  left: 280px;\r\n  width: 220px;\r\n  background: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n  font-family: 'Inter', sans-serif;\r\n  z-index: 1000;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.window-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 10px 12px;\r\n  background: #f8f9fa;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.window-title {\r\n  font-weight: 600;\r\n  font-size: 14px;\r\n  color: #333;\r\n}\r\n\r\n.close-button {\r\n  cursor: pointer;\r\n  color: #999;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.close-button:hover {\r\n  color: #333;\r\n}\r\n\r\n.window-content {\r\n  padding: 12px;\r\n}\r\n\r\n.mode-buttons {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 8px;\r\n}\r\n\r\n.mode-btn {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 12px;\r\n    padding: 10px;\r\n    border: 1px solid #eee;\r\n    border-radius: 6px;\r\n    background: white;\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n    text-align: left;\r\n    color: #555;\r\n    width: 100%;\r\n}\r\n\r\n.mode-btn:hover {\r\n    background: #f5f5f5;\r\n    border-color: #ddd;\r\n}\r\n\r\n.mode-btn.active {\r\n    background: #e8f0fe;\r\n    border-color: #4285f4;\r\n    color: #1a73e8;\r\n}\r\n\r\n.mode-btn svg {\r\n    flex-shrink: 0;\r\n}\r\n\r\n.mode-description {\r\n    margin-top: 12px;\r\n    font-size: 12px;\r\n    color: #666;\r\n    line-height: 1.4;\r\n    border-top: 1px solid #eee;\r\n    padding-top: 8px;\r\n}\r\n</style>\r\n","import { render } from \"./DrawingModes.vue?vue&type=template&id=6ba11fd1&scoped=true\"\nimport script from \"./DrawingModes.vue?vue&type=script&lang=js\"\nexport * from \"./DrawingModes.vue?vue&type=script&lang=js\"\n\nimport \"./DrawingModes.vue?vue&type=style&index=0&id=6ba11fd1&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6ba11fd1\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window \r\n    title=\"Code Editor\" \r\n    :initialX=\"100\" \r\n    :initialY=\"100\" \r\n    :visible=\"true\" \r\n    :reopenTrigger=\"reopenTrigger\" \r\n    :is-open=\"isOpen\" \r\n    @close=\"$emit('close')\"\r\n    :width=\"500\"\r\n    :height=\"400\"\r\n  >\r\n    <div class=\"code-editor-panel\">\r\n      <!-- Toolbar -->\r\n      <div class=\"toolbar\">\r\n        <select v-model=\"selectedExample\" @change=\"loadExample\" class=\"example-select\">\r\n          <option disabled value=\"\">Select an Example</option>\r\n          <option v-for=\"(code, name) in examples\" :key=\"name\" :value=\"name\">{{ name }}</option>\r\n        </select>\r\n        <div class=\"spacer\"></div>\r\n        <button class=\"action-btn run-btn\" @click=\"runCode\">Dependencies: THREE, scene, camera, renderer  Run</button>\r\n        <button class=\"action-btn clear-btn\" @click=\"clearCode\">Clear</button>\r\n      </div>\r\n\r\n      <!-- Editor Area -->\r\n      <textarea \r\n        v-model=\"code\" \r\n        class=\"code-textarea\" \r\n        spellcheck=\"false\"\r\n        placeholder=\"// Write your Three.js code here...\r\n// Available variables: THREE, scene, camera, renderer, draw\r\n// Example:\r\n// const cube = new THREE.Mesh(new THREE.BoxGeometry(), new THREE.MeshBasicMaterial({color: 'red'}));\r\n// scene.add(cube);\r\n// renderer.render(scene, camera);\"\r\n      ></textarea>\r\n\r\n      <!-- Status/Output -->\r\n      <div class=\"status-bar\" :class=\"{ error: isError, success: isSuccess }\">\r\n        {{ statusMessage }}\r\n      </div>\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\nimport * as THREE from \"three\";\r\nimport { scene, camera, renderer, vm } from \"../App.vue\";\r\nimport { draw } from \"./draw.js\"; // Import draw tool\r\n\r\nexport default {\r\n  name: \"CodeEditor\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    reopenTrigger: Number,\r\n    isOpen: Boolean,\r\n  },\r\n  data() {\r\n    return {\r\n      code: \"\",\r\n      statusMessage: \"Ready\",\r\n      isError: false,\r\n      isSuccess: false,\r\n      selectedExample: \"\",\r\n      examples: {\r\n        \"Random Cubes\": `// Create 50 random cubes\r\nconst geometry = new THREE.BoxGeometry(0.5, 0.5, 0.5);\r\n\r\nfor (let i = 0; i < 50; i++) {\r\n  const color = new THREE.Color().setHSL(Math.random(), 1, 0.5);\r\n  const material = new THREE.MeshStandardMaterial({ \r\n      color: color,\r\n      roughness: 0.2,\r\n      metalness: 0.1\r\n  });\r\n  \r\n  const mesh = new THREE.Mesh(geometry, material);\r\n  \r\n  // Random position within 10 units\r\n  mesh.position.set(\r\n    (Math.random() - 0.5) * 10,\r\n    (Math.random() - 0.5) * 10,\r\n    (Math.random() - 0.5) * 10\r\n  );\r\n  \r\n  // Random rotation\r\n  mesh.rotation.set(\r\n      Math.random() * Math.PI,\r\n      Math.random() * Math.PI,\r\n      0\r\n  );\r\n  \r\n  addToLayer(mesh);\r\n}\r\n\r\n// Update the view\r\nrenderer.render(scene, camera);\r\nconsole.log(\"Created 50 cubes\");`,\r\n\r\n        \"Spiral of Light\": `// Create a spiral of glowing spheres\r\nconst count = 100;\r\nconst geometry = new THREE.SphereGeometry(0.1, 16, 16);\r\nconst material = new THREE.MeshStandardMaterial({\r\n    color: 0x00ffff,\r\n    emissive: 0x00ffff,\r\n    emissiveIntensity: 2\r\n});\r\n\r\nconst group = new THREE.Group();\r\n\r\nfor (let i = 0; i < count; i++) {\r\n    const angle = 0.5 * i;\r\n    const radius = 0.2 * i;\r\n    const y = i * 0.1;\r\n    \r\n    const mesh = new THREE.Mesh(geometry, material);\r\n    mesh.position.set(\r\n        Math.cos(angle) * radius,\r\n        y - (count * 0.05), // Center vertically roughly\r\n        Math.sin(angle) * radius\r\n    );\r\n    group.add(mesh);\r\n}\r\n\r\naddToLayer(group);\r\nrenderer.render(scene, camera);`,\r\n\r\n        \"Torus Knot Ring\": `// Create a large Torus Knot\r\nconst geometry = new THREE.TorusKnotGeometry(2, 0.6, 100, 16);\r\nconst material = new THREE.MeshStandardMaterial({ \r\n    color: 0xff00cc, \r\n    roughness: 0.1,\r\n    metalness: 0.8\r\n});\r\nconst torusKnot = new THREE.Mesh(geometry, material);\r\n\r\naddToLayer(torusKnot);\r\nrenderer.render(scene, camera);`,\r\n\r\n        \"Interactive Grid (Wave)\": `// Simple wave Surface\r\nconst size = 20;\r\nconst divisions = 20;\r\nconst geometry = new THREE.PlaneGeometry(10, 10, divisions, divisions);\r\n\r\nconst count = geometry.attributes.position.count;\r\nfor (let i = 0; i < count; i++) {\r\n    const x = geometry.attributes.position.getX(i);\r\n    const z = geometry.attributes.position.getY(i); // Plane is usually XY, let's treat Y as Z for height later or rotate\r\n    const y = Math.sin(x) * Math.cos(z) * 1;\r\n    geometry.attributes.position.setZ(i, y);\r\n}\r\n\r\ngeometry.computeVertexNormals();\r\n\r\nconst material = new THREE.MeshStandardMaterial({ \r\n    color: 0x44aa88, \r\n    side: THREE.DoubleSide,\r\n    wireframe: true\r\n});\r\n\r\nconst plane = new THREE.Mesh(geometry, material);\r\nplane.rotation.x = -Math.PI / 2; // Flat on ground\r\naddToLayer(plane);\r\nrenderer.render(scene, camera);`,\r\n\r\n        \"Draw Stroke Test\": `// Use the internal Draw tool\r\n// Simulates a stroke\r\nif (draw && draw.onStart) {\r\n    const stroke = { show_stroke: true, color: '#ff0000', lineWidth: 0.05 };\r\n    const fill = { show_fill: false };\r\n    \r\n    // Start stroke\r\n    draw.onStart(0, 0, 0, 0.5, false, \"\", stroke, fill);\r\n    \r\n    // Draw coordinates\r\n    for(let i=0; i<20; i++) {\r\n        draw.onMove(i*0.1, Math.sin(i*0.5), 0, 0.5, false);\r\n    }\r\n    \r\n    // End stroke\r\n    draw.onEnd(\"\");\r\n    renderer.render(scene, camera);\r\n} else {\r\n    console.warn(\"Draw tool not available in context\");\r\n}`,\r\n\r\n        \"Clear Added Objects\": `// Remove Meshes that aren't core helpers\r\n// (Simple garbage collection for this session)\r\nconst toRemove = [];\r\n\r\n// Clean Active Layer Group Children\r\nif (vm && vm.getActiveLayerGroup) {\r\n    const group = vm.getActiveLayerGroup();\r\n    if(group) {\r\n        while(group.children.length > 0) {\r\n            toRemove.push(group.children[0]);\r\n            group.remove(group.children[0]);\r\n        }\r\n    }\r\n}\r\n\r\n// Fallback: Check root scene for strays (though we are using layers now)\r\nscene.traverse((child) => {\r\n    // Check if it's a mesh and NOT the grid helper or background or layer groups\r\n    if (child.isMesh && child.geometry.type !== 'PlaneBufferGeometry' && !child.userData.isSystem) {\r\n         // Be careful not to delete things inside layer groups if we just cleared the group\r\n         if (child.parent === scene) {\r\n             toRemove.push(child);\r\n         }\r\n    }\r\n});\r\n\r\ntoRemove.forEach(child => {\r\n    if (child.parent) child.parent.remove(child);\r\n    else scene.remove(child);\r\n    \r\n    if(child.geometry) child.geometry.dispose();\r\n    if(child.material) child.material.dispose();\r\n});\r\n\r\nrenderer.render(scene, camera);\r\nconsole.log(\"Cleared \" + toRemove.length + \" objects.\");`,\r\n\r\n        \"Formula 1 Car\": `// Formula 1 Car Procedural Model\r\nconst carGroup = new THREE.Group();\r\n\r\n// --- Material Helpers ---\r\nconst redMat = new THREE.MeshStandardMaterial({ color: 0xff0000, roughness: 0.2, metalness: 0.5 });\r\nconst blackMat = new THREE.MeshStandardMaterial({ color: 0x222222, roughness: 0.8, metalness: 0.1 });\r\nconst tireMat = new THREE.MeshStandardMaterial({ color: 0x111111, roughness: 0.9 });\r\nconst chromeMat = new THREE.MeshStandardMaterial({ color: 0xffffff, roughness: 0.0, metalness: 1.0 });\r\n\r\n// --- Body ---\r\n// Main Chassis\r\nconst chassisGeo = new THREE.BoxGeometry(1.5, 0.4, 4);\r\nconst chassis = new THREE.Mesh(chassisGeo, redMat);\r\nchassis.position.y = 0.5;\r\ncarGroup.add(chassis);\r\n\r\n// Nose\r\nconst noseGeo = new THREE.BoxGeometry(1, 0.25, 2);\r\nconst nose = new THREE.Mesh(noseGeo, redMat);\r\nnose.position.set(0, 0.4, 2.5); // Forward\r\n// Taper the nose slightly (simple scale)\r\nnose.scale.x = 0.8;\r\ncarGroup.add(nose);\r\n\r\n// Cockpit / Engine Cover\r\nconst cockpitGeo = new THREE.BoxGeometry(0.8, 0.6, 2);\r\nconst cockpit = new THREE.Mesh(cockpitGeo, redMat);\r\ncockpit.position.set(0, 0.9, -0.5);\r\ncarGroup.add(cockpit);\r\n\r\n// --- Wings ---\r\n// Front Wing\r\nconst fWingGeo = new THREE.BoxGeometry(3, 0.1, 0.8);\r\nconst fWing = new THREE.Mesh(fWingGeo, blackMat);\r\nfWing.position.set(0, 0.3, 3.5);\r\ncarGroup.add(fWing);\r\n\r\n// Rear Wing\r\nconst rWingGeo = new THREE.BoxGeometry(2.5, 0.1, 0.8);\r\nconst rWing = new THREE.Mesh(rWingGeo, blackMat);\r\nrWing.position.set(0, 1.5, -2.2);\r\ncarGroup.add(rWing);\r\n\r\nconst rWingSupportGeo = new THREE.BoxGeometry(0.1, 0.8, 0.5);\r\nconst rWingSupportL = new THREE.Mesh(rWingSupportGeo, blackMat);\r\nrWingSupportL.position.set(0.8, 1.0, -2.2);\r\ncarGroup.add(rWingSupportL);\r\nconst rWingSupportR = rWingSupportL.clone();\r\nrWingSupportR.position.set(-0.8, 1.0, -2.2);\r\ncarGroup.add(rWingSupportR);\r\n\r\n// --- Wheels ---\r\nconst wheelGeo = new THREE.CylinderGeometry(0.5, 0.5, 0.6, 32);\r\nwheelGeo.rotateZ(Math.PI / 2); // Orient correctly\r\n\r\nconst createWheel = (x, z) => {\r\n    const wheel = new THREE.Mesh(wheelGeo, tireMat);\r\n    wheel.position.set(x, 0.5, z);\r\n    carGroup.add(wheel);\r\n    \r\n    // Axle/Suspension stub\r\n    const axleGeo = new THREE.CylinderGeometry(0.05, 0.05, Math.abs(x), 8);\r\n    axleGeo.rotateZ(Math.PI / 2);\r\n    const axle = new THREE.Mesh(axleGeo, chromeMat);\r\n    axle.position.set(x/2, 0.5, z);\r\n    carGroup.add(axle);\r\n};\r\n\r\ncreateWheel(1.2, 2.2);  // Front R\r\ncreateWheel(-1.2, 2.2); // Front L\r\ncreateWheel(1.3, -2.0); // Rear R (slightly wider)\r\ncreateWheel(-1.3, -2.0); // Rear L\r\n\r\naddToLayer(carGroup);\r\nrenderer.render(scene, camera);`,\r\n\r\n        \"Spaceship\": `// Sci-Fi Spaceship\r\nconst ship = new THREE.Group();\r\n\r\nconst hullMat = new THREE.MeshStandardMaterial({ color: 0xaaaaaa, roughness: 0.4, metalness: 0.8 });\r\nconst darkMat = new THREE.MeshStandardMaterial({ color: 0x333333, roughness: 0.6, metalness: 0.5 });\r\nconst glowMat = new THREE.MeshStandardMaterial({ color: 0x00aaff, emissive: 0x00aaff, emissiveIntensity: 3 });\r\nconst glassMat = new THREE.MeshPhysicalMaterial({ \r\n    color: 0x000000, metalness: 0.9, roughness: 0.1, transparent: true, opacity: 0.7 \r\n});\r\n\r\n// Main Fuselage\r\nconst bodyGeo = new THREE.ConeGeometry(   1, 6, 8 );\r\nbodyGeo.rotateX(Math.PI / 2); // Point forward (Z)\r\nconst body = new THREE.Mesh(bodyGeo, hullMat);\r\nship.add(body);\r\n\r\n// Cockpit\r\nconst cockpitGeo = new THREE.SphereGeometry(0.7, 16, 16);\r\nconst cockpit = new THREE.Mesh(cockpitGeo, glassMat);\r\ncockpit.scale.set(1, 0.6, 2);\r\ncockpit.position.set(0, 0.5, 0.5);\r\nship.add(cockpit);\r\n\r\n// Wings\r\nconst wingShape = new THREE.Shape();\r\nwingShape.moveTo(0, 0);\r\nwingShape.lineTo(4, -2);\r\nwingShape.lineTo(4, -4);\r\nwingShape.lineTo(0, -2);\r\nwingShape.closePath();\r\n\r\nconst wingExtrudeSettings = { depth: 0.2, bevelEnabled: true, bevelThickness: 0.05, bevelSize: 0.05, bevelSegments: 2 };\r\nconst wingGeo = new THREE.ExtrudeGeometry(wingShape, wingExtrudeSettings);\r\n// Rotate flat\r\nwingGeo.rotateX(Math.PI / 2);\r\n\r\nconst leftWing = new THREE.Mesh(wingGeo, hullMat);\r\nleftWing.position.set(0.5, 0, 0);\r\nship.add(leftWing);\r\n\r\nconst rightWing = new THREE.Mesh(wingGeo, hullMat);\r\nrightWing.scale.x = -1; // Mirror\r\nrightWing.position.set(-0.5, 0, 0);\r\nship.add(rightWing);\r\n\r\n// Engines\r\nconst engineGeo = new THREE.CylinderGeometry(0.4, 0.6, 2, 16);\r\nengineGeo.rotateX(Math.PI / 2);\r\nconst leftEngine = new THREE.Mesh(engineGeo, darkMat);\r\nleftEngine.position.set(2, 0, -2);\r\nship.add(leftEngine);\r\n\r\nconst rightEngine = leftEngine.clone();\r\nrightEngine.position.set(-2, 0, -2);\r\nship.add(rightEngine);\r\n\r\n// Engine Glow\r\nconst glowGeo = new THREE.CircleGeometry(0.5, 16);\r\nconst lGlow = new THREE.Mesh(glowGeo, glowMat);\r\nlGlow.position.set(0, -1.01, 0); // At end of cylinder... rotated cylinder is Z, so end is Z\r\nlGlow.rotation.x = Math.PI; // Face back\r\n// We need to attach glow relative to engine or match pos\r\n// Easier to re-position globally\r\nlGlow.position.set(2, 0, -3.01);\r\nship.add(lGlow);\r\n\r\nconst rGlow = lGlow.clone();\r\nrGlow.position.set(-2, 0, -3.01);\r\nship.add(rGlow);\r\n\r\naddToLayer(ship);\r\nrenderer.render(scene, camera);`,\r\n\r\n        \"Game Controller\": `// Video Game Controller (Retro Style)\r\nconst controllerGroup = new THREE.Group();\r\n\r\nconst bodyColor = new THREE.MeshStandardMaterial({ color: 0xdddddd, roughness: 0.5 });\r\nconst btnColorA = new THREE.MeshStandardMaterial({ color: 0xff0000 });\r\nconst btnColorB = new THREE.MeshStandardMaterial({ color: 0x00ff00 });\r\nconst dpadColor = new THREE.MeshStandardMaterial({ color: 0x333333 });\r\n\r\n// Main Body (Round Rectangle approximate)\r\n// Using a scaled cylinder for rounded sides + box in middle\r\nconst centerGeo = new THREE.BoxGeometry(2, 1, 0.4);\r\nconst center = new THREE.Mesh(centerGeo, bodyColor);\r\ncontrollerGroup.add(center);\r\n\r\nconst leftGripGeo = new THREE.CylinderGeometry(0.5, 0.5, 0.4, 32);\r\nconst leftGrip = new THREE.Mesh(leftGripGeo, bodyColor);\r\nleftGrip.rotation.x = Math.PI / 2;\r\nleftGrip.position.set(-1, 0, 0);\r\ncontrollerGroup.add(leftGrip);\r\n\r\nconst rightGripGeo = new THREE.CylinderGeometry(0.5, 0.5, 0.4, 32);\r\nconst rightGrip = new THREE.Mesh(rightGripGeo, bodyColor);\r\nrightGrip.rotation.x = Math.PI / 2;\r\nrightGrip.position.set(1, 0, 0);\r\ncontrollerGroup.add(rightGrip);\r\n\r\n// D-Pad\r\nconst dpadV = new THREE.Mesh(new THREE.BoxGeometry(0.2, 0.6, 0.1), dpadColor);\r\ndpadV.position.set(-1, 0, 0.25);\r\ncontrollerGroup.add(dpadV);\r\n\r\nconst dpadH = new THREE.Mesh(new THREE.BoxGeometry(0.6, 0.2, 0.1), dpadColor);\r\ndpadH.position.set(-1, 0, 0.25);\r\ncontrollerGroup.add(dpadH);\r\n\r\n// Buttons\r\nconst btnGeo = new THREE.CylinderGeometry(0.12, 0.12, 0.1, 16);\r\nbtnGeo.rotateX(Math.PI / 2);\r\n\r\nconst btnA = new THREE.Mesh(btnGeo, btnColorA);\r\nbtnA.position.set(1.1, 0.15, 0.25);\r\ncontrollerGroup.add(btnA);\r\n\r\nconst btnB = new THREE.Mesh(btnGeo, btnColorB);\r\nbtnB.position.set(0.8, -0.15, 0.25); // Offset\r\ncontrollerGroup.add(btnB);\r\n\r\n// Joysticks (Analog nub style)\r\nconst joyGeo = new THREE.CylinderGeometry(0.25, 0.25, 0.1, 32);\r\njoyGeo.rotateX(Math.PI / 2);\r\nconst joyL = new THREE.Mesh(joyGeo, dpadColor);\r\njoyL.position.set(-0.4, -0.2, 0.25);\r\ncontrollerGroup.add(joyL);\r\n\r\nconst joyR = new THREE.Mesh(joyGeo, dpadColor);\r\njoyR.position.set(0.4, -0.2, 0.25);\r\ncontrollerGroup.add(joyR);\r\n\r\ncontrollerGroup.scale.set(2, 2, 2); // Make it bigger\r\naddToLayer(controllerGroup);\r\nrenderer.render(scene, camera);`\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    loadExample() {\r\n      if (this.selectedExample && this.examples[this.selectedExample]) {\r\n        this.code = this.examples[this.selectedExample];\r\n      }\r\n    },\r\n    clearCode() {\r\n      this.code = \"\";\r\n      this.statusMessage = \"Cleared\";\r\n      this.isError = false;\r\n      this.isSuccess = false;\r\n    },\r\n    runCode() {\r\n      this.isError = false;\r\n      this.isSuccess = false;\r\n      this.statusMessage = \"Running...\";\r\n      \r\n      try {\r\n        // Create a function with access to THREE ecosystem and layer logic\r\n        // Helper to add objects to the active layer group\r\n        const addToLayer = (object) => {\r\n            if (vm && vm.getActiveLayerGroup) {\r\n                const group = vm.getActiveLayerGroup();\r\n                if (group) {\r\n                    group.add(object);\r\n                    // Ensure object can be raycasted if it's a mesh\r\n                    if (object.isMesh || object.isGroup) {\r\n                        // Optionally set some meta data\r\n                    }\r\n                } else {\r\n                    scene.add(object);\r\n                }\r\n            } else {\r\n                scene.add(object);\r\n            }\r\n        };\r\n\r\n        const run = new Function('THREE', 'scene', 'camera', 'renderer', 'draw', 'addToLayer', 'vm', this.code);\r\n        \r\n        run(THREE, scene, camera, renderer, draw, addToLayer, vm);\r\n        \r\n        this.statusMessage = \"Executed successfully at \" + new Date().toLocaleTimeString();\r\n        this.isSuccess = true;\r\n      } catch (err) {\r\n        console.error(\"Code Execution Error:\", err);\r\n        this.statusMessage = \"Error: \" + err.message;\r\n        this.isError = true;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.code-editor-panel {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 400px;\r\n  width: 500px;\r\n  /* background: #1e1e1e; */\r\n  color: #d4d4d4;\r\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\r\n}\r\n\r\n.toolbar {\r\n  display: flex;\r\n  gap: 8px;\r\n  padding: 8px;\r\n  background: rgba(0, 0, 0, 0.2);\r\n  align-items: center;\r\n}\r\n\r\n.spacer {\r\n  flex: 1;\r\n}\r\n\r\n.example-select {\r\n  background: #333;\r\n  color: white;\r\n  border: 1px solid #555;\r\n  padding: 4px;\r\n  border-radius: 4px;\r\n  font-family: inherit;\r\n  font-size: 12px;\r\n  width: 150px;\r\n}\r\n\r\n.action-btn {\r\n  background: #444;\r\n  border: 1px solid #666;\r\n  color: white;\r\n  padding: 4px 12px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 12px;\r\n  transition: background 0.2s;\r\n}\r\n\r\n.action-btn:hover {\r\n  background: #555;\r\n}\r\n\r\n.run-btn {\r\n  background: #2ea043;\r\n  border-color: #3fb950;\r\n  font-weight: bold;\r\n}\r\n\r\n.run-btn:hover {\r\n  background: #3fb950;\r\n}\r\n\r\n.code-textarea {\r\n  flex: 1;\r\n  background: #1e1e1e;\r\n  color: #d4d4d4;\r\n  border: none;\r\n  padding: 10px;\r\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\r\n  font-size: 13px;\r\n  line-height: 1.5;\r\n  resize: none;\r\n  outline: none;\r\n  white-space: pre;\r\n  overflow-wrap: normal;\r\n  overflow-x: auto;\r\n}\r\n\r\n.status-bar {\r\n  padding: 6px 10px;\r\n  background: #252526;\r\n  font-size: 11px;\r\n  border-top: 1px solid #333;\r\n  color: #888;\r\n}\r\n\r\n.status-bar.error {\r\n  background: #5a1d1d;\r\n  color: #ffcccc;\r\n}\r\n\r\n.status-bar.success {\r\n  color: #9cdcfe;\r\n}\r\n</style>\r\n","import { render } from \"./CodeEditor.vue?vue&type=template&id=b79ed462&scoped=true\"\nimport script from \"./CodeEditor.vue?vue&type=script&lang=js\"\nexport * from \"./CodeEditor.vue?vue&type=script&lang=js\"\n\nimport \"./CodeEditor.vue?vue&type=style&index=0&id=b79ed462&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b79ed462\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=a48bbae0\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=a48bbae0&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta (2)\\\\Original - penzil pro V3.6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","module.exports = __webpack_public_path__ + \"img/Canvas-Cube.b03590d5.svg\";","module.exports = \"data:image/png;base64,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\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Input.vue?vue&type=style&index=0&id=761f5fd8&lang=css\"","module.exports = __webpack_public_path__ + \"img/snapOn.aa8b12b1.svg\";","import { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Modal.vue?vue&type=style&index=0&id=0bfba0f8&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ShapeSelector.vue?vue&type=style&index=0&id=29b5f1dc&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ExportHTML.vue?vue&type=style&index=0&id=302ae2fb&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/draw.5c69c24e.svg\";","module.exports = __webpack_public_path__ + \"img/checkbox.8ab59ebe.svg\";","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./UndoRedo.vue?vue&type=style&index=0&id=0bd31b88&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/redo.13ba164e.svg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Feedback.vue?vue&type=style&index=0&id=1af5b4e9&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TransformToolbar.vue?vue&type=style&index=0&id=4a36b9a2&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./LineSettings.vue?vue&type=style&index=0&id=276dd090&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Survey.vue?vue&type=style&index=0&id=57022cc6&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Welcome.vue?vue&type=style&index=0&id=4d550b7e&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DraggableWindow.vue?vue&type=style&index=0&id=8e2218ae&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/checkbox-checked.c2c485d4.svg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Tutorial.vue?vue&type=style&index=0&id=6ea82b80&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./LineSliders.vue?vue&type=style&index=0&id=209b775a&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ToggleWindow.vue?vue&type=style&index=0&id=50198f32&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./BrushLibrary.vue?vue&type=style&index=0&id=5811f743&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/unlockControls.2e514317.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SceneSettings.vue?vue&type=style&index=0&id=f4b48902&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Share.vue?vue&type=style&index=0&id=1a0e0249&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ColorPalette.vue?vue&type=style&index=0&id=1576e0cc&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/Canvas-Custom.b03590d5.svg\";","module.exports = __webpack_public_path__ + \"img/scale.618c4c29.svg\";","module.exports = __webpack_public_path__ + \"img/share.69997eee.svg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ExportForProcreate.vue?vue&type=style&index=0&id=d410ddd2&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ExportHTMLContent.vue?vue&type=style&index=0&id=3cc9c38a&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/reset.4080ce3d.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TubeSettings.vue?vue&type=style&index=0&id=0b214183&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ExportGLB.vue?vue&type=style&index=0&id=e1688084&scoped=true&lang=css\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD7CAYAAABDsImYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAbCSURBVHgB7d37UdRqHMfhcOYUoBWoFagVeGlAxwa8FOCtAPU0IFQg2oCXBlArUBsQbUC0AXL2lxkdWLLLIiyQfJ9nJn8I7LI489nkffMmu9K27bMGGLWVSehtA4xZ+08DjJ7QIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIcC/DfyFnz9/Nm/fvm2+f/++6+vnzp1rrl692pw/f77h9BA6B7K5udk8fvy4i7zPyspK8/r1a6GfMkJnYRX59evXm2/fvs39uTNnzjScLkJfops3bzZfvnzZ8/UKZmjatl0o8iL000foS/Tr16+FwhiCDx8+LPy3CP30MevOvmpv/urVq97v1cTb+/fvu5/Z2tpqNjY2jM9PIXt0FjI9u14uXLjQRf5b7ckrfE4fobOQz58/7/p3za4/ePBgocfWm8G9e/f2PN7e//gInYXUefNpBxmLT4/vK3SOjzE6++qLnGEROvsS+vAJHQIYo49Y7Yl/741NemUT+ohU1HW+u9ah1yz59CH3pUuXutV6t2/fnht+Pf7du3e7nndanTd/+fJlt5Bmp3rujx8/7pp8m/X4R48e9U7ora6uWnRz1FqWZnJOua3/4untqG1tbbXPnj1rJ3H0/r6+rX5+lvreos+zc5vMpLeT+Gf+3Ys+x+bmZsuR2rZHH7jac167du3AS20nMXeLYF68eNEwfibjBmy/yOvwd94h8Pr6enfJKeMn9AHri7zCfvr0abfufOdWUfeNy2s8PD3OZoRalmaZY/S+cfQk5Lnj2xrL972m+to8X79+nTkeX8TGxoax+MnatkcfoJrFrhnvaTXunjebXnv7N2/e7DmcP8glqAyT0AeoTn9Nh1mB16mt/VTkdYpt2s7TaYyP0Aeo735tffHO0rfX77sTDuPh9NoA9V0bvra21m1/y4TcuNmjD5CLTDgoodPx5jFuDt1HbtEbPNSNLBkvoQ/QxYsX98y637lzp1soA32EPkCXL1/eczqswncpKrMYow/QlStX9nytZs133pF1nvoAiVpw07Ztc5LMCxwfe/QT8Def1HL27Nk/K9rqlsq1zn067LrTat1ZtW7DPMunT5+aW7dudUcAde78yZMn3XMvU9+FNfUmU0cldY08x6BlaQ5zXXazz/XjtU687/rzWu++vr7e/vjxo93e3v6z1b/71sdP3hT2XXN+2LXufY+vrV5/PUe9ttrq59bW1qyBP3rbQl+iZYZeVldX5z5msrfsXkPF38y50cPdu3fn/h2HDb3eaBa9KYaLXZbCRS1D9vDhw+5Cllmn0Op2UvMuWKnH1TDg+fPnzTLV76nXyskR+sDVKbX6PPIalx/kQxF+f9JKjemP4/5s9+/fnzt3wHIJfYkqpqPa5qkLWiaH191toerUW99jfn+tJt4mh+pd4HXTicP+LYuq31u/88aNG/u+Po7eSh3AN4xKHarXYfvOK9Jqr10LbWqW+6TvsDrr9dU6gDp16A6wR64VOoxf69AdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAvw72f5rgDFr/wfUvvTr7Qp/nwAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"img/lockControls.990f22f9.svg\";","module.exports = __webpack_public_path__ + \"img/snapOff.219ff8f1.svg\";","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=a48bbae0&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./VideoExportPreview.vue?vue&type=style&index=0&id=5584fdcf&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ToolSelector.vue?vue&type=style&index=0&id=6f17be84&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/Cursor.b610471e.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SymmetrySettings.vue?vue&type=style&index=0&id=04aa6b76&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/Canvas-Cylinder.4ab10120.svg\";","module.exports = __webpack_public_path__ + \"img/showCanvas.a743c18d.svg\";","module.exports = __webpack_public_path__ + \"img/erase.c0bec69e.svg\";","module.exports = __webpack_public_path__ + \"img/View_in_AR.c0870bd8.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DrawingModes.vue?vue&type=style&index=0&id=6ba11fd1&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TwoDShapes.vue?vue&type=style&index=0&id=4262662a&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/translate.49804646.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ViewportCube.vue?vue&type=style&index=0&id=c6f5d5b0&scoped=true&lang=css\""],"sourceRoot":""}